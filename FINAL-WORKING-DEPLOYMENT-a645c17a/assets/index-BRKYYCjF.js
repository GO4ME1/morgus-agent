(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=r(c);fetch(c.href,u)}})();var Ru={exports:{}},si={};var kp;function Tb(){if(kp)return si;kp=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,c,u){var f=null;if(u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),"key"in c){u={};for(var p in c)p!=="key"&&(u[p]=c[p])}else u=c;return c=u.ref,{$$typeof:s,type:i,key:f,ref:c!==void 0?c:null,props:u}}return si.Fragment=n,si.jsx=r,si.jsxs=r,si}var Tp;function Ab(){return Tp||(Tp=1,Ru.exports=Tb()),Ru.exports}var o=Ab(),Cu={exports:{}},ge={};var Ap;function Rb(){if(Ap)return ge;Ap=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),_=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=_&&j[_]||j["@@iterator"],typeof j=="function"?j:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,D={};function C(j,L,W){this.props=j,this.context=L,this.refs=D,this.updater=W||E}C.prototype.isReactComponent={},C.prototype.setState=function(j,L){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,L,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function q(){}q.prototype=C.prototype;function R(j,L,W){this.props=j,this.context=L,this.refs=D,this.updater=W||E}var K=R.prototype=new q;K.constructor=R,T(K,C.prototype),K.isPureReactComponent=!0;var Q=Array.isArray;function H(){}var P={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function I(j,L,W){var ee=W.ref;return{$$typeof:s,type:j,key:L,ref:ee!==void 0?ee:null,props:W}}function ie(j,L){return I(j.type,L,j.props)}function xe(j){return typeof j=="object"&&j!==null&&j.$$typeof===s}function ke(j){var L={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(W){return L[W]})}var it=/\/+/g;function Ge(j,L){return typeof j=="object"&&j!==null&&j.key!=null?ke(""+j.key):L.toString(36)}function Ze(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(H,H):(j.status="pending",j.then(function(L){j.status==="pending"&&(j.status="fulfilled",j.value=L)},function(L){j.status==="pending"&&(j.status="rejected",j.reason=L)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function N(j,L,W,ee,pe){var ye=typeof j;(ye==="undefined"||ye==="boolean")&&(j=null);var _e=!1;if(j===null)_e=!0;else switch(ye){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(j.$$typeof){case s:case n:_e=!0;break;case v:return _e=j._init,N(_e(j._payload),L,W,ee,pe)}}if(_e)return pe=pe(j),_e=ee===""?"."+Ge(j,0):ee,Q(pe)?(W="",_e!=null&&(W=_e.replace(it,"$&/")+"/"),N(pe,L,W,"",function(Na){return Na})):pe!=null&&(xe(pe)&&(pe=ie(pe,W+(pe.key==null||j&&j.key===pe.key?"":(""+pe.key).replace(it,"$&/")+"/")+_e)),L.push(pe)),1;_e=0;var wt=ee===""?".":ee+":";if(Q(j))for(var We=0;We<j.length;We++)ee=j[We],ye=wt+Ge(ee,We),_e+=N(ee,L,W,ye,pe);else if(We=x(j),typeof We=="function")for(j=We.call(j),We=0;!(ee=j.next()).done;)ee=ee.value,ye=wt+Ge(ee,We++),_e+=N(ee,L,W,ye,pe);else if(ye==="object"){if(typeof j.then=="function")return N(Ze(j),L,W,ee,pe);throw L=String(j),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return _e}function V(j,L,W){if(j==null)return j;var ee=[],pe=0;return N(j,ee,"","",function(ye){return L.call(W,ye,pe++)}),ee}function te(j){if(j._status===-1){var L=j._result;L=L(),L.then(function(W){(j._status===0||j._status===-1)&&(j._status=1,j._result=W)},function(W){(j._status===0||j._status===-1)&&(j._status=2,j._result=W)}),j._status===-1&&(j._status=0,j._result=L)}if(j._status===1)return j._result.default;throw j._result}var Z=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},ue={map:V,forEach:function(j,L,W){V(j,function(){L.apply(this,arguments)},W)},count:function(j){var L=0;return V(j,function(){L++}),L},toArray:function(j){return V(j,function(L){return L})||[]},only:function(j){if(!xe(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return ge.Activity=w,ge.Children=ue,ge.Component=C,ge.Fragment=r,ge.Profiler=c,ge.PureComponent=R,ge.StrictMode=i,ge.Suspense=m,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ge.__COMPILER_RUNTIME={__proto__:null,c:function(j){return P.H.useMemoCache(j)}},ge.cache=function(j){return function(){return j.apply(null,arguments)}},ge.cacheSignal=function(){return null},ge.cloneElement=function(j,L,W){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ee=T({},j.props),pe=j.key;if(L!=null)for(ye in L.key!==void 0&&(pe=""+L.key),L)!F.call(L,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&L.ref===void 0||(ee[ye]=L[ye]);var ye=arguments.length-2;if(ye===1)ee.children=W;else if(1<ye){for(var _e=Array(ye),wt=0;wt<ye;wt++)_e[wt]=arguments[wt+2];ee.children=_e}return I(j.type,pe,ee)},ge.createContext=function(j){return j={$$typeof:f,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:u,_context:j},j},ge.createElement=function(j,L,W){var ee,pe={},ye=null;if(L!=null)for(ee in L.key!==void 0&&(ye=""+L.key),L)F.call(L,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(pe[ee]=L[ee]);var _e=arguments.length-2;if(_e===1)pe.children=W;else if(1<_e){for(var wt=Array(_e),We=0;We<_e;We++)wt[We]=arguments[We+2];pe.children=wt}if(j&&j.defaultProps)for(ee in _e=j.defaultProps,_e)pe[ee]===void 0&&(pe[ee]=_e[ee]);return I(j,ye,pe)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(j){return{$$typeof:p,render:j}},ge.isValidElement=xe,ge.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:te}},ge.memo=function(j,L){return{$$typeof:g,type:j,compare:L===void 0?null:L}},ge.startTransition=function(j){var L=P.T,W={};P.T=W;try{var ee=j(),pe=P.S;pe!==null&&pe(W,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(H,Z)}catch(ye){Z(ye)}finally{L!==null&&W.types!==null&&(L.types=W.types),P.T=L}},ge.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ge.use=function(j){return P.H.use(j)},ge.useActionState=function(j,L,W){return P.H.useActionState(j,L,W)},ge.useCallback=function(j,L){return P.H.useCallback(j,L)},ge.useContext=function(j){return P.H.useContext(j)},ge.useDebugValue=function(){},ge.useDeferredValue=function(j,L){return P.H.useDeferredValue(j,L)},ge.useEffect=function(j,L){return P.H.useEffect(j,L)},ge.useEffectEvent=function(j){return P.H.useEffectEvent(j)},ge.useId=function(){return P.H.useId()},ge.useImperativeHandle=function(j,L,W){return P.H.useImperativeHandle(j,L,W)},ge.useInsertionEffect=function(j,L){return P.H.useInsertionEffect(j,L)},ge.useLayoutEffect=function(j,L){return P.H.useLayoutEffect(j,L)},ge.useMemo=function(j,L){return P.H.useMemo(j,L)},ge.useOptimistic=function(j,L){return P.H.useOptimistic(j,L)},ge.useReducer=function(j,L,W){return P.H.useReducer(j,L,W)},ge.useRef=function(j){return P.H.useRef(j)},ge.useState=function(j){return P.H.useState(j)},ge.useSyncExternalStore=function(j,L,W){return P.H.useSyncExternalStore(j,L,W)},ge.useTransition=function(){return P.H.useTransition()},ge.version="19.2.3",ge}var Rp;function md(){return Rp||(Rp=1,Cu.exports=Rb()),Cu.exports}var S=md(),Ou={exports:{}},ri={},Du={exports:{}},Mu={};var Cp;function Cb(){return Cp||(Cp=1,(function(s){function n(N,V){var te=N.length;N.push(V);e:for(;0<te;){var Z=te-1>>>1,ue=N[Z];if(0<c(ue,V))N[Z]=V,N[te]=ue,te=Z;else break e}}function r(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var V=N[0],te=N.pop();if(te!==V){N[0]=te;e:for(var Z=0,ue=N.length,j=ue>>>1;Z<j;){var L=2*(Z+1)-1,W=N[L],ee=L+1,pe=N[ee];if(0>c(W,te))ee<ue&&0>c(pe,W)?(N[Z]=pe,N[ee]=te,Z=ee):(N[Z]=W,N[L]=te,Z=L);else if(ee<ue&&0>c(pe,te))N[Z]=pe,N[ee]=te,Z=ee;else break e}}return V}function c(N,V){var te=N.sortIndex-V.sortIndex;return te!==0?te:N.id-V.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var m=[],g=[],v=1,w=null,_=3,x=!1,E=!1,T=!1,D=!1,C=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function K(N){for(var V=r(g);V!==null;){if(V.callback===null)i(g);else if(V.startTime<=N)i(g),V.sortIndex=V.expirationTime,n(m,V);else break;V=r(g)}}function Q(N){if(T=!1,K(N),!E)if(r(m)!==null)E=!0,H||(H=!0,ke());else{var V=r(g);V!==null&&Ze(Q,V.startTime-N)}}var H=!1,P=-1,F=5,I=-1;function ie(){return D?!0:!(s.unstable_now()-I<F)}function xe(){if(D=!1,H){var N=s.unstable_now();I=N;var V=!0;try{e:{E=!1,T&&(T=!1,q(P),P=-1),x=!0;var te=_;try{t:{for(K(N),w=r(m);w!==null&&!(w.expirationTime>N&&ie());){var Z=w.callback;if(typeof Z=="function"){w.callback=null,_=w.priorityLevel;var ue=Z(w.expirationTime<=N);if(N=s.unstable_now(),typeof ue=="function"){w.callback=ue,K(N),V=!0;break t}w===r(m)&&i(m),K(N)}else i(m);w=r(m)}if(w!==null)V=!0;else{var j=r(g);j!==null&&Ze(Q,j.startTime-N),V=!1}}break e}finally{w=null,_=te,x=!1}V=void 0}}finally{V?ke():H=!1}}}var ke;if(typeof R=="function")ke=function(){R(xe)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,Ge=it.port2;it.port1.onmessage=xe,ke=function(){Ge.postMessage(null)}}else ke=function(){C(xe,0)};function Ze(N,V){P=C(function(){N(s.unstable_now())},V)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(N){N.callback=null},s.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<N?Math.floor(1e3/N):5},s.unstable_getCurrentPriorityLevel=function(){return _},s.unstable_next=function(N){switch(_){case 1:case 2:case 3:var V=3;break;default:V=_}var te=_;_=V;try{return N()}finally{_=te}},s.unstable_requestPaint=function(){D=!0},s.unstable_runWithPriority=function(N,V){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var te=_;_=N;try{return V()}finally{_=te}},s.unstable_scheduleCallback=function(N,V,te){var Z=s.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Z+te:Z):te=Z,N){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=te+ue,N={id:v++,callback:V,priorityLevel:N,startTime:te,expirationTime:ue,sortIndex:-1},te>Z?(N.sortIndex=te,n(g,N),r(m)===null&&N===r(g)&&(T?(q(P),P=-1):T=!0,Ze(Q,te-Z))):(N.sortIndex=ue,n(m,N),E||x||(E=!0,H||(H=!0,ke()))),N},s.unstable_shouldYield=ie,s.unstable_wrapCallback=function(N){var V=_;return function(){var te=_;_=V;try{return N.apply(this,arguments)}finally{_=te}}}})(Mu)),Mu}var Op;function Ob(){return Op||(Op=1,Du.exports=Cb()),Du.exports}var Uu={exports:{}},At={};var Dp;function Db(){if(Dp)return At;Dp=1;var s=md();function n(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(m,g,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:m,containerInfo:g,implementation:v}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,At.createPortal=function(m,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return u(m,g,null,v)},At.flushSync=function(m){var g=f.T,v=i.p;try{if(f.T=null,i.p=2,m)return m()}finally{f.T=g,i.p=v,i.d.f()}},At.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},At.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},At.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var v=g.as,w=p(v,g.crossOrigin),_=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:_,fetchPriority:x}):v==="script"&&i.d.X(m,{crossOrigin:w,integrity:_,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},At.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=p(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},At.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,w=p(v,g.crossOrigin);i.d.L(m,v,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},At.preloadModule=function(m,g){if(typeof m=="string")if(g){var v=p(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},At.requestFormReset=function(m){i.d.r(m)},At.unstable_batchedUpdates=function(m,g){return m(g)},At.useFormState=function(m,g,v){return f.H.useFormState(m,g,v)},At.useFormStatus=function(){return f.H.useHostTransitionStatus()},At.version="19.2.3",At}var Mp;function Mb(){if(Mp)return Uu.exports;Mp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Uu.exports=Db(),Uu.exports}var Up;function Ub(){if(Up)return ri;Up=1;var s=Ob(),n=md(),r=Mb();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(i(188))}function g(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(i(188));return t!==e?null:e}for(var a=e,l=t;;){var d=a.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===a)return m(d),e;if(h===l)return m(d),t;h=h.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=h;else{for(var y=!1,b=d.child;b;){if(b===a){y=!0,a=d,l=h;break}if(b===l){y=!0,l=d,a=h;break}b=b.sibling}if(!y){for(b=h.child;b;){if(b===a){y=!0,a=h,l=d;break}if(b===l){y=!0,l=h,a=d;break}b=b.sibling}if(!y)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),R=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function ke(e){return e===null||typeof e!="object"?null:(e=xe&&e[xe]||e["@@iterator"],typeof e=="function"?e:null)}var it=Symbol.for("react.client.reference");function Ge(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===it?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case C:return"Profiler";case D:return"StrictMode";case Q:return"Suspense";case H:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case R:return e.displayName||"Context";case q:return(e._context.displayName||"Context")+".Consumer";case K:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return t=e.displayName||null,t!==null?t:Ge(e.type)||"Memo";case F:t=e._payload,e=e._init;try{return Ge(e(t))}catch{}}return null}var Ze=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},Z=[],ue=-1;function j(e){return{current:e}}function L(e){0>ue||(e.current=Z[ue],Z[ue]=null,ue--)}function W(e,t){ue++,Z[ue]=e.current,e.current=t}var ee=j(null),pe=j(null),ye=j(null),_e=j(null);function wt(e,t){switch(W(ye,t),W(pe,e),W(ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Xm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Xm(t),e=Zm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(ee),W(ee,e)}function We(){L(ee),L(pe),L(ye)}function Na(e){e.memoizedState!==null&&W(_e,e);var t=ee.current,a=Zm(t,e.type);t!==a&&(W(pe,e),W(ee,a))}function es(e){pe.current===e&&(L(ee),L(pe)),_e.current===e&&(L(_e),ei._currentValue=te)}var ka,yo;function _n(e){if(ka===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ka=t&&t[1]||"",yo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ka+e+yo}var Ti=!1;function cr(e,t){if(!e||Ti)return"";Ti=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(B){var $=B}Reflect.construct(e,[],J)}else{try{J.call()}catch(B){$=B}e.call(J.prototype)}}else{try{throw Error()}catch(B){$=B}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(B){if(B&&$&&typeof B.stack=="string")return[B.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),y=h[0],b=h[1];if(y&&b){var k=y.split(`
`),z=b.split(`
`);for(d=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;if(l===k.length||d===z.length)for(l=k.length-1,d=z.length-1;1<=l&&0<=d&&k[l]!==z[d];)d--;for(;1<=l&&0<=d;l--,d--)if(k[l]!==z[d]){if(l!==1||d!==1)do if(l--,d--,0>d||k[l]!==z[d]){var G=`
`+k[l].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=l&&0<=d);break}}}finally{Ti=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?_n(a):""}function ea(e,t){switch(e.tag){case 26:case 27:case 5:return _n(e.type);case 16:return _n("Lazy");case 13:return e.child!==t&&t!==null?_n("Suspense Fallback"):_n("Suspense");case 19:return _n("SuspenseList");case 0:case 15:return cr(e.type,!1);case 11:return cr(e.type.render,!1);case 1:return cr(e.type,!0);case 31:return _n("Activity");default:return""}}function Ai(e){try{var t="",a=null;do t+=ea(e,a),a=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ts=Object.prototype.hasOwnProperty,ur=s.unstable_scheduleCallback,Rt=s.unstable_cancelCallback,Ri=s.unstable_shouldYield,dr=s.unstable_requestPaint,Tt=s.unstable_now,Ci=s.unstable_getCurrentPriorityLevel,ns=s.unstable_ImmediatePriority,Oi=s.unstable_UserBlockingPriority,as=s.unstable_NormalPriority,hr=s.unstable_LowPriority,Di=s.unstable_IdlePriority,vo=s.log,bo=s.unstable_setDisableYieldValue,Ta=null,Ct=null;function hn(e){if(typeof vo=="function"&&bo(e),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(Ta,e)}catch{}}var xt=Math.clz32?Math.clz32:wo,fr=Math.log,Mi=Math.LN2;function wo(e){return e>>>=0,e===0?32:31-(fr(e)/Mi|0)|0}var ss=256,rs=262144,is=4194304;function Tn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function M(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var d=0,h=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~h,l!==0?d=Tn(l):(y&=b,y!==0?d=Tn(y):a||(a=b&~e,a!==0&&(d=Tn(a))))):(b=l&~h,b!==0?d=Tn(b):y!==0?d=Tn(y):a||(a=l&~e,a!==0&&(d=Tn(a)))),d===0?0:t!==0&&t!==d&&(t&h)===0&&(h=d&-d,a=t&-t,h>=a||h===32&&(a&4194048)!==0)?t:d}function X(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ae(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function de(){var e=is;return is<<=1,(is&62914560)===0&&(is=4194304),e}function oe(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function be(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function De(e,t,a,l,d,h){var y=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,k=e.expirationTimes,z=e.hiddenUpdates;for(a=y&~a;0<a;){var G=31-xt(a),J=1<<G;b[G]=0,k[G]=-1;var $=z[G];if($!==null)for(z[G]=null,G=0;G<$.length;G++){var B=$[G];B!==null&&(B.lane&=-536870913)}a&=~J}l!==0&&Ye(e,l,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(y&~t))}function Ye(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-xt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function lt(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-xt(a),d=1<<l;d&t|e[l]&t&&(e[l]|=t),a&=~d}}function Le(e,t){var a=t&-t;return a=(a&42)!==0?1:Pe(a),(a&(e.suspendedLanes|t))!==0?0:a}function Pe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function mr(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:wp(e.type))}function at(e,t){var a=V.p;try{return V.p=e,t()}finally{V.p=a}}var yt=Math.random().toString(36).slice(2),Ve="__reactFiber$"+yt,ft="__reactProps$"+yt,en="__reactContainer$"+yt,xo="__reactEvents$"+yt,yy="__reactListeners$"+yt,vy="__reactHandles$"+yt,zd="__reactResources$"+yt,pr="__reactMarker$"+yt;function _o(e){delete e[Ve],delete e[ft],delete e[xo],delete e[yy],delete e[vy]}function ls(e){var t=e[Ve];if(t)return t;for(var a=e.parentNode;a;){if(t=a[en]||a[Ve]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=sp(e);e!==null;){if(a=e[Ve])return a;e=sp(e)}return t}e=a,a=e.parentNode}return null}function os(e){if(e=e[Ve]||e[en]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function gr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function cs(e){var t=e[zd];return t||(t=e[zd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function vt(e){e[pr]=!0}var Ld=new Set,$d={};function Aa(e,t){us(e,t),us(e+"Capture",t)}function us(e,t){for($d[e]=t,e=0;e<t.length;e++)Ld.add(t[e])}var by=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qd={},Bd={};function wy(e){return ts.call(Bd,e)?!0:ts.call(qd,e)?!1:by.test(e)?Bd[e]=!0:(qd[e]=!0,!1)}function Ui(e,t,a){if(wy(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function zi(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function An(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}function tn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function xy(e,t,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,h=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){a=""+y,h.call(this,y)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function So(e){if(!e._valueTracker){var t=Hd(e)?"checked":"value";e._valueTracker=xy(e,t,""+e[t])}}function Pd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=Hd(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function Li(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _y=/[\n"\\]/g;function nn(e){return e.replace(_y,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function jo(e,t,a,l,d,h,y,b){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+tn(t)):e.value!==""+tn(t)&&(e.value=""+tn(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?Eo(e,y,tn(t)):a!=null?Eo(e,y,tn(a)):l!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+tn(b):e.removeAttribute("name")}function Id(e,t,a,l,d,h,y,b){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){So(e);return}a=a!=null?""+tn(a):"",t=t!=null?""+tn(t):a,b||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),So(e)}function Eo(e,t,a){t==="number"&&Li(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ds(e,t,a,l){if(e=e.options,t){t={};for(var d=0;d<a.length;d++)t["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=t.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&l&&(e[a].defaultSelected=!0)}else{for(a=""+tn(a),t=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Gd(e,t,a){if(t!=null&&(t=""+tn(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+tn(a):""}function Yd(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(i(92));if(Ze(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=tn(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),So(e)}function hs(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Sy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vd(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||Sy.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Kd(e,t,a){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&a[d]!==l&&Vd(e,d,l)}else for(var h in t)t.hasOwnProperty(h)&&Vd(e,h,t[h])}function No(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ey=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $i(e){return Ey.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rn(){}var ko=null;function To(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fs=null,ms=null;function Jd(e){var t=os(e);if(t&&(e=t.stateNode)){var a=e[ft]||null;e:switch(e=t.stateNode,t.type){case"input":if(jo(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+nn(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var d=l[ft]||null;if(!d)throw Error(i(90));jo(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&Pd(l)}break e;case"textarea":Gd(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&ds(e,!!a.multiple,t,!1)}}}var Ao=!1;function Qd(e,t,a){if(Ao)return e(t,a);Ao=!0;try{var l=e(t);return l}finally{if(Ao=!1,(fs!==null||ms!==null)&&(El(),fs&&(t=fs,e=ms,ms=fs=null,Jd(t),e)))for(t=0;t<e.length;t++)Jd(e[t])}}function yr(e,t){var a=e.stateNode;if(a===null)return null;var l=a[ft]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,t,typeof a));return a}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ro=!1;if(Cn)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){Ro=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{Ro=!1}var ta=null,Co=null,qi=null;function Xd(){if(qi)return qi;var e,t=Co,a=t.length,l,d="value"in ta?ta.value:ta.textContent,h=d.length;for(e=0;e<a&&t[e]===d[e];e++);var y=a-e;for(l=1;l<=y&&t[a-l]===d[h-l];l++);return qi=d.slice(e,1<l?1-l:void 0)}function Bi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hi(){return!0}function Zd(){return!1}function Mt(e){function t(a,l,d,h,y){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=y,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(h):h[b]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Hi:Zd,this.isPropagationStopped=Zd,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),t}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=Mt(Ra),br=w({},Ra,{view:0,detail:0}),Ny=Mt(br),Oo,Do,wr,Ii=w({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wr&&(wr&&e.type==="mousemove"?(Oo=e.screenX-wr.screenX,Do=e.screenY-wr.screenY):Do=Oo=0,wr=e),Oo)},movementY:function(e){return"movementY"in e?e.movementY:Do}}),Wd=Mt(Ii),ky=w({},Ii,{dataTransfer:0}),Ty=Mt(ky),Ay=w({},br,{relatedTarget:0}),Mo=Mt(Ay),Ry=w({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),Cy=Mt(Ry),Oy=w({},Ra,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dy=Mt(Oy),My=w({},Ra,{data:0}),Fd=Mt(My),Uy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ly={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $y(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ly[e])?!!t[e]:!1}function Uo(){return $y}var qy=w({},br,{key:function(e){if(e.key){var t=Uy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uo,charCode:function(e){return e.type==="keypress"?Bi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),By=Mt(qy),Hy=w({},Ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eh=Mt(Hy),Py=w({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uo}),Iy=Mt(Py),Gy=w({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yy=Mt(Gy),Vy=w({},Ii,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ky=Mt(Vy),Jy=w({},Ra,{newState:0,oldState:0}),Qy=Mt(Jy),Xy=[9,13,27,32],zo=Cn&&"CompositionEvent"in window,xr=null;Cn&&"documentMode"in document&&(xr=document.documentMode);var Zy=Cn&&"TextEvent"in window&&!xr,th=Cn&&(!zo||xr&&8<xr&&11>=xr),nh=" ",ah=!1;function sh(e,t){switch(e){case"keyup":return Xy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ps=!1;function Wy(e,t){switch(e){case"compositionend":return rh(t);case"keypress":return t.which!==32?null:(ah=!0,nh);case"textInput":return e=t.data,e===nh&&ah?null:e;default:return null}}function Fy(e,t){if(ps)return e==="compositionend"||!zo&&sh(e,t)?(e=Xd(),qi=Co=ta=null,ps=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return th&&t.locale!=="ko"?null:t.data;default:return null}}var ev={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ih(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ev[e.type]:t==="textarea"}function lh(e,t,a,l){fs?ms?ms.push(l):ms=[l]:fs=l,t=Ol(t,"onChange"),0<t.length&&(a=new Pi("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var _r=null,Sr=null;function tv(e){Gm(e,0)}function Gi(e){var t=gr(e);if(Pd(t))return e}function oh(e,t){if(e==="change")return t}var ch=!1;if(Cn){var Lo;if(Cn){var $o="oninput"in document;if(!$o){var uh=document.createElement("div");uh.setAttribute("oninput","return;"),$o=typeof uh.oninput=="function"}Lo=$o}else Lo=!1;ch=Lo&&(!document.documentMode||9<document.documentMode)}function dh(){_r&&(_r.detachEvent("onpropertychange",hh),Sr=_r=null)}function hh(e){if(e.propertyName==="value"&&Gi(Sr)){var t=[];lh(t,Sr,e,To(e)),Qd(tv,t)}}function nv(e,t,a){e==="focusin"?(dh(),_r=t,Sr=a,_r.attachEvent("onpropertychange",hh)):e==="focusout"&&dh()}function av(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gi(Sr)}function sv(e,t){if(e==="click")return Gi(t)}function rv(e,t){if(e==="input"||e==="change")return Gi(t)}function iv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:iv;function jr(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!ts.call(t,d)||!Ht(e[d],t[d]))return!1}return!0}function fh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mh(e,t){var a=fh(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=fh(a)}}function ph(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ph(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Li(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Li(e.document)}return t}function qo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var lv=Cn&&"documentMode"in document&&11>=document.documentMode,gs=null,Bo=null,Er=null,Ho=!1;function yh(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ho||gs==null||gs!==Li(l)||(l=gs,"selectionStart"in l&&qo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Er&&jr(Er,l)||(Er=l,l=Ol(Bo,"onSelect"),0<l.length&&(t=new Pi("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=gs)))}function Ca(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var ys={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionrun:Ca("Transition","TransitionRun"),transitionstart:Ca("Transition","TransitionStart"),transitioncancel:Ca("Transition","TransitionCancel"),transitionend:Ca("Transition","TransitionEnd")},Po={},vh={};Cn&&(vh=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function Oa(e){if(Po[e])return Po[e];if(!ys[e])return e;var t=ys[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in vh)return Po[e]=t[a];return e}var bh=Oa("animationend"),wh=Oa("animationiteration"),xh=Oa("animationstart"),ov=Oa("transitionrun"),cv=Oa("transitionstart"),uv=Oa("transitioncancel"),_h=Oa("transitionend"),Sh=new Map,Io="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Io.push("scrollEnd");function fn(e,t){Sh.set(e,t),Aa(t,[e])}var Yi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},an=[],vs=0,Go=0;function Vi(){for(var e=vs,t=Go=vs=0;t<e;){var a=an[t];an[t++]=null;var l=an[t];an[t++]=null;var d=an[t];an[t++]=null;var h=an[t];if(an[t++]=null,l!==null&&d!==null){var y=l.pending;y===null?d.next=d:(d.next=y.next,y.next=d),l.pending=d}h!==0&&jh(a,d,h)}}function Ki(e,t,a,l){an[vs++]=e,an[vs++]=t,an[vs++]=a,an[vs++]=l,Go|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Yo(e,t,a,l){return Ki(e,t,a,l),Ji(e)}function Da(e,t){return Ki(e,null,null,t),Ji(e)}function jh(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var d=!1,h=e.return;h!==null;)h.childLanes|=a,l=h.alternate,l!==null&&(l.childLanes|=a),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&t!==null&&(d=31-xt(a),e=h.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=a|536870912),h):null}function Ji(e){if(50<Kr)throw Kr=0,eu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var bs={};function dv(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,t,a,l){return new dv(e,t,a,l)}function Vo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function On(e,t){var a=e.alternate;return a===null?(a=Pt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Eh(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Qi(e,t,a,l,d,h){var y=0;if(l=e,typeof e=="function")Vo(e)&&(y=1);else if(typeof e=="string")y=gb(e,a,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case I:return e=Pt(31,a,t,d),e.elementType=I,e.lanes=h,e;case T:return Ma(a.children,d,h,t);case D:y=8,d|=24;break;case C:return e=Pt(12,a,t,d|2),e.elementType=C,e.lanes=h,e;case Q:return e=Pt(13,a,t,d),e.elementType=Q,e.lanes=h,e;case H:return e=Pt(19,a,t,d),e.elementType=H,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:y=10;break e;case q:y=9;break e;case K:y=11;break e;case P:y=14;break e;case F:y=16,l=null;break e}y=29,a=Error(i(130,e===null?"null":typeof e,"")),l=null}return t=Pt(y,a,t,d),t.elementType=e,t.type=l,t.lanes=h,t}function Ma(e,t,a,l){return e=Pt(7,e,l,t),e.lanes=a,e}function Ko(e,t,a){return e=Pt(6,e,null,t),e.lanes=a,e}function Nh(e){var t=Pt(18,null,null,0);return t.stateNode=e,t}function Jo(e,t,a){return t=Pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var kh=new WeakMap;function sn(e,t){if(typeof e=="object"&&e!==null){var a=kh.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Ai(t)},kh.set(e,t),t)}return{value:e,source:t,stack:Ai(t)}}var ws=[],xs=0,Xi=null,Nr=0,rn=[],ln=0,na=null,Sn=1,jn="";function Dn(e,t){ws[xs++]=Nr,ws[xs++]=Xi,Xi=e,Nr=t}function Th(e,t,a){rn[ln++]=Sn,rn[ln++]=jn,rn[ln++]=na,na=e;var l=Sn;e=jn;var d=32-xt(l)-1;l&=~(1<<d),a+=1;var h=32-xt(t)+d;if(30<h){var y=d-d%5;h=(l&(1<<y)-1).toString(32),l>>=y,d-=y,Sn=1<<32-xt(t)+d|a<<d|l,jn=h+e}else Sn=1<<h|a<<d|l,jn=e}function Qo(e){e.return!==null&&(Dn(e,1),Th(e,1,0))}function Xo(e){for(;e===Xi;)Xi=ws[--xs],ws[xs]=null,Nr=ws[--xs],ws[xs]=null;for(;e===na;)na=rn[--ln],rn[ln]=null,jn=rn[--ln],rn[ln]=null,Sn=rn[--ln],rn[ln]=null}function Ah(e,t){rn[ln++]=Sn,rn[ln++]=jn,rn[ln++]=na,Sn=t.id,jn=t.overflow,na=e}var _t=null,Ke=null,Te=!1,aa=null,on=!1,Zo=Error(i(519));function sa(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kr(sn(t,e)),Zo}function Rh(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[Ve]=e,t[ft]=l,a){case"dialog":je("cancel",t),je("close",t);break;case"iframe":case"object":case"embed":je("load",t);break;case"video":case"audio":for(a=0;a<Qr.length;a++)je(Qr[a],t);break;case"source":je("error",t);break;case"img":case"image":case"link":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"input":je("invalid",t),Id(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":je("invalid",t);break;case"textarea":je("invalid",t),Yd(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||Jm(t.textContent,a)?(l.popover!=null&&(je("beforetoggle",t),je("toggle",t)),l.onScroll!=null&&je("scroll",t),l.onScrollEnd!=null&&je("scrollend",t),l.onClick!=null&&(t.onclick=Rn),t=!0):t=!1,t||sa(e,!0)}function Ch(e){for(_t=e.return;_t;)switch(_t.tag){case 5:case 31:case 13:on=!1;return;case 27:case 3:on=!0;return;default:_t=_t.return}}function _s(e){if(e!==_t)return!1;if(!Te)return Ch(e),Te=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||pu(e.type,e.memoizedProps)),a=!a),a&&Ke&&sa(e),Ch(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ke=ap(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));Ke=ap(e)}else t===27?(t=Ke,va(e.type)?(e=wu,wu=null,Ke=e):Ke=t):Ke=_t?un(e.stateNode.nextSibling):null;return!0}function Ua(){Ke=_t=null,Te=!1}function Wo(){var e=aa;return e!==null&&($t===null?$t=e:$t.push.apply($t,e),aa=null),e}function kr(e){aa===null?aa=[e]:aa.push(e)}var Fo=j(null),za=null,Mn=null;function ra(e,t,a){W(Fo,t._currentValue),t._currentValue=a}function Un(e){e._currentValue=Fo.current,L(Fo)}function ec(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function tc(e,t,a,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var y=d.child;h=h.firstContext;e:for(;h!==null;){var b=h;h=d;for(var k=0;k<t.length;k++)if(b.context===t[k]){h.lanes|=a,b=h.alternate,b!==null&&(b.lanes|=a),ec(h.return,a,e),l||(y=null);break e}h=b.next}}else if(d.tag===18){if(y=d.return,y===null)throw Error(i(341));y.lanes|=a,h=y.alternate,h!==null&&(h.lanes|=a),ec(y,a,e),y=null}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===e){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}}function Ss(e,t,a,l){e=null;for(var d=t,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var y=d.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var b=d.type;Ht(d.pendingProps.value,y.value)||(e!==null?e.push(b):e=[b])}}else if(d===_e.current){if(y=d.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(ei):e=[ei])}d=d.return}e!==null&&tc(t,e,a,l),t.flags|=262144}function Zi(e){for(e=e.firstContext;e!==null;){if(!Ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function La(e){za=e,Mn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function St(e){return Oh(za,e)}function Wi(e,t){return za===null&&La(e),Oh(e,t)}function Oh(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Mn===null){if(e===null)throw Error(i(308));Mn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Mn=Mn.next=t;return a}var hv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},fv=s.unstable_scheduleCallback,mv=s.unstable_NormalPriority,ot={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nc(){return{controller:new hv,data:new Map,refCount:0}}function Tr(e){e.refCount--,e.refCount===0&&fv(mv,function(){e.controller.abort()})}var Ar=null,ac=0,js=0,Es=null;function pv(e,t){if(Ar===null){var a=Ar=[];ac=0,js=iu(),Es={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ac++,t.then(Dh,Dh),t}function Dh(){if(--ac===0&&Ar!==null){Es!==null&&(Es.status="fulfilled");var e=Ar;Ar=null,js=0,Es=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function gv(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<a.length;d++)(0,a[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Mh=N.S;N.S=function(e,t){vm=Tt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&pv(e,t),Mh!==null&&Mh(e,t)};var $a=j(null);function sc(){var e=$a.current;return e!==null?e:He.pooledCache}function Fi(e,t){t===null?W($a,$a.current):W($a,t.pool)}function Uh(){var e=sc();return e===null?null:{parent:ot._currentValue,pool:e}}var Ns=Error(i(460)),rc=Error(i(474)),el=Error(i(542)),tl={then:function(){}};function zh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Lh(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Rn,Rn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,qh(e),e;default:if(typeof t.status=="string")t.then(Rn,Rn);else{if(e=He,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,qh(e),e}throw Ba=t,Ns}}function qa(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ba=a,Ns):a}}var Ba=null;function $h(){if(Ba===null)throw Error(i(459));var e=Ba;return Ba=null,e}function qh(e){if(e===Ns||e===el)throw Error(i(483))}var ks=null,Rr=0;function nl(e){var t=Rr;return Rr+=1,ks===null&&(ks=[]),Lh(ks,e,t)}function Cr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function al(e,t){throw t.$$typeof===_?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Bh(e){function t(O,A){if(e){var U=O.deletions;U===null?(O.deletions=[A],O.flags|=16):U.push(A)}}function a(O,A){if(!e)return null;for(;A!==null;)t(O,A),A=A.sibling;return null}function l(O){for(var A=new Map;O!==null;)O.key!==null?A.set(O.key,O):A.set(O.index,O),O=O.sibling;return A}function d(O,A){return O=On(O,A),O.index=0,O.sibling=null,O}function h(O,A,U){return O.index=U,e?(U=O.alternate,U!==null?(U=U.index,U<A?(O.flags|=67108866,A):U):(O.flags|=67108866,A)):(O.flags|=1048576,A)}function y(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function b(O,A,U,Y){return A===null||A.tag!==6?(A=Ko(U,O.mode,Y),A.return=O,A):(A=d(A,U),A.return=O,A)}function k(O,A,U,Y){var ce=U.type;return ce===T?G(O,A,U.props.children,Y,U.key):A!==null&&(A.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===F&&qa(ce)===A.type)?(A=d(A,U.props),Cr(A,U),A.return=O,A):(A=Qi(U.type,U.key,U.props,null,O.mode,Y),Cr(A,U),A.return=O,A)}function z(O,A,U,Y){return A===null||A.tag!==4||A.stateNode.containerInfo!==U.containerInfo||A.stateNode.implementation!==U.implementation?(A=Jo(U,O.mode,Y),A.return=O,A):(A=d(A,U.children||[]),A.return=O,A)}function G(O,A,U,Y,ce){return A===null||A.tag!==7?(A=Ma(U,O.mode,Y,ce),A.return=O,A):(A=d(A,U),A.return=O,A)}function J(O,A,U){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Ko(""+A,O.mode,U),A.return=O,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case x:return U=Qi(A.type,A.key,A.props,null,O.mode,U),Cr(U,A),U.return=O,U;case E:return A=Jo(A,O.mode,U),A.return=O,A;case F:return A=qa(A),J(O,A,U)}if(Ze(A)||ke(A))return A=Ma(A,O.mode,U,null),A.return=O,A;if(typeof A.then=="function")return J(O,nl(A),U);if(A.$$typeof===R)return J(O,Wi(O,A),U);al(O,A)}return null}function $(O,A,U,Y){var ce=A!==null?A.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ce!==null?null:b(O,A,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case x:return U.key===ce?k(O,A,U,Y):null;case E:return U.key===ce?z(O,A,U,Y):null;case F:return U=qa(U),$(O,A,U,Y)}if(Ze(U)||ke(U))return ce!==null?null:G(O,A,U,Y,null);if(typeof U.then=="function")return $(O,A,nl(U),Y);if(U.$$typeof===R)return $(O,A,Wi(O,U),Y);al(O,U)}return null}function B(O,A,U,Y,ce){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return O=O.get(U)||null,b(A,O,""+Y,ce);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return O=O.get(Y.key===null?U:Y.key)||null,k(A,O,Y,ce);case E:return O=O.get(Y.key===null?U:Y.key)||null,z(A,O,Y,ce);case F:return Y=qa(Y),B(O,A,U,Y,ce)}if(Ze(Y)||ke(Y))return O=O.get(U)||null,G(A,O,Y,ce,null);if(typeof Y.then=="function")return B(O,A,U,nl(Y),ce);if(Y.$$typeof===R)return B(O,A,U,Wi(A,Y),ce);al(A,Y)}return null}function ne(O,A,U,Y){for(var ce=null,Ae=null,se=A,we=A=0,Ne=null;se!==null&&we<U.length;we++){se.index>we?(Ne=se,se=null):Ne=se.sibling;var Re=$(O,se,U[we],Y);if(Re===null){se===null&&(se=Ne);break}e&&se&&Re.alternate===null&&t(O,se),A=h(Re,A,we),Ae===null?ce=Re:Ae.sibling=Re,Ae=Re,se=Ne}if(we===U.length)return a(O,se),Te&&Dn(O,we),ce;if(se===null){for(;we<U.length;we++)se=J(O,U[we],Y),se!==null&&(A=h(se,A,we),Ae===null?ce=se:Ae.sibling=se,Ae=se);return Te&&Dn(O,we),ce}for(se=l(se);we<U.length;we++)Ne=B(se,O,we,U[we],Y),Ne!==null&&(e&&Ne.alternate!==null&&se.delete(Ne.key===null?we:Ne.key),A=h(Ne,A,we),Ae===null?ce=Ne:Ae.sibling=Ne,Ae=Ne);return e&&se.forEach(function(Sa){return t(O,Sa)}),Te&&Dn(O,we),ce}function he(O,A,U,Y){if(U==null)throw Error(i(151));for(var ce=null,Ae=null,se=A,we=A=0,Ne=null,Re=U.next();se!==null&&!Re.done;we++,Re=U.next()){se.index>we?(Ne=se,se=null):Ne=se.sibling;var Sa=$(O,se,Re.value,Y);if(Sa===null){se===null&&(se=Ne);break}e&&se&&Sa.alternate===null&&t(O,se),A=h(Sa,A,we),Ae===null?ce=Sa:Ae.sibling=Sa,Ae=Sa,se=Ne}if(Re.done)return a(O,se),Te&&Dn(O,we),ce;if(se===null){for(;!Re.done;we++,Re=U.next())Re=J(O,Re.value,Y),Re!==null&&(A=h(Re,A,we),Ae===null?ce=Re:Ae.sibling=Re,Ae=Re);return Te&&Dn(O,we),ce}for(se=l(se);!Re.done;we++,Re=U.next())Re=B(se,O,we,Re.value,Y),Re!==null&&(e&&Re.alternate!==null&&se.delete(Re.key===null?we:Re.key),A=h(Re,A,we),Ae===null?ce=Re:Ae.sibling=Re,Ae=Re);return e&&se.forEach(function(kb){return t(O,kb)}),Te&&Dn(O,we),ce}function Be(O,A,U,Y){if(typeof U=="object"&&U!==null&&U.type===T&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case x:e:{for(var ce=U.key;A!==null;){if(A.key===ce){if(ce=U.type,ce===T){if(A.tag===7){a(O,A.sibling),Y=d(A,U.props.children),Y.return=O,O=Y;break e}}else if(A.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===F&&qa(ce)===A.type){a(O,A.sibling),Y=d(A,U.props),Cr(Y,U),Y.return=O,O=Y;break e}a(O,A);break}else t(O,A);A=A.sibling}U.type===T?(Y=Ma(U.props.children,O.mode,Y,U.key),Y.return=O,O=Y):(Y=Qi(U.type,U.key,U.props,null,O.mode,Y),Cr(Y,U),Y.return=O,O=Y)}return y(O);case E:e:{for(ce=U.key;A!==null;){if(A.key===ce)if(A.tag===4&&A.stateNode.containerInfo===U.containerInfo&&A.stateNode.implementation===U.implementation){a(O,A.sibling),Y=d(A,U.children||[]),Y.return=O,O=Y;break e}else{a(O,A);break}else t(O,A);A=A.sibling}Y=Jo(U,O.mode,Y),Y.return=O,O=Y}return y(O);case F:return U=qa(U),Be(O,A,U,Y)}if(Ze(U))return ne(O,A,U,Y);if(ke(U)){if(ce=ke(U),typeof ce!="function")throw Error(i(150));return U=ce.call(U),he(O,A,U,Y)}if(typeof U.then=="function")return Be(O,A,nl(U),Y);if(U.$$typeof===R)return Be(O,A,Wi(O,U),Y);al(O,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,A!==null&&A.tag===6?(a(O,A.sibling),Y=d(A,U),Y.return=O,O=Y):(a(O,A),Y=Ko(U,O.mode,Y),Y.return=O,O=Y),y(O)):a(O,A)}return function(O,A,U,Y){try{Rr=0;var ce=Be(O,A,U,Y);return ks=null,ce}catch(se){if(se===Ns||se===el)throw se;var Ae=Pt(29,se,null,O.mode);return Ae.lanes=Y,Ae.return=O,Ae}}}var Ha=Bh(!0),Hh=Bh(!1),ia=!1;function ic(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function la(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oa(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Oe&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=Ji(e),jh(e,null,a),t}return Ki(e,l,t,a),Ji(e)}function Or(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,lt(e,a)}}function oc(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?d=h=y:h=h.next=y,a=a.next}while(a!==null);h===null?d=h=t:h=h.next=t}else d=h=t;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var cc=!1;function Dr(){if(cc){var e=Es;if(e!==null)throw e}}function Mr(e,t,a,l){cc=!1;var d=e.updateQueue;ia=!1;var h=d.firstBaseUpdate,y=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var k=b,z=k.next;k.next=null,y===null?h=z:y.next=z,y=k;var G=e.alternate;G!==null&&(G=G.updateQueue,b=G.lastBaseUpdate,b!==y&&(b===null?G.firstBaseUpdate=z:b.next=z,G.lastBaseUpdate=k))}if(h!==null){var J=d.baseState;y=0,G=z=k=null,b=h;do{var $=b.lane&-536870913,B=$!==b.lane;if(B?(Ee&$)===$:(l&$)===$){$!==0&&$===js&&(cc=!0),G!==null&&(G=G.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ne=e,he=b;$=t;var Be=a;switch(he.tag){case 1:if(ne=he.payload,typeof ne=="function"){J=ne.call(Be,J,$);break e}J=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=he.payload,$=typeof ne=="function"?ne.call(Be,J,$):ne,$==null)break e;J=w({},J,$);break e;case 2:ia=!0}}$=b.callback,$!==null&&(e.flags|=64,B&&(e.flags|=8192),B=d.callbacks,B===null?d.callbacks=[$]:B.push($))}else B={lane:$,tag:b.tag,payload:b.payload,callback:b.callback,next:null},G===null?(z=G=B,k=J):G=G.next=B,y|=$;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;B=b,b=B.next,B.next=null,d.lastBaseUpdate=B,d.shared.pending=null}}while(!0);G===null&&(k=J),d.baseState=k,d.firstBaseUpdate=z,d.lastBaseUpdate=G,h===null&&(d.shared.lanes=0),fa|=y,e.lanes=y,e.memoizedState=J}}function Ph(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Ih(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ph(a[e],t)}var Ts=j(null),sl=j(0);function Gh(e,t){e=Gn,W(sl,e),W(Ts,t),Gn=e|t.baseLanes}function uc(){W(sl,Gn),W(Ts,Ts.current)}function dc(){Gn=sl.current,L(Ts),L(sl)}var It=j(null),cn=null;function ca(e){var t=e.alternate;W(st,st.current&1),W(It,e),cn===null&&(t===null||Ts.current!==null||t.memoizedState!==null)&&(cn=e)}function hc(e){W(st,st.current),W(It,e),cn===null&&(cn=e)}function Yh(e){e.tag===22?(W(st,st.current),W(It,e),cn===null&&(cn=e)):ua()}function ua(){W(st,st.current),W(It,It.current)}function Gt(e){L(It),cn===e&&(cn=null),L(st)}var st=j(0);function rl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||vu(a)||bu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zn=0,ve=null,$e=null,ct=null,il=!1,As=!1,Pa=!1,ll=0,Ur=0,Rs=null,yv=0;function et(){throw Error(i(321))}function fc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Ht(e[a],t[a]))return!1;return!0}function mc(e,t,a,l,d,h){return zn=h,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?Af:Ac,Pa=!1,h=a(l,d),Pa=!1,As&&(h=Kh(t,a,l,d)),Vh(e),h}function Vh(e){N.H=$r;var t=$e!==null&&$e.next!==null;if(zn=0,ct=$e=ve=null,il=!1,Ur=0,Rs=null,t)throw Error(i(300));e===null||ut||(e=e.dependencies,e!==null&&Zi(e)&&(ut=!0))}function Kh(e,t,a,l){ve=e;var d=0;do{if(As&&(Rs=null),Ur=0,As=!1,25<=d)throw Error(i(301));if(d+=1,ct=$e=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}N.H=Rf,h=t(a,l)}while(As);return h}function vv(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?zr(t):t,e=e.useState()[0],($e!==null?$e.memoizedState:null)!==e&&(ve.flags|=1024),t}function pc(){var e=ll!==0;return ll=0,e}function gc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function yc(e){if(il){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}il=!1}zn=0,ct=$e=ve=null,As=!1,Ur=ll=0,Rs=null}function Ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?ve.memoizedState=ct=e:ct=ct.next=e,ct}function rt(){if($e===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=ct===null?ve.memoizedState:ct.next;if(t!==null)ct=t,$e=e;else{if(e===null)throw ve.alternate===null?Error(i(467)):Error(i(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},ct===null?ve.memoizedState=ct=e:ct=ct.next=e}return ct}function ol(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zr(e){var t=Ur;return Ur+=1,Rs===null&&(Rs=[]),e=Lh(Rs,e,t),t=ve,(ct===null?t.memoizedState:ct.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?Af:Ac),e}function cl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zr(e);if(e.$$typeof===R)return St(e)}throw Error(i(438,String(e)))}function vc(e){var t=null,a=ve.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=ol(),ve.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=ie;return t.index++,a}function Ln(e,t){return typeof t=="function"?t(e):t}function ul(e){var t=rt();return bc(t,$e,e)}function bc(e,t,a){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=e.baseQueue,h=l.pending;if(h!==null){if(d!==null){var y=d.next;d.next=h.next,h.next=y}t.baseQueue=d=h,l.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{t=d.next;var b=y=null,k=null,z=t,G=!1;do{var J=z.lane&-536870913;if(J!==z.lane?(Ee&J)===J:(zn&J)===J){var $=z.revertLane;if($===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),J===js&&(G=!0);else if((zn&$)===$){z=z.next,$===js&&(G=!0);continue}else J={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},k===null?(b=k=J,y=h):k=k.next=J,ve.lanes|=$,fa|=$;J=z.action,Pa&&a(h,J),h=z.hasEagerState?z.eagerState:a(h,J)}else $={lane:J,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},k===null?(b=k=$,y=h):k=k.next=$,ve.lanes|=J,fa|=J;z=z.next}while(z!==null&&z!==t);if(k===null?y=h:k.next=b,!Ht(h,e.memoizedState)&&(ut=!0,G&&(a=Es,a!==null)))throw a;e.memoizedState=h,e.baseState=y,e.baseQueue=k,l.lastRenderedState=h}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function wc(e){var t=rt(),a=t.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var l=a.dispatch,d=a.pending,h=t.memoizedState;if(d!==null){a.pending=null;var y=d=d.next;do h=e(h,y.action),y=y.next;while(y!==d);Ht(h,t.memoizedState)||(ut=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),a.lastRenderedState=h}return[h,l]}function Jh(e,t,a){var l=ve,d=rt(),h=Te;if(h){if(a===void 0)throw Error(i(407));a=a()}else a=t();var y=!Ht(($e||d).memoizedState,a);if(y&&(d.memoizedState=a,ut=!0),d=d.queue,Sc(Zh.bind(null,l,d,e),[e]),d.getSnapshot!==t||y||ct!==null&&ct.memoizedState.tag&1){if(l.flags|=2048,Cs(9,{destroy:void 0},Xh.bind(null,l,d,a,t),null),He===null)throw Error(i(349));h||(zn&127)!==0||Qh(l,t,a)}return a}function Qh(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ve.updateQueue,t===null?(t=ol(),ve.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Xh(e,t,a,l){t.value=a,t.getSnapshot=l,Wh(t)&&Fh(e)}function Zh(e,t,a){return a(function(){Wh(t)&&Fh(e)})}function Wh(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Ht(e,a)}catch{return!0}}function Fh(e){var t=Da(e,2);t!==null&&qt(t,e,2)}function xc(e){var t=Ot();if(typeof e=="function"){var a=e;if(e=a(),Pa){hn(!0);try{a()}finally{hn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:e},t}function ef(e,t,a,l){return e.baseState=a,bc(e,$e,typeof l=="function"?l:Ln)}function bv(e,t,a,l,d){if(fl(e))throw Error(i(485));if(e=t.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){h.listeners.push(y)}};N.T!==null?a(!0):h.isTransition=!1,l(h),a=t.pending,a===null?(h.next=t.pending=h,tf(t,h)):(h.next=a.next,t.pending=a.next=h)}}function tf(e,t){var a=t.action,l=t.payload,d=e.state;if(t.isTransition){var h=N.T,y={};N.T=y;try{var b=a(d,l),k=N.S;k!==null&&k(y,b),nf(e,t,b)}catch(z){_c(e,t,z)}finally{h!==null&&y.types!==null&&(h.types=y.types),N.T=h}}else try{h=a(d,l),nf(e,t,h)}catch(z){_c(e,t,z)}}function nf(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){af(e,t,l)},function(l){return _c(e,t,l)}):af(e,t,a)}function af(e,t,a){t.status="fulfilled",t.value=a,sf(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,tf(e,a)))}function _c(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,sf(t),t=t.next;while(t!==l)}e.action=null}function sf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function rf(e,t){return t}function lf(e,t){if(Te){var a=He.formState;if(a!==null){e:{var l=ve;if(Te){if(Ke){t:{for(var d=Ke,h=on;d.nodeType!==8;){if(!h){d=null;break t}if(d=un(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){Ke=un(d.nextSibling),l=d.data==="F!";break e}}sa(l)}l=!1}l&&(t=a[0])}}return a=Ot(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rf,lastRenderedState:t},a.queue=l,a=Nf.bind(null,ve,l),l.dispatch=a,l=xc(!1),h=Tc.bind(null,ve,!1,l.queue),l=Ot(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,a=bv.bind(null,ve,d,h,a),d.dispatch=a,l.memoizedState=e,[t,a,!1]}function of(e){var t=rt();return cf(t,$e,e)}function cf(e,t,a){if(t=bc(e,t,rf)[0],e=ul(Ln)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=zr(t)}catch(y){throw y===Ns?el:y}else l=t;t=rt();var d=t.queue,h=d.dispatch;return a!==t.memoizedState&&(ve.flags|=2048,Cs(9,{destroy:void 0},wv.bind(null,d,a),null)),[l,h,e]}function wv(e,t){e.action=t}function uf(e){var t=rt(),a=$e;if(a!==null)return cf(t,a,e);rt(),t=t.memoizedState,a=rt();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function Cs(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=ve.updateQueue,t===null&&(t=ol(),ve.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function df(){return rt().memoizedState}function dl(e,t,a,l){var d=Ot();ve.flags|=e,d.memoizedState=Cs(1|t,{destroy:void 0},a,l===void 0?null:l)}function hl(e,t,a,l){var d=rt();l=l===void 0?null:l;var h=d.memoizedState.inst;$e!==null&&l!==null&&fc(l,$e.memoizedState.deps)?d.memoizedState=Cs(t,h,a,l):(ve.flags|=e,d.memoizedState=Cs(1|t,h,a,l))}function hf(e,t){dl(8390656,8,e,t)}function Sc(e,t){hl(2048,8,e,t)}function xv(e){ve.flags|=4;var t=ve.updateQueue;if(t===null)t=ol(),ve.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function ff(e){var t=rt().memoizedState;return xv({ref:t,nextImpl:e}),function(){if((Oe&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function mf(e,t){return hl(4,2,e,t)}function pf(e,t){return hl(4,4,e,t)}function gf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yf(e,t,a){a=a!=null?a.concat([e]):null,hl(4,4,gf.bind(null,t,e),a)}function jc(){}function vf(e,t){var a=rt();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&fc(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function bf(e,t){var a=rt();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&fc(t,l[1]))return l[0];if(l=e(),Pa){hn(!0);try{e()}finally{hn(!1)}}return a.memoizedState=[l,t],l}function Ec(e,t,a){return a===void 0||(zn&1073741824)!==0&&(Ee&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=wm(),ve.lanes|=e,fa|=e,a)}function wf(e,t,a,l){return Ht(a,t)?a:Ts.current!==null?(e=Ec(e,a,l),Ht(e,t)||(ut=!0),e):(zn&42)===0||(zn&1073741824)!==0&&(Ee&261930)===0?(ut=!0,e.memoizedState=a):(e=wm(),ve.lanes|=e,fa|=e,t)}function xf(e,t,a,l,d){var h=V.p;V.p=h!==0&&8>h?h:8;var y=N.T,b={};N.T=b,Tc(e,!1,t,a);try{var k=d(),z=N.S;if(z!==null&&z(b,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var G=gv(k,l);Lr(e,t,G,Kt(e))}else Lr(e,t,l,Kt(e))}catch(J){Lr(e,t,{then:function(){},status:"rejected",reason:J},Kt())}finally{V.p=h,y!==null&&b.types!==null&&(y.types=b.types),N.T=y}}function _v(){}function Nc(e,t,a,l){if(e.tag!==5)throw Error(i(476));var d=_f(e).queue;xf(e,d,t,te,a===null?_v:function(){return Sf(e),a(l)})}function _f(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:te},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Sf(e){var t=_f(e);t.next===null&&(t=e.alternate.memoizedState),Lr(e,t.next.queue,{},Kt())}function kc(){return St(ei)}function jf(){return rt().memoizedState}function Ef(){return rt().memoizedState}function Sv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Kt();e=la(a);var l=oa(t,e,a);l!==null&&(qt(l,t,a),Or(l,t,a)),t={cache:nc()},e.payload=t;return}t=t.return}}function jv(e,t,a){var l=Kt();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},fl(e)?kf(t,a):(a=Yo(e,t,a,l),a!==null&&(qt(a,e,l),Tf(a,t,l)))}function Nf(e,t,a){var l=Kt();Lr(e,t,a,l)}function Lr(e,t,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(fl(e))kf(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var y=t.lastRenderedState,b=h(y,a);if(d.hasEagerState=!0,d.eagerState=b,Ht(b,y))return Ki(e,t,d,0),He===null&&Vi(),!1}catch{}if(a=Yo(e,t,d,l),a!==null)return qt(a,e,l),Tf(a,t,l),!0}return!1}function Tc(e,t,a,l){if(l={lane:2,revertLane:iu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},fl(e)){if(t)throw Error(i(479))}else t=Yo(e,a,l,2),t!==null&&qt(t,e,2)}function fl(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function kf(e,t){As=il=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Tf(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,lt(e,a)}}var $r={readContext:St,use:cl,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et};$r.useEffectEvent=et;var Af={readContext:St,use:cl,useCallback:function(e,t){return Ot().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:hf,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,dl(4194308,4,gf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return dl(4194308,4,e,t)},useInsertionEffect:function(e,t){dl(4,2,e,t)},useMemo:function(e,t){var a=Ot();t=t===void 0?null:t;var l=e();if(Pa){hn(!0);try{e()}finally{hn(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=Ot();if(a!==void 0){var d=a(t);if(Pa){hn(!0);try{a(t)}finally{hn(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=jv.bind(null,ve,e),[l.memoizedState,e]},useRef:function(e){var t=Ot();return e={current:e},t.memoizedState=e},useState:function(e){e=xc(e);var t=e.queue,a=Nf.bind(null,ve,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:jc,useDeferredValue:function(e,t){var a=Ot();return Ec(a,e,t)},useTransition:function(){var e=xc(!1);return e=xf.bind(null,ve,e.queue,!0,!1),Ot().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=ve,d=Ot();if(Te){if(a===void 0)throw Error(i(407));a=a()}else{if(a=t(),He===null)throw Error(i(349));(Ee&127)!==0||Qh(l,t,a)}d.memoizedState=a;var h={value:a,getSnapshot:t};return d.queue=h,hf(Zh.bind(null,l,h,e),[e]),l.flags|=2048,Cs(9,{destroy:void 0},Xh.bind(null,l,h,a,t),null),a},useId:function(){var e=Ot(),t=He.identifierPrefix;if(Te){var a=jn,l=Sn;a=(l&~(1<<32-xt(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=ll++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=yv++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:kc,useFormState:lf,useActionState:lf,useOptimistic:function(e){var t=Ot();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Tc.bind(null,ve,!0,a),a.dispatch=t,[e,t]},useMemoCache:vc,useCacheRefresh:function(){return Ot().memoizedState=Sv.bind(null,ve)},useEffectEvent:function(e){var t=Ot(),a={impl:e};return t.memoizedState=a,function(){if((Oe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Ac={readContext:St,use:cl,useCallback:vf,useContext:St,useEffect:Sc,useImperativeHandle:yf,useInsertionEffect:mf,useLayoutEffect:pf,useMemo:bf,useReducer:ul,useRef:df,useState:function(){return ul(Ln)},useDebugValue:jc,useDeferredValue:function(e,t){var a=rt();return wf(a,$e.memoizedState,e,t)},useTransition:function(){var e=ul(Ln)[0],t=rt().memoizedState;return[typeof e=="boolean"?e:zr(e),t]},useSyncExternalStore:Jh,useId:jf,useHostTransitionStatus:kc,useFormState:of,useActionState:of,useOptimistic:function(e,t){var a=rt();return ef(a,$e,e,t)},useMemoCache:vc,useCacheRefresh:Ef};Ac.useEffectEvent=ff;var Rf={readContext:St,use:cl,useCallback:vf,useContext:St,useEffect:Sc,useImperativeHandle:yf,useInsertionEffect:mf,useLayoutEffect:pf,useMemo:bf,useReducer:wc,useRef:df,useState:function(){return wc(Ln)},useDebugValue:jc,useDeferredValue:function(e,t){var a=rt();return $e===null?Ec(a,e,t):wf(a,$e.memoizedState,e,t)},useTransition:function(){var e=wc(Ln)[0],t=rt().memoizedState;return[typeof e=="boolean"?e:zr(e),t]},useSyncExternalStore:Jh,useId:jf,useHostTransitionStatus:kc,useFormState:uf,useActionState:uf,useOptimistic:function(e,t){var a=rt();return $e!==null?ef(a,$e,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:vc,useCacheRefresh:Ef};Rf.useEffectEvent=ff;function Rc(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:w({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Cc={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=Kt(),d=la(l);d.payload=t,a!=null&&(d.callback=a),t=oa(e,d,l),t!==null&&(qt(t,e,l),Or(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=Kt(),d=la(l);d.tag=1,d.payload=t,a!=null&&(d.callback=a),t=oa(e,d,l),t!==null&&(qt(t,e,l),Or(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Kt(),l=la(a);l.tag=2,t!=null&&(l.callback=t),t=oa(e,l,a),t!==null&&(qt(t,e,a),Or(t,e,a))}};function Cf(e,t,a,l,d,h,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,y):t.prototype&&t.prototype.isPureReactComponent?!jr(a,l)||!jr(d,h):!0}function Of(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&Cc.enqueueReplaceState(t,t.state,null)}function Ia(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=w({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}function Df(e){Yi(e)}function Mf(e){console.error(e)}function Uf(e){Yi(e)}function ml(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function zf(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Oc(e,t,a){return a=la(a),a.tag=3,a.payload={element:null},a.callback=function(){ml(e,t)},a}function Lf(e){return e=la(e),e.tag=3,e}function $f(e,t,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var h=l.value;e.payload=function(){return d(h)},e.callback=function(){zf(t,a,l)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){zf(t,a,l),typeof d!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Ev(e,t,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&Ss(t,a,d,!0),a=It.current,a!==null){switch(a.tag){case 31:case 13:return cn===null?Nl():a.alternate===null&&tt===0&&(tt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===tl?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),au(e,l,d)),!1;case 22:return a.flags|=65536,l===tl?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),au(e,l,d)),!1}throw Error(i(435,a.tag))}return au(e,l,d),Nl(),!1}if(Te)return t=It.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==Zo&&(e=Error(i(422),{cause:l}),kr(sn(e,a)))):(l!==Zo&&(t=Error(i(423),{cause:l}),kr(sn(t,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=sn(l,a),d=Oc(e.stateNode,l,d),oc(e,d),tt!==4&&(tt=2)),!1;var h=Error(i(520),{cause:l});if(h=sn(h,a),Vr===null?Vr=[h]:Vr.push(h),tt!==4&&(tt=2),t===null)return!0;l=sn(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=Oc(a.stateNode,l,e),oc(a,e),!1;case 1:if(t=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(ma===null||!ma.has(h))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Lf(d),$f(d,e,a,l),oc(a,d),!1}a=a.return}while(a!==null);return!1}var Dc=Error(i(461)),ut=!1;function jt(e,t,a,l){t.child=e===null?Hh(t,null,a,l):Ha(t,e.child,a,l)}function qf(e,t,a,l,d){a=a.render;var h=t.ref;if("ref"in l){var y={};for(var b in l)b!=="ref"&&(y[b]=l[b])}else y=l;return La(t),l=mc(e,t,a,y,h,d),b=pc(),e!==null&&!ut?(gc(e,t,d),$n(e,t,d)):(Te&&b&&Qo(t),t.flags|=1,jt(e,t,l,d),t.child)}function Bf(e,t,a,l,d){if(e===null){var h=a.type;return typeof h=="function"&&!Vo(h)&&h.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=h,Hf(e,t,h,l,d)):(e=Qi(a.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Hc(e,d)){var y=h.memoizedProps;if(a=a.compare,a=a!==null?a:jr,a(y,l)&&e.ref===t.ref)return $n(e,t,d)}return t.flags|=1,e=On(h,l),e.ref=t.ref,e.return=t,t.child=e}function Hf(e,t,a,l,d){if(e!==null){var h=e.memoizedProps;if(jr(h,l)&&e.ref===t.ref)if(ut=!1,t.pendingProps=l=h,Hc(e,d))(e.flags&131072)!==0&&(ut=!0);else return t.lanes=e.lanes,$n(e,t,d)}return Mc(e,t,a,l,d)}function Pf(e,t,a,l){var d=l.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|a:a,e!==null){for(l=t.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~h}else l=0,t.child=null;return If(e,t,h,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Fi(t,h!==null?h.cachePool:null),h!==null?Gh(t,h):uc(),Yh(t);else return l=t.lanes=536870912,If(e,t,h!==null?h.baseLanes|a:a,a,l)}else h!==null?(Fi(t,h.cachePool),Gh(t,h),ua(),t.memoizedState=null):(e!==null&&Fi(t,null),uc(),ua());return jt(e,t,d,a),t.child}function qr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function If(e,t,a,l,d){var h=sc();return h=h===null?null:{parent:ot._currentValue,pool:h},t.memoizedState={baseLanes:a,cachePool:h},e!==null&&Fi(t,null),uc(),Yh(t),e!==null&&Ss(e,t,l,!0),t.childLanes=d,null}function pl(e,t){return t=yl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Gf(e,t,a){return Ha(t,e.child,null,a),e=pl(t,t.pendingProps),e.flags|=2,Gt(t),t.memoizedState=null,e}function Nv(e,t,a){var l=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Te){if(l.mode==="hidden")return e=pl(t,l),t.lanes=536870912,qr(null,e);if(hc(t),(e=Ke)?(e=np(e,on),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:na!==null?{id:Sn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},a=Nh(e),a.return=t,t.child=a,_t=t,Ke=null)):e=null,e===null)throw sa(t);return t.lanes=536870912,null}return pl(t,l)}var h=e.memoizedState;if(h!==null){var y=h.dehydrated;if(hc(t),d)if(t.flags&256)t.flags&=-257,t=Gf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(ut||Ss(e,t,a,!1),d=(a&e.childLanes)!==0,ut||d){if(l=He,l!==null&&(y=Le(l,a),y!==0&&y!==h.retryLane))throw h.retryLane=y,Da(e,y),qt(l,e,y),Dc;Nl(),t=Gf(e,t,a)}else e=h.treeContext,Ke=un(y.nextSibling),_t=t,Te=!0,aa=null,on=!1,e!==null&&Ah(t,e),t=pl(t,l),t.flags|=4096;return t}return e=On(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function gl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Mc(e,t,a,l,d){return La(t),a=mc(e,t,a,l,void 0,d),l=pc(),e!==null&&!ut?(gc(e,t,d),$n(e,t,d)):(Te&&l&&Qo(t),t.flags|=1,jt(e,t,a,d),t.child)}function Yf(e,t,a,l,d,h){return La(t),t.updateQueue=null,a=Kh(t,l,a,d),Vh(e),l=pc(),e!==null&&!ut?(gc(e,t,h),$n(e,t,h)):(Te&&l&&Qo(t),t.flags|=1,jt(e,t,a,h),t.child)}function Vf(e,t,a,l,d){if(La(t),t.stateNode===null){var h=bs,y=a.contextType;typeof y=="object"&&y!==null&&(h=St(y)),h=new a(l,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Cc,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=l,h.state=t.memoizedState,h.refs={},ic(t),y=a.contextType,h.context=typeof y=="object"&&y!==null?St(y):bs,h.state=t.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(Rc(t,a,y,l),h.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(y=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),y!==h.state&&Cc.enqueueReplaceState(h,h.state,null),Mr(t,l,h,d),Dr(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){h=t.stateNode;var b=t.memoizedProps,k=Ia(a,b);h.props=k;var z=h.context,G=a.contextType;y=bs,typeof G=="object"&&G!==null&&(y=St(G));var J=a.getDerivedStateFromProps;G=typeof J=="function"||typeof h.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,G||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(b||z!==y)&&Of(t,h,l,y),ia=!1;var $=t.memoizedState;h.state=$,Mr(t,l,h,d),Dr(),z=t.memoizedState,b||$!==z||ia?(typeof J=="function"&&(Rc(t,a,J,l),z=t.memoizedState),(k=ia||Cf(t,a,k,l,$,z,y))?(G||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=z),h.props=l,h.state=z,h.context=y,l=k):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{h=t.stateNode,lc(e,t),y=t.memoizedProps,G=Ia(a,y),h.props=G,J=t.pendingProps,$=h.context,z=a.contextType,k=bs,typeof z=="object"&&z!==null&&(k=St(z)),b=a.getDerivedStateFromProps,(z=typeof b=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==J||$!==k)&&Of(t,h,l,k),ia=!1,$=t.memoizedState,h.state=$,Mr(t,l,h,d),Dr();var B=t.memoizedState;y!==J||$!==B||ia||e!==null&&e.dependencies!==null&&Zi(e.dependencies)?(typeof b=="function"&&(Rc(t,a,b,l),B=t.memoizedState),(G=ia||Cf(t,a,G,l,$,B,k)||e!==null&&e.dependencies!==null&&Zi(e.dependencies))?(z||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,B,k),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,B,k)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=B),h.props=l,h.state=B,h.context=k,l=G):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),l=!1)}return h=l,gl(e,t),l=(t.flags&128)!==0,h||l?(h=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&l?(t.child=Ha(t,e.child,null,d),t.child=Ha(t,null,a,d)):jt(e,t,a,d),t.memoizedState=h.state,e=t.child):e=$n(e,t,d),e}function Kf(e,t,a,l){return Ua(),t.flags|=256,jt(e,t,a,l),t.child}var Uc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zc(e){return{baseLanes:e,cachePool:Uh()}}function Lc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Vt),e}function Jf(e,t,a){var l=t.pendingProps,d=!1,h=(t.flags&128)!==0,y;if((y=h)||(y=e!==null&&e.memoizedState===null?!1:(st.current&2)!==0),y&&(d=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Te){if(d?ca(t):ua(),(e=Ke)?(e=np(e,on),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:na!==null?{id:Sn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},a=Nh(e),a.return=t,t.child=a,_t=t,Ke=null)):e=null,e===null)throw sa(t);return bu(e)?t.lanes=32:t.lanes=536870912,null}var b=l.children;return l=l.fallback,d?(ua(),d=t.mode,b=yl({mode:"hidden",children:b},d),l=Ma(l,d,a,null),b.return=t,l.return=t,b.sibling=l,t.child=b,l=t.child,l.memoizedState=zc(a),l.childLanes=Lc(e,y,a),t.memoizedState=Uc,qr(null,l)):(ca(t),$c(t,b))}var k=e.memoizedState;if(k!==null&&(b=k.dehydrated,b!==null)){if(h)t.flags&256?(ca(t),t.flags&=-257,t=qc(e,t,a)):t.memoizedState!==null?(ua(),t.child=e.child,t.flags|=128,t=null):(ua(),b=l.fallback,d=t.mode,l=yl({mode:"visible",children:l.children},d),b=Ma(b,d,a,null),b.flags|=2,l.return=t,b.return=t,l.sibling=b,t.child=l,Ha(t,e.child,null,a),l=t.child,l.memoizedState=zc(a),l.childLanes=Lc(e,y,a),t.memoizedState=Uc,t=qr(null,l));else if(ca(t),bu(b)){if(y=b.nextSibling&&b.nextSibling.dataset,y)var z=y.dgst;y=z,l=Error(i(419)),l.stack="",l.digest=y,kr({value:l,source:null,stack:null}),t=qc(e,t,a)}else if(ut||Ss(e,t,a,!1),y=(a&e.childLanes)!==0,ut||y){if(y=He,y!==null&&(l=Le(y,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,Da(e,l),qt(y,e,l),Dc;vu(b)||Nl(),t=qc(e,t,a)}else vu(b)?(t.flags|=192,t.child=e.child,t=null):(e=k.treeContext,Ke=un(b.nextSibling),_t=t,Te=!0,aa=null,on=!1,e!==null&&Ah(t,e),t=$c(t,l.children),t.flags|=4096);return t}return d?(ua(),b=l.fallback,d=t.mode,k=e.child,z=k.sibling,l=On(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,z!==null?b=On(z,b):(b=Ma(b,d,a,null),b.flags|=2),b.return=t,l.return=t,l.sibling=b,t.child=l,qr(null,l),l=t.child,b=e.child.memoizedState,b===null?b=zc(a):(d=b.cachePool,d!==null?(k=ot._currentValue,d=d.parent!==k?{parent:k,pool:k}:d):d=Uh(),b={baseLanes:b.baseLanes|a,cachePool:d}),l.memoizedState=b,l.childLanes=Lc(e,y,a),t.memoizedState=Uc,qr(e.child,l)):(ca(t),a=e.child,e=a.sibling,a=On(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=a,t.memoizedState=null,a)}function $c(e,t){return t=yl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function yl(e,t){return e=Pt(22,e,null,t),e.lanes=0,e}function qc(e,t,a){return Ha(t,e.child,null,a),e=$c(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qf(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),ec(e.return,t,a)}function Bc(e,t,a,l,d,h){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:h}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=a,y.tailMode=d,y.treeForkCount=h)}function Xf(e,t,a){var l=t.pendingProps,d=l.revealOrder,h=l.tail;l=l.children;var y=st.current,b=(y&2)!==0;if(b?(y=y&1|2,t.flags|=128):y&=1,W(st,y),jt(e,t,l,a),l=Te?Nr:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qf(e,a,t);else if(e.tag===19)Qf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(a=t.child,d=null;a!==null;)e=a.alternate,e!==null&&rl(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=t.child,t.child=null):(d=a.sibling,a.sibling=null),Bc(t,!1,d,a,h,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&rl(e)===null){t.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}Bc(t,!0,a,null,h,l);break;case"together":Bc(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function $n(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),fa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Ss(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,a=On(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=On(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Hc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Zi(e)))}function kv(e,t,a){switch(t.tag){case 3:wt(t,t.stateNode.containerInfo),ra(t,ot,e.memoizedState.cache),Ua();break;case 27:case 5:Na(t);break;case 4:wt(t,t.stateNode.containerInfo);break;case 10:ra(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,hc(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(ca(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Jf(e,t,a):(ca(t),e=$n(e,t,a),e!==null?e.sibling:null);ca(t);break;case 19:var d=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(Ss(e,t,a,!1),l=(a&t.childLanes)!==0),d){if(l)return Xf(e,t,a);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),W(st,st.current),l)break;return null;case 22:return t.lanes=0,Pf(e,t,a,t.pendingProps);case 24:ra(t,ot,e.memoizedState.cache)}return $n(e,t,a)}function Zf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)ut=!0;else{if(!Hc(e,a)&&(t.flags&128)===0)return ut=!1,kv(e,t,a);ut=(e.flags&131072)!==0}else ut=!1,Te&&(t.flags&1048576)!==0&&Th(t,Nr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=qa(t.elementType),t.type=e,typeof e=="function")Vo(e)?(l=Ia(e,l),t.tag=1,t=Vf(null,t,e,l,a)):(t.tag=0,t=Mc(null,t,e,l,a));else{if(e!=null){var d=e.$$typeof;if(d===K){t.tag=11,t=qf(null,t,e,l,a);break e}else if(d===P){t.tag=14,t=Bf(null,t,e,l,a);break e}}throw t=Ge(e)||e,Error(i(306,t,""))}}return t;case 0:return Mc(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,d=Ia(l,t.pendingProps),Vf(e,t,l,d,a);case 3:e:{if(wt(t,t.stateNode.containerInfo),e===null)throw Error(i(387));l=t.pendingProps;var h=t.memoizedState;d=h.element,lc(e,t),Mr(t,l,null,a);var y=t.memoizedState;if(l=y.cache,ra(t,ot,l),l!==h.cache&&tc(t,[ot],a,!0),Dr(),l=y.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=Kf(e,t,l,a);break e}else if(l!==d){d=sn(Error(i(424)),t),kr(d),t=Kf(e,t,l,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ke=un(e.firstChild),_t=t,Te=!0,aa=null,on=!0,a=Hh(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ua(),l===d){t=$n(e,t,a);break e}jt(e,t,l,a)}t=t.child}return t;case 26:return gl(e,t),e===null?(a=op(t.type,null,t.pendingProps,null))?t.memoizedState=a:Te||(a=t.type,e=t.pendingProps,l=Dl(ye.current).createElement(a),l[Ve]=t,l[ft]=e,Et(l,a,e),vt(l),t.stateNode=l):t.memoizedState=op(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Na(t),e===null&&Te&&(l=t.stateNode=rp(t.type,t.pendingProps,ye.current),_t=t,on=!0,d=Ke,va(t.type)?(wu=d,Ke=un(l.firstChild)):Ke=d),jt(e,t,t.pendingProps.children,a),gl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Te&&((d=l=Ke)&&(l=ab(l,t.type,t.pendingProps,on),l!==null?(t.stateNode=l,_t=t,Ke=un(l.firstChild),on=!1,d=!0):d=!1),d||sa(t)),Na(t),d=t.type,h=t.pendingProps,y=e!==null?e.memoizedProps:null,l=h.children,pu(d,h)?l=null:y!==null&&pu(d,y)&&(t.flags|=32),t.memoizedState!==null&&(d=mc(e,t,vv,null,null,a),ei._currentValue=d),gl(e,t),jt(e,t,l,a),t.child;case 6:return e===null&&Te&&((e=a=Ke)&&(a=sb(a,t.pendingProps,on),a!==null?(t.stateNode=a,_t=t,Ke=null,e=!0):e=!1),e||sa(t)),null;case 13:return Jf(e,t,a);case 4:return wt(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Ha(t,null,l,a):jt(e,t,l,a),t.child;case 11:return qf(e,t,t.type,t.pendingProps,a);case 7:return jt(e,t,t.pendingProps,a),t.child;case 8:return jt(e,t,t.pendingProps.children,a),t.child;case 12:return jt(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,ra(t,t.type,l.value),jt(e,t,l.children,a),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,La(t),d=St(d),l=l(d),t.flags|=1,jt(e,t,l,a),t.child;case 14:return Bf(e,t,t.type,t.pendingProps,a);case 15:return Hf(e,t,t.type,t.pendingProps,a);case 19:return Xf(e,t,a);case 31:return Nv(e,t,a);case 22:return Pf(e,t,a,t.pendingProps);case 24:return La(t),l=St(ot),e===null?(d=sc(),d===null&&(d=He,h=nc(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=a),d=h),t.memoizedState={parent:l,cache:d},ic(t),ra(t,ot,d)):((e.lanes&a)!==0&&(lc(e,t),Mr(t,null,null,a),Dr()),d=e.memoizedState,h=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),ra(t,ot,l)):(l=h.cache,ra(t,ot,l),l!==d.cache&&tc(t,[ot],a,!0))),jt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function qn(e){e.flags|=4}function Pc(e,t,a,l,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(jm())e.flags|=8192;else throw Ba=tl,rc}else e.flags&=-16777217}function Wf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!fp(t))if(jm())e.flags|=8192;else throw Ba=tl,rc}function vl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?de():536870912,e.lanes|=t,Us|=t)}function Br(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function Tv(e,t,a){var l=t.pendingProps;switch(Xo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return Je(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Un(ot),We(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(_s(t)?qn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Wo())),Je(t),null;case 26:var d=t.type,h=t.memoizedState;return e===null?(qn(t),h!==null?(Je(t),Wf(t,h)):(Je(t),Pc(t,d,null,l,a))):h?h!==e.memoizedState?(qn(t),Je(t),Wf(t,h)):(Je(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&qn(t),Je(t),Pc(t,d,e,l,a)),null;case 27:if(es(t),a=ye.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&qn(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return Je(t),null}e=ee.current,_s(t)?Rh(t):(e=rp(d,l,a),t.stateNode=e,qn(t))}return Je(t),null;case 5:if(es(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&qn(t);else{if(!l){if(t.stateNode===null)throw Error(i(166));return Je(t),null}if(h=ee.current,_s(t))Rh(t);else{var y=Dl(ye.current);switch(h){case 1:h=y.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=y.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=y.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?h.multiple=!0:l.size&&(h.size=l.size);break;default:h=typeof l.is=="string"?y.createElement(d,{is:l.is}):y.createElement(d)}}h[Ve]=t,h[ft]=l;e:for(y=t.child;y!==null;){if(y.tag===5||y.tag===6)h.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}t.stateNode=h;e:switch(Et(h,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&qn(t)}}return Je(t),Pc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&qn(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(i(166));if(e=ye.current,_s(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,d=_t,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[Ve]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Jm(e.nodeValue,a)),e||sa(t,!0)}else e=Dl(e).createTextNode(l),e[Ve]=t,t.stateNode=e}return Je(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(l=_s(t),a!==null){if(e===null){if(!l)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[Ve]=t}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Je(t),e=!1}else a=Wo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Gt(t),t):(Gt(t),null);if((t.flags&128)!==0)throw Error(i(558))}return Je(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=_s(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Ve]=t}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Je(t),d=!1}else d=Wo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(Gt(t),t):(Gt(t),null)}return Gt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),vl(t,t.updateQueue),Je(t),null);case 4:return We(),e===null&&uu(t.stateNode.containerInfo),Je(t),null;case 10:return Un(t.type),Je(t),null;case 19:if(L(st),l=t.memoizedState,l===null)return Je(t),null;if(d=(t.flags&128)!==0,h=l.rendering,h===null)if(d)Br(l,!1);else{if(tt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=rl(e),h!==null){for(t.flags|=128,Br(l,!1),e=h.updateQueue,t.updateQueue=e,vl(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Eh(a,e),a=a.sibling;return W(st,st.current&1|2),Te&&Dn(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Tt()>Sl&&(t.flags|=128,d=!0,Br(l,!1),t.lanes=4194304)}else{if(!d)if(e=rl(h),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,vl(t,e),Br(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!Te)return Je(t),null}else 2*Tt()-l.renderingStartTime>Sl&&a!==536870912&&(t.flags|=128,d=!0,Br(l,!1),t.lanes=4194304);l.isBackwards?(h.sibling=t.child,t.child=h):(e=l.last,e!==null?e.sibling=h:t.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Tt(),e.sibling=null,a=st.current,W(st,d?a&1|2:a&1),Te&&Dn(t,l.treeForkCount),e):(Je(t),null);case 22:case 23:return Gt(t),dc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),a=t.updateQueue,a!==null&&vl(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&L($a),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Un(ot),Je(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Av(e,t){switch(Xo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Un(ot),We(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return es(t),null;case 31:if(t.memoizedState!==null){if(Gt(t),t.alternate===null)throw Error(i(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Gt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return L(st),null;case 4:return We(),null;case 10:return Un(t.type),null;case 22:case 23:return Gt(t),dc(),e!==null&&L($a),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Un(ot),null;case 25:return null;default:return null}}function Ff(e,t){switch(Xo(t),t.tag){case 3:Un(ot),We();break;case 26:case 27:case 5:es(t);break;case 4:We();break;case 31:t.memoizedState!==null&&Gt(t);break;case 13:Gt(t);break;case 19:L(st);break;case 10:Un(t.type);break;case 22:case 23:Gt(t),dc(),e!==null&&L($a);break;case 24:Un(ot)}}function Hr(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&e)===e){l=void 0;var h=a.create,y=a.inst;l=h(),y.destroy=l}a=a.next}while(a!==d)}}catch(b){ze(t,t.return,b)}}function da(e,t,a){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next;l=h;do{if((l.tag&e)===e){var y=l.inst,b=y.destroy;if(b!==void 0){y.destroy=void 0,d=t;var k=a,z=b;try{z()}catch(G){ze(d,k,G)}}}l=l.next}while(l!==h)}}catch(G){ze(t,t.return,G)}}function em(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Ih(t,a)}catch(l){ze(e,e.return,l)}}}function tm(e,t,a){a.props=Ia(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ze(e,t,l)}}function Pr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(d){ze(e,t,d)}}function En(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){ze(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ze(e,t,d)}else a.current=null}function nm(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){ze(e,e.return,d)}}function Ic(e,t,a){try{var l=e.stateNode;Zv(l,e.type,a,t),l[ft]=t}catch(d){ze(e,e.return,d)}}function am(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&va(e.type)||e.tag===4}function Gc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||am(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&va(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yc(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Rn));else if(l!==4&&(l===27&&va(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Yc(e,t,a),e=e.sibling;e!==null;)Yc(e,t,a),e=e.sibling}function bl(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&va(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(bl(e,t,a),e=e.sibling;e!==null;)bl(e,t,a),e=e.sibling}function sm(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);Et(t,l,a),t[Ve]=e,t[ft]=a}catch(h){ze(e,e.return,h)}}var Bn=!1,dt=!1,Vc=!1,rm=typeof WeakSet=="function"?WeakSet:Set,bt=null;function Rv(e,t){if(e=e.containerInfo,fu=Bl,e=gh(e),qo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var y=0,b=-1,k=-1,z=0,G=0,J=e,$=null;t:for(;;){for(var B;J!==a||d!==0&&J.nodeType!==3||(b=y+d),J!==h||l!==0&&J.nodeType!==3||(k=y+l),J.nodeType===3&&(y+=J.nodeValue.length),(B=J.firstChild)!==null;)$=J,J=B;for(;;){if(J===e)break t;if($===a&&++z===d&&(b=y),$===h&&++G===l&&(k=y),(B=J.nextSibling)!==null)break;J=$,$=J.parentNode}J=B}a=b===-1||k===-1?null:{start:b,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(mu={focusedElem:e,selectionRange:a},Bl=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){switch(t=bt,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)d=e[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,a=t,d=h.memoizedProps,h=h.memoizedState,l=a.stateNode;try{var ne=Ia(a.type,d);e=l.getSnapshotBeforeUpdate(ne,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(he){ze(a,a.return,he)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)yu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}}function im(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Pn(e,a),l&4&&Hr(5,a);break;case 1:if(Pn(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(y){ze(a,a.return,y)}else{var d=Ia(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){ze(a,a.return,y)}}l&64&&em(a),l&512&&Pr(a,a.return);break;case 3:if(Pn(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Ih(e,t)}catch(y){ze(a,a.return,y)}}break;case 27:t===null&&l&4&&sm(a);case 26:case 5:Pn(e,a),t===null&&l&4&&nm(a),l&512&&Pr(a,a.return);break;case 12:Pn(e,a);break;case 31:Pn(e,a),l&4&&cm(e,a);break;case 13:Pn(e,a),l&4&&um(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=qv.bind(null,a),rb(e,a))));break;case 22:if(l=a.memoizedState!==null||Bn,!l){t=t!==null&&t.memoizedState!==null||dt,d=Bn;var h=dt;Bn=l,(dt=t)&&!h?In(e,a,(a.subtreeFlags&8772)!==0):Pn(e,a),Bn=d,dt=h}break;case 30:break;default:Pn(e,a)}}function lm(e){var t=e.alternate;t!==null&&(e.alternate=null,lm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&_o(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qe=null,Ut=!1;function Hn(e,t,a){for(a=a.child;a!==null;)om(e,t,a),a=a.sibling}function om(e,t,a){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(Ta,a)}catch{}switch(a.tag){case 26:dt||En(a,t),Hn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:dt||En(a,t);var l=Qe,d=Ut;va(a.type)&&(Qe=a.stateNode,Ut=!1),Hn(e,t,a),Zr(a.stateNode),Qe=l,Ut=d;break;case 5:dt||En(a,t);case 6:if(l=Qe,d=Ut,Qe=null,Hn(e,t,a),Qe=l,Ut=d,Qe!==null)if(Ut)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(a.stateNode)}catch(h){ze(a,t,h)}else try{Qe.removeChild(a.stateNode)}catch(h){ze(a,t,h)}break;case 18:Qe!==null&&(Ut?(e=Qe,ep(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Is(e)):ep(Qe,a.stateNode));break;case 4:l=Qe,d=Ut,Qe=a.stateNode.containerInfo,Ut=!0,Hn(e,t,a),Qe=l,Ut=d;break;case 0:case 11:case 14:case 15:da(2,a,t),dt||da(4,a,t),Hn(e,t,a);break;case 1:dt||(En(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&tm(a,t,l)),Hn(e,t,a);break;case 21:Hn(e,t,a);break;case 22:dt=(l=dt)||a.memoizedState!==null,Hn(e,t,a),dt=l;break;default:Hn(e,t,a)}}function cm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Is(e)}catch(a){ze(t,t.return,a)}}}function um(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Is(e)}catch(a){ze(t,t.return,a)}}function Cv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new rm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new rm),t;default:throw Error(i(435,e.tag))}}function wl(e,t){var a=Cv(e);t.forEach(function(l){if(!a.has(l)){a.add(l);var d=Bv.bind(null,e,l);l.then(d,d)}})}function zt(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],h=e,y=t,b=y;e:for(;b!==null;){switch(b.tag){case 27:if(va(b.type)){Qe=b.stateNode,Ut=!1;break e}break;case 5:Qe=b.stateNode,Ut=!1;break e;case 3:case 4:Qe=b.stateNode.containerInfo,Ut=!0;break e}b=b.return}if(Qe===null)throw Error(i(160));om(h,y,d),Qe=null,Ut=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)dm(t,e),t=t.sibling}var mn=null;function dm(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:zt(t,e),Lt(e),l&4&&(da(3,e,e.return),Hr(3,e),da(5,e,e.return));break;case 1:zt(t,e),Lt(e),l&512&&(dt||a===null||En(a,a.return)),l&64&&Bn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=mn;if(zt(t,e),Lt(e),l&512&&(dt||a===null||En(a,a.return)),l&4){var h=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":h=d.getElementsByTagName("title")[0],(!h||h[pr]||h[Ve]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(l),d.head.insertBefore(h,d.querySelector("head > title"))),Et(h,l,a),h[Ve]=e,vt(h),l=h;break e;case"link":var y=dp("link","href",d).get(l+(a.href||""));if(y){for(var b=0;b<y.length;b++)if(h=y[b],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(b,1);break t}}h=d.createElement(l),Et(h,l,a),d.head.appendChild(h);break;case"meta":if(y=dp("meta","content",d).get(l+(a.content||""))){for(b=0;b<y.length;b++)if(h=y[b],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(b,1);break t}}h=d.createElement(l),Et(h,l,a),d.head.appendChild(h);break;default:throw Error(i(468,l))}h[Ve]=e,vt(h),l=h}e.stateNode=l}else hp(d,e.type,e.stateNode);else e.stateNode=up(d,l,e.memoizedProps);else h!==l?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,l===null?hp(d,e.type,e.stateNode):up(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Ic(e,e.memoizedProps,a.memoizedProps)}break;case 27:zt(t,e),Lt(e),l&512&&(dt||a===null||En(a,a.return)),a!==null&&l&4&&Ic(e,e.memoizedProps,a.memoizedProps);break;case 5:if(zt(t,e),Lt(e),l&512&&(dt||a===null||En(a,a.return)),e.flags&32){d=e.stateNode;try{hs(d,"")}catch(ne){ze(e,e.return,ne)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,Ic(e,d,a!==null?a.memoizedProps:d)),l&1024&&(Vc=!0);break;case 6:if(zt(t,e),Lt(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(ne){ze(e,e.return,ne)}}break;case 3:if(zl=null,d=mn,mn=Ml(t.containerInfo),zt(t,e),mn=d,Lt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Is(t.containerInfo)}catch(ne){ze(e,e.return,ne)}Vc&&(Vc=!1,hm(e));break;case 4:l=mn,mn=Ml(e.stateNode.containerInfo),zt(t,e),Lt(e),mn=l;break;case 12:zt(t,e),Lt(e);break;case 31:zt(t,e),Lt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,wl(e,l)));break;case 13:zt(t,e),Lt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(_l=Tt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,wl(e,l)));break;case 22:d=e.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,z=Bn,G=dt;if(Bn=z||d,dt=G||k,zt(t,e),dt=G,Bn=z,Lt(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(a===null||k||Bn||dt||Ga(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){k=a=t;try{if(h=k.stateNode,d)y=h.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{b=k.stateNode;var J=k.memoizedProps.style,$=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ne){ze(k,k.return,ne)}}}else if(t.tag===6){if(a===null){k=t;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(ne){ze(k,k.return,ne)}}}else if(t.tag===18){if(a===null){k=t;try{var B=k.stateNode;d?tp(B,!0):tp(k.stateNode,!1)}catch(ne){ze(k,k.return,ne)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,wl(e,a))));break;case 19:zt(t,e),Lt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,wl(e,l)));break;case 30:break;case 21:break;default:zt(t,e),Lt(e)}}function Lt(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(am(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,h=Gc(e);bl(e,h,d);break;case 5:var y=a.stateNode;a.flags&32&&(hs(y,""),a.flags&=-33);var b=Gc(e);bl(e,b,y);break;case 3:case 4:var k=a.stateNode.containerInfo,z=Gc(e);Yc(e,z,k);break;default:throw Error(i(161))}}catch(G){ze(e,e.return,G)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;hm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Pn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)im(e,t.alternate,t),t=t.sibling}function Ga(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:da(4,t,t.return),Ga(t);break;case 1:En(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&tm(t,t.return,a),Ga(t);break;case 27:Zr(t.stateNode);case 26:case 5:En(t,t.return),Ga(t);break;case 22:t.memoizedState===null&&Ga(t);break;case 30:Ga(t);break;default:Ga(t)}e=e.sibling}}function In(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,h=t,y=h.flags;switch(h.tag){case 0:case 11:case 15:In(d,h,a),Hr(4,h);break;case 1:if(In(d,h,a),l=h,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(z){ze(l,l.return,z)}if(l=h,d=l.updateQueue,d!==null){var b=l.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)Ph(k[d],b)}catch(z){ze(l,l.return,z)}}a&&y&64&&em(h),Pr(h,h.return);break;case 27:sm(h);case 26:case 5:In(d,h,a),a&&l===null&&y&4&&nm(h),Pr(h,h.return);break;case 12:In(d,h,a);break;case 31:In(d,h,a),a&&y&4&&cm(d,h);break;case 13:In(d,h,a),a&&y&4&&um(d,h);break;case 22:h.memoizedState===null&&In(d,h,a),Pr(h,h.return);break;case 30:break;default:In(d,h,a)}t=t.sibling}}function Kc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Tr(a))}function Jc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tr(e))}function pn(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fm(e,t,a,l),t=t.sibling}function fm(e,t,a,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:pn(e,t,a,l),d&2048&&Hr(9,t);break;case 1:pn(e,t,a,l);break;case 3:pn(e,t,a,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tr(e)));break;case 12:if(d&2048){pn(e,t,a,l),e=t.stateNode;try{var h=t.memoizedProps,y=h.id,b=h.onPostCommit;typeof b=="function"&&b(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){ze(t,t.return,k)}}else pn(e,t,a,l);break;case 31:pn(e,t,a,l);break;case 13:pn(e,t,a,l);break;case 23:break;case 22:h=t.stateNode,y=t.alternate,t.memoizedState!==null?h._visibility&2?pn(e,t,a,l):Ir(e,t):h._visibility&2?pn(e,t,a,l):(h._visibility|=2,Os(e,t,a,l,(t.subtreeFlags&10256)!==0||!1)),d&2048&&Kc(y,t);break;case 24:pn(e,t,a,l),d&2048&&Jc(t.alternate,t);break;default:pn(e,t,a,l)}}function Os(e,t,a,l,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,y=t,b=a,k=l,z=y.flags;switch(y.tag){case 0:case 11:case 15:Os(h,y,b,k,d),Hr(8,y);break;case 23:break;case 22:var G=y.stateNode;y.memoizedState!==null?G._visibility&2?Os(h,y,b,k,d):Ir(h,y):(G._visibility|=2,Os(h,y,b,k,d)),d&&z&2048&&Kc(y.alternate,y);break;case 24:Os(h,y,b,k,d),d&&z&2048&&Jc(y.alternate,y);break;default:Os(h,y,b,k,d)}t=t.sibling}}function Ir(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,d=l.flags;switch(l.tag){case 22:Ir(a,l),d&2048&&Kc(l.alternate,l);break;case 24:Ir(a,l),d&2048&&Jc(l.alternate,l);break;default:Ir(a,l)}t=t.sibling}}var Gr=8192;function Ds(e,t,a){if(e.subtreeFlags&Gr)for(e=e.child;e!==null;)mm(e,t,a),e=e.sibling}function mm(e,t,a){switch(e.tag){case 26:Ds(e,t,a),e.flags&Gr&&e.memoizedState!==null&&yb(a,mn,e.memoizedState,e.memoizedProps);break;case 5:Ds(e,t,a);break;case 3:case 4:var l=mn;mn=Ml(e.stateNode.containerInfo),Ds(e,t,a),mn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Gr,Gr=16777216,Ds(e,t,a),Gr=l):Ds(e,t,a));break;default:Ds(e,t,a)}}function pm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Yr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];bt=l,ym(l,e)}pm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)gm(e),e=e.sibling}function gm(e){switch(e.tag){case 0:case 11:case 15:Yr(e),e.flags&2048&&da(9,e,e.return);break;case 3:Yr(e);break;case 12:Yr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,xl(e)):Yr(e);break;default:Yr(e)}}function xl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];bt=l,ym(l,e)}pm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:da(8,t,t.return),xl(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,xl(t));break;default:xl(t)}e=e.sibling}}function ym(e,t){for(;bt!==null;){var a=bt;switch(a.tag){case 0:case 11:case 15:da(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Tr(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,bt=l;else e:for(a=e;bt!==null;){l=bt;var d=l.sibling,h=l.return;if(lm(l),l===a){bt=null;break e}if(d!==null){d.return=h,bt=d;break e}bt=h}}}var Ov={getCacheForType:function(e){var t=St(ot),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return St(ot).controller.signal}},Dv=typeof WeakMap=="function"?WeakMap:Map,Oe=0,He=null,Se=null,Ee=0,Ue=0,Yt=null,ha=!1,Ms=!1,Qc=!1,Gn=0,tt=0,fa=0,Ya=0,Xc=0,Vt=0,Us=0,Vr=null,$t=null,Zc=!1,_l=0,vm=0,Sl=1/0,jl=null,ma=null,mt=0,pa=null,zs=null,Yn=0,Wc=0,Fc=null,bm=null,Kr=0,eu=null;function Kt(){return(Oe&2)!==0&&Ee!==0?Ee&-Ee:N.T!==null?iu():mr()}function wm(){if(Vt===0)if((Ee&536870912)===0||Te){var e=rs;rs<<=1,(rs&3932160)===0&&(rs=262144),Vt=e}else Vt=536870912;return e=It.current,e!==null&&(e.flags|=32),Vt}function qt(e,t,a){(e===He&&(Ue===2||Ue===9)||e.cancelPendingCommit!==null)&&(Ls(e,0),ga(e,Ee,Vt,!1)),be(e,a),((Oe&2)===0||e!==He)&&(e===He&&((Oe&2)===0&&(Ya|=a),tt===4&&ga(e,Ee,Vt,!1)),Nn(e))}function xm(e,t,a){if((Oe&6)!==0)throw Error(i(327));var l=!a&&(t&127)===0&&(t&e.expiredLanes)===0||X(e,t),d=l?zv(e,t):nu(e,t,!0),h=l;do{if(d===0){Ms&&!l&&ga(e,t,0,!1);break}else{if(a=e.current.alternate,h&&!Mv(a)){d=nu(e,t,!1),h=!1;continue}if(d===2){if(h=t,e.errorRecoveryDisabledLanes&h)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var b=e;d=Vr;var k=b.current.memoizedState.isDehydrated;if(k&&(Ls(b,y).flags|=256),y=nu(b,y,!1),y!==2){if(Qc&&!k){b.errorRecoveryDisabledLanes|=h,Ya|=h,d=4;break e}h=$t,$t=d,h!==null&&($t===null?$t=h:$t.push.apply($t,h))}d=y}if(h=!1,d!==2)continue}}if(d===1){Ls(e,0),ga(e,t,0,!0);break}e:{switch(l=e,h=d,h){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:ga(l,t,Vt,!ha);break e;case 2:$t=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(d=_l+300-Tt(),10<d)){if(ga(l,t,Vt,!ha),M(l,0,!0)!==0)break e;Yn=t,l.timeoutHandle=Wm(_m.bind(null,l,a,$t,jl,Zc,t,Vt,Ya,Us,ha,h,"Throttled",-0,0),d);break e}_m(l,a,$t,jl,Zc,t,Vt,Ya,Us,ha,h,null,-0,0)}}break}while(!0);Nn(e)}function _m(e,t,a,l,d,h,y,b,k,z,G,J,$,B){if(e.timeoutHandle=-1,J=t.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rn},mm(t,h,J);var ne=(h&62914560)===h?_l-Tt():(h&4194048)===h?vm-Tt():0;if(ne=vb(J,ne),ne!==null){Yn=h,e.cancelPendingCommit=ne(Rm.bind(null,e,t,h,a,l,d,y,b,k,G,J,null,$,B)),ga(e,h,y,!z);return}}Rm(e,t,h,a,l,d,y,b,k)}function Mv(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],h=d.getSnapshot;d=d.value;try{if(!Ht(h(),d))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ga(e,t,a,l){t&=~Xc,t&=~Ya,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var h=31-xt(d),y=1<<h;l[h]=-1,d&=~y}a!==0&&Ye(e,a,t)}function El(){return(Oe&6)===0?(Jr(0),!1):!0}function tu(){if(Se!==null){if(Ue===0)var e=Se.return;else e=Se,Mn=za=null,yc(e),ks=null,Rr=0,e=Se;for(;e!==null;)Ff(e.alternate,e),e=e.return;Se=null}}function Ls(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,eb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Yn=0,tu(),He=e,Se=a=On(e.current,null),Ee=t,Ue=0,Yt=null,ha=!1,Ms=X(e,t),Qc=!1,Us=Vt=Xc=Ya=fa=tt=0,$t=Vr=null,Zc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-xt(l),h=1<<d;t|=e[d],l&=~h}return Gn=t,Vi(),a}function Sm(e,t){ve=null,N.H=$r,t===Ns||t===el?(t=$h(),Ue=3):t===rc?(t=$h(),Ue=4):Ue=t===Dc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Yt=t,Se===null&&(tt=1,ml(e,sn(t,e.current)))}function jm(){var e=It.current;return e===null?!0:(Ee&4194048)===Ee?cn===null:(Ee&62914560)===Ee||(Ee&536870912)!==0?e===cn:!1}function Em(){var e=N.H;return N.H=$r,e===null?$r:e}function Nm(){var e=N.A;return N.A=Ov,e}function Nl(){tt=4,ha||(Ee&4194048)!==Ee&&It.current!==null||(Ms=!0),(fa&134217727)===0&&(Ya&134217727)===0||He===null||ga(He,Ee,Vt,!1)}function nu(e,t,a){var l=Oe;Oe|=2;var d=Em(),h=Nm();(He!==e||Ee!==t)&&(jl=null,Ls(e,t)),t=!1;var y=tt;e:do try{if(Ue!==0&&Se!==null){var b=Se,k=Yt;switch(Ue){case 8:tu(),y=6;break e;case 3:case 2:case 9:case 6:It.current===null&&(t=!0);var z=Ue;if(Ue=0,Yt=null,$s(e,b,k,z),a&&Ms){y=0;break e}break;default:z=Ue,Ue=0,Yt=null,$s(e,b,k,z)}}Uv(),y=tt;break}catch(G){Sm(e,G)}while(!0);return t&&e.shellSuspendCounter++,Mn=za=null,Oe=l,N.H=d,N.A=h,Se===null&&(He=null,Ee=0,Vi()),y}function Uv(){for(;Se!==null;)km(Se)}function zv(e,t){var a=Oe;Oe|=2;var l=Em(),d=Nm();He!==e||Ee!==t?(jl=null,Sl=Tt()+500,Ls(e,t)):Ms=X(e,t);e:do try{if(Ue!==0&&Se!==null){t=Se;var h=Yt;t:switch(Ue){case 1:Ue=0,Yt=null,$s(e,t,h,1);break;case 2:case 9:if(zh(h)){Ue=0,Yt=null,Tm(t);break}t=function(){Ue!==2&&Ue!==9||He!==e||(Ue=7),Nn(e)},h.then(t,t);break e;case 3:Ue=7;break e;case 4:Ue=5;break e;case 7:zh(h)?(Ue=0,Yt=null,Tm(t)):(Ue=0,Yt=null,$s(e,t,h,7));break;case 5:var y=null;switch(Se.tag){case 26:y=Se.memoizedState;case 5:case 27:var b=Se;if(y?fp(y):b.stateNode.complete){Ue=0,Yt=null;var k=b.sibling;if(k!==null)Se=k;else{var z=b.return;z!==null?(Se=z,kl(z)):Se=null}break t}}Ue=0,Yt=null,$s(e,t,h,5);break;case 6:Ue=0,Yt=null,$s(e,t,h,6);break;case 8:tu(),tt=6;break e;default:throw Error(i(462))}}Lv();break}catch(G){Sm(e,G)}while(!0);return Mn=za=null,N.H=l,N.A=d,Oe=a,Se!==null?0:(He=null,Ee=0,Vi(),tt)}function Lv(){for(;Se!==null&&!Ri();)km(Se)}function km(e){var t=Zf(e.alternate,e,Gn);e.memoizedProps=e.pendingProps,t===null?kl(e):Se=t}function Tm(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Yf(a,t,t.pendingProps,t.type,void 0,Ee);break;case 11:t=Yf(a,t,t.pendingProps,t.type.render,t.ref,Ee);break;case 5:yc(t);default:Ff(a,t),t=Se=Eh(t,Gn),t=Zf(a,t,Gn)}e.memoizedProps=e.pendingProps,t===null?kl(e):Se=t}function $s(e,t,a,l){Mn=za=null,yc(t),ks=null,Rr=0;var d=t.return;try{if(Ev(e,d,t,a,Ee)){tt=1,ml(e,sn(a,e.current)),Se=null;return}}catch(h){if(d!==null)throw Se=d,h;tt=1,ml(e,sn(a,e.current)),Se=null;return}t.flags&32768?(Te||l===1?e=!0:Ms||(Ee&536870912)!==0?e=!1:(ha=e=!0,(l===2||l===9||l===3||l===6)&&(l=It.current,l!==null&&l.tag===13&&(l.flags|=16384))),Am(t,e)):kl(t)}function kl(e){var t=e;do{if((t.flags&32768)!==0){Am(t,ha);return}e=t.return;var a=Tv(t.alternate,t,Gn);if(a!==null){Se=a;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);tt===0&&(tt=5)}function Am(e,t){do{var a=Av(e.alternate,e);if(a!==null){a.flags&=32767,Se=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Se=e;return}Se=e=a}while(e!==null);tt=6,Se=null}function Rm(e,t,a,l,d,h,y,b,k){e.cancelPendingCommit=null;do Tl();while(mt!==0);if((Oe&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(h=t.lanes|t.childLanes,h|=Go,De(e,a,h,y,b,k),e===He&&(Se=He=null,Ee=0),zs=t,pa=e,Yn=a,Wc=h,Fc=d,bm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Hv(as,function(){return Um(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=N.T,N.T=null,d=V.p,V.p=2,y=Oe,Oe|=4;try{Rv(e,t,a)}finally{Oe=y,V.p=d,N.T=l}}mt=1,Cm(),Om(),Dm()}}function Cm(){if(mt===1){mt=0;var e=pa,t=zs,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=N.T,N.T=null;var l=V.p;V.p=2;var d=Oe;Oe|=4;try{dm(t,e);var h=mu,y=gh(e.containerInfo),b=h.focusedElem,k=h.selectionRange;if(y!==b&&b&&b.ownerDocument&&ph(b.ownerDocument.documentElement,b)){if(k!==null&&qo(b)){var z=k.start,G=k.end;if(G===void 0&&(G=z),"selectionStart"in b)b.selectionStart=z,b.selectionEnd=Math.min(G,b.value.length);else{var J=b.ownerDocument||document,$=J&&J.defaultView||window;if($.getSelection){var B=$.getSelection(),ne=b.textContent.length,he=Math.min(k.start,ne),Be=k.end===void 0?he:Math.min(k.end,ne);!B.extend&&he>Be&&(y=Be,Be=he,he=y);var O=mh(b,he),A=mh(b,Be);if(O&&A&&(B.rangeCount!==1||B.anchorNode!==O.node||B.anchorOffset!==O.offset||B.focusNode!==A.node||B.focusOffset!==A.offset)){var U=J.createRange();U.setStart(O.node,O.offset),B.removeAllRanges(),he>Be?(B.addRange(U),B.extend(A.node,A.offset)):(U.setEnd(A.node,A.offset),B.addRange(U))}}}}for(J=[],B=b;B=B.parentNode;)B.nodeType===1&&J.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var Y=J[b];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Bl=!!fu,mu=fu=null}finally{Oe=d,V.p=l,N.T=a}}e.current=t,mt=2}}function Om(){if(mt===2){mt=0;var e=pa,t=zs,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=N.T,N.T=null;var l=V.p;V.p=2;var d=Oe;Oe|=4;try{im(e,t.alternate,t)}finally{Oe=d,V.p=l,N.T=a}}mt=3}}function Dm(){if(mt===4||mt===3){mt=0,dr();var e=pa,t=zs,a=Yn,l=bm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?mt=5:(mt=0,zs=pa=null,Mm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(ma=null),Bt(a),t=t.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(Ta,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=N.T,d=V.p,V.p=2,N.T=null;try{for(var h=e.onRecoverableError,y=0;y<l.length;y++){var b=l[y];h(b.value,{componentStack:b.stack})}}finally{N.T=t,V.p=d}}(Yn&3)!==0&&Tl(),Nn(e),d=e.pendingLanes,(a&261930)!==0&&(d&42)!==0?e===eu?Kr++:(Kr=0,eu=e):Kr=0,Jr(0)}}function Mm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Tr(t)))}function Tl(){return Cm(),Om(),Dm(),Um()}function Um(){if(mt!==5)return!1;var e=pa,t=Wc;Wc=0;var a=Bt(Yn),l=N.T,d=V.p;try{V.p=32>a?32:a,N.T=null,a=Fc,Fc=null;var h=pa,y=Yn;if(mt=0,zs=pa=null,Yn=0,(Oe&6)!==0)throw Error(i(331));var b=Oe;if(Oe|=4,gm(h.current),fm(h,h.current,y,a),Oe=b,Jr(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(Ta,h)}catch{}return!0}finally{V.p=d,N.T=l,Mm(e,t)}}function zm(e,t,a){t=sn(a,t),t=Oc(e.stateNode,t,2),e=oa(e,t,2),e!==null&&(be(e,2),Nn(e))}function ze(e,t,a){if(e.tag===3)zm(e,e,a);else for(;t!==null;){if(t.tag===3){zm(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ma===null||!ma.has(l))){e=sn(a,e),a=Lf(2),l=oa(t,a,2),l!==null&&($f(a,l,t,e),be(l,2),Nn(l));break}}t=t.return}}function au(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Dv;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(a)||(Qc=!0,d.add(a),e=$v.bind(null,e,t,a),t.then(e,e))}function $v(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,He===e&&(Ee&a)===a&&(tt===4||tt===3&&(Ee&62914560)===Ee&&300>Tt()-_l?(Oe&2)===0&&Ls(e,0):Xc|=a,Us===Ee&&(Us=0)),Nn(e)}function Lm(e,t){t===0&&(t=de()),e=Da(e,t),e!==null&&(be(e,t),Nn(e))}function qv(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Lm(e,a)}function Bv(e,t){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(t),Lm(e,a)}function Hv(e,t){return ur(e,t)}var Al=null,qs=null,su=!1,Rl=!1,ru=!1,ya=0;function Nn(e){e!==qs&&e.next===null&&(qs===null?Al=qs=e:qs=qs.next=e),Rl=!0,su||(su=!0,Iv())}function Jr(e,t){if(!ru&&Rl){ru=!0;do for(var a=!1,l=Al;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var h=0;else{var y=l.suspendedLanes,b=l.pingedLanes;h=(1<<31-xt(42|e)+1)-1,h&=d&~(y&~b),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,Hm(l,h))}else h=Ee,h=M(l,l===He?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||X(l,h)||(a=!0,Hm(l,h));l=l.next}while(a);ru=!1}}function Pv(){$m()}function $m(){Rl=su=!1;var e=0;ya!==0&&Fv()&&(e=ya);for(var t=Tt(),a=null,l=Al;l!==null;){var d=l.next,h=qm(l,t);h===0?(l.next=null,a===null?Al=d:a.next=d,d===null&&(qs=a)):(a=l,(e!==0||(h&3)!==0)&&(Rl=!0)),l=d}mt!==0&&mt!==5||Jr(e),ya!==0&&(ya=0)}function qm(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var y=31-xt(h),b=1<<y,k=d[y];k===-1?((b&a)===0||(b&l)!==0)&&(d[y]=ae(b,t)):k<=t&&(e.expiredLanes|=b),h&=~b}if(t=He,a=Ee,a=M(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(Ue===2||Ue===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Rt(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||X(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&Rt(l),Bt(a)){case 2:case 8:a=Oi;break;case 32:a=as;break;case 268435456:a=Di;break;default:a=as}return l=Bm.bind(null,e),a=ur(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&Rt(l),e.callbackPriority=2,e.callbackNode=null,2}function Bm(e,t){if(mt!==0&&mt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Tl()&&e.callbackNode!==a)return null;var l=Ee;return l=M(e,e===He?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(xm(e,l,t),qm(e,Tt()),e.callbackNode!=null&&e.callbackNode===a?Bm.bind(null,e):null)}function Hm(e,t){if(Tl())return null;xm(e,t,!0)}function Iv(){tb(function(){(Oe&6)!==0?ur(ns,Pv):$m()})}function iu(){if(ya===0){var e=js;e===0&&(e=ss,ss<<=1,(ss&261888)===0&&(ss=256)),ya=e}return ya}function Pm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:$i(""+e)}function Im(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Gv(e,t,a,l,d){if(t==="submit"&&a&&a.stateNode===d){var h=Pm((d[ft]||null).action),y=l.submitter;y&&(t=(t=y[ft]||null)?Pm(t.formAction):y.getAttribute("formAction"),t!==null&&(h=t,y=null));var b=new Pi("action","action",null,l,d);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ya!==0){var k=y?Im(d,y):new FormData(d);Nc(a,{pending:!0,data:k,method:d.method,action:h},null,k)}}else typeof h=="function"&&(b.preventDefault(),k=y?Im(d,y):new FormData(d),Nc(a,{pending:!0,data:k,method:d.method,action:h},h,k))},currentTarget:d}]})}}for(var lu=0;lu<Io.length;lu++){var ou=Io[lu],Yv=ou.toLowerCase(),Vv=ou[0].toUpperCase()+ou.slice(1);fn(Yv,"on"+Vv)}fn(bh,"onAnimationEnd"),fn(wh,"onAnimationIteration"),fn(xh,"onAnimationStart"),fn("dblclick","onDoubleClick"),fn("focusin","onFocus"),fn("focusout","onBlur"),fn(ov,"onTransitionRun"),fn(cv,"onTransitionStart"),fn(uv,"onTransitionCancel"),fn(_h,"onTransitionEnd"),us("onMouseEnter",["mouseout","mouseover"]),us("onMouseLeave",["mouseout","mouseover"]),us("onPointerEnter",["pointerout","pointerover"]),us("onPointerLeave",["pointerout","pointerover"]),Aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Aa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qr));function Gm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],d=l.event;l=l.listeners;e:{var h=void 0;if(t)for(var y=l.length-1;0<=y;y--){var b=l[y],k=b.instance,z=b.currentTarget;if(b=b.listener,k!==h&&d.isPropagationStopped())break e;h=b,d.currentTarget=z;try{h(d)}catch(G){Yi(G)}d.currentTarget=null,h=k}else for(y=0;y<l.length;y++){if(b=l[y],k=b.instance,z=b.currentTarget,b=b.listener,k!==h&&d.isPropagationStopped())break e;h=b,d.currentTarget=z;try{h(d)}catch(G){Yi(G)}d.currentTarget=null,h=k}}}}function je(e,t){var a=t[xo];a===void 0&&(a=t[xo]=new Set);var l=e+"__bubble";a.has(l)||(Ym(t,e,2,!1),a.add(l))}function cu(e,t,a){var l=0;t&&(l|=4),Ym(a,e,l,t)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function uu(e){if(!e[Cl]){e[Cl]=!0,Ld.forEach(function(a){a!=="selectionchange"&&(Kv.has(a)||cu(a,!1,e),cu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cl]||(t[Cl]=!0,cu("selectionchange",!1,t))}}function Ym(e,t,a,l){switch(wp(t)){case 2:var d=xb;break;case 8:d=_b;break;default:d=Eu}a=d.bind(null,t,a,e),d=void 0,!Ro||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,a,{capture:!0,passive:d}):e.addEventListener(t,a,!0):d!==void 0?e.addEventListener(t,a,{passive:d}):e.addEventListener(t,a,!1)}function du(e,t,a,l,d){var h=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var b=l.stateNode.containerInfo;if(b===d)break;if(y===4)for(y=l.return;y!==null;){var k=y.tag;if((k===3||k===4)&&y.stateNode.containerInfo===d)return;y=y.return}for(;b!==null;){if(y=ls(b),y===null)return;if(k=y.tag,k===5||k===6||k===26||k===27){l=h=y;continue e}b=b.parentNode}}l=l.return}Qd(function(){var z=h,G=To(a),J=[];e:{var $=Sh.get(e);if($!==void 0){var B=Pi,ne=e;switch(e){case"keypress":if(Bi(a)===0)break e;case"keydown":case"keyup":B=By;break;case"focusin":ne="focus",B=Mo;break;case"focusout":ne="blur",B=Mo;break;case"beforeblur":case"afterblur":B=Mo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Ty;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=Iy;break;case bh:case wh:case xh:B=Cy;break;case _h:B=Yy;break;case"scroll":case"scrollend":B=Ny;break;case"wheel":B=Ky;break;case"copy":case"cut":case"paste":B=Dy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=eh;break;case"toggle":case"beforetoggle":B=Qy}var he=(t&4)!==0,Be=!he&&(e==="scroll"||e==="scrollend"),O=he?$!==null?$+"Capture":null:$;he=[];for(var A=z,U;A!==null;){var Y=A;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||O===null||(Y=yr(A,O),Y!=null&&he.push(Xr(A,Y,U))),Be)break;A=A.return}0<he.length&&($=new B($,ne,null,a,G),J.push({event:$,listeners:he}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",$&&a!==ko&&(ne=a.relatedTarget||a.fromElement)&&(ls(ne)||ne[en]))break e;if((B||$)&&($=G.window===G?G:($=G.ownerDocument)?$.defaultView||$.parentWindow:window,B?(ne=a.relatedTarget||a.toElement,B=z,ne=ne?ls(ne):null,ne!==null&&(Be=u(ne),he=ne.tag,ne!==Be||he!==5&&he!==27&&he!==6)&&(ne=null)):(B=null,ne=z),B!==ne)){if(he=Wd,Y="onMouseLeave",O="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(he=eh,Y="onPointerLeave",O="onPointerEnter",A="pointer"),Be=B==null?$:gr(B),U=ne==null?$:gr(ne),$=new he(Y,A+"leave",B,a,G),$.target=Be,$.relatedTarget=U,Y=null,ls(G)===z&&(he=new he(O,A+"enter",ne,a,G),he.target=U,he.relatedTarget=Be,Y=he),Be=Y,B&&ne)t:{for(he=Jv,O=B,A=ne,U=0,Y=O;Y;Y=he(Y))U++;Y=0;for(var ce=A;ce;ce=he(ce))Y++;for(;0<U-Y;)O=he(O),U--;for(;0<Y-U;)A=he(A),Y--;for(;U--;){if(O===A||A!==null&&O===A.alternate){he=O;break t}O=he(O),A=he(A)}he=null}else he=null;B!==null&&Vm(J,$,B,he,!1),ne!==null&&Be!==null&&Vm(J,Be,ne,he,!0)}}e:{if($=z?gr(z):window,B=$.nodeName&&$.nodeName.toLowerCase(),B==="select"||B==="input"&&$.type==="file")var Ae=oh;else if(ih($))if(ch)Ae=rv;else{Ae=av;var se=nv}else B=$.nodeName,!B||B.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?z&&No(z.elementType)&&(Ae=oh):Ae=sv;if(Ae&&(Ae=Ae(e,z))){lh(J,Ae,a,G);break e}se&&se(e,$,z),e==="focusout"&&z&&$.type==="number"&&z.memoizedProps.value!=null&&Eo($,"number",$.value)}switch(se=z?gr(z):window,e){case"focusin":(ih(se)||se.contentEditable==="true")&&(gs=se,Bo=z,Er=null);break;case"focusout":Er=Bo=gs=null;break;case"mousedown":Ho=!0;break;case"contextmenu":case"mouseup":case"dragend":Ho=!1,yh(J,a,G);break;case"selectionchange":if(lv)break;case"keydown":case"keyup":yh(J,a,G)}var we;if(zo)e:{switch(e){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else ps?sh(e,a)&&(Ne="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ne="onCompositionStart");Ne&&(th&&a.locale!=="ko"&&(ps||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&ps&&(we=Xd()):(ta=G,Co="value"in ta?ta.value:ta.textContent,ps=!0)),se=Ol(z,Ne),0<se.length&&(Ne=new Fd(Ne,e,null,a,G),J.push({event:Ne,listeners:se}),we?Ne.data=we:(we=rh(a),we!==null&&(Ne.data=we)))),(we=Zy?Wy(e,a):Fy(e,a))&&(Ne=Ol(z,"onBeforeInput"),0<Ne.length&&(se=new Fd("onBeforeInput","beforeinput",null,a,G),J.push({event:se,listeners:Ne}),se.data=we)),Gv(J,e,z,a,G)}Gm(J,t)})}function Xr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ol(e,t){for(var a=t+"Capture",l=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=yr(e,a),d!=null&&l.unshift(Xr(e,d,h)),d=yr(e,t),d!=null&&l.push(Xr(e,d,h))),e.tag===3)return l;e=e.return}return[]}function Jv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Vm(e,t,a,l,d){for(var h=t._reactName,y=[];a!==null&&a!==l;){var b=a,k=b.alternate,z=b.stateNode;if(b=b.tag,k!==null&&k===l)break;b!==5&&b!==26&&b!==27||z===null||(k=z,d?(z=yr(a,h),z!=null&&y.unshift(Xr(a,z,k))):d||(z=yr(a,h),z!=null&&y.push(Xr(a,z,k)))),a=a.return}y.length!==0&&e.push({event:t,listeners:y})}var Qv=/\r\n?/g,Xv=/\u0000|\uFFFD/g;function Km(e){return(typeof e=="string"?e:""+e).replace(Qv,`
`).replace(Xv,"")}function Jm(e,t){return t=Km(t),Km(e)===t}function qe(e,t,a,l,d,h){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||hs(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&hs(e,""+l);break;case"className":zi(e,"class",l);break;case"tabIndex":zi(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":zi(e,a,l);break;case"style":Kd(e,l,h);break;case"data":if(t!=="object"){zi(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=$i(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(t!=="input"&&qe(e,t,"name",d.name,d,null),qe(e,t,"formEncType",d.formEncType,d,null),qe(e,t,"formMethod",d.formMethod,d,null),qe(e,t,"formTarget",d.formTarget,d,null)):(qe(e,t,"encType",d.encType,d,null),qe(e,t,"method",d.method,d,null),qe(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=$i(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Rn);break;case"onScroll":l!=null&&je("scroll",e);break;case"onScrollEnd":l!=null&&je("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=$i(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":je("beforetoggle",e),je("toggle",e),Ui(e,"popover",l);break;case"xlinkActuate":An(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":An(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":An(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":An(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":An(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":An(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":An(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":An(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":An(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ui(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=jy.get(a)||a,Ui(e,a,l))}}function hu(e,t,a,l,d,h){switch(a){case"style":Kd(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof l=="string"?hs(e,l):(typeof l=="number"||typeof l=="bigint")&&hs(e,""+l);break;case"onScroll":l!=null&&je("scroll",e);break;case"onScrollEnd":l!=null&&je("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Rn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$d.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),t=a.slice(2,d?a.length-7:void 0),h=e[ft]||null,h=h!=null?h[a]:null,typeof h=="function"&&e.removeEventListener(t,h,d),typeof l=="function")){typeof h!="function"&&h!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,d);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Ui(e,a,l)}}}function Et(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",e),je("load",e);var l=!1,d=!1,h;for(h in a)if(a.hasOwnProperty(h)){var y=a[h];if(y!=null)switch(h){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:qe(e,t,h,y,a,null)}}d&&qe(e,t,"srcSet",a.srcSet,a,null),l&&qe(e,t,"src",a.src,a,null);return;case"input":je("invalid",e);var b=h=y=d=null,k=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":d=G;break;case"type":y=G;break;case"checked":k=G;break;case"defaultChecked":z=G;break;case"value":h=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,t));break;default:qe(e,t,l,G,a,null)}}Id(e,h,b,k,z,y,d,!1);return;case"select":je("invalid",e),l=y=h=null;for(d in a)if(a.hasOwnProperty(d)&&(b=a[d],b!=null))switch(d){case"value":h=b;break;case"defaultValue":y=b;break;case"multiple":l=b;default:qe(e,t,d,b,a,null)}t=h,a=y,e.multiple=!!l,t!=null?ds(e,!!l,t,!1):a!=null&&ds(e,!!l,a,!0);return;case"textarea":je("invalid",e),h=d=l=null;for(y in a)if(a.hasOwnProperty(y)&&(b=a[y],b!=null))switch(y){case"value":l=b;break;case"defaultValue":d=b;break;case"children":h=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:qe(e,t,y,b,a,null)}Yd(e,l,d,h);return;case"option":for(k in a)a.hasOwnProperty(k)&&(l=a[k],l!=null)&&(k==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":qe(e,t,k,l,a,null));return;case"dialog":je("beforetoggle",e),je("toggle",e),je("cancel",e),je("close",e);break;case"iframe":case"object":je("load",e);break;case"video":case"audio":for(l=0;l<Qr.length;l++)je(Qr[l],e);break;case"image":je("error",e),je("load",e);break;case"details":je("toggle",e);break;case"embed":case"source":case"link":je("error",e),je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:qe(e,t,z,l,a,null)}return;default:if(No(t)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&hu(e,t,G,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&qe(e,t,b,l,a,null))}function Zv(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,y=null,b=null,k=null,z=null,G=null;for(B in a){var J=a[B];if(a.hasOwnProperty(B)&&J!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":k=J;default:l.hasOwnProperty(B)||qe(e,t,B,null,l,J)}}for(var $ in l){var B=l[$];if(J=a[$],l.hasOwnProperty($)&&(B!=null||J!=null))switch($){case"type":h=B;break;case"name":d=B;break;case"checked":z=B;break;case"defaultChecked":G=B;break;case"value":y=B;break;case"defaultValue":b=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(137,t));break;default:B!==J&&qe(e,t,$,B,l,J)}}jo(e,y,b,k,z,G,h,d);return;case"select":B=y=b=$=null;for(h in a)if(k=a[h],a.hasOwnProperty(h)&&k!=null)switch(h){case"value":break;case"multiple":B=k;default:l.hasOwnProperty(h)||qe(e,t,h,null,l,k)}for(d in l)if(h=l[d],k=a[d],l.hasOwnProperty(d)&&(h!=null||k!=null))switch(d){case"value":$=h;break;case"defaultValue":b=h;break;case"multiple":y=h;default:h!==k&&qe(e,t,d,h,l,k)}t=b,a=y,l=B,$!=null?ds(e,!!a,$,!1):!!l!=!!a&&(t!=null?ds(e,!!a,t,!0):ds(e,!!a,a?[]:"",!1));return;case"textarea":B=$=null;for(b in a)if(d=a[b],a.hasOwnProperty(b)&&d!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:qe(e,t,b,null,l,d)}for(y in l)if(d=l[y],h=a[y],l.hasOwnProperty(y)&&(d!=null||h!=null))switch(y){case"value":$=d;break;case"defaultValue":B=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==h&&qe(e,t,y,d,l,h)}Gd(e,$,B);return;case"option":for(var ne in a)$=a[ne],a.hasOwnProperty(ne)&&$!=null&&!l.hasOwnProperty(ne)&&(ne==="selected"?e.selected=!1:qe(e,t,ne,null,l,$));for(k in l)$=l[k],B=a[k],l.hasOwnProperty(k)&&$!==B&&($!=null||B!=null)&&(k==="selected"?e.selected=$&&typeof $!="function"&&typeof $!="symbol":qe(e,t,k,$,l,B));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in a)$=a[he],a.hasOwnProperty(he)&&$!=null&&!l.hasOwnProperty(he)&&qe(e,t,he,null,l,$);for(z in l)if($=l[z],B=a[z],l.hasOwnProperty(z)&&$!==B&&($!=null||B!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,t));break;default:qe(e,t,z,$,l,B)}return;default:if(No(t)){for(var Be in a)$=a[Be],a.hasOwnProperty(Be)&&$!==void 0&&!l.hasOwnProperty(Be)&&hu(e,t,Be,void 0,l,$);for(G in l)$=l[G],B=a[G],!l.hasOwnProperty(G)||$===B||$===void 0&&B===void 0||hu(e,t,G,$,l,B);return}}for(var O in a)$=a[O],a.hasOwnProperty(O)&&$!=null&&!l.hasOwnProperty(O)&&qe(e,t,O,null,l,$);for(J in l)$=l[J],B=a[J],!l.hasOwnProperty(J)||$===B||$==null&&B==null||qe(e,t,J,$,l,B)}function Qm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Wv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],h=d.transferSize,y=d.initiatorType,b=d.duration;if(h&&b&&Qm(y)){for(y=0,b=d.responseEnd,l+=1;l<a.length;l++){var k=a[l],z=k.startTime;if(z>b)break;var G=k.transferSize,J=k.initiatorType;G&&Qm(J)&&(k=k.responseEnd,y+=G*(k<b?1:(b-z)/(k-z)))}if(--l,t+=8*(h+y)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var fu=null,mu=null;function Dl(e){return e.nodeType===9?e:e.ownerDocument}function Xm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function pu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gu=null;function Fv(){var e=window.event;return e&&e.type==="popstate"?e===gu?!1:(gu=e,!0):(gu=null,!1)}var Wm=typeof setTimeout=="function"?setTimeout:void 0,eb=typeof clearTimeout=="function"?clearTimeout:void 0,Fm=typeof Promise=="function"?Promise:void 0,tb=typeof queueMicrotask=="function"?queueMicrotask:typeof Fm<"u"?function(e){return Fm.resolve(null).then(e).catch(nb)}:Wm;function nb(e){setTimeout(function(){throw e})}function va(e){return e==="head"}function ep(e,t){var a=t,l=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(d),Is(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Zr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Zr(a);for(var h=a.firstChild;h;){var y=h.nextSibling,b=h.nodeName;h[pr]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=y}}else a==="body"&&Zr(e.ownerDocument.body);a=d}while(a);Is(t)}function tp(e,t){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function yu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":yu(a),_o(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function ab(e,t,a,l){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[pr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=un(e.nextSibling),e===null)break}return null}function sb(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=un(e.nextSibling),e===null))return null;return e}function np(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=un(e.nextSibling),e===null))return null;return e}function vu(e){return e.data==="$?"||e.data==="$~"}function bu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function rb(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var wu=null;function ap(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return un(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function sp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function rp(e,t,a){switch(t=Dl(a),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Zr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);_o(e)}var dn=new Map,ip=new Set;function Ml(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Vn=V.d;V.d={f:ib,r:lb,D:ob,C:cb,L:ub,m:db,X:fb,S:hb,M:mb};function ib(){var e=Vn.f(),t=El();return e||t}function lb(e){var t=os(e);t!==null&&t.tag===5&&t.type==="form"?Sf(t):Vn.r(e)}var Bs=typeof document>"u"?null:document;function lp(e,t,a){var l=Bs;if(l&&typeof t=="string"&&t){var d=nn(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),ip.has(d)||(ip.add(d),e={rel:e,crossOrigin:a,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),Et(t,"link",e),vt(t),l.head.appendChild(t)))}}function ob(e){Vn.D(e),lp("dns-prefetch",e,null)}function cb(e,t){Vn.C(e,t),lp("preconnect",e,t)}function ub(e,t,a){Vn.L(e,t,a);var l=Bs;if(l&&e&&t){var d='link[rel="preload"][as="'+nn(t)+'"]';t==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+nn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+nn(a.imageSizes)+'"]')):d+='[href="'+nn(e)+'"]';var h=d;switch(t){case"style":h=Hs(e);break;case"script":h=Ps(e)}dn.has(h)||(e=w({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),dn.set(h,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(Wr(h))||t==="script"&&l.querySelector(Fr(h))||(t=l.createElement("link"),Et(t,"link",e),vt(t),l.head.appendChild(t)))}}function db(e,t){Vn.m(e,t);var a=Bs;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+nn(l)+'"][href="'+nn(e)+'"]',h=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Ps(e)}if(!dn.has(h)&&(e=w({rel:"modulepreload",href:e},t),dn.set(h,e),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fr(h)))return}l=a.createElement("link"),Et(l,"link",e),vt(l),a.head.appendChild(l)}}}function hb(e,t,a){Vn.S(e,t,a);var l=Bs;if(l&&e){var d=cs(l).hoistableStyles,h=Hs(e);t=t||"default";var y=d.get(h);if(!y){var b={loading:0,preload:null};if(y=l.querySelector(Wr(h)))b.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},a),(a=dn.get(h))&&xu(e,a);var k=y=l.createElement("link");vt(k),Et(k,"link",e),k._p=new Promise(function(z,G){k.onload=z,k.onerror=G}),k.addEventListener("load",function(){b.loading|=1}),k.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Ul(y,t,l)}y={type:"stylesheet",instance:y,count:1,state:b},d.set(h,y)}}}function fb(e,t){Vn.X(e,t);var a=Bs;if(a&&e){var l=cs(a).hoistableScripts,d=Ps(e),h=l.get(d);h||(h=a.querySelector(Fr(d)),h||(e=w({src:e,async:!0},t),(t=dn.get(d))&&_u(e,t),h=a.createElement("script"),vt(h),Et(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function mb(e,t){Vn.M(e,t);var a=Bs;if(a&&e){var l=cs(a).hoistableScripts,d=Ps(e),h=l.get(d);h||(h=a.querySelector(Fr(d)),h||(e=w({src:e,async:!0,type:"module"},t),(t=dn.get(d))&&_u(e,t),h=a.createElement("script"),vt(h),Et(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function op(e,t,a,l){var d=(d=ye.current)?Ml(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Hs(a.href),a=cs(d).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Hs(a.href);var h=cs(d).hoistableStyles,y=h.get(e);if(y||(d=d.ownerDocument||d,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,y),(h=d.querySelector(Wr(e)))&&!h._p&&(y.instance=h,y.state.loading=5),dn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},dn.set(e,a),h||pb(d,e,a,y.state))),t&&l===null)throw Error(i(528,""));return y}if(t&&l!==null)throw Error(i(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ps(a),a=cs(d).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Hs(e){return'href="'+nn(e)+'"'}function Wr(e){return'link[rel="stylesheet"]['+e+"]"}function cp(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function pb(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Et(t,"link",a),vt(t),e.head.appendChild(t))}function Ps(e){return'[src="'+nn(e)+'"]'}function Fr(e){return"script[async]"+e}function up(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+nn(a.href)+'"]');if(l)return t.instance=l,vt(l),l;var d=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),vt(l),Et(l,"style",d),Ul(l,a.precedence,e),t.instance=l;case"stylesheet":d=Hs(a.href);var h=e.querySelector(Wr(d));if(h)return t.state.loading|=4,t.instance=h,vt(h),h;l=cp(a),(d=dn.get(d))&&xu(l,d),h=(e.ownerDocument||e).createElement("link"),vt(h);var y=h;return y._p=new Promise(function(b,k){y.onload=b,y.onerror=k}),Et(h,"link",l),t.state.loading|=4,Ul(h,a.precedence,e),t.instance=h;case"script":return h=Ps(a.src),(d=e.querySelector(Fr(h)))?(t.instance=d,vt(d),d):(l=a,(d=dn.get(h))&&(l=w({},a),_u(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),vt(d),Et(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Ul(l,a.precedence,e));return t.instance}function Ul(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,h=d,y=0;y<l.length;y++){var b=l[y];if(b.dataset.precedence===t)h=b;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function xu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function _u(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var zl=null;function dp(e,t,a){if(zl===null){var l=new Map,d=zl=new Map;d.set(a,l)}else d=zl,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var h=a[d];if(!(h[pr]||h[Ve]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var y=h.getAttribute(t)||"";y=e+y;var b=l.get(y);b?b.push(h):l.set(y,[h])}}return l}function hp(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function gb(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function fp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function yb(e,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Hs(l.href),h=t.querySelector(Wr(d));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ll.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=h,vt(h);return}h=t.ownerDocument||t,l=cp(l),(d=dn.get(d))&&xu(l,d),h=h.createElement("link"),vt(h);var y=h;y._p=new Promise(function(b,k){y.onload=b,y.onerror=k}),Et(h,"link",l),a.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Ll.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Su=0;function vb(e,t){return e.stylesheets&&e.count===0&&ql(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&ql(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&Su===0&&(Su=62500*Wv());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ql(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Su?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Ll(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ql(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var $l=null;function ql(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,$l=new Map,t.forEach(bb,e),$l=null,Ll.call(e))}function bb(e,t){if(!(t.state.loading&4)){var a=$l.get(e);if(a)var l=a.get(null);else{a=new Map,$l.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var y=d[h];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),l=y)}l&&a.set(null,l)}d=t.instance,y=d.getAttribute("data-precedence"),h=a.get(y)||l,h===l&&a.set(null,d),a.set(y,d),this.count++,l=Ll.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var ei={$$typeof:R,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function wb(e,t,a,l,d,h,y,b,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oe(0),this.hiddenUpdates=oe(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function mp(e,t,a,l,d,h,y,b,k,z,G,J){return e=new wb(e,t,a,y,k,z,G,J,b),t=1,h===!0&&(t|=24),h=Pt(3,null,null,t),e.current=h,h.stateNode=e,t=nc(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:l,isDehydrated:a,cache:t},ic(h),e}function pp(e){return e?(e=bs,e):bs}function gp(e,t,a,l,d,h){d=pp(d),l.context===null?l.context=d:l.pendingContext=d,l=la(t),l.payload={element:a},h=h===void 0?null:h,h!==null&&(l.callback=h),a=oa(e,l,t),a!==null&&(qt(a,e,t),Or(a,e,t))}function yp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function ju(e,t){yp(e,t),(e=e.alternate)&&yp(e,t)}function vp(e){if(e.tag===13||e.tag===31){var t=Da(e,67108864);t!==null&&qt(t,e,67108864),ju(e,67108864)}}function bp(e){if(e.tag===13||e.tag===31){var t=Kt();t=Pe(t);var a=Da(e,t);a!==null&&qt(a,e,t),ju(e,t)}}var Bl=!0;function xb(e,t,a,l){var d=N.T;N.T=null;var h=V.p;try{V.p=2,Eu(e,t,a,l)}finally{V.p=h,N.T=d}}function _b(e,t,a,l){var d=N.T;N.T=null;var h=V.p;try{V.p=8,Eu(e,t,a,l)}finally{V.p=h,N.T=d}}function Eu(e,t,a,l){if(Bl){var d=Nu(l);if(d===null)du(e,t,l,Hl,a),xp(e,l);else if(jb(d,e,t,a,l))l.stopPropagation();else if(xp(e,l),t&4&&-1<Sb.indexOf(e)){for(;d!==null;){var h=os(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var y=Tn(h.pendingLanes);if(y!==0){var b=h;for(b.pendingLanes|=2,b.entangledLanes|=2;y;){var k=1<<31-xt(y);b.entanglements[1]|=k,y&=~k}Nn(h),(Oe&6)===0&&(Sl=Tt()+500,Jr(0))}}break;case 31:case 13:b=Da(h,2),b!==null&&qt(b,h,2),El(),ju(h,2)}if(h=Nu(l),h===null&&du(e,t,l,Hl,a),h===d)break;d=h}d!==null&&l.stopPropagation()}else du(e,t,l,null,a)}}function Nu(e){return e=To(e),ku(e)}var Hl=null;function ku(e){if(Hl=null,e=ls(e),e!==null){var t=u(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=p(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Hl=e,null}function wp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ci()){case ns:return 2;case Oi:return 8;case as:case hr:return 32;case Di:return 268435456;default:return 32}default:return 32}}var Tu=!1,ba=null,wa=null,xa=null,ti=new Map,ni=new Map,_a=[],Sb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xp(e,t){switch(e){case"focusin":case"focusout":ba=null;break;case"dragenter":case"dragleave":wa=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":ti.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ni.delete(t.pointerId)}}function ai(e,t,a,l,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},t!==null&&(t=os(t),t!==null&&vp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function jb(e,t,a,l,d){switch(t){case"focusin":return ba=ai(ba,e,t,a,l,d),!0;case"dragenter":return wa=ai(wa,e,t,a,l,d),!0;case"mouseover":return xa=ai(xa,e,t,a,l,d),!0;case"pointerover":var h=d.pointerId;return ti.set(h,ai(ti.get(h)||null,e,t,a,l,d)),!0;case"gotpointercapture":return h=d.pointerId,ni.set(h,ai(ni.get(h)||null,e,t,a,l,d)),!0}return!1}function _p(e){var t=ls(e.target);if(t!==null){var a=u(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,at(e.priority,function(){bp(a)});return}}else if(t===31){if(t=p(a),t!==null){e.blockedOn=t,at(e.priority,function(){bp(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Nu(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);ko=l,a.target.dispatchEvent(l),ko=null}else return t=os(a),t!==null&&vp(t),e.blockedOn=a,!1;t.shift()}return!0}function Sp(e,t,a){Pl(e)&&a.delete(t)}function Eb(){Tu=!1,ba!==null&&Pl(ba)&&(ba=null),wa!==null&&Pl(wa)&&(wa=null),xa!==null&&Pl(xa)&&(xa=null),ti.forEach(Sp),ni.forEach(Sp)}function Il(e,t){e.blockedOn===t&&(e.blockedOn=null,Tu||(Tu=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Eb)))}var Gl=null;function jp(e){Gl!==e&&(Gl=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Gl===e&&(Gl=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(ku(l||a)===null)continue;break}var h=os(a);h!==null&&(e.splice(t,3),t-=3,Nc(h,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function Is(e){function t(k){return Il(k,e)}ba!==null&&Il(ba,e),wa!==null&&Il(wa,e),xa!==null&&Il(xa,e),ti.forEach(t),ni.forEach(t);for(var a=0;a<_a.length;a++){var l=_a[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<_a.length&&(a=_a[0],a.blockedOn===null);)_p(a),a.blockedOn===null&&_a.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],h=a[l+1],y=d[ft]||null;if(typeof h=="function")y||jp(a);else if(y){var b=null;if(h&&h.hasAttribute("formAction")){if(d=h,y=h[ft]||null)b=y.formAction;else if(ku(d)!==null)continue}else b=y.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),jp(a)}}}function Ep(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(y){return d=y})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function Au(e){this._internalRoot=e}Yl.prototype.render=Au.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var a=t.current,l=Kt();gp(a,l,e,t,null,null)},Yl.prototype.unmount=Au.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gp(e.current,2,null,e,null,null),El(),t[en]=null}};function Yl(e){this._internalRoot=e}Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=mr();e={blockedOn:null,target:e,priority:t};for(var a=0;a<_a.length&&t!==0&&t<_a[a].priority;a++);_a.splice(a,0,e),a===0&&_p(e)}};var Np=n.version;if(Np!=="19.2.3")throw Error(i(527,Np,"19.2.3"));V.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=g(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Nb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{Ta=Vl.inject(Nb),Ct=Vl}catch{}}return ri.createRoot=function(e,t){if(!c(e))throw Error(i(299));var a=!1,l="",d=Df,h=Mf,y=Uf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError)),t=mp(e,1,!1,null,null,a,l,null,d,h,y,Ep),e[en]=t.current,uu(e),new Au(t)},ri.hydrateRoot=function(e,t,a){if(!c(e))throw Error(i(299));var l=!1,d="",h=Df,y=Mf,b=Uf,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),t=mp(e,1,!0,t,a??null,l,d,k,h,y,b,Ep),t.context=pp(null),a=t.current,l=Kt(),l=Pe(l),d=la(l),d.callback=null,oa(a,d,l),a=l,t.current.lanes=a,be(t,a),Nn(t),e[en]=t.current,uu(e),new Yl(t)},ri.version="19.2.3",ri}var zp;function zb(){if(zp)return Ou.exports;zp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Ou.exports=Ub(),Ou.exports}var Lb=zb();var Lp="popstate";function $b(s={}){function n(i,c){let{pathname:u,search:f,hash:p}=i.location;return Xu("",{pathname:u,search:f,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(i,c){return typeof c=="string"?c:yi(c)}return Bb(n,r,null,s)}function Xe(s,n){if(s===!1||s===null||typeof s>"u")throw new Error(n)}function Wt(s,n){if(!s){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function qb(){return Math.random().toString(36).substring(2,10)}function $p(s,n){return{usr:s.state,key:s.key,idx:n}}function Xu(s,n,r=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof n=="string"?ir(n):n,state:r,key:n&&n.key||i||qb()}}function yi({pathname:s="/",search:n="",hash:r=""}){return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function ir(s){let n={};if(s){let r=s.indexOf("#");r>=0&&(n.hash=s.substring(r),s=s.substring(0,r));let i=s.indexOf("?");i>=0&&(n.search=s.substring(i),s=s.substring(0,i)),s&&(n.pathname=s)}return n}function Bb(s,n,r,i={}){let{window:c=document.defaultView,v5Compat:u=!1}=i,f=c.history,p="POP",m=null,g=v();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function v(){return(f.state||{idx:null}).idx}function w(){p="POP";let D=v(),C=D==null?null:D-g;g=D,m&&m({action:p,location:T.location,delta:C})}function _(D,C){p="PUSH";let q=Xu(T.location,D,C);g=v()+1;let R=$p(q,g),K=T.createHref(q);try{f.pushState(R,"",K)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;c.location.assign(K)}u&&m&&m({action:p,location:T.location,delta:1})}function x(D,C){p="REPLACE";let q=Xu(T.location,D,C);g=v();let R=$p(q,g),K=T.createHref(q);f.replaceState(R,"",K),u&&m&&m({action:p,location:T.location,delta:0})}function E(D){return Hb(D)}let T={get action(){return p},get location(){return s(c,f)},listen(D){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(Lp,w),m=D,()=>{c.removeEventListener(Lp,w),m=null}},createHref(D){return n(c,D)},createURL:E,encodeLocation(D){let C=E(D);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:_,replace:x,go(D){return f.go(D)}};return T}function Hb(s,n=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(r,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:yi(s);return i=i.replace(/ $/,"%20"),!n&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function _g(s,n,r="/"){return Pb(s,n,r,!1)}function Pb(s,n,r,i){let c=typeof n=="string"?ir(n):n,u=Xn(c.pathname||"/",r);if(u==null)return null;let f=Sg(s);Ib(f);let p=null;for(let m=0;p==null&&m<f.length;++m){let g=e0(u);p=Wb(f[m],g,i)}return p}function Sg(s,n=[],r=[],i="",c=!1){let u=(f,p,m=c,g)=>{let v={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:p,route:f};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(i)&&m)return;Xe(v.relativePath.startsWith(i),`Absolute route path "${v.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(i.length)}let w=Qn([i,v.relativePath]),_=r.concat(v);f.children&&f.children.length>0&&(Xe(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),Sg(f.children,n,_,w,m)),!(f.path==null&&!f.index)&&n.push({path:w,score:Xb(w,f.index),routesMeta:_})};return s.forEach((f,p)=>{if(f.path===""||!f.path?.includes("?"))u(f,p);else for(let m of jg(f.path))u(f,p,!0,m)}),n}function jg(s){let n=s.split("/");if(n.length===0)return[];let[r,...i]=n,c=r.endsWith("?"),u=r.replace(/\?$/,"");if(i.length===0)return c?[u,""]:[u];let f=jg(i.join("/")),p=[];return p.push(...f.map(m=>m===""?u:[u,m].join("/"))),c&&p.push(...f),p.map(m=>s.startsWith("/")&&m===""?"/":m)}function Ib(s){s.sort((n,r)=>n.score!==r.score?r.score-n.score:Zb(n.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var Gb=/^:[\w-]+$/,Yb=3,Vb=2,Kb=1,Jb=10,Qb=-2,qp=s=>s==="*";function Xb(s,n){let r=s.split("/"),i=r.length;return r.some(qp)&&(i+=Qb),n&&(i+=Vb),r.filter(c=>!qp(c)).reduce((c,u)=>c+(Gb.test(u)?Yb:u===""?Kb:Jb),i)}function Zb(s,n){return s.length===n.length&&s.slice(0,-1).every((i,c)=>i===n[c])?s[s.length-1]-n[n.length-1]:0}function Wb(s,n,r=!1){let{routesMeta:i}=s,c={},u="/",f=[];for(let p=0;p<i.length;++p){let m=i[p],g=p===i.length-1,v=u==="/"?n:n.slice(u.length)||"/",w=to({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},v),_=m.route;if(!w&&g&&r&&!i[i.length-1].route.index&&(w=to({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!w)return null;Object.assign(c,w.params),f.push({params:c,pathname:Qn([u,w.pathname]),pathnameBase:s0(Qn([u,w.pathnameBase])),route:_}),w.pathnameBase!=="/"&&(u=Qn([u,w.pathnameBase]))}return f}function to(s,n){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,i]=Fb(s.path,s.caseSensitive,s.end),c=n.match(r);if(!c)return null;let u=c[0],f=u.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:i.reduce((g,{paramName:v,isOptional:w},_)=>{if(v==="*"){let E=p[_]||"";f=u.slice(0,u.length-E.length).replace(/(.)\/+$/,"$1")}const x=p[_];return w&&!x?g[v]=void 0:g[v]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:s}}function Fb(s,n=!1,r=!0){Wt(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],c="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,m)=>(i.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),c+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?c+="\\/*$":s!==""&&s!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,n?void 0:"i"),i]}function e0(s){try{return s.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Wt(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),s}}function Xn(s,n){if(n==="/")return s;if(!s.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,i=s.charAt(r);return i&&i!=="/"?null:s.slice(r)||"/"}var Eg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,t0=s=>Eg.test(s);function n0(s,n="/"){let{pathname:r,search:i="",hash:c=""}=typeof s=="string"?ir(s):s,u;if(r)if(t0(r))u=r;else{if(r.includes("//")){let f=r;r=r.replace(/\/\/+/g,"/"),Wt(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${r}`)}r.startsWith("/")?u=Bp(r.substring(1),"/"):u=Bp(r,n)}else u=n;return{pathname:u,search:r0(i),hash:i0(c)}}function Bp(s,n){let r=n.replace(/\/+$/,"").split("/");return s.split("/").forEach(c=>{c===".."?r.length>1&&r.pop():c!=="."&&r.push(c)}),r.length>1?r.join("/"):"/"}function zu(s,n,r,i){return`Cannot include a '${s}' character in a manually specified \`to.${n}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function a0(s){return s.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function pd(s){let n=a0(s);return n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase)}function gd(s,n,r,i=!1){let c;typeof s=="string"?c=ir(s):(c={...s},Xe(!c.pathname||!c.pathname.includes("?"),zu("?","pathname","search",c)),Xe(!c.pathname||!c.pathname.includes("#"),zu("#","pathname","hash",c)),Xe(!c.search||!c.search.includes("#"),zu("#","search","hash",c)));let u=s===""||c.pathname==="",f=u?"/":c.pathname,p;if(f==null)p=r;else{let w=n.length-1;if(!i&&f.startsWith("..")){let _=f.split("/");for(;_[0]==="..";)_.shift(),w-=1;c.pathname=_.join("/")}p=w>=0?n[w]:"/"}let m=n0(c,p),g=f&&f!=="/"&&f.endsWith("/"),v=(u||f===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(g||v)&&(m.pathname+="/"),m}var Qn=s=>s.join("/").replace(/\/\/+/g,"/"),s0=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),r0=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,i0=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,l0=class{constructor(s,n,r,i=!1){this.status=s,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function o0(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function c0(s){return s.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Ng=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function kg(s,n){let r=s;if(typeof r!="string"||!Eg.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let i=r,c=!1;if(Ng)try{let u=new URL(window.location.href),f=r.startsWith("//")?new URL(u.protocol+r):new URL(r),p=Xn(f.pathname,n);f.origin===u.origin&&p!=null?r=p+f.search+f.hash:c=!0}catch{Wt(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:c,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Tg=["POST","PUT","PATCH","DELETE"];new Set(Tg);var u0=["GET",...Tg];new Set(u0);var lr=S.createContext(null);lr.displayName="DataRouter";var co=S.createContext(null);co.displayName="DataRouterState";var d0=S.createContext(!1),Ag=S.createContext({isTransitioning:!1});Ag.displayName="ViewTransition";var h0=S.createContext(new Map);h0.displayName="Fetchers";var f0=S.createContext(null);f0.displayName="Await";var Ft=S.createContext(null);Ft.displayName="Navigation";var ji=S.createContext(null);ji.displayName="Location";var kn=S.createContext({outlet:null,matches:[],isDataRoute:!1});kn.displayName="Route";var yd=S.createContext(null);yd.displayName="RouteError";var Rg="REACT_ROUTER_ERROR",m0="REDIRECT",p0="ROUTE_ERROR_RESPONSE";function g0(s){if(s.startsWith(`${Rg}:${m0}:{`))try{let n=JSON.parse(s.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function y0(s){if(s.startsWith(`${Rg}:${p0}:{`))try{let n=JSON.parse(s.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new l0(n.status,n.statusText,n.data)}catch{}}function v0(s,{relative:n}={}){Xe(or(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=S.useContext(Ft),{hash:c,pathname:u,search:f}=Ei(s,{relative:n}),p=u;return r!=="/"&&(p=u==="/"?r:Qn([r,u])),i.createHref({pathname:p,search:f,hash:c})}function or(){return S.useContext(ji)!=null}function Zn(){return Xe(or(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(ji).location}var Cg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Og(s){S.useContext(Ft).static||S.useLayoutEffect(s)}function Wn(){let{isDataRoute:s}=S.useContext(kn);return s?C0():b0()}function b0(){Xe(or(),"useNavigate() may be used only in the context of a <Router> component.");let s=S.useContext(lr),{basename:n,navigator:r}=S.useContext(Ft),{matches:i}=S.useContext(kn),{pathname:c}=Zn(),u=JSON.stringify(pd(i)),f=S.useRef(!1);return Og(()=>{f.current=!0}),S.useCallback((m,g={})=>{if(Wt(f.current,Cg),!f.current)return;if(typeof m=="number"){r.go(m);return}let v=gd(m,JSON.parse(u),c,g.relative==="path");s==null&&n!=="/"&&(v.pathname=v.pathname==="/"?n:Qn([n,v.pathname])),(g.replace?r.replace:r.push)(v,g.state,g)},[n,r,u,c,s])}S.createContext(null);function Ei(s,{relative:n}={}){let{matches:r}=S.useContext(kn),{pathname:i}=Zn(),c=JSON.stringify(pd(r));return S.useMemo(()=>gd(s,JSON.parse(c),i,n==="path"),[s,c,i,n])}function w0(s,n){return Dg(s,n)}function Dg(s,n,r,i,c){Xe(or(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=S.useContext(Ft),{matches:f}=S.useContext(kn),p=f[f.length-1],m=p?p.params:{},g=p?p.pathname:"/",v=p?p.pathnameBase:"/",w=p&&p.route;{let q=w&&w.path||"";Ug(g,!w||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let _=Zn(),x;if(n){let q=typeof n=="string"?ir(n):n;Xe(v==="/"||q.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${q.pathname}" was given in the \`location\` prop.`),x=q}else x=_;let E=x.pathname||"/",T=E;if(v!=="/"){let q=v.replace(/^\//,"").split("/");T="/"+E.replace(/^\//,"").split("/").slice(q.length).join("/")}let D=_g(s,{pathname:T});Wt(w||D!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Wt(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=E0(D&&D.map(q=>Object.assign({},q,{params:Object.assign({},m,q.params),pathname:Qn([v,u.encodeLocation?u.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?v:Qn([v,u.encodeLocation?u.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),f,r,i,c);return n&&C?S.createElement(ji.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},C):C}function x0(){let s=R0(),n=o0(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",s),f=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:u},"ErrorBoundary")," or"," ",S.createElement("code",{style:u},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},n),r?S.createElement("pre",{style:c},r):null,f)}var _0=S.createElement(x0,null),Mg=class extends S.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,n){return n.location!==s.location||n.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:n.error,location:n.location,revalidation:s.revalidation||n.revalidation}}componentDidCatch(s,n){this.props.onError?this.props.onError(s,n):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const r=y0(s.digest);r&&(s=r)}let n=s!==void 0?S.createElement(kn.Provider,{value:this.props.routeContext},S.createElement(yd.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?S.createElement(S0,{error:s},n):n}};Mg.contextType=d0;var Lu=new WeakMap;function S0({children:s,error:n}){let{basename:r}=S.useContext(Ft);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let i=g0(n.digest);if(i){let c=Lu.get(n);if(c)throw c;let u=kg(i.location,r);if(Ng&&!Lu.get(n))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw Lu.set(n,f),f}return S.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function j0({routeContext:s,match:n,children:r}){let i=S.useContext(lr);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(kn.Provider,{value:s},r)}function E0(s,n=[],r=null,i=null,c=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(n.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let u=s,f=r?.errors;if(f!=null){let v=u.findIndex(w=>w.route.id&&f?.[w.route.id]!==void 0);Xe(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,v+1))}let p=!1,m=-1;if(r)for(let v=0;v<u.length;v++){let w=u[v];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=v),w.route.id){let{loaderData:_,errors:x}=r,E=w.route.loader&&!_.hasOwnProperty(w.route.id)&&(!x||x[w.route.id]===void 0);if(w.route.lazy||E){p=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}let g=r&&i?(v,w)=>{i(v,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:c0(r.matches),errorInfo:w})}:void 0;return u.reduceRight((v,w,_)=>{let x,E=!1,T=null,D=null;r&&(x=f&&w.route.id?f[w.route.id]:void 0,T=w.route.errorElement||_0,p&&(m<0&&_===0?(Ug("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,D=null):m===_&&(E=!0,D=w.route.hydrateFallbackElement||null)));let C=n.concat(u.slice(0,_+1)),q=()=>{let R;return x?R=T:E?R=D:w.route.Component?R=S.createElement(w.route.Component,null):w.route.element?R=w.route.element:R=v,S.createElement(j0,{match:w,routeContext:{outlet:v,matches:C,isDataRoute:r!=null},children:R})};return r&&(w.route.ErrorBoundary||w.route.errorElement||_===0)?S.createElement(Mg,{location:r.location,revalidation:r.revalidation,component:T,error:x,children:q(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:g}):q()},null)}function vd(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N0(s){let n=S.useContext(lr);return Xe(n,vd(s)),n}function k0(s){let n=S.useContext(co);return Xe(n,vd(s)),n}function T0(s){let n=S.useContext(kn);return Xe(n,vd(s)),n}function bd(s){let n=T0(s),r=n.matches[n.matches.length-1];return Xe(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function A0(){return bd("useRouteId")}function R0(){let s=S.useContext(yd),n=k0("useRouteError"),r=bd("useRouteError");return s!==void 0?s:n.errors?.[r]}function C0(){let{router:s}=N0("useNavigate"),n=bd("useNavigate"),r=S.useRef(!1);return Og(()=>{r.current=!0}),S.useCallback(async(c,u={})=>{Wt(r.current,Cg),r.current&&(typeof c=="number"?await s.navigate(c):await s.navigate(c,{fromRouteId:n,...u}))},[s,n])}var Hp={};function Ug(s,n,r){!n&&!Hp[s]&&(Hp[s]=!0,Wt(!1,r))}S.memo(O0);function O0({routes:s,future:n,state:r,onError:i}){return Dg(s,void 0,r,i,n)}function zg({to:s,replace:n,state:r,relative:i}){Xe(or(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=S.useContext(Ft);Wt(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=S.useContext(kn),{pathname:f}=Zn(),p=Wn(),m=gd(s,pd(u),f,i==="path"),g=JSON.stringify(m);return S.useEffect(()=>{p(JSON.parse(g),{replace:n,state:r,relative:i})},[p,g,i,n,r]),null}function Jt(s){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function D0({basename:s="/",children:n=null,location:r,navigationType:i="POP",navigator:c,static:u=!1,unstable_useTransitions:f}){Xe(!or(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),m=S.useMemo(()=>({basename:p,navigator:c,static:u,unstable_useTransitions:f,future:{}}),[p,c,u,f]);typeof r=="string"&&(r=ir(r));let{pathname:g="/",search:v="",hash:w="",state:_=null,key:x="default"}=r,E=S.useMemo(()=>{let T=Xn(g,p);return T==null?null:{location:{pathname:T,search:v,hash:w,state:_,key:x},navigationType:i}},[p,g,v,w,_,x,i]);return Wt(E!=null,`<Router basename="${p}"> is not able to match the URL "${g}${v}${w}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:S.createElement(Ft.Provider,{value:m},S.createElement(ji.Provider,{children:n,value:E}))}function M0({children:s,location:n}){return w0(Zu(s),n)}function Zu(s,n=[]){let r=[];return S.Children.forEach(s,(i,c)=>{if(!S.isValidElement(i))return;let u=[...n,c];if(i.type===S.Fragment){r.push.apply(r,Zu(i.props.children,u));return}Xe(i.type===Jt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=Zu(i.props.children,u)),r.push(f)}),r}var Fl="get",eo="application/x-www-form-urlencoded";function uo(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function U0(s){return uo(s)&&s.tagName.toLowerCase()==="button"}function z0(s){return uo(s)&&s.tagName.toLowerCase()==="form"}function L0(s){return uo(s)&&s.tagName.toLowerCase()==="input"}function $0(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function q0(s,n){return s.button===0&&(!n||n==="_self")&&!$0(s)}function Wu(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((n,r)=>{let i=s[r];return n.concat(Array.isArray(i)?i.map(c=>[r,c]):[[r,i]])},[]))}function B0(s,n){let r=Wu(s);return n&&n.forEach((i,c)=>{r.has(c)||n.getAll(c).forEach(u=>{r.append(c,u)})}),r}var Kl=null;function H0(){if(Kl===null)try{new FormData(document.createElement("form"),0),Kl=!1}catch{Kl=!0}return Kl}var P0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $u(s){return s!=null&&!P0.has(s)?(Wt(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${eo}"`),null):s}function I0(s,n){let r,i,c,u,f;if(z0(s)){let p=s.getAttribute("action");i=p?Xn(p,n):null,r=s.getAttribute("method")||Fl,c=$u(s.getAttribute("enctype"))||eo,u=new FormData(s)}else if(U0(s)||L0(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=s.getAttribute("formaction")||p.getAttribute("action");if(i=m?Xn(m,n):null,r=s.getAttribute("formmethod")||p.getAttribute("method")||Fl,c=$u(s.getAttribute("formenctype"))||$u(p.getAttribute("enctype"))||eo,u=new FormData(p,s),!H0()){let{name:g,type:v,value:w}=s;if(v==="image"){let _=g?`${g}.`:"";u.append(`${_}x`,"0"),u.append(`${_}y`,"0")}else g&&u.append(g,w)}}else{if(uo(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Fl,i=null,c=eo,f=s}return u&&c==="text/plain"&&(f=u,u=void 0),{action:i,method:r.toLowerCase(),encType:c,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wd(s,n){if(s===!1||s===null||typeof s>"u")throw new Error(n)}function G0(s,n,r){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${r}`:n&&Xn(i.pathname,n)==="/"?i.pathname=`${n.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function Y0(s,n){if(s.id in n)return n[s.id];try{let r=await import(s.module);return n[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function V0(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function K0(s,n,r){let i=await Promise.all(s.map(async c=>{let u=n.routes[c.route.id];if(u){let f=await Y0(u,r);return f.links?f.links():[]}return[]}));return Z0(i.flat(1).filter(V0).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Pp(s,n,r,i,c,u){let f=(m,g)=>r[g]?m.route.id!==r[g].route.id:!0,p=(m,g)=>r[g].pathname!==m.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==m.params["*"];return u==="assets"?n.filter((m,g)=>f(m,g)||p(m,g)):u==="data"?n.filter((m,g)=>{let v=i.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(f(m,g)||p(m,g))return!0;if(m.route.shouldRevalidate){let w=m.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function J0(s,n,{includeHydrateFallback:r}={}){return Q0(s.map(i=>{let c=n.routes[i.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),r&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function Q0(s){return[...new Set(s)]}function X0(s){let n={},r=Object.keys(s).sort();for(let i of r)n[i]=s[i];return n}function Z0(s,n){let r=new Set;return new Set(n),s.reduce((i,c)=>{let u=JSON.stringify(X0(c));return r.has(u)||(r.add(u),i.push({key:u,link:c})),i},[])}function Lg(){let s=S.useContext(lr);return wd(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function W0(){let s=S.useContext(co);return wd(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var xd=S.createContext(void 0);xd.displayName="FrameworkContext";function $g(){let s=S.useContext(xd);return wd(s,"You must render this element inside a <HydratedRouter> element"),s}function F0(s,n){let r=S.useContext(xd),[i,c]=S.useState(!1),[u,f]=S.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:g,onMouseLeave:v,onTouchStart:w}=n,_=S.useRef(null);S.useEffect(()=>{if(s==="render"&&f(!0),s==="viewport"){let T=C=>{C.forEach(q=>{f(q.isIntersecting)})},D=new IntersectionObserver(T,{threshold:.5});return _.current&&D.observe(_.current),()=>{D.disconnect()}}},[s]),S.useEffect(()=>{if(i){let T=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(T)}}},[i]);let x=()=>{c(!0)},E=()=>{c(!1),f(!1)};return r?s!=="intent"?[u,_,{}]:[u,_,{onFocus:ii(p,x),onBlur:ii(m,E),onMouseEnter:ii(g,x),onMouseLeave:ii(v,E),onTouchStart:ii(w,x)}]:[!1,_,{}]}function ii(s,n){return r=>{s&&s(r),r.defaultPrevented||n(r)}}function ew({page:s,...n}){let{router:r}=Lg(),i=S.useMemo(()=>_g(r.routes,s,r.basename),[r.routes,s,r.basename]);return i?S.createElement(nw,{page:s,matches:i,...n}):null}function tw(s){let{manifest:n,routeModules:r}=$g(),[i,c]=S.useState([]);return S.useEffect(()=>{let u=!1;return K0(s,n,r).then(f=>{u||c(f)}),()=>{u=!0}},[s,n,r]),i}function nw({page:s,matches:n,...r}){let i=Zn(),{manifest:c,routeModules:u}=$g(),{basename:f}=Lg(),{loaderData:p,matches:m}=W0(),g=S.useMemo(()=>Pp(s,n,m,c,i,"data"),[s,n,m,c,i]),v=S.useMemo(()=>Pp(s,n,m,c,i,"assets"),[s,n,m,c,i]),w=S.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let E=new Set,T=!1;if(n.forEach(C=>{let q=c.routes[C.route.id];!q||!q.hasLoader||(!g.some(R=>R.route.id===C.route.id)&&C.route.id in p&&u[C.route.id]?.shouldRevalidate||q.hasClientLoader?T=!0:E.add(C.route.id))}),E.size===0)return[];let D=G0(s,f,"data");return T&&E.size>0&&D.searchParams.set("_routes",n.filter(C=>E.has(C.route.id)).map(C=>C.route.id).join(",")),[D.pathname+D.search]},[f,p,i,c,g,n,s,u]),_=S.useMemo(()=>J0(v,c),[v,c]),x=tw(v);return S.createElement(S.Fragment,null,w.map(E=>S.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...r})),_.map(E=>S.createElement("link",{key:E,rel:"modulepreload",href:E,...r})),x.map(({key:E,link:T})=>S.createElement("link",{key:E,nonce:r.nonce,...T})))}function aw(...s){return n=>{s.forEach(r=>{typeof r=="function"?r(n):r!=null&&(r.current=n)})}}var sw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sw&&(window.__reactRouterVersion="7.11.0")}catch{}function rw({basename:s,children:n,unstable_useTransitions:r,window:i}){let c=S.useRef();c.current==null&&(c.current=$b({window:i,v5Compat:!0}));let u=c.current,[f,p]=S.useState({action:u.action,location:u.location}),m=S.useCallback(g=>{r===!1?p(g):S.startTransition(()=>p(g))},[r]);return S.useLayoutEffect(()=>u.listen(m),[u,m]),S.createElement(D0,{basename:s,children:n,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:r})}var qg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gt=S.forwardRef(function({onClick:n,discover:r="render",prefetch:i="none",relative:c,reloadDocument:u,replace:f,state:p,target:m,to:g,preventScrollReset:v,viewTransition:w,unstable_defaultShouldRevalidate:_,...x},E){let{basename:T,unstable_useTransitions:D}=S.useContext(Ft),C=typeof g=="string"&&qg.test(g),q=kg(g,T);g=q.to;let R=v0(g,{relative:c}),[K,Q,H]=F0(i,x),P=cw(g,{replace:f,state:p,target:m,preventScrollReset:v,relative:c,viewTransition:w,unstable_defaultShouldRevalidate:_,unstable_useTransitions:D});function F(ie){n&&n(ie),ie.defaultPrevented||P(ie)}let I=S.createElement("a",{...x,...H,href:q.absoluteURL||R,onClick:q.isExternal||u?n:F,ref:aw(E,Q),target:m,"data-discover":!C&&r==="render"?"true":void 0});return K&&!C?S.createElement(S.Fragment,null,I,S.createElement(ew,{page:R})):I});gt.displayName="Link";var iw=S.forwardRef(function({"aria-current":n="page",caseSensitive:r=!1,className:i="",end:c=!1,style:u,to:f,viewTransition:p,children:m,...g},v){let w=Ei(f,{relative:g.relative}),_=Zn(),x=S.useContext(co),{navigator:E,basename:T}=S.useContext(Ft),D=x!=null&&mw(w)&&p===!0,C=E.encodeLocation?E.encodeLocation(w).pathname:w.pathname,q=_.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(q=q.toLowerCase(),R=R?R.toLowerCase():null,C=C.toLowerCase()),R&&T&&(R=Xn(R,T)||R);const K=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let Q=q===C||!c&&q.startsWith(C)&&q.charAt(K)==="/",H=R!=null&&(R===C||!c&&R.startsWith(C)&&R.charAt(C.length)==="/"),P={isActive:Q,isPending:H,isTransitioning:D},F=Q?n:void 0,I;typeof i=="function"?I=i(P):I=[i,Q?"active":null,H?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let ie=typeof u=="function"?u(P):u;return S.createElement(gt,{...g,"aria-current":F,className:I,ref:v,style:ie,to:f,viewTransition:p},typeof m=="function"?m(P):m)});iw.displayName="NavLink";var lw=S.forwardRef(({discover:s="render",fetcherKey:n,navigate:r,reloadDocument:i,replace:c,state:u,method:f=Fl,action:p,onSubmit:m,relative:g,preventScrollReset:v,viewTransition:w,unstable_defaultShouldRevalidate:_,...x},E)=>{let{unstable_useTransitions:T}=S.useContext(Ft),D=hw(),C=fw(p,{relative:g}),q=f.toLowerCase()==="get"?"get":"post",R=typeof p=="string"&&qg.test(p),K=Q=>{if(m&&m(Q),Q.defaultPrevented)return;Q.preventDefault();let H=Q.nativeEvent.submitter,P=H?.getAttribute("formmethod")||f,F=()=>D(H||Q.currentTarget,{fetcherKey:n,method:P,navigate:r,replace:c,state:u,relative:g,preventScrollReset:v,viewTransition:w,unstable_defaultShouldRevalidate:_});T&&r!==!1?S.startTransition(()=>F()):F()};return S.createElement("form",{ref:E,method:q,action:C,onSubmit:i?m:K,...x,"data-discover":!R&&s==="render"?"true":void 0})});lw.displayName="Form";function ow(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Bg(s){let n=S.useContext(lr);return Xe(n,ow(s)),n}function cw(s,{target:n,replace:r,state:i,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:m}={}){let g=Wn(),v=Zn(),w=Ei(s,{relative:u});return S.useCallback(_=>{if(q0(_,n)){_.preventDefault();let x=r!==void 0?r:yi(v)===yi(w),E=()=>g(s,{replace:x,state:i,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:p});m?S.startTransition(()=>E()):E()}},[v,g,w,r,i,n,s,c,u,f,p,m])}function Hg(s){Wt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=S.useRef(Wu(s)),r=S.useRef(!1),i=Zn(),c=S.useMemo(()=>B0(i.search,r.current?null:n.current),[i.search]),u=Wn(),f=S.useCallback((p,m)=>{const g=Wu(typeof p=="function"?p(new URLSearchParams(c)):p);r.current=!0,u("?"+g,m)},[u,c]);return[c,f]}var uw=0,dw=()=>`__${String(++uw)}__`;function hw(){let{router:s}=Bg("useSubmit"),{basename:n}=S.useContext(Ft),r=A0(),i=s.fetch,c=s.navigate;return S.useCallback(async(u,f={})=>{let{action:p,method:m,encType:g,formData:v,body:w}=I0(u,n);if(f.navigate===!1){let _=f.fetcherKey||dw();await i(_,r,f.action||p,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:v,body:w,formMethod:f.method||m,formEncType:f.encType||g,flushSync:f.flushSync})}else await c(f.action||p,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:v,body:w,formMethod:f.method||m,formEncType:f.encType||g,replace:f.replace,state:f.state,fromRouteId:r,flushSync:f.flushSync,viewTransition:f.viewTransition})},[i,c,n,r])}function fw(s,{relative:n}={}){let{basename:r}=S.useContext(Ft),i=S.useContext(kn);Xe(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),u={...Ei(s||".",{relative:n})},f=Zn();if(s==null){u.search=f.search;let p=new URLSearchParams(u.search),m=p.getAll("index");if(m.some(v=>v==="")){p.delete("index"),m.filter(w=>w).forEach(w=>p.append("index",w));let v=p.toString();u.search=v?`?${v}`:""}}return(!s||s===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:Qn([r,u.pathname])),yi(u)}function mw(s,{relative:n}={}){let r=S.useContext(Ag);Xe(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Bg("useViewTransitionState"),c=Ei(s,{relative:n});if(!r.isTransitioning)return!1;let u=Xn(r.currentLocation.pathname,i)||r.currentLocation.pathname,f=Xn(r.nextLocation.pathname,i)||r.nextLocation.pathname;return to(c.pathname,f)!=null||to(c.pathname,u)!=null}function ho(s,n){var r={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&n.indexOf(i)<0&&(r[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(s);c<i.length;c++)n.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(s,i[c])&&(r[i[c]]=s[i[c]]);return r}function pw(s,n,r,i){function c(u){return u instanceof r?u:new r(function(f){f(u)})}return new(r||(r=Promise))(function(u,f){function p(v){try{g(i.next(v))}catch(w){f(w)}}function m(v){try{g(i.throw(v))}catch(w){f(w)}}function g(v){v.done?u(v.value):c(v.value).then(p,m)}g((i=i.apply(s,n||[])).next())})}const gw=s=>s?(...n)=>s(...n):(...n)=>fetch(...n);class _d extends Error{constructor(n,r="FunctionsError",i){super(n),this.name=r,this.context=i}}class yw extends _d{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Ip extends _d{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Gp extends _d{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Fu;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Fu||(Fu={}));class vw{constructor(n,{headers:r={},customFetch:i,region:c=Fu.Any}={}){this.url=n,this.headers=r,this.region=c,this.fetch=gw(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return pw(this,arguments,void 0,function*(r,i={}){var c;let u,f;try{const{headers:p,method:m,body:g,signal:v,timeout:w}=i;let _={},{region:x}=i;x||(x=this.region);const E=new URL(`${this.url}/${r}`);x&&x!=="any"&&(_["x-region"]=x,E.searchParams.set("forceFunctionRegion",x));let T;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",T=g):typeof g=="string"?(_["Content-Type"]="text/plain",T=g):typeof FormData<"u"&&g instanceof FormData?T=g:(_["Content-Type"]="application/json",T=JSON.stringify(g)):T=g;let D=v;w&&(f=new AbortController,u=setTimeout(()=>f.abort(),w),v?(D=f.signal,v.addEventListener("abort",()=>f.abort())):D=f.signal);const C=yield this.fetch(E.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),p),body:T,signal:D}).catch(Q=>{throw new yw(Q)}),q=C.headers.get("x-relay-error");if(q&&q==="true")throw new Ip(C);if(!C.ok)throw new Gp(C);let R=((c=C.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),K;return R==="application/json"?K=yield C.json():R==="application/octet-stream"||R==="application/pdf"?K=yield C.blob():R==="text/event-stream"?K=C:R==="multipart/form-data"?K=yield C.formData():K=yield C.text(),{data:K,error:null,response:C}}catch(p){return{data:null,error:p,response:p instanceof Gp||p instanceof Ip?p.context:void 0}}finally{u&&clearTimeout(u)}})}}var bw=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},ww=class{constructor(s){var n,r;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(n=s.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=new Headers(this.headers),this.headers.set(s,n),this}then(s,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let c=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let f=null,p=null,m=null,g=u.status,v=u.statusText;if(u.ok){var w,_;if(r.method!=="HEAD"){var x;const C=await u.text();C===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?p=C:p=JSON.parse(C))}const T=(w=r.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),D=(_=u.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");T&&D&&D.length>1&&(m=parseInt(D[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,g=406,v="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var E;const T=await u.text();try{f=JSON.parse(T),Array.isArray(f)&&u.status===404&&(p=[],f=null,g=200,v="OK")}catch{u.status===404&&T===""?(g=204,v="No Content"):f={message:T}}if(f&&r.isMaybeSingle&&(!(f==null||(E=f.details)===null||E===void 0)&&E.includes("0 rows"))&&(f=null,g=200,v="OK"),f&&r.shouldThrowOnError)throw new bw(f)}return{error:f,data:p,count:m,status:g,statusText:v}});return this.shouldThrowOnError||(c=c.catch(u=>{var f;let p="";const m=u?.cause;if(m){var g,v,w,_;const E=(g=m?.message)!==null&&g!==void 0?g:"",T=(v=m?.code)!==null&&v!==void 0?v:"";p=`${(w=u?.name)!==null&&w!==void 0?w:"FetchError"}: ${u?.message}`,p+=`

Caused by: ${(_=m?.name)!==null&&_!==void 0?_:"Error"}: ${E}`,T&&(p+=` (${T})`),m?.stack&&(p+=`
${m.stack}`)}else{var x;p=(x=u?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(f=u?.name)!==null&&f!==void 0?f:"FetchError"}: ${u?.message}`,details:p,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(s,n)}returns(){return this}overrideTypes(){return this}},xw=class extends ww{select(s){let n=!1;const r=(s??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:c=i}={}){const u=c?`${c}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${s}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${s}`),this}range(s,n,{foreignTable:r,referencedTable:i=r}={}){const c=typeof i>"u"?"offset":`${i}.offset`,u=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${n-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:c=!1,format:u="text"}={}){var f;const p=[s?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${p};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const Yp=new RegExp("[,()]");var Zs=class extends xw{eq(s,n){return this.url.searchParams.append(s,`eq.${n}`),this}neq(s,n){return this.url.searchParams.append(s,`neq.${n}`),this}gt(s,n){return this.url.searchParams.append(s,`gt.${n}`),this}gte(s,n){return this.url.searchParams.append(s,`gte.${n}`),this}lt(s,n){return this.url.searchParams.append(s,`lt.${n}`),this}lte(s,n){return this.url.searchParams.append(s,`lte.${n}`),this}like(s,n){return this.url.searchParams.append(s,`like.${n}`),this}likeAllOf(s,n){return this.url.searchParams.append(s,`like(all).{${n.join(",")}}`),this}likeAnyOf(s,n){return this.url.searchParams.append(s,`like(any).{${n.join(",")}}`),this}ilike(s,n){return this.url.searchParams.append(s,`ilike.${n}`),this}ilikeAllOf(s,n){return this.url.searchParams.append(s,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(s,n){return this.url.searchParams.append(s,`ilike(any).{${n.join(",")}}`),this}regexMatch(s,n){return this.url.searchParams.append(s,`match.${n}`),this}regexIMatch(s,n){return this.url.searchParams.append(s,`imatch.${n}`),this}is(s,n){return this.url.searchParams.append(s,`is.${n}`),this}isDistinct(s,n){return this.url.searchParams.append(s,`isdistinct.${n}`),this}in(s,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&Yp.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&Yp.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cs.{${n.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(n)}`),this}containedBy(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cd.{${n.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(n)}`),this}rangeGt(s,n){return this.url.searchParams.append(s,`sr.${n}`),this}rangeGte(s,n){return this.url.searchParams.append(s,`nxl.${n}`),this}rangeLt(s,n){return this.url.searchParams.append(s,`sl.${n}`),this}rangeLte(s,n){return this.url.searchParams.append(s,`nxr.${n}`),this}rangeAdjacent(s,n){return this.url.searchParams.append(s,`adj.${n}`),this}overlaps(s,n){return typeof n=="string"?this.url.searchParams.append(s,`ov.${n}`):this.url.searchParams.append(s,`ov.{${n.join(",")}}`),this}textSearch(s,n,{config:r,type:i}={}){let c="";i==="plain"?c="pl":i==="phrase"?c="ph":i==="websearch"&&(c="w");const u=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${c}fts${u}.${n}`),this}match(s){return Object.entries(s).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(s,n,r){return this.url.searchParams.append(s,`not.${n}.${r}`),this}or(s,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${s})`),this}filter(s,n,r){return this.url.searchParams.append(s,`${n}.${r}`),this}},_w=class{constructor(s,{headers:n={},schema:r,fetch:i}){this.url=s,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(s,n){const{head:r=!1,count:i}=n??{},c=r?"HEAD":"GET";let u=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",f),i&&this.headers.append("Prefer",`count=${i}`),new Zs({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:n,defaultToNull:r=!0}={}){var i;const c="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(u.length>0){const f=[...new Set(u)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new Zs({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(s,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:c=!0}={}){var u;const f="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new Zs({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Zs({method:i,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:s}={}){var n;const r="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new Zs({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},Sw=class Pg{constructor(n,{headers:r={},schema:i,fetch:c}={}){this.url=n,this.headers=new Headers(r),this.schemaName=i,this.fetch=c}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _w(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new Pg(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:i=!1,get:c=!1,count:u}={}){var f;let p;const m=new URL(`${this.url}/rpc/${n}`);let g;i||c?(p=i?"HEAD":"GET",Object.entries(r).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{m.searchParams.append(w,_)})):(p="POST",g=r);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new Zs({method:p,url:m,headers:v,schema:this.schemaName,body:g,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class jw{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,c=parseInt(i.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const i=this.getWebSocketConstructor();return new i(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Ew="2.89.0",Nw=`realtime-js/${Ew}`,Ig="1.0.0",kw="2.0.0",Vp=Ig,ed=1e4,Tw=1e3,Aw=100;var ja;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(ja||(ja={}));var pt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(pt||(pt={}));var vn;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(vn||(vn={}));var td;(function(s){s.websocket="websocket"})(td||(td={}));var Qa;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Qa||(Qa={}));class Rw{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let i=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,i;const c=(i=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(n){var r,i;const c=(i=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},f=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,r,i){var c,u;const f=n.topic,p=(c=n.ref)!==null&&c!==void 0?c:"",m=(u=n.join_ref)!==null&&u!==void 0?u:"",g=n.payload.event,v=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},w=Object.keys(v).length===0?"":JSON.stringify(v);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+f.length+g.length+w.length,x=new ArrayBuffer(this.HEADER_LENGTH+_);let E=new DataView(x),T=0;E.setUint8(T++,this.KINDS.userBroadcastPush),E.setUint8(T++,m.length),E.setUint8(T++,p.length),E.setUint8(T++,f.length),E.setUint8(T++,g.length),E.setUint8(T++,w.length),E.setUint8(T++,r),Array.from(m,C=>E.setUint8(T++,C.charCodeAt(0))),Array.from(p,C=>E.setUint8(T++,C.charCodeAt(0))),Array.from(f,C=>E.setUint8(T++,C.charCodeAt(0))),Array.from(g,C=>E.setUint8(T++,C.charCodeAt(0))),Array.from(w,C=>E.setUint8(T++,C.charCodeAt(0)));var D=new Uint8Array(x.byteLength+i.byteLength);return D.set(new Uint8Array(x),0),D.set(new Uint8Array(i),x.byteLength),D.buffer}decode(n,r){if(this._isArrayBuffer(n)){let i=this._binaryDecode(n);return r(i)}if(typeof n=="string"){const i=JSON.parse(n),[c,u,f,p,m]=i;return r({join_ref:c,ref:u,topic:f,event:p,payload:m})}return r({})}_binaryDecode(n){const r=new DataView(n),i=r.getUint8(0),c=new TextDecoder;if(i===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,r,c)}_decodeUserBroadcast(n,r,i){const c=r.getUint8(1),u=r.getUint8(2),f=r.getUint8(3),p=r.getUint8(4);let m=this.HEADER_LENGTH+4;const g=i.decode(n.slice(m,m+c));m=m+c;const v=i.decode(n.slice(m,m+u));m=m+u;const w=i.decode(n.slice(m,m+f));m=m+f;const _=n.slice(m,n.byteLength),x=p===this.JSON_ENCODING?JSON.parse(i.decode(_)):_,E={type:this.BROADCAST_EVENT,event:v,payload:x};return f>0&&(E.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([i])=>r.includes(i)))}}class Gg{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ie;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ie||(Ie={}));const Kp=(s,n,r={})=>{var i;const c=(i=r.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((u,f)=>(u[f]=Cw(f,s,n,c),u),{}):{}},Cw=(s,n,r,i)=>{const c=n.find(p=>p.name===s),u=c?.type,f=r[s];return u&&!i.includes(u)?Yg(u,f):nd(f)},Yg=(s,n)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return Uw(n,r)}switch(s){case Ie.bool:return Ow(n);case Ie.float4:case Ie.float8:case Ie.int2:case Ie.int4:case Ie.int8:case Ie.numeric:case Ie.oid:return Dw(n);case Ie.json:case Ie.jsonb:return Mw(n);case Ie.timestamp:return zw(n);case Ie.abstime:case Ie.date:case Ie.daterange:case Ie.int4range:case Ie.int8range:case Ie.money:case Ie.reltime:case Ie.text:case Ie.time:case Ie.timestamptz:case Ie.timetz:case Ie.tsrange:case Ie.tstzrange:return nd(n);default:return nd(n)}},nd=s=>s,Ow=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Dw=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},Mw=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},Uw=(s,n)=>{if(typeof s!="string")return s;const r=s.length-1,i=s[r];if(s[0]==="{"&&i==="}"){let u;const f=s.slice(1,r);try{u=JSON.parse("["+f+"]")}catch{u=f?f.split(","):[]}return u.map(p=>Yg(n,p))}return s},zw=s=>typeof s=="string"?s.replace(" ","T"):s,Vg=s=>{const n=new URL(s);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class qu{constructor(n,r,i={},c=ed){this.channel=n,this.event=r,this.payload=i,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var i;return this._hasReceived(n)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Jp;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Jp||(Jp={}));class mi{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},c=>{const{onJoin:u,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mi.syncState(this.state,c,u,f),this.pendingDiffs.forEach(m=>{this.state=mi.syncDiff(this.state,m,u,f)}),this.pendingDiffs=[],p()}),this.channel._on(i.diff,{},c=>{const{onJoin:u,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=mi.syncDiff(this.state,c,u,f),p())}),this.onJoin((c,u,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:f})}),this.onLeave((c,u,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,i,c){const u=this.cloneDeep(n),f=this.transformState(r),p={},m={};return this.map(u,(g,v)=>{f[g]||(m[g]=v)}),this.map(f,(g,v)=>{const w=u[g];if(w){const _=v.map(D=>D.presence_ref),x=w.map(D=>D.presence_ref),E=v.filter(D=>x.indexOf(D.presence_ref)<0),T=w.filter(D=>_.indexOf(D.presence_ref)<0);E.length>0&&(p[g]=E),T.length>0&&(m[g]=T)}else p[g]=v}),this.syncDiff(u,{joins:p,leaves:m},i,c)}static syncDiff(n,r,i,c){const{joins:u,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),c||(c=()=>{}),this.map(u,(p,m)=>{var g;const v=(g=n[p])!==null&&g!==void 0?g:[];if(n[p]=this.cloneDeep(m),v.length>0){const w=n[p].map(x=>x.presence_ref),_=v.filter(x=>w.indexOf(x.presence_ref)<0);n[p].unshift(..._)}i(p,v,m)}),this.map(f,(p,m)=>{let g=n[p];if(!g)return;const v=m.map(w=>w.presence_ref);g=g.filter(w=>v.indexOf(w.presence_ref)<0),n[p]=g,c(p,g,m),g.length===0&&delete n[p]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(i=>r(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,i)=>{const c=n[i];return"metas"in c?r[i]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):r[i]=c,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Qp;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Qp||(Qp={}));var pi;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(pi||(pi={}));var Jn;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Jn||(Jn={}));class ar{constructor(n,r={config:{}},i){var c,u;if(this.topic=n,this.params=r,this.socket=i,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new qu(this,vn.join,this.params,this.timeout),this.rejoinTimer=new Gg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vn.reply,{},(f,p)=>{this._trigger(this._replyEventName(p),f)}),this.presence=new mi(this),this.broadcastEndpointURL=Vg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var i,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:f,presence:p,private:m}}=this.params,g=(c=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(x=>x.filter))!==null&&c!==void 0?c:[],v=!!this.bindings[pi.PRESENCE]&&this.bindings[pi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,w={},_={broadcast:f,presence:Object.assign(Object.assign({},p),{enabled:v}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(x=>n?.(Jn.CHANNEL_ERROR,x)),this._onClose(()=>n?.(Jn.CLOSED)),this.updateJoinPayload(Object.assign({config:_},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){n?.(Jn.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,D=(E=T?.length)!==null&&E!==void 0?E:0,C=[];for(let q=0;q<D;q++){const R=T[q],{filter:{event:K,schema:Q,table:H,filter:P}}=R,F=x&&x[q];if(F&&F.event===K&&ar.isFilterValueEqual(F.schema,Q)&&ar.isFilterValueEqual(F.table,H)&&ar.isFilterValueEqual(F.filter,P))C.push(Object.assign(Object.assign({},R),{id:F.id}));else{this.unsubscribe(),this.state=pt.errored,n?.(Jn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,n&&n(Jn.SUBSCRIBED);return}}).receive("error",x=>{this.state=pt.errored,n?.(Jn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{n?.(Jn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,i){return this.state===pt.joined&&n===pi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,i)}async httpSend(n,r,i={}){var c;if(r==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(c=i.timeout)!==null&&c!==void 0?c:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const g=await p.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(n,r={}){var i,c;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:f}=n,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:f,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((c=g.body)===null||c===void 0?void 0:c.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var f,p,m;const g=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=pt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(c=>{i=new qu(this,vn.leave,{},n),i.receive("ok",()=>{r(),c("ok")}).receive("timeout",()=>{r(),c("timed out")}).receive("error",()=>{c("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}async _fetchWithTimeout(n,r,i){const c=new AbortController,u=setTimeout(()=>c.abort(),i),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:c.signal}));return clearTimeout(u),f}_push(n,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new qu(this,n,r,i);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Aw){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,i){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,i){var c,u;const f=n.toLocaleLowerCase(),{close:p,error:m,leave:g,join:v}=vn;if(i&&[p,m,g,v].indexOf(f)>=0&&i!==this._joinRef())return;let _=this._onMessage(f,r,i);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(x=>{var E,T,D;return((E=x.filter)===null||E===void 0?void 0:E.event)==="*"||((D=(T=x.filter)===null||T===void 0?void 0:T.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===f}).map(x=>x.callback(_,i)):(u=this.bindings[f])===null||u===void 0||u.filter(x=>{var E,T,D,C,q,R;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in x){const K=x.id,Q=(E=x.filter)===null||E===void 0?void 0:E.event;return K&&((T=r.ids)===null||T===void 0?void 0:T.includes(K))&&(Q==="*"||Q?.toLocaleLowerCase()===((D=r.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const K=(q=(C=x?.filter)===null||C===void 0?void 0:C.event)===null||q===void 0?void 0:q.toLocaleLowerCase();return K==="*"||K===((R=r?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===f}).map(x=>{if(typeof _=="object"&&"ids"in _){const E=_.data,{schema:T,table:D,commit_timestamp:C,type:q,errors:R}=E;_=Object.assign(Object.assign({},{schema:T,table:D,commit_timestamp:C,eventType:q,new:{},old:{},errors:R}),this._getPayloadRecords(E))}x.callback(_,i)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,i){const c=n.toLocaleLowerCase(),u={type:c,filter:r,callback:i};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(n,r){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&ar.isEqual(c.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const i in n)if(n[i]!==r[i])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(vn.close,{},n)}_onError(n){this._on(vn.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Kp(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Kp(n.columns,n.old_record)),r}}const Bu=()=>{},Jl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Lw=[1e3,2e3,5e3,1e4],$w=1e4,qw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Bw{constructor(n,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ed,this.transport=null,this.heartbeatIntervalMs=Jl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bu,this.ref=0,this.reconnectTimer=null,this.vsn=Vp,this.logger=Bu,this.conn=null,this.sendBuffer=[],this.serializer=new Rw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${td.websocket}`,this.httpEndpoint=Vg(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=jw.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,i){this.logger(n,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ja.connecting:return Qa.Connecting;case ja.open:return Qa.Open;case ja.closing:return Qa.Closing;default:return Qa.Closed}}isConnected(){return this.connectionState()===Qa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const i=`realtime:${n}`,c=this.getChannels().find(u=>u.topic===i);if(c)return c;{const u=new ar(`realtime:${n}`,r,this);return this.channels.push(u),u}}push(n){const{topic:r,event:i,payload:c,ref:u}=n,f=()=>{this.encode(n,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${r} ${i} (${u})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Tw,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Jl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:c,payload:u,ref:f}=r,p=f?`(${f})`:"",m=u.status||"";this.log("receive",`${m} ${i} ${c} ${p}`.trim(),u),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(c,u,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===ja.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ja.open||this.conn.readyState===ja.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(vn.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const i=n.match(/\?/)?"&":"?",c=new URLSearchParams(r);return`${n}${i}${c}`}_workerObjectUrl(n){let r;if(n)r=n;else{const i=new Blob([qw],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,i=!1;if(n)r=n,i=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),r=this.accessTokenValue}else r=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(c=>{const u={access_token:r,version:Nw};r&&c.updateJoinPayload(u),c.joinedOnce&&c._isJoined()&&c._push(vn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(r)}catch(c){this.log("error",`error in ${n} callback`,c)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Gg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Jl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,i,c,u,f,p,m,g,v,w,_,x;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=n?.timeout)!==null&&i!==void 0?i:ed,this.heartbeatIntervalMs=(c=n?.heartbeatIntervalMs)!==null&&c!==void 0?c:Jl.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:Bu,this.vsn=(m=n?.vsn)!==null&&m!==void 0?m:Vp,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=n?.reconnectAfterMs)!==null&&g!==void 0?g:(E=>Lw[E-1]||$w),this.vsn){case Ig:this.encode=(v=n?.encode)!==null&&v!==void 0?v:((E,T)=>T(JSON.stringify(E))),this.decode=(w=n?.decode)!==null&&w!==void 0?w:((E,T)=>T(JSON.parse(E)));break;case kw:this.encode=(_=n?.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(x=n?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var vi=class extends Error{constructor(s,n){super(s),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Hw(s,n,r){const i=new URL(n,s);if(r)for(const[c,u]of Object.entries(r))u!==void 0&&i.searchParams.set(c,u);return i.toString()}async function Pw(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function Iw(s){const n=s.fetchImpl??globalThis.fetch;return{async request({method:r,path:i,query:c,body:u,headers:f}){const p=Hw(s.baseUrl,i,c),m=await Pw(s.auth),g=await n(p,{method:r,headers:{...u?{"Content-Type":"application/json"}:{},...m,...f},body:u?JSON.stringify(u):void 0}),v=await g.text(),w=(g.headers.get("content-type")||"").includes("application/json"),_=w&&v?JSON.parse(v):v;if(!g.ok){const x=w?_:void 0,E=x?.error;throw new vi(E?.message??`Request failed with status ${g.status}`,{status:g.status,icebergType:E?.type,icebergCode:E?.code,details:x})}return{status:g.status,headers:g.headers,data:_}}}}function Ql(s){return s.join("")}var Gw=class{constructor(s,n=""){this.client=s,this.prefix=n}async listNamespaces(s){const n=s?{parent:Ql(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(s,n){const r={namespace:s.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ql(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ql(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ql(s.namespace)}`}),!0}catch(n){if(n instanceof vi&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(s,n){try{return await this.createNamespace(s,n)}catch(r){if(r instanceof vi&&r.status===409)return;throw r}}};function Gs(s){return s.join("")}var Yw=class{constructor(s,n="",r){this.client=s,this.prefix=n,this.accessDelegation=r}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gs(s.namespace)}/tables`})).data.identifiers}async createTable(s,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gs(s.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(s,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gs(s.namespace)}/tables/${s.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(s,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gs(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(s){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gs(s.namespace)}/tables/${s.name}`,headers:n})).data.metadata}async tableExists(s){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gs(s.namespace)}/tables/${s.name}`,headers:n}),!0}catch(r){if(r instanceof vi&&r.status===404)return!1;throw r}}async createTableIfNotExists(s,n){try{return await this.createTable(s,n)}catch(r){if(r instanceof vi&&r.status===409)return await this.loadTable({namespace:s.namespace,name:n.name});throw r}}},Vw=class{constructor(s){let n="v1";s.catalogName&&(n+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=Iw({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new Gw(this.client,n),this.tableOps=new Yw(this.client,n,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,n){return this.namespaceOps.createNamespace(s,n)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,n){return this.tableOps.createTable(s,n)}async updateTable(s,n){return this.tableOps.updateTable(s,n)}async dropTable(s,n){await this.tableOps.dropTable(s,n)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,n){return this.namespaceOps.createNamespaceIfNotExists(s,n)}async createTableIfNotExists(s,n){return this.tableOps.createTableIfNotExists(s,n)}},fo=class extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}};function Fe(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Kw=class extends fo{constructor(s,n,r){super(s),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ad=class extends fo{constructor(s,n){super(s),this.name="StorageUnknownError",this.originalError=n}};const Sd=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Jw=()=>Response,sd=s=>{if(Array.isArray(s))return s.map(r=>sd(r));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([r,i])=>{const c=r.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[c]=sd(i)}),n},Qw=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Xw=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function bi(s){"@babel/helpers - typeof";return bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bi(s)}function Zw(s,n){if(bi(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var i=r.call(s,n);if(bi(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function Ww(s){var n=Zw(s,"string");return bi(n)=="symbol"?n:n+""}function Fw(s,n,r){return(n=Ww(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function Xp(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);n&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),r.push.apply(r,i)}return r}function me(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Xp(Object(r),!0).forEach(function(i){Fw(s,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Xp(Object(r)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(r,i))})}return s}const Hu=s=>{var n;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(n=s.error)===null||n===void 0?void 0:n.message)||JSON.stringify(s)},ex=async(s,n,r)=>{s instanceof await Jw()&&!r?.noResolveJson?s.json().then(i=>{const c=s.status||500,u=i?.statusCode||c+"";n(new Kw(Hu(i),c,u))}).catch(i=>{n(new ad(Hu(i),i))}):n(new ad(Hu(s),s))},tx=(s,n,r,i)=>{const c={method:s,headers:n?.headers||{}};return s==="GET"||!i?c:(Qw(i)?(c.headers=me({"Content-Type":"application/json"},n?.headers),c.body=JSON.stringify(i)):c.body=i,n?.duplex&&(c.duplex=n.duplex),me(me({},c),r))};async function Ni(s,n,r,i,c,u){return new Promise((f,p)=>{s(r,tx(n,i,c,u)).then(m=>{if(!m.ok)throw m;return i?.noResolveJson?m:m.json()}).then(m=>f(m)).catch(m=>ex(m,p,i))})}async function wi(s,n,r,i){return Ni(s,"GET",n,r,i)}async function yn(s,n,r,i,c){return Ni(s,"POST",n,i,c,r)}async function rd(s,n,r,i,c){return Ni(s,"PUT",n,i,c,r)}async function nx(s,n,r,i){return Ni(s,"HEAD",n,me(me({},r),{},{noResolveJson:!0}),i)}async function jd(s,n,r,i,c){return Ni(s,"DELETE",n,i,c,r)}var ax=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}then(s,n){return this.execute().then(s,n)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}};let Kg;Kg=Symbol.toStringTag;var sx=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n,this[Kg]="BlobDownloadBuilder",this.promise=null}asStream(){return new ax(this.downloadFn,this.shouldThrowOnError)}then(s,n){return this.getPromise().then(s,n)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}};const rx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ix=class{constructor(s,n={},r,i){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.bucketId=r,this.fetch=Sd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(s,n,r,i){var c=this;try{let u;const f=me(me({},Zp),i);let p=me(me({},c.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const m=f.metadata;typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",f.cacheControl),m&&u.append("metadata",c.encodeMetadata(m)),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.has("cacheControl")||u.append("cacheControl",f.cacheControl),m&&!u.has("metadata")&&u.append("metadata",c.encodeMetadata(m))):(u=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,m&&(p["x-metadata"]=c.toBase64(c.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!f.duplex&&(f.duplex="half")),i?.headers&&(p=me(me({},p),i.headers));const g=c._removeEmptyFolders(n),v=c._getFinalPath(g),w=await(s=="PUT"?rd:yn)(c.fetch,`${c.url}/object/${v}`,u,me({headers:p},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:g,id:w.Id,fullPath:w.Key},error:null}}catch(u){if(c.shouldThrowOnError)throw u;if(Fe(u))return{data:null,error:u};throw u}}async upload(s,n,r){return this.uploadOrUpdate("POST",s,n,r)}async uploadToSignedUrl(s,n,r,i){var c=this;const u=c._removeEmptyFolders(s),f=c._getFinalPath(u),p=new URL(c.url+`/object/upload/sign/${f}`);p.searchParams.set("token",n);try{let m;const g=me({upsert:Zp.upsert},i),v=me(me({},c.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.append("cacheControl",g.cacheControl)):(m=r,v["cache-control"]=`max-age=${g.cacheControl}`,v["content-type"]=g.contentType),{data:{path:u,fullPath:(await rd(c.fetch,p.toString(),m,{headers:v})).Key},error:null}}catch(m){if(c.shouldThrowOnError)throw m;if(Fe(m))return{data:null,error:m};throw m}}async createSignedUploadUrl(s,n){var r=this;try{let i=r._getFinalPath(s);const c=me({},r.headers);n?.upsert&&(c["x-upsert"]="true");const u=await yn(r.fetch,`${r.url}/object/upload/sign/${i}`,{},{headers:c}),f=new URL(r.url+u.url),p=f.searchParams.get("token");if(!p)throw new fo("No token returned by API");return{data:{signedUrl:f.toString(),path:s,token:p},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async update(s,n,r){return this.uploadOrUpdate("PUT",s,n,r)}async move(s,n,r){var i=this;try{return{data:await yn(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:i.headers}),error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Fe(c))return{data:null,error:c};throw c}}async copy(s,n,r){var i=this;try{return{data:{path:(await yn(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:i.headers})).Key},error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Fe(c))return{data:null,error:c};throw c}}async createSignedUrl(s,n,r){var i=this;try{let c=i._getFinalPath(s),u=await yn(i.fetch,`${i.url}/object/sign/${c}`,me({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:i.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return u={signedUrl:encodeURI(`${i.url}${u.signedURL}${f}`)},{data:u,error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Fe(c))return{data:null,error:c};throw c}}async createSignedUrls(s,n,r){var i=this;try{const c=await yn(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:n,paths:s},{headers:i.headers}),u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:c.map(f=>me(me({},f),{},{signedUrl:f.signedURL?encodeURI(`${i.url}${f.signedURL}${u}`):null})),error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Fe(c))return{data:null,error:c};throw c}}download(s,n){const r=typeof n?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(n?.transform||{}),c=i?`?${i}`:"",u=this._getFinalPath(s),f=()=>wi(this.fetch,`${this.url}/${r}/${u}${c}`,{headers:this.headers,noResolveJson:!0});return new sx(f,this.shouldThrowOnError)}async info(s){var n=this;const r=n._getFinalPath(s);try{return{data:sd(await wi(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async exists(s){var n=this;const r=n._getFinalPath(s);try{return await nx(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Fe(i)&&i instanceof ad){const c=i.originalError;if([400,404].includes(c?.status))return{data:!1,error:i}}throw i}}getPublicUrl(s,n){const r=this._getFinalPath(s),i=[],c=n?.download?`download=${n.download===!0?"":n.download}`:"";c!==""&&i.push(c);const u=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&i.push(f);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${p}`)}}}async remove(s){var n=this;try{return{data:await jd(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:s},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}}async list(s,n,r){var i=this;try{const c=me(me(me({},rx),n),{},{prefix:s||""});return{data:await yn(i.fetch,`${i.url}/object/list/${i.bucketId}`,c,{headers:i.headers},r),error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Fe(c))return{data:null,error:c};throw c}}async listV2(s,n){var r=this;try{const i=me({},s);return{data:await yn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}};const Jg="2.89.0",Qg={"X-Client-Info":`storage-js/${Jg}`};var lx=class{constructor(s,n={},r,i){this.shouldThrowOnError=!1;const c=new URL(s);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=me(me({},Qg),n),this.fetch=Sd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(s){var n=this;try{const r=n.listBucketOptionsToQueryString(s);return{data:await wi(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}}async getBucket(s){var n=this;try{return{data:await wi(n.fetch,`${n.url}/bucket/${s}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}}async createBucket(s,n={public:!1}){var r=this;try{return{data:await yn(r.fetch,`${r.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async updateBucket(s,n){var r=this;try{return{data:await rd(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async emptyBucket(s){var n=this;try{return{data:await yn(n.fetch,`${n.url}/bucket/${s}/empty`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}}async deleteBucket(s){var n=this;try{return{data:await jd(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(s){const n={};return s&&("limit"in s&&(n.limit=String(s.limit)),"offset"in s&&(n.offset=String(s.offset)),s.search&&(n.search=s.search),s.sortColumn&&(n.sortColumn=s.sortColumn),s.sortOrder&&(n.sortOrder=s.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},ox=class{constructor(s,n={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=me(me({},Qg),n),this.fetch=Sd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var n=this;try{return{data:await yn(n.fetch,`${n.url}/bucket`,{name:s},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}}async listBuckets(s){var n=this;try{const r=new URLSearchParams;s?.limit!==void 0&&r.set("limit",s.limit.toString()),s?.offset!==void 0&&r.set("offset",s.offset.toString()),s?.sortColumn&&r.set("sortColumn",s.sortColumn),s?.sortOrder&&r.set("sortOrder",s.sortOrder),s?.search&&r.set("search",s.search);const i=r.toString(),c=i?`${n.url}/bucket?${i}`:`${n.url}/bucket`;return{data:await wi(n.fetch,c,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}}async deleteBucket(s){var n=this;try{return{data:await jd(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}}from(s){var n=this;if(!Xw(s))throw new fo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Vw({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(r,{get(c,u){const f=c[u];return typeof f!="function"?f:async(...p)=>{try{return{data:await f.apply(c,p),error:null}}catch(m){if(i)throw m;return{data:null,error:m}}}}})}};const Ed={"X-Client-Info":`storage-js/${Jg}`,"Content-Type":"application/json"};var Xg=class extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Xt(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var Pu=class extends Xg{constructor(s,n,r){super(s),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},cx=class extends Xg{constructor(s,n){super(s),this.name="StorageVectorsUnknownError",this.originalError=n}};const Nd=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),ux=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Wp=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),dx=async(s,n,r)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!r?.noResolveJson){const i=s.status||500,c=s;if(typeof c.json=="function")c.json().then(u=>{const f=u?.statusCode||u?.code||i+"";n(new Pu(Wp(u),i,f))}).catch(()=>{const u=i+"";n(new Pu(c.statusText||`HTTP ${i} error`,i,u))});else{const u=i+"";n(new Pu(c.statusText||`HTTP ${i} error`,i,u))}}else n(new cx(Wp(s),s))},hx=(s,n,r,i)=>{const c={method:s,headers:n?.headers||{}};return i?(ux(i)?(c.headers=me({"Content-Type":"application/json"},n?.headers),c.body=JSON.stringify(i)):c.body=i,me(me({},c),r)):c};async function fx(s,n,r,i,c,u){return new Promise((f,p)=>{s(r,hx(n,i,c,u)).then(m=>{if(!m.ok)throw m;if(i?.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>f(m)).catch(m=>dx(m,p,i))})}async function Zt(s,n,r,i,c){return fx(s,"POST",n,i,c,r)}var mx=class{constructor(s,n={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=me(me({},Ed),n),this.fetch=Nd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(s){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/CreateIndex`,s,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}async getIndex(s,n){var r=this;try{return{data:await Zt(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Xt(i))return{data:null,error:i};throw i}}async listIndexes(s){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/ListIndexes`,s,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}async deleteIndex(s,n){var r=this;try{return{data:await Zt(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers})||{},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Xt(i))return{data:null,error:i};throw i}}},px=class{constructor(s,n={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=me(me({},Ed),n),this.fetch=Nd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(s){var n=this;try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Zt(n.fetch,`${n.url}/PutVectors`,s,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}async getVectors(s){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/GetVectors`,s,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}async listVectors(s){var n=this;try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:await Zt(n.fetch,`${n.url}/ListVectors`,s,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}async queryVectors(s){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/QueryVectors`,s,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}async deleteVectors(s){var n=this;try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Zt(n.fetch,`${n.url}/DeleteVectors`,s,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}},gx=class{constructor(s,n={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=me(me({},Ed),n),this.fetch=Nd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}async getBucket(s){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:s},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}async listBuckets(s={}){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/ListVectorBuckets`,s,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}async deleteBucket(s){var n=this;try{return{data:await Zt(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xt(r))return{data:null,error:r};throw r}}},yx=class extends gx{constructor(s,n={}){super(s,n.headers||{},n.fetch)}from(s){return new vx(this.url,this.headers,s,this.fetch)}async createBucket(s){var n=()=>super.createBucket,r=this;return n().call(r,s)}async getBucket(s){var n=()=>super.getBucket,r=this;return n().call(r,s)}async listBuckets(s={}){var n=()=>super.listBuckets,r=this;return n().call(r,s)}async deleteBucket(s){var n=()=>super.deleteBucket,r=this;return n().call(r,s)}},vx=class extends mx{constructor(s,n,r,i){super(s,n,i),this.vectorBucketName=r}async createIndex(s){var n=()=>super.createIndex,r=this;return n().call(r,me(me({},s),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(s={}){var n=()=>super.listIndexes,r=this;return n().call(r,me(me({},s),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(s){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,s)}async deleteIndex(s){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,s)}index(s){return new bx(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},bx=class extends px{constructor(s,n,r,i,c){super(s,n,c),this.vectorBucketName=r,this.indexName=i}async putVectors(s){var n=()=>super.putVectors,r=this;return n().call(r,me(me({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(s){var n=()=>super.getVectors,r=this;return n().call(r,me(me({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(s={}){var n=()=>super.listVectors,r=this;return n().call(r,me(me({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(s){var n=()=>super.queryVectors,r=this;return n().call(r,me(me({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(s){var n=()=>super.deleteVectors,r=this;return n().call(r,me(me({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},wx=class extends lx{constructor(s,n={},r,i){super(s,n,r,i)}from(s){return new ix(this.url,this.headers,s,this.fetch)}get vectors(){return new yx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ox(this.url+"/iceberg",this.headers,this.fetch)}};const Zg="2.89.0",Ws=30*1e3,id=3,Iu=id*Ws,xx="http://localhost:9999",_x="supabase.auth.token",Sx={"X-Client-Info":`gotrue-js/${Zg}`},ld="X-Supabase-Api-Version",Wg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},jx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ex=600*1e3;class xi extends Error{constructor(n,r,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function le(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Nx extends xi{constructor(n,r,i){super(n,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function kx(s){return le(s)&&s.name==="AuthApiError"}class Xa extends xi{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Fn extends xi{constructor(n,r,i,c){super(n,i,c),this.name=r,this.status=i}}class Qt extends Fn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Tx(s){return le(s)&&s.name==="AuthSessionMissingError"}class Ys extends Fn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xl extends Fn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Zl extends Fn{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ax(s){return le(s)&&s.name==="AuthImplicitGrantRedirectError"}class Fp extends Fn{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rx extends Fn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class od extends Fn{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Gu(s){return le(s)&&s.name==="AuthRetryableFetchError"}class eg extends Fn{constructor(n,r,i){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class cd extends Fn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const no="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tg=` 	
\r=`.split(""),Cx=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<tg.length;n+=1)s[tg[n].charCodeAt(0)]=-2;for(let n=0;n<no.length;n+=1)s[no[n].charCodeAt(0)]=n;return s})();function ng(s,n,r){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(no[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(no[i]),n.queuedBits-=6}}function Fg(s,n,r){const i=Cx[s];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function ag(s){const n=[],r=f=>{n.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=f=>{Mx(f,i,r)};for(let f=0;f<s.length;f+=1)Fg(s.charCodeAt(f),c,u);return n.join("")}function Ox(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Dx(s,n){for(let r=0;r<s.length;r+=1){let i=s.charCodeAt(r);if(i>55295&&i<=56319){const c=(i-55296)*1024&65535;i=(s.charCodeAt(r+1)-56320&65535|c)+65536,r+=1}Ox(i,n)}}function Mx(s,n,r){if(n.utf8seq===0){if(s<=127){r(s);return}for(let i=1;i<6;i+=1)if((s>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function rr(s){const n=[],r={queue:0,queuedBits:0},i=c=>{n.push(c)};for(let c=0;c<s.length;c+=1)Fg(s.charCodeAt(c),r,i);return new Uint8Array(n)}function Ux(s){const n=[];return Dx(s,r=>n.push(r)),new Uint8Array(n)}function Za(s){const n=[],r={queue:0,queuedBits:0},i=c=>{n.push(c)};return s.forEach(c=>ng(c,r,i)),ng(null,r,i),n.join("")}function zx(s){return Math.round(Date.now()/1e3)+s}function Lx(){return Symbol("auth-callback")}const kt=()=>typeof window<"u"&&typeof document<"u",Va={tested:!1,writable:!1},ey=()=>{if(!kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Va.tested)return Va.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Va.tested=!0,Va.writable=!0}catch{Va.tested=!0,Va.writable=!1}return Va.writable};function $x(s){const n={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((c,u)=>{n[u]=c})}catch{}return r.searchParams.forEach((i,c)=>{n[c]=i}),n}const ty=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),qx=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Fs=async(s,n,r)=>{await s.setItem(n,JSON.stringify(r))},Ka=async(s,n)=>{const r=await s.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Nt=async(s,n)=>{await s.removeItem(n)};class mo{constructor(){this.promise=new mo.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}mo.promiseConstructor=Promise;function Yu(s){const n=s.split(".");if(n.length!==3)throw new cd("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!jx.test(n[i]))throw new cd("JWT not in base64url format");return{header:JSON.parse(ag(n[0])),payload:JSON.parse(ag(n[1])),signature:rr(n[2]),raw:{header:n[0],payload:n[1]}}}async function Bx(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function Hx(s,n){return new Promise((i,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const f=await s(u);if(!n(u,null,f)){i(f);return}}catch(f){if(!n(u,f)){c(f);return}}})()})}function Px(s){return("0"+s.toString(16)).substr(-2)}function Ix(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let c="";for(let u=0;u<56;u++)c+=r.charAt(Math.floor(Math.random()*i));return c}return crypto.getRandomValues(n),Array.from(n,Px).join("")}async function Gx(s){const r=new TextEncoder().encode(s),i=await crypto.subtle.digest("SHA-256",r),c=new Uint8Array(i);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function Yx(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await Gx(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vs(s,n,r=!1){const i=Ix();let c=i;r&&(c+="/PASSWORD_RECOVERY"),await Fs(s,`${n}-code-verifier`,c);const u=await Yx(i);return[u,i===u?"plain":"s256"]}const Vx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Kx(s){const n=s.headers.get(ld);if(!n||!n.match(Vx))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Jx(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function Qx(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Xx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ks(s){if(!Xx.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vu(){const s={};return new Proxy(s,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Zx(s,n){return new Proxy(s,{get:(r,i,c)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const u=i.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,i,c)}return!n.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,i,c)}})}function sg(s){return JSON.parse(JSON.stringify(s))}const Ja=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Wx=[502,503,504];async function rg(s){var n;if(!qx(s))throw new od(Ja(s),0);if(Wx.includes(s.status))throw new od(Ja(s),s.status);let r;try{r=await s.json()}catch(u){throw new Xa(Ja(u),u)}let i;const c=Kx(s);if(c&&c.getTime()>=Wg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new eg(Ja(r),s.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new Qt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((u,f)=>u&&typeof f=="string",!0))throw new eg(Ja(r),s.status,r.weak_password.reasons);throw new Nx(Ja(r),s.status||500,i)}const Fx=(s,n,r,i)=>{const c={method:s,headers:n?.headers||{}};return s==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),c.body=JSON.stringify(i),Object.assign(Object.assign({},c),r))};async function fe(s,n,r,i){var c;const u=Object.assign({},i?.headers);u[ld]||(u[ld]=Wg["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const f=(c=i?.query)!==null&&c!==void 0?c:{};i?.redirectTo&&(f.redirect_to=i.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",m=await e_(s,n,r+p,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(m):{data:Object.assign({},m),error:null}}async function e_(s,n,r,i,c,u){const f=Fx(n,i,c,u);let p;try{p=await s(r,Object.assign({},f))}catch(m){throw console.error(m),new od(Ja(m),0)}if(p.ok||await rg(p),i?.noResolveJson)return p;try{return await p.json()}catch(m){await rg(m)}}function gn(s){var n;let r=null;a_(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=zx(s.expires_in)));const i=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:r,user:i},error:null}}function ig(s){const n=gn(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(n.data.weak_password=s.weak_password),n}function Ea(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function t_(s){return{data:s,error:null}}function n_(s){const{action_link:n,email_otp:r,hashed_token:i,redirect_to:c,verification_type:u}=s,f=ho(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:r,hashed_token:i,redirect_to:c,verification_type:u},m=Object.assign({},f);return{data:{properties:p,user:m},error:null}}function lg(s){return s}function a_(s){return s.access_token&&s.refresh_token&&s.expires_in}const Ku=["global","local","others"];class s_{constructor({url:n="",headers:r={},fetch:i}){this.url=n,this.headers=r,this.fetch=ty(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Ku[0]){if(Ku.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ku.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(le(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,r={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ea})}catch(i){if(le(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:r}=n,i=ho(n,["options"]),c=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(c.new_email=i?.newEmail,delete c.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:n_,redirectTo:r?.redirectTo})}catch(r){if(le(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Ea})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,i,c,u,f,p,m;try{const g={nextPage:null,lastPage:0,total:0},v=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(u=(c=n?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:lg});if(v.error)throw v.error;const w=await v.json(),_=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,x=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return x.length>0&&(x.forEach(E=>{const T=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(E.split(";")[1].split("=")[1]);g[`${D}Page`]=T}),g.total=parseInt(_)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(le(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){Ks(n);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Ea})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Ks(n);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Ea})}catch(i){if(le(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,r=!1){Ks(n);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ea})}catch(i){if(le(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){Ks(n.userId);try{const{data:r,error:i}=await fe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:r,error:i}}catch(r){if(le(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Ks(n.userId),Ks(n.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,i,c,u,f,p,m;try{const g={nextPage:null,lastPage:0,total:0},v=await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(u=(c=n?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:lg});if(v.error)throw v.error;const w=await v.json(),_=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,x=(m=(p=v.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return x.length>0&&(x.forEach(E=>{const T=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(E.split(";")[1].split("=")[1]);g[`${D}Page`]=T}),g.total=parseInt(_)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(le(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(n){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await fe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(le(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(n){try{return await fe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}}function og(s={}){return{getItem:n=>s[n]||null,setItem:(n,r)=>{s[n]=r},removeItem:n=>{delete s[n]}}}const Js={debug:!!(globalThis&&ey()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ny extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class r_ extends ny{}async function i_(s,n,r){Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),Js.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async c=>{if(c){Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,c.name);try{return await r()}finally{Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,c.name)}}else{if(n===0)throw Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new r_(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Js.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function l_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ay(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function o_(s){return parseInt(s,16)}function c_(s){const n=new TextEncoder().encode(s);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function u_(s){var n;const{chainId:r,domain:i,expirationTime:c,issuedAt:u=new Date,nonce:f,notBefore:p,requestId:m,resources:g,scheme:v,uri:w,version:_}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((n=s.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const x=ay(s.address),E=v?`${v}://${i}`:i,T=s.statement?`${s.statement}
`:"",D=`${E} wants you to sign in with your Ethereum account:
${x}

${T}`;let C=`URI: ${w}
Version: ${_}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${u.toISOString()}`;if(c&&(C+=`
Expiration Time: ${c.toISOString()}`),p&&(C+=`
Not Before: ${p.toISOString()}`),m&&(C+=`
Request ID: ${m}`),g){let q=`
Resources:`;for(const R of g){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);q+=`
- ${R}`}C+=q}return`${D}
${C}`}class ht extends Error{constructor({message:n,code:r,cause:i,name:c}){var u;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(u=c??(i instanceof Error?i.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=r}}class ao extends ht{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function d_({error:s,options:n}){var r,i,c;const{publicKey:u}=n;if(!u)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ht({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=u.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ht({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(n.mediation==="conditional"&&((i=u.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ht({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new ht({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new ht({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new ht({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new ht({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new ht({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const f=window.location.hostname;if(sy(f)){if(u.rp.id!==f)return new ht({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new ht({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function h_({error:s,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ht({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new ht({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const i=window.location.hostname;if(sy(i)){if(r.rpId!==i)return new ht({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class f_{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const m_=new f_;function p_(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:n,user:r,excludeCredentials:i}=s,c=ho(s,["challenge","user","excludeCredentials"]),u=rr(n).buffer,f=Object.assign(Object.assign({},r),{id:rr(r.id).buffer}),p=Object.assign(Object.assign({},c),{challenge:u,user:f});if(i&&i.length>0){p.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const g=i[m];p.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:rr(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function g_(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:n,allowCredentials:r}=s,i=ho(s,["challenge","allowCredentials"]),c=rr(n).buffer,u=Object.assign(Object.assign({},i),{challenge:c});if(r&&r.length>0){u.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const p=r[f];u.allowCredentials[f]=Object.assign(Object.assign({},p),{id:rr(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function y_(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:Za(new Uint8Array(s.response.attestationObject)),clientDataJSON:Za(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function v_(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,i=s.getClientExtensionResults(),c=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Za(new Uint8Array(c.authenticatorData)),clientDataJSON:Za(new Uint8Array(c.clientDataJSON)),signature:Za(new Uint8Array(c.signature)),userHandle:c.userHandle?Za(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function sy(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function cg(){var s,n;return!!(kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function b_(s){try{const n=await navigator.credentials.create(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ao("Browser returned unexpected credential type",n)}:{data:null,error:new ao("Empty credential response",n)}}catch(n){return{data:null,error:d_({error:n,options:s})}}}async function w_(s){try{const n=await navigator.credentials.get(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ao("Browser returned unexpected credential type",n)}:{data:null,error:new ao("Empty credential response",n)}}catch(n){return{data:null,error:h_({error:n,options:s})}}}const x_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},__={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function so(...s){const n=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),r=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),i={};for(const c of s)if(c)for(const u in c){const f=c[u];if(f!==void 0)if(Array.isArray(f))i[u]=f;else if(r(f))i[u]=f;else if(n(f)){const p=i[u];n(p)?i[u]=so(p,f):i[u]=so(f)}else i[u]=f}return i}function S_(s,n){return so(x_,s,n||{})}function j_(s,n){return so(__,s,n||{})}class E_{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:i,signal:c},u){try{const{data:f,error:p}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:p};const m=c??m_.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:g}=f.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${i}`),g.displayName||(g.displayName=g.name)}switch(f.webauthn.type){case"create":{const g=S_(f.webauthn.credential_options.publicKey,u?.create),{data:v,error:w}=await b_({publicKey:g,signal:m});return v?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}case"request":{const g=j_(f.webauthn.credential_options.publicKey,u?.request),{data:v,error:w}=await w_(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:g,signal:m}));return v?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}}}catch(f){return le(f)?{data:null,error:f}:{data:null,error:new Xa("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!r)return{data:null,error:new xi("rpId is required for WebAuthn authentication")};try{if(!cg())return{data:null,error:new Xa("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:i},signal:c},{request:u});if(!f)return{data:null,error:p};const{webauthn:m}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:m.type,rpId:r,rpOrigins:i,credential_response:m.credential_response}})}catch(f){return le(f)?{data:null,error:f}:{data:null,error:new Xa("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!r)return{data:null,error:new xi("rpId is required for WebAuthn registration")};try{if(!cg())return{data:null,error:new Xa("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(v=>{var w;return(w=v.data)===null||w===void 0?void 0:w.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===n&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:p};const{data:m,error:g}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:c},{create:u});return m?this._verify({factorId:f.id,challengeId:m.challengeId,webauthn:{rpId:r,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(f){return le(f)?{data:null,error:f}:{data:null,error:new Xa("Unexpected error in register",f)}}}}l_();const N_={url:xx,storageKey:_x,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Sx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ug(s,n,r){return await r()}const Qs={};class _i{get jwks(){var n,r;return(r=(n=Qs[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Qs[this.storageKey]=Object.assign(Object.assign({},Qs[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Qs[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Qs[this.storageKey]=Object.assign(Object.assign({},Qs[this.storageKey]),{cachedAt:n})}constructor(n){var r,i,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},N_),n);if(this.storageKey=u.storageKey,this.instanceID=(r=_i.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,_i.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&kt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new s_({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=ty(u.fetch),this.lock=u.lock||ug,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&kt()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=i_:this.lock=ug,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new E_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:ey()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=og(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=og(this.memoryStorage)),kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Zg}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},i="none";if(kt()&&(r=$x(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),kt()&&this.detectSessionInUrl&&i!=="none"){const{data:c,error:u}=await this._getSessionFromURL(r,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Ax(u)){const m=(n=u.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:f,redirectType:p}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return le(r)?this._returnResult({error:r}):this._returnResult({error:new Xa("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,c;try{const u=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(c=n?.options)===null||c===void 0?void 0:c.captchaToken}},xform:gn}),{data:f,error:p}=u;if(p||!f)return this._returnResult({data:{user:null,session:null},error:p});const m=f.session,g=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(le(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(n){var r,i,c;try{let u;if("email"in n){const{email:v,password:w,options:_}=n;let x=null,E=null;this.flowType==="pkce"&&([x,E]=await Vs(this.storage,this.storageKey)),u=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:v,password:w,data:(r=_?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:x,code_challenge_method:E},xform:gn})}else if("phone"in n){const{phone:v,password:w,options:_}=n;u=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:w,data:(i=_?.data)!==null&&i!==void 0?i:{},channel:(c=_?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:gn})}else throw new Xl("You must provide either an email or phone number and a password");const{data:f,error:p}=u;if(p||!f)return await Nt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const m=f.session,g=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(n){try{let r;if("email"in n){const{email:u,password:f,options:p}=n;r=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:ig})}else if("phone"in n){const{phone:u,password:f,options:p}=n;r=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:ig})}else throw new Xl("You must provide either an email or phone number and a password");const{data:i,error:c}=r;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!i||!i.session||!i.user){const u=new Ys;return this._returnResult({data:{user:null,session:null},error:u})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:c})}catch(r){if(le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,i,c,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,c,u,f,p,m,g,v,w,_;let x,E;if("message"in n)x=n.message,E=n.signature;else{const{chain:T,wallet:D,statement:C,options:q}=n;let R;if(kt())if(typeof D=="object")R=D;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")R=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=D}const K=new URL((r=q?.url)!==null&&r!==void 0?r:window.location.href),Q=await R.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Q||Q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const H=ay(Q[0]);let P=(i=q?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!P){const I=await R.request({method:"eth_chainId"});P=o_(I)}const F={domain:K.host,address:H,statement:C,uri:K.href,version:"1",chainId:P,nonce:(c=q?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(f=(u=q?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(p=q?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=q?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=q?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(v=q?.signInWithEthereum)===null||v===void 0?void 0:v.resources};x=u_(F),E=await R.request({method:"personal_sign",params:[c_(x),H]})}try{const{data:T,error:D}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:E},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:gn});if(D)throw D;if(!T||!T.session||!T.user){const C=new Ys;return this._returnResult({data:{user:null,session:null},error:C})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:D})}catch(T){if(le(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async signInWithSolana(n){var r,i,c,u,f,p,m,g,v,w,_,x;let E,T;if("message"in n)E=n.message,T=n.signature;else{const{chain:D,wallet:C,statement:q,options:R}=n;let K;if(kt())if(typeof C=="object")K=C;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))K=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");K=C}const Q=new URL((r=R?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in K&&K.signIn){const H=await K.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:Q.host,uri:Q.href}),q?{statement:q}:null));let P;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")P=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)P=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)E=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),T=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in K)||typeof K.signMessage!="function"||!("publicKey"in K)||typeof K!="object"||!K.publicKey||!("toBase58"in K.publicKey)||typeof K.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${Q.host} wants you to sign in with your Solana account:`,K.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${Q.href}`,`Issued At: ${(c=(i=R?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=R?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((f=R?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((p=R?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((m=R?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((g=R?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((w=(v=R?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||w===void 0)&&w.length?["Resources",...R.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const H=await K.signMessage(new TextEncoder().encode(E),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=H}}try{const{data:D,error:C}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Za(T)},!((_=n.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:gn});if(C)throw C;if(!D||!D.session||!D.user){const q=new Ys;return this._returnResult({data:{user:null,session:null},error:q})}return D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:C})}catch(D){if(le(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}}async _exchangeCodeForSession(n){const r=await Ka(this.storage,`${this.storageKey}-code-verifier`),[i,c]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Rx;const{data:u,error:f}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:gn});if(await Nt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!u||!u.session||!u.user){const p=new Ys;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:f})}catch(u){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(n){try{const{options:r,provider:i,token:c,access_token:u,nonce:f}=n,p=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:c,access_token:u,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:gn}),{data:m,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const v=new Ys;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(r){if(le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,i,c,u,f;try{if("email"in n){const{email:p,options:m}=n;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Vs(this.storage,this.storageKey));const{error:w}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=m?.data)!==null&&r!==void 0?r:{},create_user:(i=m?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:v},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in n){const{phone:p,options:m}=n,{data:g,error:v}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(c=m?.data)!==null&&c!==void 0?c:{},create_user:(u=m?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(f=m?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:v})}throw new Xl("You must provide either an email or phone number.")}catch(p){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(n){var r,i;try{let c,u;"options"in n&&(c=(r=n.options)===null||r===void 0?void 0:r.redirectTo,u=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:p}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:gn});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const m=f.session,g=f.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(c){if(le(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(n){var r,i,c,u,f;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Vs(this.storage,this.storageKey));const g=await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((c=n?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:t_});return!((u=g.data)===null||u===void 0)&&u.url&&kt()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new Qt;const{error:c}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:i,type:c,options:u}=n,{error:f}=await fe(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:i,type:c,options:u}=n,{data:f,error:p}=await fe(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:p})}throw new Xl("You must provide either an email or phone number and a type")}catch(r){if(le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Ka(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<Iu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const f=await Ka(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=Vu()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=Zx(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:c,error:u}=await this._callRefreshToken(n.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Ea}):await this._useSession(async r=>{var i,c,u;const{data:f,error:p}=r;if(p)throw p;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qt}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:Ea})})}catch(r){if(le(r))return Tx(r)&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{const{data:c,error:u}=i;if(u)throw u;if(!c.session)throw new Qt;const f=c.session;let p=null,m=null;this.flowType==="pkce"&&n.email!=null&&([p,m]=await Vs(this.storage,this.storageKey));const{data:g,error:v}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:m}),jwt:f.access_token,xform:Ea});if(v)throw v;return f.user=g.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(i){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Qt;const r=Date.now()/1e3;let i=r,c=!0,u=null;const{payload:f}=Yu(n.access_token);if(f.exp&&(i=f.exp,c=i<=r),c){const{data:p,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:m}=await this._getUser(n.access_token);if(m)throw m;u={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(r){if(le(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){const{data:f,error:p}=r;if(p)throw p;n=(i=f.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new Qt;const{data:c,error:u}=await this._callRefreshToken(n.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!kt())throw new Zl("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Zl(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Fp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Fp("No code detected.");const{data:q,error:R}=await this._exchangeCodeForSession(n.code);if(R)throw R;const K=new URL(window.location.href);return K.searchParams.delete("code"),window.history.replaceState(window.history.state,"",K.toString()),{data:{session:q.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:c,access_token:u,refresh_token:f,expires_in:p,expires_at:m,token_type:g}=n;if(!u||!p||!f||!g)throw new Zl("No session defined in URL");const v=Math.round(Date.now()/1e3),w=parseInt(p);let _=v+w;m&&(_=parseInt(m));const x=_-v;x*1e3<=Ws&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${w}s`);const E=_-w;v-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,_,v):v-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,_,v);const{data:T,error:D}=await this._getUser(u);if(D)throw D;const C={provider_token:i,provider_refresh_token:c,access_token:u,expires_in:w,expires_at:_,refresh_token:f,token_type:g,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:n.type},error:null})}catch(i){if(le(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Ka(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:c,error:u}=r;if(u)return this._returnResult({error:u});const f=(i=c.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:p}=await this.admin.signOut(f,n);if(p&&!(kx(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return n!=="others"&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=Lx(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,c;try{const{data:{session:u},error:f}=r;if(f)throw f;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,r={}){let i=null,c=null;this.flowType==="pkce"&&([i,c]=await Vs(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:c,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(u){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var n;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:i,error:c}=await this._useSession(async u=>{var f,p,m,g,v;const{data:w,error:_}=u;if(_)throw _;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",x,{headers:this.headers,jwt:(v=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&v!==void 0?v:void 0})});if(c)throw c;return kt()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:n.provider,url:i?.url},error:null})}catch(i){if(le(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{const{error:c,data:{session:u}}=r;if(c)throw c;const{options:f,provider:p,token:m,access_token:g,nonce:v}=n,w=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=u?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:p,id_token:m,access_token:g,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:gn}),{data:_,error:x}=w;return x?this._returnResult({data:{user:null,session:null},error:x}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new Ys}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:x}))}catch(c){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,c;const{data:u,error:f}=r;if(f)throw f;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(c=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&c!==void 0?c:void 0})})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await Hx(async c=>(c>0&&await Bx(200*Math.pow(2,c-1)),this._debug(r,"refreshing attempt",c),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:gn})),(c,u)=>{const f=200*Math.pow(2,c);return u&&Gu(u)&&Date.now()+f-i<Ws})}catch(i){if(this._debug(r,"error",i),le(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),kt()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const c=await Ka(this.storage,this.storageKey);if(c&&this.userStorage){let f=await Ka(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await Fs(this.userStorage,this.storageKey+"-user",f)),c.user=(n=f?.user)!==null&&n!==void 0?n:Vu()}else if(c&&!c.user&&!c.user){const f=await Ka(this.storage,this.storageKey+"-user");f&&f?.user?(c.user=f.user,await Nt(this.storage,this.storageKey+"-user"),await Fs(this.storage,this.storageKey,c)):c.user=Vu()}if(this._debug(i,"session from storage",c),!this._isValidSession(c)){this._debug(i,"session is not valid"),c!==null&&await this._removeSession();return}const u=((r=c.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Iu;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${Iu}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),Gu(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(c.access_token);!p&&f?.user?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(i,"error",c),console.error(c);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new Qt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new mo;const{data:u,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!u.session)throw new Qt;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(c,"error",u),le(u)){const f={data:null,error:u};return Gu(u)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(n,r,i=!0){const c=`#_notifyAllSubscribers(${n})`;this._debug(c,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});const u=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,r)}catch(m){u.push(m)}});if(await Promise.all(f),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Nt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Fs(this.userStorage,this.storageKey+"-user",{user:r.user});const c=Object.assign({},r);delete c.user;const u=sg(c);await Fs(this.storage,this.storageKey,u)}else{const c=sg(r);await Fs(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Nt(this.storage,this.storageKey),await Nt(this.storage,this.storageKey+"-code-verifier"),await Nt(this.storage,this.storageKey+"-user"),this.userStorage&&await Nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&kt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Ws);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((i.expires_at*1e3-n)/Ws);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Ws}ms, refresh threshold is ${id} ticks`),c<=id&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof ny)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){const c=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&c.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,f]=await Vs(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(p.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);c.push(u.toString())}return i?.skipBrowserRedirect&&c.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${c.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;const{data:c,error:u}=r;return u?this._returnResult({data:null,error:u}):await fe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,c;const{data:u,error:f}=r;if(f)return this._returnResult({data:null,error:f});const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:m,error:g}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return g?this._returnResult({data:null,error:g}):(n.factorType==="totp"&&m.type==="totp"&&(!((c=m?.totp)===null||c===void 0)&&c.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:c,error:u}=r;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?y_(n.webauthn.credential_response):v_(n.webauthn.credential_response)})}:{code:n.code}),{data:p,error:m}=await fe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:c,error:u}=r;if(u)return this._returnResult({data:null,error:u});const f=await fe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});if(f.error)return f;const{data:p}=f;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:p_(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:g_(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(n=r?.factors)!==null&&n!==void 0?n:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var n,r;const{data:{session:i},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Yu(i.access_token);let f=null;u.aal&&(f=u.aal);let p=f;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(p="aal2");const g=u.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:i},error:c}=r;return c?this._returnResult({data:null,error:c}):i?await fe(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Qt})})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async i=>{const{data:{session:c},error:u}=i;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new Qt});const f=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&kt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,r){try{return await this._useSession(async i=>{const{data:{session:c},error:u}=i;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new Qt});const f=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&kt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await fe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Qt})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:i},error:c}=r;return c?this._returnResult({data:null,error:c}):i?(await fe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Qt})})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(p=>p.kid===n);if(i)return i;const c=Date.now();if(i=this.jwks.keys.find(p=>p.kid===n),i&&this.jwks_cached_at+Ex>c)return i;const{data:u,error:f}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,i=u.keys.find(p=>p.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){const{data:x,error:E}=await this.getSession();if(E||!x.session)return this._returnResult({data:null,error:E});i=x.session.access_token}const{header:c,payload:u,signature:f,raw:{header:p,payload:m}}=Yu(i);r?.allowExpired||Jx(u.exp);const g=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!g){const{error:x}=await this.getUser(i);if(x)throw x;return{data:{claims:u,header:c,signature:f},error:null}}const v=Qx(c.alg),w=await crypto.subtle.importKey("jwk",g,v,!0,["verify"]);if(!await crypto.subtle.verify(v,w,f,Ux(`${p}.${m}`)))throw new cd("Invalid JWT signature");return{data:{claims:u,header:c,signature:f},error:null}}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}}_i.nextInstanceID={};const k_=_i,T_="2.89.0";let hi="";typeof Deno<"u"?hi="deno":typeof document<"u"?hi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hi="react-native":hi="node";const A_={"X-Client-Info":`supabase-js-${hi}/${T_}`},R_={headers:A_},C_={schema:"public"},O_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},D_={};function Si(s){"@babel/helpers - typeof";return Si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Si(s)}function M_(s,n){if(Si(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var i=r.call(s,n);if(Si(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function U_(s){var n=M_(s,"string");return Si(n)=="symbol"?n:n+""}function z_(s,n,r){return(n=U_(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function dg(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);n&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),r.push.apply(r,i)}return r}function nt(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?dg(Object(r),!0).forEach(function(i){z_(s,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):dg(Object(r)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(r,i))})}return s}const L_=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),$_=()=>Headers,q_=(s,n,r)=>{const i=L_(r),c=$_();return async(u,f)=>{var p;const m=(p=await n())!==null&&p!==void 0?p:s;let g=new c(f?.headers);return g.has("apikey")||g.set("apikey",s),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),i(u,nt(nt({},f),{},{headers:g}))}};function B_(s){return s.endsWith("/")?s:s+"/"}function H_(s,n){var r,i;const{db:c,auth:u,realtime:f,global:p}=s,{db:m,auth:g,realtime:v,global:w}=n,_={db:nt(nt({},m),c),auth:nt(nt({},g),u),realtime:nt(nt({},v),f),storage:{},global:nt(nt(nt({},w),p),{},{headers:nt(nt({},(r=w?.headers)!==null&&r!==void 0?r:{}),(i=p?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return s.accessToken?_.accessToken=s.accessToken:delete _.accessToken,_}function P_(s){const n=s?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(B_(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var I_=class extends k_{constructor(s){super(s)}},G_=class{constructor(s,n,r){var i,c;this.supabaseUrl=s,this.supabaseKey=n;const u=P_(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const f=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:C_,realtime:D_,auth:nt(nt({},O_),{},{storageKey:f}),global:R_},m=H_(r??{},p);if(this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(c=m.global.headers)!==null&&c!==void 0?c:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(v,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=m.auth)!==null&&g!==void 0?g:{},this.headers,m.global.fetch)}this.fetch=q_(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(nt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new Sw(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new wx(this.storageUrl.href,this.headers,this.fetch,r?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new vw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,n,r)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,n,r;if(s.accessToken)return await s.accessToken();const{data:i}=await s.auth.getSession();return(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:c,storageKey:u,flowType:f,lock:p,debug:m,throwOnError:g},v,w){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new I_({url:this.authUrl.href,headers:nt(nt({},_),v),storageKey:u,autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:c,flowType:f,lock:p,debug:m,throwOnError:g,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Bw(this.realtimeUrl.href,nt(nt({},s),{},{params:nt(nt({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(s,n,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Y_=(s,n,r)=>new G_(s,n,r);function V_(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const n=s.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}V_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const K_="https://dnxqgphaisdxvdyeiwnh.supabase.co",J_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRueHFncGhhaXNkeHZkeWVpd25oIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4MjI0NzQsImV4cCI6MjA3OTM5ODQ3NH0.EOob0ftntm4WlxGMKezV3Vu3FGXQs6hiMLsSTinTrEs",re=Y_(K_,J_),ry=S.createContext(void 0),Q_=5e3,X_=3e3;function Z_({children:s}){const[n,r]=S.useState(null),[i,c]=S.useState(null),[u,f]=S.useState(null),[p,m]=S.useState(!0),g=S.useRef(!1),v=S.useCallback(async R=>{console.log("[Auth] Fetching profile for user:",R);const K=new Promise(H=>{setTimeout(()=>{console.warn("[Auth] Profile fetch timed out"),H(null)},X_)}),Q=(async()=>{try{const{data:H,error:P}=await re.from("profiles").select("*").eq("id",R).single();return P?(console.error("[Auth] Error fetching profile:",P.message),null):(console.log("[Auth] Profile fetched successfully:",H?.email),H)}catch(H){return console.error("[Auth] Error fetching profile:",H),null}})();return Promise.race([Q,K])},[]);S.useEffect(()=>{if(g.current)return;g.current=!0;let R=!0,K;(async()=>{console.log("[Auth] Initializing auth..."),K=setTimeout(()=>{R&&p&&(console.warn("[Auth] Auth initialization timed out, setting loading to false"),m(!1))},Q_);try{const{data:{session:P},error:F}=await re.auth.getSession();if(F&&console.error("[Auth] Error getting session:",F),!R)return;console.log("[Auth] Session retrieved:",P?.user?.email||"No session"),f(P),r(P?.user??null),P?.user&&v(P.user.id).then(I=>{R&&c(I)})}catch(P){console.error("[Auth] Error initializing auth:",P)}finally{R&&(console.log("[Auth] Auth initialization complete, setting loading to false"),clearTimeout(K),m(!1))}})();const{data:{subscription:H}}=re.auth.onAuthStateChange(async(P,F)=>{console.log("[Auth] Auth state changed:",P,F?.user?.email),R&&(f(F),r(F?.user??null),P==="SIGNED_IN"&&F?.user?(m(!1),v(F.user.id).then(I=>{R&&c(I)})):P==="SIGNED_OUT"?(c(null),m(!1)):F?.user&&v(F.user.id).then(I=>{R&&c(I)}))});return()=>{R=!1,clearTimeout(K),H.unsubscribe()}},[v]);const w=async(R,K,Q,H)=>{try{const{data:P,error:F}=await re.auth.signUp({email:R,password:K,options:{data:{display_name:Q}}});if(F)throw F;if(H&&P.user)try{await fetch("undefined/api/referral/track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refereeId:P.user.id,referralCode:H})})}catch(I){console.error("Failed to track referral:",I)}return{error:null}}catch(P){return{error:P}}},_=async(R,K)=>{try{console.log("[Auth] Attempting sign in for:",R);const{data:Q,error:H}=await re.auth.signInWithPassword({email:R,password:K});return H?(console.error("[Auth] Sign in error:",H),{error:H}):Q?.user?(console.log("[Auth] Sign in successful for:",Q.user.email),{error:null}):{error:new Error("Sign in failed - no user returned")}}catch(Q){return console.error("[Auth] Sign in exception:",Q),{error:Q}}},x=async()=>{try{const{error:R}=await re.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(R)throw R;return{error:null}}catch(R){return{error:R}}},E=async()=>{try{await re.auth.signOut()}catch(R){console.error("[Auth] Error signing out:",R)}r(null),c(null),f(null),localStorage.removeItem("sb-dnxqgphaisdxvdyeiwnh-auth-token")},T=async R=>{try{const{error:K}=await re.auth.resetPasswordForEmail(R,{redirectTo:`${window.location.origin}/auth/reset-password`});if(K)throw K;return{error:null}}catch(K){return{error:K}}},D=async R=>{if(!n)return{error:new Error("Not authenticated")};try{const{error:K}=await re.from("profiles").update(R).eq("id",n.id);if(K)throw K;const Q=await v(n.id);return c(Q),{error:null}}catch(K){return{error:K}}},C=async()=>{if(n){const R=await v(n.id);c(R)}};typeof window<"u"&&(window.__MORGUS_AUTH__={user:n,profile:i,session:u,loading:p});const q={user:n,profile:i,session:u,loading:p,signUp:w,signIn:_,signInWithGoogle:x,signOut:E,resetPassword:T,updateProfile:D,refreshProfile:C};return o.jsx(ry.Provider,{value:q,children:s})}function xn(){const s=S.useContext(ry);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function W_(){const[s,n]=S.useState(""),[r,i]=S.useState(""),[c,u]=S.useState(""),[f,p]=S.useState(!1),{signIn:m,signInWithGoogle:g}=xn(),v=Wn(),[w]=Hg(),_=w.get("redirect")||"/",x=async T=>{T.preventDefault(),u(""),p(!0);try{console.log("[Login] Starting sign in...");const{error:D}=await m(s,r);if(D){console.error("[Login] Sign in error:",D.message);let C=D.message;C.includes("Invalid login credentials")?C="Invalid email or password. Please try again.":C.includes("Email not confirmed")?C="Please check your email and confirm your account before signing in.":(C.includes("fetch")||C.includes("network"))&&(C="Network error. Please check your connection and try again."),u(C),p(!1)}else console.log("[Login] Sign in successful, navigating..."),setTimeout(()=>{v(_),p(!1)},500)}catch(D){console.error("[Login] Unexpected error:",D),u("An unexpected error occurred. Please try again."),p(!1)}},E=async()=>{u("");const{error:T}=await g();T&&u(T.message)};return o.jsx("div",{className:"auth-container",children:o.jsxs("div",{className:"auth-card",children:[o.jsxs("div",{className:"auth-header",children:[o.jsxs("div",{className:"auth-logo",children:[o.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),o.jsx("span",{className:"logo-text",children:"Morgus"})]}),o.jsx("h1",{children:"Welcome back!"}),o.jsx("p",{children:"Sign in to continue to Morgus"})]}),c&&o.jsx("div",{className:"auth-error",children:c}),o.jsxs("form",{onSubmit:x,className:"auth-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{id:"email",type:"email",value:s,onChange:T=>n(T.target.value),placeholder:"you@example.com",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{htmlFor:"password",children:["Password",o.jsx(gt,{to:"/forgot-password",className:"forgot-link",children:"Forgot?"})]}),o.jsx("input",{id:"password",type:"password",value:r,onChange:T=>i(T.target.value),placeholder:"",required:!0})]}),o.jsx("button",{type:"submit",className:"auth-button primary",disabled:f,children:f?"Signing in...":"Sign in"})]}),o.jsx("div",{className:"auth-divider",children:o.jsx("span",{children:"or"})}),o.jsxs("button",{onClick:E,className:"auth-button google",children:[o.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),o.jsxs("p",{className:"auth-footer",children:["Don't have an account? ",o.jsx(gt,{to:"/signup",children:"Sign up"})]})]})})}function F_(){const[s,n]=S.useState(""),[r,i]=S.useState(""),[c,u]=S.useState(""),[f,p]=S.useState(""),[m,g]=S.useState(""),[v,w]=S.useState(""),[_,x]=S.useState(!1),[E,T]=S.useState(!1),{signUp:D,signInWithGoogle:C}=xn(),[q]=Hg();S.useEffect(()=>{const Q=q.get("ref");Q&&g(Q)},[q]);const R=async Q=>{if(Q.preventDefault(),w(""),r!==c){w("Passwords do not match");return}if(r.length<8){w("Password must be at least 8 characters");return}x(!0);const{error:H}=await D(s,r,f,m);H?(w(H.message),x(!1)):T(!0)},K=async()=>{w("");const{error:Q}=await C();Q&&w(Q.message)};return E?o.jsx("div",{className:"auth-container",children:o.jsxs("div",{className:"auth-card",children:[o.jsxs("div",{className:"auth-header",children:[o.jsxs("div",{className:"auth-logo",children:[o.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),o.jsx("span",{className:"logo-text",children:"Morgus"})]}),o.jsx("h1",{children:"Check your email!"}),o.jsxs("p",{children:["We sent a confirmation link to ",o.jsx("strong",{children:s})]})]}),o.jsxs("div",{className:"auth-success",children:[o.jsx("p",{children:"Click the link in the email to activate your account."}),m&&o.jsx("p",{className:"referral-bonus",children:" Your referral bonus will be applied once you confirm!"})]}),o.jsx(gt,{to:"/login",className:"auth-button secondary",children:"Back to Login"})]})}):o.jsx("div",{className:"auth-container",children:o.jsxs("div",{className:"auth-card",children:[o.jsxs("div",{className:"auth-header",children:[o.jsxs("div",{className:"auth-logo",children:[o.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),o.jsx("span",{className:"logo-text",children:"Morgus"})]}),o.jsx("h1",{children:"Create your account"}),o.jsx("p",{children:"Join Morgus and start building amazing things"})]}),v&&o.jsx("div",{className:"auth-error",children:v}),m&&o.jsx("div",{className:"referral-banner",children:" You've been referred! Sign up to get a free day pass."}),o.jsxs("form",{onSubmit:R,className:"auth-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"displayName",children:"Display Name (optional)"}),o.jsx("input",{id:"displayName",type:"text",value:f,onChange:Q=>p(Q.target.value),placeholder:"Your name"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{id:"email",type:"email",value:s,onChange:Q=>n(Q.target.value),placeholder:"you@example.com",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:"Password"}),o.jsx("input",{id:"password",type:"password",value:r,onChange:Q=>i(Q.target.value),placeholder:"At least 8 characters",required:!0,minLength:8})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),o.jsx("input",{id:"confirmPassword",type:"password",value:c,onChange:Q=>u(Q.target.value),placeholder:"Confirm your password",required:!0})]}),!m&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"referralCode",children:"Referral Code (optional)"}),o.jsx("input",{id:"referralCode",type:"text",value:m,onChange:Q=>g(Q.target.value.toUpperCase()),placeholder:"Enter referral code"})]}),o.jsx("button",{type:"submit",className:"auth-button primary",disabled:_,children:_?"Creating account...":"Create account"})]}),o.jsx("div",{className:"auth-divider",children:o.jsx("span",{children:"or"})}),o.jsxs("button",{onClick:K,className:"auth-button google",children:[o.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),o.jsxs("p",{className:"auth-footer",children:["Already have an account? ",o.jsx(gt,{to:"/login",children:"Sign in"})]}),o.jsxs("div",{className:"privacy-notice",children:[o.jsx("div",{className:"privacy-notice-icon",children:""}),o.jsxs("p",{className:"privacy-notice-text",children:[o.jsx("strong",{children:"Your Privacy Matters:"}),` By default, your conversations help improve Morgus for everyone. You can opt out anytime in Settings with the "Don't Train on Me" toggle. We `,o.jsx("em",{children:"never"})," store passwords, payment info, or government IDs."]})]}),o.jsxs("p",{className:"auth-terms",children:["By creating an account, you agree to our"," ",o.jsx("a",{href:"/terms",target:"_blank",children:"Terms of Service"})," and"," ",o.jsx("a",{href:"/privacy",target:"_blank",children:"Privacy Policy"})]})]})})}function eS(){const[s,n]=S.useState(""),[r,i]=S.useState(""),[c,u]=S.useState(!1),[f,p]=S.useState(!1),{resetPassword:m}=xn(),g=async v=>{v.preventDefault(),i(""),u(!0);const{error:w}=await m(s);w?(i(w.message),u(!1)):p(!0)};return f?o.jsx("div",{className:"auth-container",children:o.jsxs("div",{className:"auth-card",children:[o.jsxs("div",{className:"auth-header",children:[o.jsxs("div",{className:"auth-logo",children:[o.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),o.jsx("span",{className:"logo-text",children:"Morgus"})]}),o.jsx("h1",{children:"Check your email!"}),o.jsxs("p",{children:["We sent a password reset link to ",o.jsx("strong",{children:s})]})]}),o.jsxs("div",{className:"auth-success",children:[o.jsx("p",{children:"Click the link in the email to reset your password."}),o.jsx("p",{children:"Didn't receive it? Check your spam folder or try again."})]}),o.jsx(gt,{to:"/login",className:"auth-button secondary",children:"Back to Login"})]})}):o.jsx("div",{className:"auth-container",children:o.jsxs("div",{className:"auth-card",children:[o.jsxs("div",{className:"auth-header",children:[o.jsxs("div",{className:"auth-logo",children:[o.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),o.jsx("span",{className:"logo-text",children:"Morgus"})]}),o.jsx("h1",{children:"Reset your password"}),o.jsx("p",{children:"Enter your email and we'll send you a reset link"})]}),r&&o.jsx("div",{className:"auth-error",children:r}),o.jsxs("form",{onSubmit:g,className:"auth-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{id:"email",type:"email",value:s,onChange:v=>n(v.target.value),placeholder:"you@example.com",required:!0})]}),o.jsx("button",{type:"submit",className:"auth-button primary",disabled:c,children:c?"Sending...":"Send reset link"})]}),o.jsxs("p",{className:"auth-footer",children:["Remember your password? ",o.jsx(gt,{to:"/login",children:"Sign in"})]})]})})}const tS="https://morgus-orchestrator.morgan-426.workers.dev",nS=[{id:"free",name:"Free",price:0,priceLabel:"$0",period:"forever",description:"Try Morgus with basic features",features:["20 messages per day","1 website build per day","1 deployment per day","3 image generations per day","10 web searches per day","1 basic Morgy companion"]},{id:"daily",name:"Day Pass",price:3,priceLabel:"$3",period:"per day",description:"Full access for 24 hours",features:["Unlimited messages","Unlimited website builds","Unlimited deployments","Unlimited image generations","Unlimited web searches","2 video generations","GitHub integration","All Morgy tools unlocked"]},{id:"weekly",name:"Weekly",price:21,priceLabel:"$21",period:"per week",description:"Best value for regular users",features:["Everything in Day Pass","10 video generations per day","Priority support","Early access to new features","Save $0/week vs daily"],highlight:!0,badge:"Most Popular"},{id:"monthly",name:"Monthly",price:75,priceLabel:"$75",period:"per month",description:"Maximum power for power users",features:["Everything in Weekly","Unlimited video generations","Custom Morgy skins","API access","Team collaboration (coming soon)","Save $9/month vs weekly"],badge:"Best Value"}];function aS(){const{user:s,profile:n}=xn(),r=Wn(),[i,c]=S.useState(null),[u,f]=S.useState(""),p=async g=>{if(g==="free"){s||r("/signup");return}if(!s){r("/signup?redirect=/pricing");return}c(g),f("");try{const w=await(await fetch(`${tS}/api/checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.id,email:s.email,planId:g,successUrl:`${window.location.origin}/checkout/success`,cancelUrl:`${window.location.origin}/pricing`})})).json();if(w.error)throw new Error(w.error);window.location.href=w.url}catch(v){f(v.message||"Failed to start checkout"),c(null)}},m=n?.subscription_tier||"free";return o.jsxs("div",{className:"pricing-container",children:[o.jsxs("div",{className:"pricing-header",children:[o.jsx("h1",{children:"Choose Your Plan"}),o.jsx("p",{children:"Unlock the full power of Morgus AI Agent"})]}),u&&o.jsx("div",{className:"pricing-error",children:u}),o.jsx("div",{className:"pricing-grid",children:nS.map(g=>o.jsxs("div",{className:`pricing-card ${g.highlight?"highlight":""} ${m===g.id?"current":""}`,children:[g.badge&&o.jsx("div",{className:"pricing-badge",children:g.badge}),m===g.id&&o.jsx("div",{className:"current-badge",children:"Current Plan"}),o.jsx("h2",{children:g.name}),o.jsxs("div",{className:"pricing-price",children:[o.jsx("span",{className:"price",children:g.priceLabel}),o.jsx("span",{className:"period",children:g.period})]}),o.jsx("p",{className:"pricing-description",children:g.description}),o.jsx("ul",{className:"pricing-features",children:g.features.map((v,w)=>o.jsxs("li",{children:[o.jsx("span",{className:"check",children:""}),v]},w))}),o.jsx("button",{className:`pricing-button ${g.highlight?"primary":"secondary"}`,onClick:()=>p(g.id),disabled:i===g.id||m===g.id,children:i===g.id?"Loading...":m===g.id?"Current Plan":g.id==="free"?"Get Started":"Subscribe"})]},g.id))}),o.jsxs("div",{className:"pricing-faq",children:[o.jsx("h2",{children:"Frequently Asked Questions"}),o.jsxs("div",{className:"faq-item",children:[o.jsx("h3",{children:"Can I cancel anytime?"}),o.jsx("p",{children:"Yes! You can cancel your subscription at any time. You'll continue to have access until the end of your billing period."})]}),o.jsxs("div",{className:"faq-item",children:[o.jsx("h3",{children:"What payment methods do you accept?"}),o.jsx("p",{children:"We accept all major credit cards through Stripe, including Visa, Mastercard, American Express, and more."})]}),o.jsxs("div",{className:"faq-item",children:[o.jsx("h3",{children:"What are Day Passes?"}),o.jsx("p",{children:"Day Passes give you 24 hours of full access. You can earn free Day Passes by referring friends or redeeming promo codes!"})]}),o.jsxs("div",{className:"faq-item",children:[o.jsx("h3",{children:"What happens when I hit my free tier limits?"}),o.jsx("p",{children:"You'll see a friendly upgrade prompt. You can either wait until tomorrow when limits reset, or upgrade to continue immediately."})]})]}),o.jsx("div",{className:"pricing-footer",children:o.jsxs("p",{children:["Have questions? ",o.jsx("a",{href:"mailto:support@morgus.ai",children:"Contact us"})]})})]})}function sS(){const{refreshProfile:s}=xn();return S.useEffect(()=>{s()},[s]),o.jsx("div",{className:"auth-container",children:o.jsxs("div",{className:"auth-card",style:{textAlign:"center"},children:[o.jsxs("div",{className:"auth-header",children:[o.jsx("div",{style:{fontSize:"64px",marginBottom:"20px"},children:""}),o.jsx("h1",{children:"Welcome to Morgus!"}),o.jsx("p",{children:"Your subscription is now active"})]}),o.jsxs("div",{className:"auth-success",children:[o.jsx("p",{children:"Thank you for subscribing! You now have full access to all Morgus features."}),o.jsx("p",{style:{marginTop:"16px"},children:o.jsx("strong",{children:"What's next?"})}),o.jsxs("ul",{style:{textAlign:"left",marginTop:"12px",paddingLeft:"20px"},children:[o.jsx("li",{children:"Build unlimited websites"}),o.jsx("li",{children:"Generate images and videos"}),o.jsx("li",{children:"Use all Morgy tools"}),o.jsx("li",{children:"Connect your GitHub"})]})]}),o.jsx(gt,{to:"/",className:"auth-button primary",children:"Start Building! "}),o.jsxs("p",{className:"auth-footer",style:{marginTop:"24px"},children:["Need help? ",o.jsx("a",{href:"mailto:support@morgus.ai",children:"Contact support"})]})]})})}const li="https://morgus-orchestrator.morgan-426.workers.dev";function rS(){const{user:s,profile:n,signOut:r,refreshProfile:i}=xn(),c=Wn(),[u,f]=S.useState(null),[p,m]=S.useState(null),[g,v]=S.useState(""),[w,_]=S.useState(!1),[x,E]=S.useState(null),[T,D]=S.useState(!1);S.useEffect(()=>{if(!s){c("/login?redirect=/account");return}C(),q()},[s,c]);const C=async()=>{if(s)try{const I=await(await fetch(`${li}/api/usage/${s.id}`)).json();f(I.usage)}catch(F){console.error("Failed to fetch usage:",F)}},q=async()=>{if(s)try{const I=await(await fetch(`${li}/api/referral/${s.id}`)).json();m(I)}catch(F){console.error("Failed to fetch referral:",F)}},R=async F=>{if(F.preventDefault(),!(!s||!g.trim())){_(!0),E(null);try{const ie=await(await fetch(`${li}/api/promo/redeem`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.id,code:g.trim()})})).json();ie.success?(E({type:"success",text:ie.message}),v(""),i()):E({type:"error",text:ie.message})}catch{E({type:"error",text:"Failed to redeem promo code"})}finally{_(!1)}}},K=async()=>{if(s){D(!0);try{const I=await(await fetch(`${li}/api/billing-portal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.id,returnUrl:window.location.href})})).json();I.url?window.location.href=I.url:alert(I.error||"Failed to open billing portal")}catch{alert("Failed to open billing portal")}finally{D(!1)}}},Q=async()=>{if(s)try{const I=await(await fetch(`${li}/api/wallet/use`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.id})})).json();I.success?(alert(I.message),i()):alert(I.message)}catch{alert("Failed to use day pass")}},H=()=>{p?.referralLink&&(navigator.clipboard.writeText(p.referralLink),alert("Referral link copied!"))},P=async()=>{await r(),c("/")};return!s||!n?o.jsx("div",{className:"account-loading",children:"Loading..."}):o.jsxs("div",{className:"account-container",children:[o.jsxs("div",{className:"account-header",children:[o.jsx("h1",{children:"Account Settings"}),o.jsx("button",{onClick:P,className:"sign-out-button",children:"Sign Out"})]}),o.jsxs("div",{className:"account-grid",children:[o.jsxs("div",{className:"account-card",children:[o.jsx("h2",{children:"Profile"}),o.jsxs("div",{className:"profile-info",children:[o.jsx("div",{className:"profile-avatar",children:n.avatar_url?o.jsx("img",{src:n.avatar_url,alt:"Avatar"}):o.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill"})}),o.jsxs("div",{className:"profile-details",children:[o.jsx("p",{className:"profile-name",children:n.display_name||"Morgus User"}),o.jsx("p",{className:"profile-email",children:n.email})]})]})]}),o.jsxs("div",{className:"account-card",children:[o.jsx("h2",{children:"Subscription"}),o.jsxs("div",{className:"subscription-info",children:[o.jsx("div",{className:"subscription-badge","data-tier":n.subscription_tier,children:n.subscription_tier==="free"?"Free":n.subscription_tier==="daily"?"Day Pass":n.subscription_tier==="weekly"?"Weekly":n.subscription_tier==="monthly"?"Monthly":"Free"}),n.subscription_ends_at&&n.subscription_tier!=="free"&&o.jsxs("p",{className:"subscription-expires",children:["Expires: ",new Date(n.subscription_ends_at).toLocaleDateString()]})]}),o.jsx("div",{className:"subscription-actions",children:n.subscription_tier==="free"?o.jsx("button",{onClick:()=>c("/pricing"),className:"upgrade-button",children:"Upgrade Now"}):o.jsx("button",{onClick:K,disabled:T,className:"manage-button",children:T?"Loading...":"Manage Billing"})})]}),o.jsxs("div",{className:"account-card",children:[o.jsx("h2",{children:"Day Pass Wallet"}),o.jsxs("div",{className:"wallet-balance",children:[o.jsx("span",{className:"balance-number",children:n.day_pass_balance||0}),o.jsx("span",{className:"balance-label",children:"Day Passes"})]}),(n.day_pass_balance||0)>0&&n.subscription_tier==="free"&&o.jsx("button",{onClick:Q,className:"use-pass-button",children:"Use Day Pass"}),o.jsx("p",{className:"wallet-hint",children:"Earn day passes by referring friends or redeeming promo codes!"})]}),o.jsxs("div",{className:"account-card",children:[o.jsx("h2",{children:"Redeem Promo Code"}),o.jsxs("form",{onSubmit:R,className:"promo-form",children:[o.jsx("input",{type:"text",value:g,onChange:F=>v(F.target.value.toUpperCase()),placeholder:"Enter promo code",maxLength:20}),o.jsx("button",{type:"submit",disabled:w||!g.trim(),children:w?"Redeeming...":"Redeem"})]}),x&&o.jsx("div",{className:`promo-message ${x.type}`,children:x.text})]}),o.jsxs("div",{className:"account-card wide",children:[o.jsx("h2",{children:"Refer Friends"}),o.jsx("p",{className:"referral-description",children:"Share your referral link and earn free day passes! You get 1 day pass for each friend who signs up."}),p&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"referral-link-box",children:[o.jsx("input",{type:"text",value:p.referralLink,readOnly:!0}),o.jsx("button",{onClick:H,children:"Copy"})]}),o.jsxs("div",{className:"referral-stats",children:[o.jsxs("div",{className:"stat",children:[o.jsx("span",{className:"stat-number",children:p.completedReferrals}),o.jsx("span",{className:"stat-label",children:"Successful Referrals"})]}),o.jsxs("div",{className:"stat",children:[o.jsx("span",{className:"stat-number",children:p.pendingReferrals}),o.jsx("span",{className:"stat-label",children:"Pending"})]}),p.nextMilestone&&o.jsxs("div",{className:"stat milestone",children:[o.jsx("span",{className:"stat-number",children:p.nextMilestone.count-p.completedReferrals}),o.jsxs("span",{className:"stat-label",children:["Until: ",p.nextMilestone.reward]})]})]})]})]}),o.jsxs("div",{className:"account-card wide",children:[o.jsx("h2",{children:"Today's Usage"}),u&&o.jsxs("div",{className:"usage-grid",children:[o.jsx(Xs,{label:"Messages",current:u.messages.current,limit:u.messages.limit}),o.jsx(Xs,{label:"Builds",current:u.builds.current,limit:u.builds.limit}),o.jsx(Xs,{label:"Deployments",current:u.deployments.current,limit:u.deployments.limit}),o.jsx(Xs,{label:"Images",current:u.images.current,limit:u.images.limit}),o.jsx(Xs,{label:"Searches",current:u.searches.current,limit:u.searches.limit}),o.jsx(Xs,{label:"Videos",current:u.videos.current,limit:u.videos.limit})]}),o.jsx("p",{className:"usage-hint",children:"Usage resets daily at midnight UTC"})]})]})]})}function Xs({label:s,current:n,limit:r}){const i=r===-1?0:Math.min(n/r*100,100),c=r===-1;return o.jsxs("div",{className:"usage-item",children:[o.jsxs("div",{className:"usage-header",children:[o.jsx("span",{className:"usage-label",children:s}),o.jsxs("span",{className:"usage-count",children:[n," / ",c?"":r]})]}),o.jsx("div",{className:"usage-bar",children:o.jsx("div",{className:"usage-fill",style:{width:c?"100%":`${i}%`},"data-unlimited":c})})]})}function iS(){const{user:s,profile:n,loading:r}=xn(),[i,c]=S.useState("promos"),[u,f]=S.useState([]),[p,m]=S.useState([]),[g,v]=S.useState(!1),[w,_]=S.useState(null),[x,E]=S.useState({code:"",type:"day_pass",value:1,maxUses:"",expiresAt:"",description:""}),[T,D]=S.useState(!1),[C,q]=S.useState(null);S.useEffect(()=>{n?.is_admin&&R()},[n]);const R=async()=>{v(!0),_(null);try{const{data:I,error:ie}=await re.from("promo_codes").select("*").order("created_at",{ascending:!1});if(ie)throw console.error("Error fetching promo codes:",ie),ie;f(I||[]);const{data:xe,error:ke}=await re.from("profiles").select("*").order("created_at",{ascending:!1});if(ke)throw console.error("Error fetching users:",ke),ke;m(xe||[])}catch(I){console.error("Failed to fetch admin data:",I),_("Failed to load admin data. Please check your permissions.")}finally{v(!1)}},K=async I=>{if(I.preventDefault(),!!x.code.trim()){D(!0),q(null);try{const{error:ie}=await re.from("promo_codes").insert({code:x.code.toUpperCase().trim(),reward_type:x.type,reward_value:x.value,max_uses:x.maxUses?parseInt(x.maxUses):null,expires_at:x.expiresAt||null,description:x.description||null,is_active:!0,times_used:0});ie?(console.error("Error creating promo:",ie),q({type:"error",text:ie.message||"Failed to create promo code"})):(q({type:"success",text:"Promo code created!"}),E({code:"",type:"day_pass",value:1,maxUses:"",expiresAt:"",description:""}),R())}catch{q({type:"error",text:"Failed to create promo code"})}finally{D(!1)}}},Q=async(I,ie)=>{try{const{error:xe}=await re.from("promo_codes").update({is_active:!ie}).eq("id",I);xe?console.error("Error toggling promo:",xe):R()}catch(xe){console.error("Failed to toggle promo:",xe)}},H=async I=>{if(confirm("Are you sure you want to delete this promo code?"))try{const{error:ie}=await re.from("promo_codes").delete().eq("id",I);ie?console.error("Error deleting promo:",ie):R()}catch(ie){console.error("Failed to delete promo:",ie)}},P=async I=>{const ie=prompt("How many day passes to grant?","1");if(ie)try{const{data:xe,error:ke}=await re.from("profiles").select("day_pass_balance").eq("id",I).single();if(ke){console.error("Error fetching user:",ke);return}const it=(xe?.day_pass_balance||0)+parseInt(ie),{error:Ge}=await re.from("profiles").update({day_pass_balance:it}).eq("id",I);Ge?console.error("Error updating day pass:",Ge):(R(),alert(`Granted ${ie} day pass(es)!`))}catch(xe){console.error("Failed to grant day pass:",xe)}},F=async(I,ie)=>{if(confirm(ie?"Remove admin privileges?":"Grant admin privileges?"))try{const{error:xe}=await re.from("profiles").update({is_admin:!ie}).eq("id",I);xe?console.error("Error toggling admin:",xe):R()}catch(xe){console.error("Failed to toggle admin:",xe)}};return r?o.jsx("div",{className:"admin-container",children:o.jsxs("div",{className:"admin-loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Checking authentication..."})]})}):s?n?n.is_admin?o.jsxs("div",{className:"admin-container",children:[o.jsxs("div",{className:"admin-header",children:[o.jsxs("div",{className:"admin-title-row",children:[o.jsx("h1",{children:" Admin Dashboard"}),o.jsx(gt,{to:"/",className:"back-to-app",children:" Back to Morgus"})]}),o.jsxs("p",{className:"admin-welcome",children:["Welcome, ",n.display_name||n.email]}),o.jsxs("div",{className:"admin-tabs",children:[o.jsx("button",{className:i==="promos"?"active":"",onClick:()=>c("promos"),children:" Promo Codes"}),o.jsx("button",{className:i==="users"?"active":"",onClick:()=>c("users"),children:" Users"})]})]}),w&&o.jsxs("div",{className:"admin-error",children:[o.jsx("p",{children:w}),o.jsx("button",{onClick:R,children:"Retry"})]}),g?o.jsxs("div",{className:"admin-loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading data..."})]}):i==="promos"?o.jsxs("div",{className:"admin-section",children:[o.jsxs("div",{className:"admin-card",children:[o.jsx("h2",{children:" Create Promo Code"}),o.jsxs("form",{onSubmit:K,className:"promo-create-form",children:[o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Code"}),o.jsx("input",{type:"text",value:x.code,onChange:I=>E({...x,code:I.target.value.toUpperCase()}),placeholder:"MORGUS2024",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Type"}),o.jsxs("select",{value:x.type,onChange:I=>E({...x,type:I.target.value}),children:[o.jsx("option",{value:"day_pass",children:"Day Pass"}),o.jsx("option",{value:"discount",children:"Discount %"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Value"}),o.jsx("input",{type:"number",value:x.value,onChange:I=>E({...x,value:parseInt(I.target.value)}),min:"1",required:!0})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Max Uses (empty = unlimited)"}),o.jsx("input",{type:"number",value:x.maxUses,onChange:I=>E({...x,maxUses:I.target.value}),placeholder:"Unlimited",min:"1"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Expires At (optional)"}),o.jsx("input",{type:"date",value:x.expiresAt,onChange:I=>E({...x,expiresAt:I.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Description"}),o.jsx("input",{type:"text",value:x.description,onChange:I=>E({...x,description:I.target.value}),placeholder:"Launch promo"})]})]}),o.jsx("div",{className:"form-actions",children:o.jsx("button",{type:"submit",disabled:T,className:"create-btn",children:T?"Creating...":" Create Code"})})]}),C&&o.jsx("div",{className:`admin-message ${C.type}`,children:C.text})]}),o.jsxs("div",{className:"admin-card",children:[o.jsxs("h2",{children:[" Active Promo Codes (",u.length,")"]}),o.jsxs("table",{className:"admin-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Code"}),o.jsx("th",{children:"Type"}),o.jsx("th",{children:"Value"}),o.jsx("th",{children:"Uses"}),o.jsx("th",{children:"Expires"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Actions"})]})}),o.jsxs("tbody",{children:[u.map(I=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("code",{children:I.code})}),o.jsx("td",{children:I.reward_type}),o.jsx("td",{children:I.reward_value}),o.jsxs("td",{children:[I.times_used||0," / ",I.max_uses||""]}),o.jsx("td",{children:I.expires_at?new Date(I.expires_at).toLocaleDateString():"Never"}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${I.is_active?"active":"inactive"}`,children:I.is_active?"Active":"Inactive"})}),o.jsxs("td",{children:[o.jsx("button",{className:"action-btn",onClick:()=>Q(I.id,I.is_active),children:I.is_active?"Disable":"Enable"}),o.jsx("button",{className:"action-btn delete",onClick:()=>H(I.id),children:"Delete"})]})]},I.id)),u.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"empty-row",children:"No promo codes yet. Create one above!"})})]})]})]})]}):o.jsx("div",{className:"admin-section",children:o.jsxs("div",{className:"admin-card",children:[o.jsxs("h2",{children:[" Users (",p.length,")"]}),o.jsxs("table",{className:"admin-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Email"}),o.jsx("th",{children:"Name"}),o.jsx("th",{children:"Plan"}),o.jsx("th",{children:"Day Passes"}),o.jsx("th",{children:"Admin"}),o.jsx("th",{children:"Joined"}),o.jsx("th",{children:"Actions"})]})}),o.jsxs("tbody",{children:[p.map(I=>o.jsxs("tr",{children:[o.jsx("td",{children:I.email}),o.jsx("td",{children:I.display_name||"-"}),o.jsx("td",{children:o.jsx("span",{className:`plan-badge ${I.subscription_tier}`,children:I.subscription_tier})}),o.jsx("td",{children:I.day_pass_balance}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${I.is_admin?"active":"inactive"}`,children:I.is_admin?" Yes":"No"})}),o.jsx("td",{children:new Date(I.created_at).toLocaleDateString()}),o.jsxs("td",{children:[o.jsx("button",{className:"action-btn",onClick:()=>P(I.id),children:"Grant Pass"}),o.jsx("button",{className:"action-btn",onClick:()=>F(I.id,I.is_admin),children:I.is_admin?"Remove Admin":"Make Admin"})]})]},I.id)),p.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"empty-row",children:"No users yet"})})]})]})]})})]}):o.jsx("div",{className:"admin-container",children:o.jsxs("div",{className:"admin-access-denied",children:[o.jsx("h2",{children:" Access Denied"}),o.jsx("p",{children:"You don't have admin privileges."}),o.jsxs("p",{className:"admin-email",children:["Logged in as: ",n.email]}),o.jsx(gt,{to:"/",className:"admin-login-btn",children:"Back to Morgus"})]})}):o.jsx("div",{className:"admin-container",children:o.jsxs("div",{className:"admin-loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading profile..."})]})}):o.jsx("div",{className:"admin-container",children:o.jsxs("div",{className:"admin-access-denied",children:[o.jsx("h2",{children:" Login Required"}),o.jsx("p",{children:"Please log in to access the admin panel."}),o.jsx(gt,{to:"/login?redirect=/admin",className:"admin-login-btn",children:"Log In"})]})})}function lS(){return o.jsx("div",{className:"legal-container",children:o.jsxs("div",{className:"legal-card",children:[o.jsx(gt,{to:"/",className:"legal-back",children:" Back to Morgus"}),o.jsxs("div",{className:"legal-header",children:[o.jsxs("div",{className:"legal-logo",children:[o.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),o.jsx("span",{className:"logo-text",children:"Morgus"})]}),o.jsx("h1",{children:"Terms of Service"}),o.jsx("p",{className:"legal-updated",children:"Last updated: December 20, 2025"})]}),o.jsxs("div",{className:"legal-content",children:[o.jsxs("section",{children:[o.jsx("h2",{children:"1. Acceptance of Terms"}),o.jsx("p",{children:'By accessing or using Morgus ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.'})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"2. Description of Service"}),o.jsx("p",{children:"Morgus is an AI-powered assistant platform that provides various capabilities including but not limited to:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Natural language processing and conversation"}),o.jsx("li",{children:"Document generation and analysis"}),o.jsx("li",{children:"Image generation and processing"}),o.jsx("li",{children:"Web research and data retrieval"}),o.jsx("li",{children:"Code generation and technical assistance"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"3. User Accounts"}),o.jsx("p",{children:"To access certain features of the Service, you must create an account. You agree to:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Provide accurate and complete registration information"}),o.jsx("li",{children:"Maintain the security of your account credentials"}),o.jsx("li",{children:"Notify us immediately of any unauthorized access"}),o.jsx("li",{children:"Accept responsibility for all activities under your account"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"4. Subscription Plans"}),o.jsx("p",{children:"Morgus offers various subscription tiers including free and paid plans. Paid subscriptions are billed according to the plan selected. You may cancel your subscription at any time, but refunds are provided only as required by applicable law."}),o.jsx("h3",{children:"4.1 Day Passes"}),o.jsx("p",{children:"Day passes provide temporary access to premium features. Day passes expire 24 hours after activation and are non-refundable."}),o.jsx("h3",{children:"4.2 Promo Codes"}),o.jsx("p",{children:"Promotional codes may be offered from time to time. These codes are subject to specific terms and expiration dates as indicated at the time of issuance."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"5. Acceptable Use"}),o.jsx("p",{children:"You agree NOT to use the Service to:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Violate any applicable laws or regulations"}),o.jsx("li",{children:"Generate illegal, harmful, or offensive content"}),o.jsx("li",{children:"Infringe on intellectual property rights"}),o.jsx("li",{children:"Attempt to gain unauthorized access to systems"}),o.jsx("li",{children:"Distribute malware or engage in hacking activities"}),o.jsx("li",{children:"Harass, abuse, or harm others"}),o.jsx("li",{children:"Generate spam or unsolicited communications"}),o.jsx("li",{children:"Impersonate others or misrepresent your identity"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"6. AI-Generated Content"}),o.jsx("p",{children:'Content generated by Morgus is provided "as is" without warranties of accuracy or completeness. You acknowledge that:'}),o.jsxs("ul",{children:[o.jsx("li",{children:"AI-generated content may contain errors or inaccuracies"}),o.jsx("li",{children:"You are responsible for reviewing and verifying all generated content"}),o.jsx("li",{children:"Generated content should not be relied upon for medical, legal, or financial advice"}),o.jsx("li",{children:"You retain ownership of content you create using the Service"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"7. Data and Privacy"}),o.jsxs("p",{children:["Your use of the Service is also governed by our ",o.jsx(gt,{to:"/privacy",children:"Privacy Policy"}),". By using the Service, you consent to the collection and use of information as described therein."]}),o.jsx("h3",{children:"7.1 Training Data"}),o.jsx("p",{children:`By default, your conversations may be used to improve Morgus. You can opt out of this at any time using the "Don't Train on Me" toggle in Settings.`})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"8. Intellectual Property"}),o.jsx("p",{children:"The Service, including its design, features, and content (excluding user-generated content), is owned by Morgus and protected by intellectual property laws. You may not copy, modify, or distribute any part of the Service without permission."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"9. Limitation of Liability"}),o.jsx("p",{children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, MORGUS SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, INCLUDING LOSS OF PROFITS, DATA, OR GOODWILL, ARISING FROM YOUR USE OF THE SERVICE."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"10. Disclaimer of Warranties"}),o.jsx("p",{children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.'})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"11. Modifications to Terms"}),o.jsx("p",{children:"We reserve the right to modify these Terms at any time. We will notify users of significant changes via email or through the Service. Continued use after changes constitutes acceptance of the new Terms."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"12. Termination"}),o.jsx("p",{children:"We may suspend or terminate your access to the Service at any time for violation of these Terms or for any other reason at our discretion. Upon termination, your right to use the Service will immediately cease."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"13. Governing Law"}),o.jsx("p",{children:"These Terms shall be governed by and construed in accordance with the laws of the State of California, United States, without regard to its conflict of law provisions."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"14. Contact Us"}),o.jsx("p",{children:"If you have any questions about these Terms, please contact us at:"}),o.jsxs("p",{className:"contact-info",children:[o.jsx("strong",{children:"Email:"})," legal@morgus.ai",o.jsx("br",{}),o.jsx("strong",{children:"Website:"})," https://morgus.ai"]})]})]}),o.jsxs("div",{className:"legal-footer",children:[o.jsx(gt,{to:"/privacy",children:"Privacy Policy"}),o.jsx("span",{children:""}),o.jsx(gt,{to:"/",children:"Return to Morgus"})]})]})})}function oS(){return o.jsx("div",{className:"legal-container",children:o.jsxs("div",{className:"legal-card",children:[o.jsx(gt,{to:"/",className:"legal-back",children:" Back to Morgus"}),o.jsxs("div",{className:"legal-header",children:[o.jsxs("div",{className:"legal-logo",children:[o.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),o.jsx("span",{className:"logo-text",children:"Morgus"})]}),o.jsx("h1",{children:"Privacy Policy"}),o.jsx("p",{className:"legal-updated",children:"Last updated: December 20, 2025"})]}),o.jsxs("div",{className:"legal-content",children:[o.jsxs("section",{children:[o.jsx("h2",{children:"1. Introduction"}),o.jsx("p",{children:"At Morgus, we take your privacy seriously. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our AI assistant service."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"2. Information We Collect"}),o.jsx("h3",{children:"2.1 Information You Provide"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Account Information:"})," Email address, display name, and password when you create an account"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Conversation Data:"})," Messages, prompts, and content you share with Morgus"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Uploaded Files:"})," Documents, images, and other files you upload for processing"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Payment Information:"})," Billing details for paid subscriptions (processed by our payment provider)"]})]}),o.jsx("h3",{children:"2.2 Information Collected Automatically"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Usage Data:"})," Features used, session duration, and interaction patterns"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Device Information:"})," Browser type, operating system, and device identifiers"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Log Data:"})," IP address, access times, and referring URLs"]})]})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"3. How We Use Your Information"}),o.jsx("p",{children:"We use the collected information to:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Provide, maintain, and improve the Service"}),o.jsx("li",{children:"Process your requests and deliver AI-generated responses"}),o.jsx("li",{children:"Personalize your experience"}),o.jsx("li",{children:"Process payments and manage subscriptions"}),o.jsx("li",{children:"Send important notices and updates"}),o.jsx("li",{children:"Detect and prevent fraud or abuse"}),o.jsx("li",{children:"Comply with legal obligations"})]})]}),o.jsxs("section",{className:"highlight-section",children:[o.jsx("h2",{children:`4. Training Data & The "Don't Train on Me" Option`}),o.jsxs("p",{children:[o.jsx("strong",{children:" Your Choice Matters:"})," By default, your conversations may be used to improve Morgus's capabilities for all users. However, you have full control over this."]}),o.jsx("h3",{children:"4.1 Default Behavior (Training Enabled)"}),o.jsx("p",{children:"When training is enabled, we may use your conversations to:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Improve AI response quality and accuracy"}),o.jsx("li",{children:"Develop new features and capabilities"}),o.jsx("li",{children:"Train and fine-tune our models"})]}),o.jsx("h3",{children:`4.2 "Don't Train on Me" Mode`}),o.jsx("p",{children:`When you enable the "Don't Train on Me" toggle:`}),o.jsxs("ul",{children:[o.jsx("li",{children:"Your conversations will NOT be used for model training"}),o.jsx("li",{children:"Your data will only be used to provide the Service"}),o.jsx("li",{children:"Conversations may still be temporarily stored for service delivery"})]}),o.jsx("h3",{children:"4.3 What We NEVER Use for Training"}),o.jsx("p",{children:"Regardless of your settings, we NEVER store or use:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Passwords or authentication credentials"}),o.jsx("li",{children:"Credit card numbers or payment details"}),o.jsx("li",{children:"Social Security numbers or government IDs"}),o.jsx("li",{children:"Health information (PHI/HIPAA data)"}),o.jsx("li",{children:"Content explicitly marked as confidential"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"5. Data Sharing and Disclosure"}),o.jsx("p",{children:"We may share your information with:"}),o.jsx("h3",{children:"5.1 Service Providers"}),o.jsx("p",{children:"Third-party vendors who assist in operating our Service, including cloud hosting providers, payment processors, and analytics services."}),o.jsx("h3",{children:"5.2 AI Model Providers"}),o.jsx("p",{children:"We use third-party AI models (such as OpenAI, Google, and Anthropic) to process your requests. These providers have their own privacy policies and data handling practices."}),o.jsx("h3",{children:"5.3 Legal Requirements"}),o.jsx("p",{children:"We may disclose information if required by law, court order, or government request, or to protect our rights, property, or safety."}),o.jsx("h3",{children:"5.4 Business Transfers"}),o.jsx("p",{children:"In the event of a merger, acquisition, or sale of assets, your information may be transferred as part of that transaction."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"6. Data Security"}),o.jsx("p",{children:"We implement appropriate technical and organizational measures to protect your information, including:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Encryption of data in transit and at rest"}),o.jsx("li",{children:"Regular security assessments and audits"}),o.jsx("li",{children:"Access controls and authentication requirements"}),o.jsx("li",{children:"Employee training on data protection"})]}),o.jsx("p",{children:"However, no method of transmission over the Internet is 100% secure. We cannot guarantee absolute security of your data."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"7. Data Retention"}),o.jsx("p",{children:"We retain your information for as long as:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Your account is active"}),o.jsx("li",{children:"Needed to provide you with the Service"}),o.jsx("li",{children:"Required by law or for legitimate business purposes"})]}),o.jsx("p",{children:"You can request deletion of your account and associated data at any time by contacting us."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"8. Your Rights"}),o.jsx("p",{children:"Depending on your location, you may have the right to:"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Access:"})," Request a copy of your personal data"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Correction:"})," Request correction of inaccurate data"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Deletion:"})," Request deletion of your data"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Portability:"})," Receive your data in a portable format"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Objection:"})," Object to certain processing activities"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Opt-out:"}),` Opt out of training data usage via the "Don't Train on Me" toggle`]})]})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"9. Children's Privacy"}),o.jsx("p",{children:"The Service is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If you believe we have collected such information, please contact us immediately."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"10. International Data Transfers"}),o.jsx("p",{children:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place for such transfers in compliance with applicable data protection laws."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"11. Cookies and Tracking"}),o.jsx("p",{children:"We use cookies and similar technologies to maintain your session, remember your preferences, and analyze usage patterns. You can control cookie settings through your browser."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"12. Changes to This Policy"}),o.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of significant changes via email or through the Service. Your continued use after changes constitutes acceptance."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"13. Contact Us"}),o.jsx("p",{children:"If you have questions about this Privacy Policy or our data practices, please contact us:"}),o.jsxs("p",{className:"contact-info",children:[o.jsx("strong",{children:"Email:"})," privacy@morgus.ai",o.jsx("br",{}),o.jsx("strong",{children:"Website:"})," https://morgus.ai"]})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"14. California Privacy Rights (CCPA)"}),o.jsx("p",{children:"California residents have additional rights under the California Consumer Privacy Act (CCPA), including the right to know what personal information is collected and the right to opt out of the sale of personal information. We do not sell your personal information."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"15. European Privacy Rights (GDPR)"}),o.jsx("p",{children:"If you are in the European Economic Area (EEA), you have rights under the General Data Protection Regulation (GDPR), including the right to lodge a complaint with a supervisory authority."})]})]}),o.jsxs("div",{className:"legal-footer",children:[o.jsx(gt,{to:"/terms",children:"Terms of Service"}),o.jsx("span",{children:""}),o.jsx(gt,{to:"/",children:"Return to Morgus"})]})]})})}function cS(){const[s,n]=S.useState("open"),[r,i]=S.useState(!1),[c,u]=S.useState([]),f=Wn();S.useEffect(()=>{const m=Array.from({length:100},(g,v)=>({id:v,x:Math.random()*100,y:Math.random()*100,size:Math.random()*3+1,delay:Math.random()*3}));u(m)},[]);const p=()=>{n("closing"),setTimeout(()=>{n("opening"),i(!0)},1500),setTimeout(()=>{f("/login")},3e3)};return o.jsxs("div",{className:"landing-container",children:[o.jsx("div",{className:"starfield",children:c.map(m=>o.jsx("div",{className:"star",style:{left:`${m.x}%`,top:`${m.y}%`,width:`${m.size}px`,height:`${m.size}px`,animationDelay:`${m.delay}s`}},m.id))}),o.jsx("div",{className:"particles",children:Array.from({length:20}).map((m,g)=>o.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${10+Math.random()*10}s`}},g))}),o.jsxs("div",{className:`doors-container ${s}`,children:[o.jsx("div",{className:"door door-top",children:o.jsxs("div",{className:"door-panel",children:[o.jsx("div",{className:"door-rivets",children:Array.from({length:12}).map((m,g)=>o.jsx("div",{className:"rivet"},g))}),o.jsx("div",{className:"door-stripe"}),o.jsx("div",{className:"door-stripe"}),o.jsx("div",{className:"door-glow"})]})}),o.jsx("div",{className:"door door-bottom",children:o.jsxs("div",{className:"door-panel",children:[o.jsx("div",{className:"door-rivets",children:Array.from({length:12}).map((m,g)=>o.jsx("div",{className:"rivet"},g))}),o.jsx("div",{className:"door-stripe"}),o.jsx("div",{className:"door-stripe"}),o.jsx("div",{className:"door-glow"})]})}),o.jsx("div",{className:"door-seam"})]}),o.jsxs("div",{className:`landing-content ${s==="closing"||s==="closed"||s==="opening"?"fading":""}`,children:[o.jsxs("div",{className:"bill-container",children:[o.jsx("div",{className:"bill-glow"}),o.jsx("img",{src:"/bill-full.jpg",alt:"Bill the Marketing Hog",className:"bill-image"}),o.jsx("div",{className:"bill-reflection"})]}),o.jsxs("div",{className:"landing-text",children:[o.jsxs("h1",{className:"landing-title",children:[o.jsx("span",{className:"title-morgus",children:"MORGUS"}),o.jsx("span",{className:"title-ai",children:".AI"})]}),o.jsx("p",{className:"landing-tagline",children:"Your Autonomous AI Agent"}),o.jsx("p",{className:"landing-subtitle",children:"Meet Bill and the Morgys  your team of specialized AI agents ready to tackle any challenge"}),o.jsxs("button",{className:"enter-button",onClick:p,children:[o.jsx("span",{className:"button-text",children:"Enter the Hog House"}),o.jsx("span",{className:"button-icon",children:""}),o.jsx("div",{className:"button-glow"})]})]})]}),r&&o.jsx("div",{className:"portal-light"}),o.jsxs("div",{className:"neon-frame",children:[o.jsx("div",{className:"neon-corner top-left"}),o.jsx("div",{className:"neon-corner top-right"}),o.jsx("div",{className:"neon-corner bottom-left"}),o.jsx("div",{className:"neon-corner bottom-right"})]})]})}function uS(){const s=Wn(),{user:n}=xn(),[r,i]=S.useState([]),[c,u]=S.useState(!0),[f,p]=S.useState(!1),[m,g]=S.useState(0),[v,w]=S.useState("documents"),[_,x]=S.useState(""),[E,T]=S.useState(""),[D,C]=S.useState(""),[q,R]=S.useState(""),[K,Q]=S.useState(null),[H,P]=S.useState(null),F=S.useRef(null);S.useEffect(()=>{n&&I()},[n]);const I=async()=>{if(n){u(!0),Q(null);try{const{data:Z,error:ue}=await re.from("knowledge_documents").select("*").eq("user_id",n.id).order("created_at",{ascending:!1});if(ue)throw ue;i(Z||[])}catch(Z){console.error("Error loading documents:",Z),Q("Failed to load documents")}finally{u(!1)}}},ie=async Z=>{const ue=Z.target.files;if(!(!ue||ue.length===0||!n)){p(!0),g(0),Q(null),P(null);try{for(let j=0;j<ue.length;j++){const L=ue[j];g(Math.round((j+.5)/ue.length*100));const{data:W,error:ee}=await re.from("knowledge_documents").insert({user_id:n.id,title:L.name,source_type:"upload",file_type:L.type||Ge(L.name),file_size:L.size,status:"pending"}).select().single();if(ee)throw ee;const pe=`${n.id}/${W.id}/${L.name}`,{error:ye}=await re.storage.from("knowledge-files").upload(pe,L);if(ye)throw await re.from("knowledge_documents").update({status:"failed",error_message:ye.message}).eq("id",W.id),ye;await re.from("knowledge_documents").update({source_url:pe,status:"processing"}).eq("id",W.id),g(Math.round((j+1)/ue.length*100))}P(`Successfully uploaded ${ue.length} file(s)`),I(),w("documents")}catch(j){console.error("Error uploading files:",j),Q("Failed to upload files. Please try again.")}finally{p(!1),g(0),F.current&&(F.current.value="")}}},xe=async()=>{if(!(!_.trim()||!n)){p(!0),Q(null),P(null);try{const{error:Z}=await re.from("knowledge_documents").insert({user_id:n.id,title:_,source_type:"url",source_url:_,status:"pending"});if(Z)throw Z;P("URL added successfully. Processing will begin shortly."),x(""),I(),w("documents")}catch(Z){console.error("Error adding URL:",Z),Q("Failed to add URL. Please try again.")}finally{p(!1)}}},ke=async()=>{if(!(!E.trim()||!D.trim()||!n)){p(!0),Q(null),P(null);try{const{error:Z}=await re.from("knowledge_documents").insert({user_id:n.id,title:D,source_type:"text",content:E,status:"pending"});if(Z)throw Z;P("Text added successfully. Processing will begin shortly."),T(""),C(""),I(),w("documents")}catch(Z){console.error("Error adding text:",Z),Q("Failed to add text. Please try again.")}finally{p(!1)}}},it=async Z=>{if(confirm("Are you sure you want to delete this document?"))try{await re.from("knowledge_chunks").delete().eq("document_id",Z);const{error:ue}=await re.from("knowledge_documents").delete().eq("id",Z);if(ue)throw ue;P("Document deleted successfully"),I()}catch(ue){console.error("Error deleting document:",ue),Q("Failed to delete document")}},Ge=Z=>Z.split(".").pop()?.toLowerCase()||"unknown",Ze=Z=>Z?Z<1024?`${Z} B`:Z<1024*1024?`${(Z/1024).toFixed(1)} KB`:`${(Z/(1024*1024)).toFixed(1)} MB`:"Unknown",N=Z=>{switch(Z){case"pending":return"";case"processing":return"";case"completed":return"";case"failed":return"";default:return""}},V=Z=>{switch(Z){case"upload":return"";case"url":return"";case"text":return"";default:return""}},te=r.filter(Z=>Z.title.toLowerCase().includes(q.toLowerCase()));return o.jsxs("div",{className:"knowledge-base-page",children:[o.jsxs("div",{className:"kb-page-header",children:[o.jsx("button",{className:"back-button",onClick:()=>s("/"),children:" Back to Morgus"}),o.jsxs("div",{className:"kb-page-title",children:[o.jsx("span",{className:"kb-page-icon",children:""}),o.jsx("h1",{children:"Knowledge Base"})]}),o.jsx("p",{className:"kb-page-subtitle",children:"Build your personal knowledge base for Deep Research Mode"})]}),o.jsxs("div",{className:"kb-page-content",children:[o.jsxs("div",{className:"kb-tabs",children:[o.jsxs("button",{className:`kb-tab ${v==="documents"?"active":""}`,onClick:()=>w("documents"),children:[" My Documents (",r.length,")"]}),o.jsx("button",{className:`kb-tab ${v==="add"?"active":""}`,onClick:()=>w("add"),children:" Add Knowledge"})]}),K&&o.jsxs("div",{className:"kb-alert error",children:[o.jsx("span",{children:""})," ",K,o.jsx("button",{onClick:()=>Q(null),children:""})]}),H&&o.jsxs("div",{className:"kb-alert success",children:[o.jsx("span",{children:""})," ",H,o.jsx("button",{onClick:()=>P(null),children:""})]}),v==="documents"&&o.jsxs("div",{className:"kb-documents",children:[o.jsx("div",{className:"kb-search",children:o.jsx("input",{type:"text",placeholder:" Search documents...",value:q,onChange:Z=>R(Z.target.value)})}),c?o.jsxs("div",{className:"kb-loading",children:[o.jsx("div",{className:"kb-spinner"}),o.jsx("p",{children:"Loading documents..."})]}):te.length===0?o.jsxs("div",{className:"kb-empty",children:[o.jsx("span",{className:"empty-icon",children:""}),o.jsx("h3",{children:"No documents yet"}),o.jsx("p",{children:"Add documents, URLs, or text to build your knowledge base for Deep Research."}),o.jsx("button",{onClick:()=>w("add"),children:" Add Your First Document"})]}):o.jsx("div",{className:"kb-document-grid",children:te.map(Z=>o.jsxs("div",{className:`kb-document-card ${Z.status}`,children:[o.jsx("div",{className:"doc-icon",children:V(Z.source_type)}),o.jsxs("div",{className:"doc-info",children:[o.jsx("h4",{children:Z.title}),o.jsxs("div",{className:"doc-meta",children:[o.jsx("span",{className:"doc-type",children:Z.source_type}),Z.file_size&&o.jsx("span",{className:"doc-size",children:Ze(Z.file_size)}),o.jsxs("span",{className:"doc-chunks",children:[Z.chunk_count||0," chunks"]})]}),o.jsxs("div",{className:`doc-status ${Z.status}`,children:[N(Z.status)," ",Z.status]}),Z.error_message&&o.jsx("p",{className:"doc-error",children:Z.error_message})]}),o.jsx("button",{className:"doc-delete",onClick:()=>it(Z.id),title:"Delete document",children:""})]},Z.id))})]}),v==="add"&&o.jsx("div",{className:"kb-add",children:o.jsxs("div",{className:"add-cards",children:[o.jsxs("div",{className:"add-card",children:[o.jsx("div",{className:"add-card-icon",children:""}),o.jsx("h3",{children:"Upload Files"}),o.jsx("p",{children:"Upload PDF, Word, TXT, MD, or CSV files"}),o.jsx("input",{ref:F,type:"file",multiple:!0,accept:".pdf,.doc,.docx,.txt,.md,.csv,.json",onChange:ie,style:{display:"none"}}),o.jsx("button",{className:"upload-button",onClick:()=>F.current?.click(),disabled:f,children:f?o.jsxs(o.Fragment,{children:["Uploading... ",m,"%"]}):o.jsx(o.Fragment,{children:" Choose Files"})}),f&&o.jsx("div",{className:"upload-progress",children:o.jsx("div",{className:"progress-fill",style:{width:`${m}%`}})})]}),o.jsxs("div",{className:"add-card",children:[o.jsx("div",{className:"add-card-icon",children:""}),o.jsx("h3",{children:"Add URL"}),o.jsx("p",{children:"Add a webpage or article URL"}),o.jsxs("div",{className:"url-input-group",children:[o.jsx("input",{type:"url",placeholder:"https://example.com/article",value:_,onChange:Z=>x(Z.target.value)}),o.jsx("button",{onClick:xe,disabled:!_.trim()||f,children:"Add"})]})]}),o.jsxs("div",{className:"add-card full-width",children:[o.jsx("div",{className:"add-card-icon",children:""}),o.jsx("h3",{children:"Add Text"}),o.jsx("p",{children:"Paste text content directly"}),o.jsx("input",{type:"text",placeholder:"Title for this content",value:D,onChange:Z=>C(Z.target.value),className:"text-title-input"}),o.jsx("textarea",{placeholder:"Paste your text content here...",value:E,onChange:Z=>T(Z.target.value),rows:6}),o.jsx("button",{onClick:ke,disabled:!E.trim()||!D.trim()||f,className:"add-text-button",children:" Add Text"})]})]})})]}),o.jsxs("div",{className:"kb-page-footer",children:[o.jsxs("div",{className:"kb-stats",children:[o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{className:"stat-value",children:r.length}),o.jsx("span",{className:"stat-label",children:"Documents"})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{className:"stat-value",children:r.reduce((Z,ue)=>Z+(ue.chunk_count||0),0)}),o.jsx("span",{className:"stat-label",children:"Total Chunks"})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{className:"stat-value",children:r.filter(Z=>Z.status==="completed").length}),o.jsx("span",{className:"stat-label",children:"Ready for Search"})]})]}),o.jsx("p",{className:"kb-hint",children:" Documents are automatically chunked and embedded for semantic search during Deep Research."})]})]})}function kd(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Fa=kd();function iy(s){Fa=s}var gi={exec:()=>null};function Ce(s,n=""){let r=typeof s=="string"?s:s.source,i={replace:(c,u)=>{let f=typeof u=="string"?u:u.source;return f=f.replace(Dt.caret,"$1"),r=r.replace(c,f),i},getRegex:()=>new RegExp(r,n)};return i}var dS=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Dt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:s=>new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}#`),htmlBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}<(?:[a-z].*>|!--)`,"i")},hS=/^(?:[ \t]*(?:\n|$))+/,fS=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,mS=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ki=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,pS=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Td=/(?:[*+-]|\d{1,9}[.)])/,ly=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,oy=Ce(ly).replace(/bull/g,Td).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),gS=Ce(ly).replace(/bull/g,Td).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Ad=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,yS=/^[^\n]+/,Rd=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,vS=Ce(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Rd).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),bS=Ce(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Td).getRegex(),po="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Cd=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,wS=Ce("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Cd).replace("tag",po).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),cy=Ce(Ad).replace("hr",ki).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",po).getRegex(),xS=Ce(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",cy).getRegex(),Od={blockquote:xS,code:fS,def:vS,fences:mS,heading:pS,hr:ki,html:wS,lheading:oy,list:bS,newline:hS,paragraph:cy,table:gi,text:yS},hg=Ce("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ki).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",po).getRegex(),_S={...Od,lheading:gS,table:hg,paragraph:Ce(Ad).replace("hr",ki).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",hg).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",po).getRegex()},SS={...Od,html:Ce(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Cd).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:gi,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ce(Ad).replace("hr",ki).replace("heading",` *#{1,6} *[^
]`).replace("lheading",oy).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},jS=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ES=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,uy=/^( {2,}|\\)\n(?!\s*$)/,NS=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,go=/[\p{P}\p{S}]/u,Dd=/[\s\p{P}\p{S}]/u,dy=/[^\s\p{P}\p{S}]/u,kS=Ce(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Dd).getRegex(),hy=/(?!~)[\p{P}\p{S}]/u,TS=/(?!~)[\s\p{P}\p{S}]/u,AS=/(?:[^\s\p{P}\p{S}]|~)/u,RS=Ce(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",dS?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),fy=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,CS=Ce(fy,"u").replace(/punct/g,go).getRegex(),OS=Ce(fy,"u").replace(/punct/g,hy).getRegex(),my="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",DS=Ce(my,"gu").replace(/notPunctSpace/g,dy).replace(/punctSpace/g,Dd).replace(/punct/g,go).getRegex(),MS=Ce(my,"gu").replace(/notPunctSpace/g,AS).replace(/punctSpace/g,TS).replace(/punct/g,hy).getRegex(),US=Ce("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,dy).replace(/punctSpace/g,Dd).replace(/punct/g,go).getRegex(),zS=Ce(/\\(punct)/,"gu").replace(/punct/g,go).getRegex(),LS=Ce(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),$S=Ce(Cd).replace("(?:-->|$)","-->").getRegex(),qS=Ce("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",$S).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ro=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,BS=Ce(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ro).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),py=Ce(/^!?\[(label)\]\[(ref)\]/).replace("label",ro).replace("ref",Rd).getRegex(),gy=Ce(/^!?\[(ref)\](?:\[\])?/).replace("ref",Rd).getRegex(),HS=Ce("reflink|nolink(?!\\()","g").replace("reflink",py).replace("nolink",gy).getRegex(),fg=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Md={_backpedal:gi,anyPunctuation:zS,autolink:LS,blockSkip:RS,br:uy,code:ES,del:gi,emStrongLDelim:CS,emStrongRDelimAst:DS,emStrongRDelimUnd:US,escape:jS,link:BS,nolink:gy,punctuation:kS,reflink:py,reflinkSearch:HS,tag:qS,text:NS,url:gi},PS={...Md,link:Ce(/^!?\[(label)\]\((.*?)\)/).replace("label",ro).getRegex(),reflink:Ce(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ro).getRegex()},ud={...Md,emStrongRDelimAst:MS,emStrongLDelim:OS,url:Ce(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",fg).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ce(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",fg).getRegex()},IS={...ud,br:Ce(uy).replace("{2,}","*").getRegex(),text:Ce(ud.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Wl={normal:Od,gfm:_S,pedantic:SS},oi={normal:Md,gfm:ud,breaks:IS,pedantic:PS},GS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mg=s=>GS[s];function Kn(s,n){if(n){if(Dt.escapeTest.test(s))return s.replace(Dt.escapeReplace,mg)}else if(Dt.escapeTestNoEncode.test(s))return s.replace(Dt.escapeReplaceNoEncode,mg);return s}function pg(s){try{s=encodeURI(s).replace(Dt.percentDecode,"%")}catch{return null}return s}function gg(s,n){let r=s.replace(Dt.findPipe,(u,f,p)=>{let m=!1,g=f;for(;--g>=0&&p[g]==="\\";)m=!m;return m?"|":" |"}),i=r.split(Dt.splitPipe),c=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),n)if(i.length>n)i.splice(n);else for(;i.length<n;)i.push("");for(;c<i.length;c++)i[c]=i[c].trim().replace(Dt.slashPipe,"|");return i}function ci(s,n,r){let i=s.length;if(i===0)return"";let c=0;for(;c<i&&s.charAt(i-c-1)===n;)c++;return s.slice(0,i-c)}function YS(s,n){if(s.indexOf(n[1])===-1)return-1;let r=0;for(let i=0;i<s.length;i++)if(s[i]==="\\")i++;else if(s[i]===n[0])r++;else if(s[i]===n[1]&&(r--,r<0))return i;return r>0?-2:-1}function yg(s,n,r,i,c){let u=n.href,f=n.title||null,p=s[1].replace(c.other.outputLinkReplace,"$1");i.state.inLink=!0;let m={type:s[0].charAt(0)==="!"?"image":"link",raw:r,href:u,title:f,text:p,tokens:i.inlineTokens(p)};return i.state.inLink=!1,m}function VS(s,n,r){let i=s.match(r.other.indentCodeCompensation);if(i===null)return n;let c=i[1];return n.split(`
`).map(u=>{let f=u.match(r.other.beginningSpace);if(f===null)return u;let[p]=f;return p.length>=c.length?u.slice(c.length):u}).join(`
`)}var io=class{options;rules;lexer;constructor(s){this.options=s||Fa}space(s){let n=this.rules.block.newline.exec(s);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(s){let n=this.rules.block.code.exec(s);if(n){let r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ci(r,`
`)}}}fences(s){let n=this.rules.block.fences.exec(s);if(n){let r=n[0],i=VS(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(s){let n=this.rules.block.heading.exec(s);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){let i=ci(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(s){let n=this.rules.block.hr.exec(s);if(n)return{type:"hr",raw:ci(n[0],`
`)}}blockquote(s){let n=this.rules.block.blockquote.exec(s);if(n){let r=ci(n[0],`
`).split(`
`),i="",c="",u=[];for(;r.length>0;){let f=!1,p=[],m;for(m=0;m<r.length;m++)if(this.rules.other.blockquoteStart.test(r[m]))p.push(r[m]),f=!0;else if(!f)p.push(r[m]);else break;r=r.slice(m);let g=p.join(`
`),v=g.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${g}`:g,c=c?`${c}
${v}`:v;let w=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(v,u,!0),this.lexer.state.top=w,r.length===0)break;let _=u.at(-1);if(_?.type==="code")break;if(_?.type==="blockquote"){let x=_,E=x.raw+`
`+r.join(`
`),T=this.blockquote(E);u[u.length-1]=T,i=i.substring(0,i.length-x.raw.length)+T.raw,c=c.substring(0,c.length-x.text.length)+T.text;break}else if(_?.type==="list"){let x=_,E=x.raw+`
`+r.join(`
`),T=this.list(E);u[u.length-1]=T,i=i.substring(0,i.length-_.raw.length)+T.raw,c=c.substring(0,c.length-x.raw.length)+T.raw,r=E.substring(u.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:u,text:c}}}list(s){let n=this.rules.block.list.exec(s);if(n){let r=n[1].trim(),i=r.length>1,c={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let u=this.rules.other.listItemRegex(r),f=!1;for(;s;){let m=!1,g="",v="";if(!(n=u.exec(s))||this.rules.block.hr.test(s))break;g=n[0],s=s.substring(g.length);let w=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,T=>" ".repeat(3*T.length)),_=s.split(`
`,1)[0],x=!w.trim(),E=0;if(this.options.pedantic?(E=2,v=w.trimStart()):x?E=n[1].length+1:(E=n[2].search(this.rules.other.nonSpaceChar),E=E>4?1:E,v=w.slice(E),E+=n[1].length),x&&this.rules.other.blankLine.test(_)&&(g+=_+`
`,s=s.substring(_.length+1),m=!0),!m){let T=this.rules.other.nextBulletRegex(E),D=this.rules.other.hrRegex(E),C=this.rules.other.fencesBeginRegex(E),q=this.rules.other.headingBeginRegex(E),R=this.rules.other.htmlBeginRegex(E);for(;s;){let K=s.split(`
`,1)[0],Q;if(_=K,this.options.pedantic?(_=_.replace(this.rules.other.listReplaceNesting,"  "),Q=_):Q=_.replace(this.rules.other.tabCharGlobal,"    "),C.test(_)||q.test(_)||R.test(_)||T.test(_)||D.test(_))break;if(Q.search(this.rules.other.nonSpaceChar)>=E||!_.trim())v+=`
`+Q.slice(E);else{if(x||w.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||C.test(w)||q.test(w)||D.test(w))break;v+=`
`+_}!x&&!_.trim()&&(x=!0),g+=K+`
`,s=s.substring(K.length+1),w=Q.slice(E)}}c.loose||(f?c.loose=!0:this.rules.other.doubleBlankLine.test(g)&&(f=!0)),c.items.push({type:"list_item",raw:g,task:!!this.options.gfm&&this.rules.other.listIsTask.test(v),loose:!1,text:v,tokens:[]}),c.raw+=g}let p=c.items.at(-1);if(p)p.raw=p.raw.trimEnd(),p.text=p.text.trimEnd();else return;c.raw=c.raw.trimEnd();for(let m of c.items){if(this.lexer.state.top=!1,m.tokens=this.lexer.blockTokens(m.text,[]),m.task){if(m.text=m.text.replace(this.rules.other.listReplaceTask,""),m.tokens[0]?.type==="text"||m.tokens[0]?.type==="paragraph"){m.tokens[0].raw=m.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),m.tokens[0].text=m.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let v=this.lexer.inlineQueue.length-1;v>=0;v--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[v].src)){this.lexer.inlineQueue[v].src=this.lexer.inlineQueue[v].src.replace(this.rules.other.listReplaceTask,"");break}}let g=this.rules.other.listTaskCheckbox.exec(m.raw);if(g){let v={type:"checkbox",raw:g[0]+" ",checked:g[0]!=="[ ]"};m.checked=v.checked,c.loose?m.tokens[0]&&["paragraph","text"].includes(m.tokens[0].type)&&"tokens"in m.tokens[0]&&m.tokens[0].tokens?(m.tokens[0].raw=v.raw+m.tokens[0].raw,m.tokens[0].text=v.raw+m.tokens[0].text,m.tokens[0].tokens.unshift(v)):m.tokens.unshift({type:"paragraph",raw:v.raw,text:v.raw,tokens:[v]}):m.tokens.unshift(v)}}if(!c.loose){let g=m.tokens.filter(w=>w.type==="space"),v=g.length>0&&g.some(w=>this.rules.other.anyLine.test(w.raw));c.loose=v}}if(c.loose)for(let m of c.items){m.loose=!0;for(let g of m.tokens)g.type==="text"&&(g.type="paragraph")}return c}}html(s){let n=this.rules.block.html.exec(s);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(s){let n=this.rules.block.def.exec(s);if(n){let r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",c=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:c}}}table(s){let n=this.rules.block.table.exec(s);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let r=gg(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),c=n[3]?.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],u={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let f of i)this.rules.other.tableAlignRight.test(f)?u.align.push("right"):this.rules.other.tableAlignCenter.test(f)?u.align.push("center"):this.rules.other.tableAlignLeft.test(f)?u.align.push("left"):u.align.push(null);for(let f=0;f<r.length;f++)u.header.push({text:r[f],tokens:this.lexer.inline(r[f]),header:!0,align:u.align[f]});for(let f of c)u.rows.push(gg(f,u.header.length).map((p,m)=>({text:p,tokens:this.lexer.inline(p),header:!1,align:u.align[m]})));return u}}lheading(s){let n=this.rules.block.lheading.exec(s);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(s){let n=this.rules.block.paragraph.exec(s);if(n){let r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(s){let n=this.rules.block.text.exec(s);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(s){let n=this.rules.inline.escape.exec(s);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(s){let n=this.rules.inline.tag.exec(s);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(s){let n=this.rules.inline.link.exec(s);if(n){let r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let u=ci(r.slice(0,-1),"\\");if((r.length-u.length)%2===0)return}else{let u=YS(n[2],"()");if(u===-2)return;if(u>-1){let f=(n[0].indexOf("!")===0?5:4)+n[1].length+u;n[2]=n[2].substring(0,u),n[0]=n[0].substring(0,f).trim(),n[3]=""}}let i=n[2],c="";if(this.options.pedantic){let u=this.rules.other.pedanticHrefTitle.exec(i);u&&(i=u[1],c=u[3])}else c=n[3]?n[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),yg(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:c&&c.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(s,n){let r;if((r=this.rules.inline.reflink.exec(s))||(r=this.rules.inline.nolink.exec(s))){let i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),c=n[i.toLowerCase()];if(!c){let u=r[0].charAt(0);return{type:"text",raw:u,text:u}}return yg(r,c,r[0],this.lexer,this.rules)}}emStrong(s,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(s);if(!(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!r||this.rules.inline.punctuation.exec(r))){let c=[...i[0]].length-1,u,f,p=c,m=0,g=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(g.lastIndex=0,n=n.slice(-1*s.length+c);(i=g.exec(n))!=null;){if(u=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!u)continue;if(f=[...u].length,i[3]||i[4]){p+=f;continue}else if((i[5]||i[6])&&c%3&&!((c+f)%3)){m+=f;continue}if(p-=f,p>0)continue;f=Math.min(f,f+p+m);let v=[...i[0]][0].length,w=s.slice(0,c+i.index+v+f);if(Math.min(c,f)%2){let x=w.slice(1,-1);return{type:"em",raw:w,text:x,tokens:this.lexer.inlineTokens(x)}}let _=w.slice(2,-2);return{type:"strong",raw:w,text:_,tokens:this.lexer.inlineTokens(_)}}}}codespan(s){let n=this.rules.inline.code.exec(s);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(r),c=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&c&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(s){let n=this.rules.inline.br.exec(s);if(n)return{type:"br",raw:n[0]}}del(s){let n=this.rules.inline.del.exec(s);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(s){let n=this.rules.inline.autolink.exec(s);if(n){let r,i;return n[2]==="@"?(r=n[1],i="mailto:"+r):(r=n[1],i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(s){let n;if(n=this.rules.inline.url.exec(s)){let r,i;if(n[2]==="@")r=n[0],i="mailto:"+r;else{let c;do c=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(c!==n[0]);r=n[0],n[1]==="www."?i="http://"+n[0]:i=n[0]}return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(s){let n=this.rules.inline.text.exec(s);if(n){let r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}},bn=class dd{tokens;options;state;inlineQueue;tokenizer;constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||Fa,this.options.tokenizer=this.options.tokenizer||new io,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Dt,block:Wl.normal,inline:oi.normal};this.options.pedantic?(r.block=Wl.pedantic,r.inline=oi.pedantic):this.options.gfm&&(r.block=Wl.gfm,this.options.breaks?r.inline=oi.breaks:r.inline=oi.gfm),this.tokenizer.rules=r}static get rules(){return{block:Wl,inline:oi}}static lex(n,r){return new dd(r).lex(n)}static lexInline(n,r){return new dd(r).inlineTokens(n)}lex(n){n=n.replace(Dt.carriageReturn,`
`),this.blockTokens(n,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(n,r=[],i=!1){for(this.options.pedantic&&(n=n.replace(Dt.tabCharGlobal,"    ").replace(Dt.spaceLine,""));n;){let c;if(this.options.extensions?.block?.some(f=>(c=f.call({lexer:this},n,r))?(n=n.substring(c.raw.length),r.push(c),!0):!1))continue;if(c=this.tokenizer.space(n)){n=n.substring(c.raw.length);let f=r.at(-1);c.raw.length===1&&f!==void 0?f.raw+=`
`:r.push(c);continue}if(c=this.tokenizer.code(n)){n=n.substring(c.raw.length);let f=r.at(-1);f?.type==="paragraph"||f?.type==="text"?(f.raw+=(f.raw.endsWith(`
`)?"":`
`)+c.raw,f.text+=`
`+c.text,this.inlineQueue.at(-1).src=f.text):r.push(c);continue}if(c=this.tokenizer.fences(n)){n=n.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.heading(n)){n=n.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.hr(n)){n=n.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.blockquote(n)){n=n.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.list(n)){n=n.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.html(n)){n=n.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.def(n)){n=n.substring(c.raw.length);let f=r.at(-1);f?.type==="paragraph"||f?.type==="text"?(f.raw+=(f.raw.endsWith(`
`)?"":`
`)+c.raw,f.text+=`
`+c.raw,this.inlineQueue.at(-1).src=f.text):this.tokens.links[c.tag]||(this.tokens.links[c.tag]={href:c.href,title:c.title},r.push(c));continue}if(c=this.tokenizer.table(n)){n=n.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.lheading(n)){n=n.substring(c.raw.length),r.push(c);continue}let u=n;if(this.options.extensions?.startBlock){let f=1/0,p=n.slice(1),m;this.options.extensions.startBlock.forEach(g=>{m=g.call({lexer:this},p),typeof m=="number"&&m>=0&&(f=Math.min(f,m))}),f<1/0&&f>=0&&(u=n.substring(0,f+1))}if(this.state.top&&(c=this.tokenizer.paragraph(u))){let f=r.at(-1);i&&f?.type==="paragraph"?(f.raw+=(f.raw.endsWith(`
`)?"":`
`)+c.raw,f.text+=`
`+c.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=f.text):r.push(c),i=u.length!==n.length,n=n.substring(c.raw.length);continue}if(c=this.tokenizer.text(n)){n=n.substring(c.raw.length);let f=r.at(-1);f?.type==="text"?(f.raw+=(f.raw.endsWith(`
`)?"":`
`)+c.raw,f.text+=`
`+c.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=f.text):r.push(c);continue}if(n){let f="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return this.state.top=!0,r}inline(n,r=[]){return this.inlineQueue.push({src:n,tokens:r}),r}inlineTokens(n,r=[]){let i=n,c=null;if(this.tokens.links){let m=Object.keys(this.tokens.links);if(m.length>0)for(;(c=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)m.includes(c[0].slice(c[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,c.index)+"["+"a".repeat(c[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(c=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,c.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let u;for(;(c=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)u=c[2]?c[2].length:0,i=i.slice(0,c.index+u)+"["+"a".repeat(c[0].length-u-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let f=!1,p="";for(;n;){f||(p=""),f=!1;let m;if(this.options.extensions?.inline?.some(v=>(m=v.call({lexer:this},n,r))?(n=n.substring(m.raw.length),r.push(m),!0):!1))continue;if(m=this.tokenizer.escape(n)){n=n.substring(m.raw.length),r.push(m);continue}if(m=this.tokenizer.tag(n)){n=n.substring(m.raw.length),r.push(m);continue}if(m=this.tokenizer.link(n)){n=n.substring(m.raw.length),r.push(m);continue}if(m=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(m.raw.length);let v=r.at(-1);m.type==="text"&&v?.type==="text"?(v.raw+=m.raw,v.text+=m.text):r.push(m);continue}if(m=this.tokenizer.emStrong(n,i,p)){n=n.substring(m.raw.length),r.push(m);continue}if(m=this.tokenizer.codespan(n)){n=n.substring(m.raw.length),r.push(m);continue}if(m=this.tokenizer.br(n)){n=n.substring(m.raw.length),r.push(m);continue}if(m=this.tokenizer.del(n)){n=n.substring(m.raw.length),r.push(m);continue}if(m=this.tokenizer.autolink(n)){n=n.substring(m.raw.length),r.push(m);continue}if(!this.state.inLink&&(m=this.tokenizer.url(n))){n=n.substring(m.raw.length),r.push(m);continue}let g=n;if(this.options.extensions?.startInline){let v=1/0,w=n.slice(1),_;this.options.extensions.startInline.forEach(x=>{_=x.call({lexer:this},w),typeof _=="number"&&_>=0&&(v=Math.min(v,_))}),v<1/0&&v>=0&&(g=n.substring(0,v+1))}if(m=this.tokenizer.inlineText(g)){n=n.substring(m.raw.length),m.raw.slice(-1)!=="_"&&(p=m.raw.slice(-1)),f=!0;let v=r.at(-1);v?.type==="text"?(v.raw+=m.raw,v.text+=m.text):r.push(m);continue}if(n){let v="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(v);break}else throw new Error(v)}}return r}},lo=class{options;parser;constructor(s){this.options=s||Fa}space(s){return""}code({text:s,lang:n,escaped:r}){let i=(n||"").match(Dt.notSpaceStart)?.[0],c=s.replace(Dt.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Kn(i)+'">'+(r?c:Kn(c,!0))+`</code></pre>
`:"<pre><code>"+(r?c:Kn(c,!0))+`</code></pre>
`}blockquote({tokens:s}){return`<blockquote>
${this.parser.parse(s)}</blockquote>
`}html({text:s}){return s}def(s){return""}heading({tokens:s,depth:n}){return`<h${n}>${this.parser.parseInline(s)}</h${n}>
`}hr(s){return`<hr>
`}list(s){let n=s.ordered,r=s.start,i="";for(let f=0;f<s.items.length;f++){let p=s.items[f];i+=this.listitem(p)}let c=n?"ol":"ul",u=n&&r!==1?' start="'+r+'"':"";return"<"+c+u+`>
`+i+"</"+c+`>
`}listitem(s){return`<li>${this.parser.parse(s.tokens)}</li>
`}checkbox({checked:s}){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:s}){return`<p>${this.parser.parseInline(s)}</p>
`}table(s){let n="",r="";for(let c=0;c<s.header.length;c++)r+=this.tablecell(s.header[c]);n+=this.tablerow({text:r});let i="";for(let c=0;c<s.rows.length;c++){let u=s.rows[c];r="";for(let f=0;f<u.length;f++)r+=this.tablecell(u[f]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+i+`</table>
`}tablerow({text:s}){return`<tr>
${s}</tr>
`}tablecell(s){let n=this.parser.parseInline(s.tokens),r=s.header?"th":"td";return(s.align?`<${r} align="${s.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:s}){return`<strong>${this.parser.parseInline(s)}</strong>`}em({tokens:s}){return`<em>${this.parser.parseInline(s)}</em>`}codespan({text:s}){return`<code>${Kn(s,!0)}</code>`}br(s){return"<br>"}del({tokens:s}){return`<del>${this.parser.parseInline(s)}</del>`}link({href:s,title:n,tokens:r}){let i=this.parser.parseInline(r),c=pg(s);if(c===null)return i;s=c;let u='<a href="'+s+'"';return n&&(u+=' title="'+Kn(n)+'"'),u+=">"+i+"</a>",u}image({href:s,title:n,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));let c=pg(s);if(c===null)return Kn(r);s=c;let u=`<img src="${s}" alt="${r}"`;return n&&(u+=` title="${Kn(n)}"`),u+=">",u}text(s){return"tokens"in s&&s.tokens?this.parser.parseInline(s.tokens):"escaped"in s&&s.escaped?s.text:Kn(s.text)}},Ud=class{strong({text:s}){return s}em({text:s}){return s}codespan({text:s}){return s}del({text:s}){return s}html({text:s}){return s}text({text:s}){return s}link({text:s}){return""+s}image({text:s}){return""+s}br(){return""}checkbox({raw:s}){return s}},wn=class hd{options;renderer;textRenderer;constructor(n){this.options=n||Fa,this.options.renderer=this.options.renderer||new lo,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ud}static parse(n,r){return new hd(r).parse(n)}static parseInline(n,r){return new hd(r).parseInline(n)}parse(n){let r="";for(let i=0;i<n.length;i++){let c=n[i];if(this.options.extensions?.renderers?.[c.type]){let f=c,p=this.options.extensions.renderers[f.type].call({parser:this},f);if(p!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(f.type)){r+=p||"";continue}}let u=c;switch(u.type){case"space":{r+=this.renderer.space(u);break}case"hr":{r+=this.renderer.hr(u);break}case"heading":{r+=this.renderer.heading(u);break}case"code":{r+=this.renderer.code(u);break}case"table":{r+=this.renderer.table(u);break}case"blockquote":{r+=this.renderer.blockquote(u);break}case"list":{r+=this.renderer.list(u);break}case"checkbox":{r+=this.renderer.checkbox(u);break}case"html":{r+=this.renderer.html(u);break}case"def":{r+=this.renderer.def(u);break}case"paragraph":{r+=this.renderer.paragraph(u);break}case"text":{r+=this.renderer.text(u);break}default:{let f='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(f),"";throw new Error(f)}}}return r}parseInline(n,r=this.renderer){let i="";for(let c=0;c<n.length;c++){let u=n[c];if(this.options.extensions?.renderers?.[u.type]){let p=this.options.extensions.renderers[u.type].call({parser:this},u);if(p!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(u.type)){i+=p||"";continue}}let f=u;switch(f.type){case"escape":{i+=r.text(f);break}case"html":{i+=r.html(f);break}case"link":{i+=r.link(f);break}case"image":{i+=r.image(f);break}case"checkbox":{i+=r.checkbox(f);break}case"strong":{i+=r.strong(f);break}case"em":{i+=r.em(f);break}case"codespan":{i+=r.codespan(f);break}case"br":{i+=r.br(f);break}case"del":{i+=r.del(f);break}case"text":{i+=r.text(f);break}default:{let p='Token with "'+f.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return i}},fi=class{options;block;constructor(s){this.options=s||Fa}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(s){return s}postprocess(s){return s}processAllTokens(s){return s}emStrongMask(s){return s}provideLexer(){return this.block?bn.lex:bn.lexInline}provideParser(){return this.block?wn.parse:wn.parseInline}},KS=class{defaults=kd();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=wn;Renderer=lo;TextRenderer=Ud;Lexer=bn;Tokenizer=io;Hooks=fi;constructor(...s){this.use(...s)}walkTokens(s,n){let r=[];for(let i of s)switch(r=r.concat(n.call(this,i)),i.type){case"table":{let c=i;for(let u of c.header)r=r.concat(this.walkTokens(u.tokens,n));for(let u of c.rows)for(let f of u)r=r.concat(this.walkTokens(f.tokens,n));break}case"list":{let c=i;r=r.concat(this.walkTokens(c.items,n));break}default:{let c=i;this.defaults.extensions?.childTokens?.[c.type]?this.defaults.extensions.childTokens[c.type].forEach(u=>{let f=c[u].flat(1/0);r=r.concat(this.walkTokens(f,n))}):c.tokens&&(r=r.concat(this.walkTokens(c.tokens,n)))}}return r}use(...s){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return s.forEach(r=>{let i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(c=>{if(!c.name)throw new Error("extension name required");if("renderer"in c){let u=n.renderers[c.name];u?n.renderers[c.name]=function(...f){let p=c.renderer.apply(this,f);return p===!1&&(p=u.apply(this,f)),p}:n.renderers[c.name]=c.renderer}if("tokenizer"in c){if(!c.level||c.level!=="block"&&c.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let u=n[c.level];u?u.unshift(c.tokenizer):n[c.level]=[c.tokenizer],c.start&&(c.level==="block"?n.startBlock?n.startBlock.push(c.start):n.startBlock=[c.start]:c.level==="inline"&&(n.startInline?n.startInline.push(c.start):n.startInline=[c.start]))}"childTokens"in c&&c.childTokens&&(n.childTokens[c.name]=c.childTokens)}),i.extensions=n),r.renderer){let c=this.defaults.renderer||new lo(this.defaults);for(let u in r.renderer){if(!(u in c))throw new Error(`renderer '${u}' does not exist`);if(["options","parser"].includes(u))continue;let f=u,p=r.renderer[f],m=c[f];c[f]=(...g)=>{let v=p.apply(c,g);return v===!1&&(v=m.apply(c,g)),v||""}}i.renderer=c}if(r.tokenizer){let c=this.defaults.tokenizer||new io(this.defaults);for(let u in r.tokenizer){if(!(u in c))throw new Error(`tokenizer '${u}' does not exist`);if(["options","rules","lexer"].includes(u))continue;let f=u,p=r.tokenizer[f],m=c[f];c[f]=(...g)=>{let v=p.apply(c,g);return v===!1&&(v=m.apply(c,g)),v}}i.tokenizer=c}if(r.hooks){let c=this.defaults.hooks||new fi;for(let u in r.hooks){if(!(u in c))throw new Error(`hook '${u}' does not exist`);if(["options","block"].includes(u))continue;let f=u,p=r.hooks[f],m=c[f];fi.passThroughHooks.has(u)?c[f]=g=>{if(this.defaults.async&&fi.passThroughHooksRespectAsync.has(u))return(async()=>{let w=await p.call(c,g);return m.call(c,w)})();let v=p.call(c,g);return m.call(c,v)}:c[f]=(...g)=>{if(this.defaults.async)return(async()=>{let w=await p.apply(c,g);return w===!1&&(w=await m.apply(c,g)),w})();let v=p.apply(c,g);return v===!1&&(v=m.apply(c,g)),v}}i.hooks=c}if(r.walkTokens){let c=this.defaults.walkTokens,u=r.walkTokens;i.walkTokens=function(f){let p=[];return p.push(u.call(this,f)),c&&(p=p.concat(c.call(this,f))),p}}this.defaults={...this.defaults,...i}}),this}setOptions(s){return this.defaults={...this.defaults,...s},this}lexer(s,n){return bn.lex(s,n??this.defaults)}parser(s,n){return wn.parse(s,n??this.defaults)}parseMarkdown(s){return(n,r)=>{let i={...r},c={...this.defaults,...i},u=this.onError(!!c.silent,!!c.async);if(this.defaults.async===!0&&i.async===!1)return u(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return u(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return u(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(c.hooks&&(c.hooks.options=c,c.hooks.block=s),c.async)return(async()=>{let f=c.hooks?await c.hooks.preprocess(n):n,p=await(c.hooks?await c.hooks.provideLexer():s?bn.lex:bn.lexInline)(f,c),m=c.hooks?await c.hooks.processAllTokens(p):p;c.walkTokens&&await Promise.all(this.walkTokens(m,c.walkTokens));let g=await(c.hooks?await c.hooks.provideParser():s?wn.parse:wn.parseInline)(m,c);return c.hooks?await c.hooks.postprocess(g):g})().catch(u);try{c.hooks&&(n=c.hooks.preprocess(n));let f=(c.hooks?c.hooks.provideLexer():s?bn.lex:bn.lexInline)(n,c);c.hooks&&(f=c.hooks.processAllTokens(f)),c.walkTokens&&this.walkTokens(f,c.walkTokens);let p=(c.hooks?c.hooks.provideParser():s?wn.parse:wn.parseInline)(f,c);return c.hooks&&(p=c.hooks.postprocess(p)),p}catch(f){return u(f)}}}onError(s,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,s){let i="<p>An error occurred:</p><pre>"+Kn(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}}},Wa=new KS;function Me(s,n){return Wa.parse(s,n)}Me.options=Me.setOptions=function(s){return Wa.setOptions(s),Me.defaults=Wa.defaults,iy(Me.defaults),Me};Me.getDefaults=kd;Me.defaults=Fa;Me.use=function(...s){return Wa.use(...s),Me.defaults=Wa.defaults,iy(Me.defaults),Me};Me.walkTokens=function(s,n){return Wa.walkTokens(s,n)};Me.parseInline=Wa.parseInline;Me.Parser=wn;Me.parser=wn.parse;Me.Renderer=lo;Me.TextRenderer=Ud;Me.Lexer=bn;Me.lexer=bn.lex;Me.Tokenizer=io;Me.Hooks=fi;Me.parse=Me;Me.options;Me.setOptions;Me.use;Me.walkTokens;Me.parseInline;wn.parse;bn.lex;const JS=({userId:s,onNotebookSelect:n})=>{const[r,i]=S.useState([]),[c,u]=S.useState(null),[f,p]=S.useState([]),[m,g]=S.useState(!0),[v,w]=S.useState("list"),[_,x]=S.useState({used:0,total:5});S.useEffect(()=>{s&&(E(),T())},[s]);const E=async()=>{try{const H=await fetch(`https://morgus-orchestrator.morgan-426.workers.dev/api/notebooks?user_id=${s}`);if(H.ok){const P=await H.json();i(P.notebooks||[])}}catch(H){console.error("Failed to load notebooks:",H)}finally{g(!1)}},T=async()=>{try{const H=await fetch(`https://morgus-orchestrator.morgan-426.workers.dev/api/notebooks/daily-limit?user_id=${s}`);if(H.ok){const P=await H.json();x(P)}}catch(H){console.error("Failed to load daily limit:",H)}},D=async H=>{try{const P=await fetch(`https://morgus-orchestrator.morgan-426.workers.dev/api/notebooks/${H}/assets`);if(P.ok){const F=await P.json();p(F.assets||[])}}catch(P){console.error("Failed to load notebook assets:",P)}},C=async H=>{u(H),w("detail"),await D(H.id),n(H.id)},q=()=>{w("list"),u(null),p([])},R=async(H,P)=>{if(P.stopPropagation(),!!confirm("Delete this notebook? This action cannot be undone."))try{(await fetch(`https://morgus-orchestrator.morgan-426.workers.dev/api/notebooks/${H}`,{method:"DELETE"})).ok&&(await E(),c?.id===H&&q())}catch(F){console.error("Failed to delete notebook:",F)}},K=H=>({deep_research:"",study_guide:"",faq:"",timeline:"",infographic_generation:"",roadmap:""})[H]||"",Q=H=>{const P=new Date(H),I=new Date().getTime()-P.getTime(),ie=Math.floor(I/6e4),xe=Math.floor(I/36e5),ke=Math.floor(I/864e5);return ie<1?"Just now":ie<60?`${ie}m ago`:xe<24?`${xe}h ago`:ke<7?`${ke}d ago`:P.toLocaleDateString()};return m?o.jsx("div",{className:"notebooks-panel",children:"Loading..."}):v==="list"?o.jsxs("div",{className:"notebooks-panel",children:[o.jsxs("div",{className:"notebooks-header",children:[o.jsx("h3",{children:" Notebooks"}),o.jsxs("div",{className:"daily-limit",children:[_.used,"/",_.total," today"]})]}),r.length===0?o.jsxs("div",{className:"notebooks-empty",children:[o.jsx("p",{children:"No notebooks yet!"}),o.jsx("p",{className:"empty-hint",children:"Ask Morgy to create a notebook from your research"})]}):o.jsx("div",{className:"notebooks-list",children:r.map(H=>o.jsxs("div",{className:"notebook-item",onClick:()=>C(H),children:[o.jsx("div",{className:"notebook-icon",children:K(H.purpose)}),o.jsxs("div",{className:"notebook-content",children:[o.jsx("div",{className:"notebook-title",children:H.title}),o.jsxs("div",{className:"notebook-meta",children:[o.jsx("span",{className:"notebook-purpose",children:H.purpose.replace(/_/g," ")}),o.jsx("span",{className:"notebook-date",children:Q(H.created_at)})]}),H.summary&&o.jsxs("div",{className:"notebook-summary",children:[H.summary.substring(0,100),H.summary.length>100?"...":""]})]}),o.jsx("button",{className:"delete-notebook-btn",onClick:P=>R(H.id,P),title:"Delete Notebook",children:""})]},H.id))})]}):o.jsxs("div",{className:"notebooks-panel notebook-detail-view",children:[o.jsxs("div",{className:"notebooks-header",children:[o.jsx("button",{className:"back-btn",onClick:q,children:" Back"}),o.jsxs("h3",{children:[K(c.purpose)," ",c.title]})]}),o.jsxs("div",{className:"notebook-detail",children:[o.jsxs("div",{className:"notebook-meta-detail",children:[o.jsx("span",{className:"purpose-badge",children:c.purpose.replace(/_/g," ")}),o.jsx("span",{className:"date-badge",children:Q(c.created_at)})]}),c.summary&&o.jsxs("div",{className:"notebook-summary-full",children:[o.jsx("h4",{children:"Summary"}),o.jsx("p",{children:c.summary})]}),c.sections&&c.sections.length>0&&o.jsxs("div",{className:"notebook-sections",children:[o.jsx("h4",{children:"Contents"}),c.sections.map((H,P)=>o.jsxs("div",{className:"notebook-section",children:[o.jsx("h5",{children:H.title}),o.jsx("ul",{children:H.bullets.map((F,I)=>o.jsx("li",{children:F},I))})]},P))]}),f.length>0&&o.jsxs("div",{className:"notebook-assets",children:[o.jsx("h4",{children:"Visual Assets"}),o.jsx("div",{className:"assets-grid",children:f.map(H=>o.jsxs("div",{className:"asset-item",children:[o.jsx("div",{className:"asset-label",children:H.label}),H.type.includes("svg")?o.jsx("div",{className:"asset-svg",dangerouslySetInnerHTML:{__html:H.content}}):o.jsx("img",{src:H.content,alt:H.label,className:"asset-image"})]},H.id))})]}),c.mindmap&&o.jsxs("div",{className:"notebook-mindmap",children:[o.jsx("h4",{children:"Mind Map"}),o.jsx("div",{className:"mindmap-placeholder",children:"Mind map visualization coming soon"})]}),c.flowchart&&o.jsxs("div",{className:"notebook-flowchart",children:[o.jsx("h4",{children:"Flow Chart"}),o.jsx("div",{className:"flowchart-placeholder",children:"Flow chart visualization coming soon"})]})]})]})};function QS({onTranscript:s,isListening:n,onListeningChange:r}){const[i,c]=S.useState(!1),[u,f]=S.useState(null);S.useEffect(()=>{const m=window.SpeechRecognition||window.webkitSpeechRecognition;if(m){c(!0);const g=new m;g.continuous=!1,g.interimResults=!0,g.lang="en-US",g.onresult=v=>{const w=Array.from(v.results).map(_=>_[0]).map(_=>_.transcript).join("");s(w),v.results[v.results.length-1].isFinal&&r(!1)},g.onerror=v=>{console.error("Speech recognition error:",v.error),r(!1)},g.onend=()=>{r(!1)},f(g)}},[]);const p=()=>{u&&(n?(u.stop(),r(!1)):(u.start(),r(!0)))};return i?o.jsx("button",{className:`voice-button ${n?"listening":""}`,onClick:p,title:n?"Stop listening":"Start voice input",children:n?"":""}):null}const er=new Set;let tr=!1,nr="";async function Ju(s){const n=s.substring(0,100);if(er.has(n)){console.log("[TTS] Already spoken this message, skipping");return}if(tr&&nr===n){console.log("[TTS] Already speaking this exact message, skipping");return}if(oo(),tr=!0,nr=n,er.add(n),er.size>10){const r=er.values().next().value;r&&er.delete(r)}try{console.log("[TTS] Starting ElevenLabs TTS for text:",s.substring(0,50)+"..."),oo();const r=s.replace(/\*\*/g,"").replace(/\*/g,"").replace(/^[\-]\s+/gm,"").replace(/^#+\s+/gm,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/`/g,"").replace(/|||||||||||/g,"").trim();console.log("[TTS] Cleaned text:",r.substring(0,50)+"..."),console.log("[TTS] Calling ElevenLabs API...");const i=await fetch("https://morgus-orchestrator.morgan-426.workers.dev/api/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:r})});if(!i.ok){const p=await i.text();console.error("[TTS] API error:",i.status,i.statusText,p),console.error("[TTS] API URL:",i.url),console.log("[TTS] Skipping TTS due to API error (no fallback)");return}console.log("[TTS] API response OK, creating audio...");const c=await i.blob();console.log("[TTS] Audio blob size:",c.size,"bytes");const u=URL.createObjectURL(c),f=new Audio(u);window.__currentAudio=f,window.__isAudioPlaying=!0,console.log("[TTS] Playing audio..."),await f.play(),console.log("[TTS] Audio playing successfully!"),f.onended=()=>{URL.revokeObjectURL(u),window.__currentAudio=null,window.__isAudioPlaying=!1,tr=!1,nr=""},f.onerror=()=>{URL.revokeObjectURL(u),window.__currentAudio=null,window.__isAudioPlaying=!1,tr=!1,nr=""}}catch(r){console.error("[TTS] ElevenLabs TTS failed:",r),console.error("[TTS] Error details:",JSON.stringify(r,null,2)),console.log("[TTS] Skipping TTS due to error (no fallback to browser TTS)"),tr=!1,nr=""}}function oo(){er.clear(),tr=!1,nr="",window.__isAudioPlaying=!1;const s=window.__currentAudio;s&&(s.pause(),s.currentTime=0,window.__currentAudio=null),"speechSynthesis"in window&&window.speechSynthesis.cancel()}function XS({metadata:s}){const[n,r]=S.useState(!1),i=[...s.allModels].sort((p,m)=>m.score-p.score),c=p=>{const m=p.split("/"),g=m[m.length-1].replace(":free","");return{"mistral-7b-instruct":"Mistral 7B","grok-4.1-fast":"Grok Fast","kat-coder-pro-v1":"KAT-Coder"}[g]||g},u=p=>p<1e3?`${p}ms`:`${(p/1e3).toFixed(1)}s`,f=p=>p===0?"":p===1?"":p===2?"":"";return o.jsxs("div",{className:"moe-header",children:[o.jsx("div",{className:"moe-title",children:" MOE Competition"}),o.jsx("div",{className:"moe-models",children:i.map((p,m)=>{const g=p.model===s.winner.model,v=(p.score*100).toFixed(1);return o.jsxs("div",{className:`moe-model-card ${g?"winner":""}`,children:[o.jsxs("div",{className:"moe-model-name",children:[f(m)," ",c(p.model)]}),o.jsxs("div",{className:"moe-model-score",children:[v,"%"]}),o.jsxs("div",{className:"moe-model-stats",children:[o.jsx("div",{children:u(p.latency)}),o.jsxs("div",{children:[p.tokens," tokens"]})]})]},p.model)})}),o.jsxs("div",{className:"moe-footer",children:[o.jsxs("span",{children:["Total: ",u(s.totalLatency)," | $",s.totalCost.toFixed(6)]}),o.jsx("button",{className:"moe-expand-btn",onClick:()=>r(!n),children:n?"Hide":"Why?"})]}),n&&o.jsx("div",{className:"moe-explanation",children:s.nashExplanation})]})}const ZS="https://morgus-orchestrator.morgan-426.workers.dev";function Qu(){const[s,n]=S.useState([]),[r,i]=S.useState(!0);S.useEffect(()=>{c();const p=setInterval(c,3e4);return()=>clearInterval(p)},[]);const c=async()=>{try{const p=await fetch(`${ZS}/api/stats/leaderboard`);if(p.ok){const m=await p.json();n(m.stats||[])}}catch(p){console.error("Failed to load leaderboard:",p)}finally{i(!1)}},u=p=>["","",""][p]||`${p+1}`,f=p=>{const m=p.split("/");return m[m.length-1].replace("gemini-2.0-flash-exp:free","Gemini 2.0").replace("claude-3.5-haiku","Claude 3.5").replace("gpt-4o-mini","GPT-4o mini").replace(":free","")};return r?o.jsxs("div",{className:"moe-leaderboard-box",children:[o.jsx("div",{className:"leaderboard-title",children:" Model Rankings"}),o.jsx("div",{className:"leaderboard-loading",children:"Loading live rankings..."})]}):s.length===0?o.jsxs("div",{className:"moe-leaderboard-box",children:[o.jsx("div",{className:"leaderboard-title",children:" Model Rankings"}),o.jsx("div",{className:"leaderboard-empty",children:"No competitions yet. Send a message to start!"})]}):o.jsxs("div",{className:"moe-leaderboard-box",children:[o.jsx("div",{className:"leaderboard-title",children:" Model Rankings"}),o.jsx("div",{className:"leaderboard-grid",children:s.slice(0,3).map((p,m)=>o.jsxs("div",{className:`leaderboard-row rank-${m+1}`,children:[o.jsx("span",{className:"rank-badge",children:u(m)}),o.jsxs("div",{className:"model-info",children:[o.jsx("div",{className:"model-name-short",children:f(p.model_name)}),o.jsxs("div",{className:"win-rate-badge",children:[p.win_rate.toFixed(0),"% wins"]})]})]},p.model_name))})]})}const vg=["Thinking","Analyzing your question","Processing request","Working on it","Considering options","Formulating response"],bg=["Deep diving","Researching sources","Gathering evidence","Cross-referencing data","Analyzing findings","Synthesizing insights","Validating information","Building comprehensive answer"],WS=({toolName:s,isDeepResearch:n=!1,researchStep:r})=>{const[i,c]=S.useState(0),[u,f]=S.useState(0),p=S.useRef(Date.now());S.useEffect(()=>{p.current=Date.now(),c(0);const _=setInterval(()=>{const x=Math.floor((Date.now()-p.current)/1e3);c(x)},1e3);return()=>clearInterval(_)},[]),S.useEffect(()=>{const _=n?bg:vg,x=setInterval(()=>{f(E=>(E+1)%_.length)},4e3);return()=>clearInterval(x)},[n]);const m=_=>{if(_<60)return`${_}s`;const x=Math.floor(_/60),E=_%60;return`${x}m ${E}s`},g=()=>s?{search_web:"Searching the web",fetch_url:"Fetching page content",execute_code:"Executing code",browse_web:"Browsing website",create_chart:"Creating chart",generate_image:"Generating image",generate_3d_model:"Creating 3D model",text_to_speech:"Generating voice",search_images:"Searching images",get_current_time:"Getting current time",think:"Deep thinking",rag_search:"Searching knowledge base"}[s]||`Using ${s}`:r||(n?bg:vg)[u],w=i>=120?"Still working hard on this complex request...":i>=60?"Taking a bit longer, but making progress...":i>=30?"Working through the details...":null;return o.jsxs("div",{className:`thinking-indicator ${n?"deep-research":""}`,children:[o.jsxs("div",{className:"thinking-main",children:[o.jsxs("div",{className:"thinking-spinner",children:[o.jsx("div",{className:"spinner-ring"}),o.jsx("div",{className:"spinner-ring"}),o.jsx("div",{className:"spinner-ring"})]}),o.jsxs("div",{className:"thinking-content",children:[o.jsx("span",{className:"thinking-text",children:g()}),o.jsx("span",{className:"thinking-time",children:m(i)})]}),o.jsxs("div",{className:"thinking-dots",children:[o.jsx("span",{className:"dot"}),o.jsx("span",{className:"dot"}),o.jsx("span",{className:"dot"})]})]}),w&&o.jsx("div",{className:"thinking-encouragement",children:w}),n&&o.jsx("div",{className:"thinking-research-badge",children:" Deep Research Mode"})]})};function FS({liveViewUrl:s,sessionId:n}){const[r,i]=S.useState(!1),[c,u]=S.useState(!1),f=async()=>{if(u(!0),n)try{await fetch("https://morgus-deploy.fly.dev/close-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:n})})}catch(p){console.error("Failed to close session:",p)}i(!0),u(!1)};return r?o.jsx("div",{className:"browser-view-closed",children:" Browser session closed"}):o.jsxs("div",{className:"browser-view-container",children:[o.jsxs("div",{className:"browser-view-header",children:[o.jsx("div",{className:"browser-view-title",children:" Live Browser View"}),o.jsxs("div",{className:"browser-view-controls",children:[o.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"browser-view-btn",title:"Open in new tab (full size)",children:""}),o.jsx("button",{className:"browser-view-btn browser-view-close",onClick:f,disabled:c,title:"Close browser session",children:c?"...":""})]})]}),o.jsxs("div",{className:"browser-view-iframe-container",children:[o.jsx("iframe",{src:s,className:"browser-view-iframe",title:"Live Browser View",sandbox:"allow-same-origin allow-scripts allow-forms allow-pointer-lock allow-popups",allow:"clipboard-read; clipboard-write"}),o.jsxs("div",{className:"browser-view-footer",children:[" ",o.jsx("strong",{children:"Tip:"}),' Click "" to open full-size in new tab for easier interaction.',o.jsx("span",{className:"browser-view-takeover",children:"Need to login or solve CAPTCHA? Open in new tab!"})]})]})]})}function ej({userId:s,onServerInstalled:n,onServerUninstalled:r}){const[i,c]=S.useState([]),[u,f]=S.useState([]),[p,m]=S.useState([]),[g,v]=S.useState("all"),[w,_]=S.useState(""),[x,E]=S.useState(!0),[T,D]=S.useState(null),[C,q]=S.useState(null),[R,K]=S.useState("browse");S.useEffect(()=>{Q(),H(),P()},[s]);const Q=async()=>{try{const{data:N,error:V}=await re.from("mcp_servers").select("*").eq("is_active",!0).order("is_featured",{ascending:!1}).order("install_count",{ascending:!1});if(V)throw V;c(N||[])}catch(N){console.error("Error loading MCP servers:",N)}finally{E(!1)}},H=async()=>{if(s)try{const{data:N,error:V}=await re.from("mcp_server_installs").select("*").eq("user_id",s);if(V)throw V;f(N||[])}catch(N){console.error("Error loading installed servers:",N)}},P=async()=>{try{const{data:N,error:V}=await re.from("mcp_server_categories").select("name").order("sort_order");if(V)throw V;m(["all",...N?.map(te=>te.name)||[]])}catch(N){console.error("Error loading categories:",N),m(["all","general","development","data","productivity"])}},F=N=>u.some(V=>V.server_id===N),I=async N=>{if(!s){alert("Please log in to install MCP servers");return}D(N.id);try{const{error:V}=await re.from("mcp_server_installs").insert({user_id:s,server_id:N.id,is_enabled:!0,config:N.install_config_template||{},health_status:"pending"});if(V)throw V;await re.rpc("increment_mcp_install_count",{server_id:N.id}),await H(),n?.(N.id)}catch(V){console.error("Error installing server:",V),alert("Failed to install server. Please try again.")}finally{D(null)}},ie=async N=>{if(s)try{const{error:V}=await re.from("mcp_server_installs").delete().eq("user_id",s).eq("server_id",N);if(V)throw V;await H(),r?.(N)}catch(V){console.error("Error uninstalling server:",V),alert("Failed to uninstall server. Please try again.")}},xe=async(N,V)=>{if(s)try{const{error:te}=await re.from("mcp_server_installs").update({is_enabled:V}).eq("user_id",s).eq("server_id",N);if(te)throw te;await H()}catch(te){console.error("Error toggling server:",te)}},ke=i.filter(N=>{const V=g==="all"||N.category===g,te=!w||N.display_name.toLowerCase().includes(w.toLowerCase())||N.description.toLowerCase().includes(w.toLowerCase())||N.tags.some(Z=>Z.toLowerCase().includes(w.toLowerCase()));return V&&te}),it=i.filter(N=>F(N.id)),Ge=N=>{const V=[];for(let te=1;te<=5;te++)V.push(o.jsx("span",{className:`star ${te<=N?"filled":""}`,children:""},te));return V},Ze=N=>({all:"",general:"",development:"",data:"",productivity:"",communication:"",ai:"",security:"",media:"",finance:"",analytics:""})[N.toLowerCase()]||"";return x?o.jsxs("div",{className:"mcp-browser-loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"Loading MCP Server Registry..."})]}):o.jsxs("div",{className:"mcp-server-browser",children:[o.jsx("div",{className:"browser-header",children:o.jsxs("div",{className:"view-toggle",children:[o.jsx("button",{className:`toggle-btn ${R==="browse"?"active":""}`,onClick:()=>K("browse"),children:" Browse Registry"}),o.jsxs("button",{className:`toggle-btn ${R==="installed"?"active":""}`,onClick:()=>K("installed"),children:[" My Servers (",u.length,")"]})]})}),R==="browse"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"browser-controls",children:[o.jsxs("div",{className:"search-box",children:[o.jsx("span",{className:"search-icon",children:""}),o.jsx("input",{type:"text",placeholder:"Search servers...",value:w,onChange:N=>_(N.target.value)})]}),o.jsx("div",{className:"category-filter",children:p.map(N=>o.jsxs("button",{className:`category-btn ${g===N?"active":""}`,onClick:()=>v(N),children:[Ze(N)," ",N==="all"?"All":N]},N))})]}),g==="all"&&!w&&o.jsxs("div",{className:"featured-section",children:[o.jsx("h3",{children:" Featured Servers"}),o.jsx("div",{className:"featured-grid",children:i.filter(N=>N.is_featured).slice(0,3).map(N=>o.jsxs("div",{className:"featured-card",onClick:()=>q(N),children:[o.jsx("div",{className:"featured-icon",children:N.icon_url?o.jsx("img",{src:N.icon_url,alt:N.display_name}):o.jsx("span",{className:"default-icon",children:Ze(N.category)})}),o.jsxs("div",{className:"featured-info",children:[o.jsx("h4",{children:N.display_name}),o.jsx("p",{children:N.description}),o.jsxs("div",{className:"featured-meta",children:[N.is_official&&o.jsx("span",{className:"badge official",children:"Official"}),N.is_verified&&o.jsx("span",{className:"badge verified",children:" Verified"})]})]})]},N.id))})]}),o.jsx("div",{className:"servers-grid",children:ke.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("span",{className:"empty-icon",children:""}),o.jsx("p",{children:"No servers found matching your criteria"})]}):ke.map(N=>o.jsxs("div",{className:`server-card ${F(N.id)?"installed":""}`,onClick:()=>q(N),children:[o.jsxs("div",{className:"server-header",children:[o.jsx("div",{className:"server-icon",children:N.icon_url?o.jsx("img",{src:N.icon_url,alt:N.display_name}):o.jsx("span",{className:"default-icon",children:Ze(N.category)})}),o.jsxs("div",{className:"server-title",children:[o.jsx("h4",{children:N.display_name}),o.jsxs("span",{className:"server-author",children:["by ",N.author||"Unknown"]})]})]}),o.jsx("p",{className:"server-description",children:N.description}),o.jsxs("div",{className:"server-meta",children:[o.jsxs("div",{className:"server-rating",children:[Ge(Math.round(N.average_rating)),o.jsxs("span",{className:"rating-count",children:["(",N.review_count,")"]})]}),o.jsxs("span",{className:"install-count",children:[" ",N.install_count]})]}),o.jsxs("div",{className:"server-badges",children:[N.is_official&&o.jsx("span",{className:"badge official",children:" Official"}),N.is_verified&&o.jsx("span",{className:"badge verified",children:" Verified"}),o.jsx("span",{className:"badge category",children:N.category})]}),o.jsx("div",{className:"server-actions",onClick:V=>V.stopPropagation(),children:F(N.id)?o.jsx("button",{className:"action-btn installed",onClick:()=>ie(N.id),children:" Installed"}):o.jsx("button",{className:"action-btn install",onClick:()=>I(N),disabled:T===N.id,children:T===N.id?"Installing...":"+ Install"})})]},N.id))})]}):o.jsx("div",{className:"installed-servers",children:it.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("span",{className:"empty-icon",children:""}),o.jsx("p",{children:"No servers installed yet"}),o.jsx("button",{className:"browse-btn",onClick:()=>K("browse"),children:"Browse Registry"})]}):o.jsx("div",{className:"installed-list",children:it.map(N=>{const V=u.find(te=>te.server_id===N.id);return o.jsxs("div",{className:`installed-item ${V?.is_enabled?"enabled":"disabled"}`,children:[o.jsx("div",{className:"installed-icon",children:N.icon_url?o.jsx("img",{src:N.icon_url,alt:N.display_name}):o.jsx("span",{className:"default-icon",children:Ze(N.category)})}),o.jsxs("div",{className:"installed-info",children:[o.jsx("h4",{children:N.display_name}),o.jsx("p",{children:N.description}),o.jsxs("div",{className:"installed-meta",children:[o.jsxs("span",{className:`status ${V?.health_status}`,children:[V?.health_status==="connected"?"":V?.health_status==="error"?"":"",V?.health_status||"pending"]}),o.jsxs("span",{className:"version",children:["v",N.version]})]})]}),o.jsxs("div",{className:"installed-actions",children:[o.jsxs("label",{className:"toggle-switch",children:[o.jsx("input",{type:"checkbox",checked:V?.is_enabled||!1,onChange:te=>xe(N.id,te.target.checked)}),o.jsx("span",{className:"slider"})]}),o.jsx("button",{className:"uninstall-btn",onClick:()=>ie(N.id),title:"Uninstall",children:""})]})]},N.id)})})}),C&&o.jsx("div",{className:"server-modal-overlay",onClick:()=>q(null),children:o.jsxs("div",{className:"server-modal",onClick:N=>N.stopPropagation(),children:[o.jsx("button",{className:"modal-close",onClick:()=>q(null),children:""}),o.jsxs("div",{className:"modal-header",children:[o.jsx("div",{className:"modal-icon",children:C.icon_url?o.jsx("img",{src:C.icon_url,alt:C.display_name}):o.jsx("span",{className:"default-icon large",children:Ze(C.category)})}),o.jsxs("div",{className:"modal-title",children:[o.jsx("h2",{children:C.display_name}),o.jsxs("span",{className:"modal-author",children:["by ",C.author||"Unknown"]}),o.jsxs("div",{className:"modal-badges",children:[C.is_official&&o.jsx("span",{className:"badge official",children:" Official"}),C.is_verified&&o.jsx("span",{className:"badge verified",children:" Verified"})]})]})]}),o.jsxs("div",{className:"modal-stats",children:[o.jsxs("div",{className:"stat",children:[o.jsx("span",{className:"stat-value",children:Ge(Math.round(C.average_rating))}),o.jsxs("span",{className:"stat-label",children:[C.review_count," reviews"]})]}),o.jsxs("div",{className:"stat",children:[o.jsxs("span",{className:"stat-value",children:[" ",C.install_count]}),o.jsx("span",{className:"stat-label",children:"installs"})]}),o.jsxs("div",{className:"stat",children:[o.jsxs("span",{className:"stat-value",children:["v",C.version]}),o.jsx("span",{className:"stat-label",children:"version"})]})]}),o.jsxs("div",{className:"modal-description",children:[o.jsx("h3",{children:"Description"}),o.jsx("p",{children:C.long_description||C.description})]}),C.tags.length>0&&o.jsx("div",{className:"modal-tags",children:C.tags.map(N=>o.jsx("span",{className:"tag",children:N},N))}),o.jsxs("div",{className:"modal-links",children:[C.documentation_url&&o.jsx("a",{href:C.documentation_url,target:"_blank",rel:"noopener noreferrer",children:" Documentation"}),C.repository_url&&o.jsx("a",{href:C.repository_url,target:"_blank",rel:"noopener noreferrer",children:" Source Code"}),C.author_url&&o.jsx("a",{href:C.author_url,target:"_blank",rel:"noopener noreferrer",children:" Author"})]}),o.jsx("div",{className:"modal-actions",children:F(C.id)?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"modal-btn secondary",onClick:()=>ie(C.id),children:"Uninstall"}),o.jsx("button",{className:"modal-btn primary installed",children:" Installed"})]}):o.jsx("button",{className:"modal-btn primary",onClick:()=>I(C),disabled:T===C.id,children:T===C.id?"Installing...":"+ Install Server"})})]})})]})}function tj({isOpen:s,onClose:n,darkMode:r,onDarkModeChange:i,dontTrainOnMe:c,onDontTrainChange:u,user:f,profile:p,onLogout:m,onNavigate:g}){const[v,w]=S.useState("general");console.log("[SettingsPanel] Rendering with:",{user:f?.email,profile:p,isAdmin:p?.is_admin});const[_,x]=S.useState([]),[E,T]=S.useState([]),[D,C]=S.useState(""),[q,R]=S.useState(""),[K,Q]=S.useState(!1),[H,P]=S.useState(()=>localStorage.getItem("morgus_dont_train")==="true"),F=c!==void 0?c:H,I=j=>{u?u(j):(P(j),localStorage.setItem("morgus_dont_train",j.toString()))};S.useEffect(()=>{s&&(ie(),xe())},[s]);const ie=async()=>{const j=localStorage.getItem("morgus_mcp_servers");j&&x(JSON.parse(j))},xe=async()=>{const j=[{id:"website-builder-v2",name:"Website Builder",description:"Build professional websites",enabled:!0,category:"Development"},{id:"landing-page-v2",name:"Landing Page",description:"High-conversion landing pages",enabled:!0,category:"Development"},{id:"full-stack-app-v2",name:"Full-Stack App",description:"Build full-stack applications",enabled:!0,category:"Development"},{id:"web-app-scaffold-v2",name:"Web App Scaffold",description:"Supabase-powered apps",enabled:!0,category:"Development"},{id:"stripe-payments-v2",name:"Stripe Payments",description:"Payment integration",enabled:!0,category:"Development"},{id:"authentication-v2",name:"Authentication",description:"User auth & management",enabled:!0,category:"Development"},{id:"external-api-v2",name:"External API",description:"API integrations",enabled:!0,category:"Development"},{id:"data-analysis-v2",name:"Data Analysis",description:"Analyze and visualize data",enabled:!0,category:"Analysis"},{id:"research-analysis-v2",name:"Research",description:"Deep research & analysis",enabled:!0,category:"Analysis"},{id:"spreadsheet-v2",name:"Spreadsheet",description:"Excel workbooks",enabled:!0,category:"Documents"},{id:"docx-v2",name:"DOCX Generation",description:"Word documents",enabled:!0,category:"Documents"},{id:"pdf-v2",name:"PDF Generation",description:"PDF documents",enabled:!0,category:"Documents"},{id:"document-generation-v2",name:"Document Generation",description:"Reports & proposals",enabled:!0,category:"Documents"},{id:"presentation-slideshow-v2",name:"Presentations",description:"Slideshows & decks",enabled:!0,category:"Documents"},{id:"image-generation-v2",name:"Image Generation",description:"AI image creation",enabled:!0,category:"Creative"},{id:"code-execution-v2",name:"Code Execution",description:"Run code in sandbox",enabled:!0,category:"Utilities"},{id:"browser-automation-v2",name:"Browser Automation",description:"Web automation",enabled:!0,category:"Utilities"},{id:"email-communication-v2",name:"Email",description:"Professional emails",enabled:!0,category:"Communication"},{id:"task-automation-v2",name:"Task Automation",description:"Workflow automation",enabled:!0,category:"Utilities"}],L=localStorage.getItem("morgus_skills_config");if(L){const W=JSON.parse(L);T(j.map(ee=>({...ee,enabled:W[ee.id]!==!1})))}else T(j)},ke=j=>{localStorage.setItem("morgus_mcp_servers",JSON.stringify(j)),x(j)},it=j=>{const L={};j.forEach(W=>{L[W.id]=W.enabled}),localStorage.setItem("morgus_skills_config",JSON.stringify(L)),T(j)},Ge=async()=>{if(!D||!q)return;Q(!0);const j={id:`mcp-${Date.now()}`,name:q,url:D,enabled:!0,status:"disconnected"};try{j.status="connected"}catch{j.status="error"}ke([..._,j]),C(""),R(""),Q(!1)},Ze=j=>{ke(_.filter(L=>L.id!==j))},N=j=>{ke(_.map(L=>L.id===j?{...L,enabled:!L.enabled}:L))},V=j=>{it(E.map(L=>L.id===j?{...L,enabled:!L.enabled}:L))},te=()=>{it(E.map(j=>({...j,enabled:!0})))},Z=()=>{it(E.map(j=>({...j,enabled:!1})))};if(!s)return null;const ue=[...new Set(E.map(j=>j.category))];return o.jsx("div",{className:"settings-overlay",onClick:n,children:o.jsxs("div",{className:"settings-panel",onClick:j=>j.stopPropagation(),children:[o.jsxs("div",{className:"settings-header",children:[o.jsx("h2",{children:" Settings"}),o.jsx("button",{className:"close-btn",onClick:j=>{j.preventDefault(),j.stopPropagation(),console.log("[SettingsPanel] Close button clicked"),n()},onTouchEnd:j=>{j.preventDefault(),j.stopPropagation(),console.log("[SettingsPanel] Close button touched"),n()},type:"button","aria-label":"Close",children:""})]}),o.jsxs("div",{className:"settings-tabs",children:[o.jsx("button",{className:`tab ${v==="general"?"active":""}`,onClick:()=>w("general"),children:"General"}),o.jsx("button",{className:`tab ${v==="mcp"?"active":""}`,onClick:()=>w("mcp"),children:"MCP Servers"}),o.jsx("button",{className:`tab ${v==="skills"?"active":""}`,onClick:()=>w("skills"),children:"Skills"})]}),o.jsxs("div",{className:"settings-content",children:[v==="general"&&o.jsxs("div",{className:"general-settings",children:[f&&o.jsxs("div",{className:"setting-section",children:[o.jsx("h3",{className:"section-title",children:" Account"}),o.jsxs("div",{className:"setting-item",children:[o.jsxs("div",{className:"setting-info",children:[o.jsx("span",{className:"setting-label",children:p?.display_name||f.email}),o.jsx("span",{className:"setting-description",children:f.email})]}),o.jsx("span",{className:`plan-badge ${p?.is_admin?"admin-badge":""}`,children:p?.is_admin?" Admin":p?.subscription_tier||"free"})]}),o.jsxs("div",{className:"account-actions",children:[o.jsx("button",{className:"account-btn",onClick:()=>g?.("/account"),children:" My Account"}),o.jsx("button",{className:"account-btn knowledge-base-btn",onClick:()=>g?.("/knowledge-base"),children:" Knowledge Base"}),o.jsx("button",{className:"account-btn",onClick:()=>g?.("/pricing"),children:" Upgrade Plan"}),p?.is_admin&&o.jsx("button",{className:"account-btn admin",onClick:()=>g?.("/admin"),children:" Admin Panel"}),o.jsx("button",{className:"account-btn logout",onClick:j=>{j.preventDefault(),j.stopPropagation(),console.log("[SettingsPanel] Logout clicked"),m?m():console.error("[SettingsPanel] onLogout not provided!")},children:" Log Out"})]}),o.jsxs("div",{className:"referral-section",children:[o.jsxs("div",{className:"referral-header",children:[o.jsx("span",{className:"referral-icon",children:""}),o.jsx("span",{className:"referral-title",children:"Refer a Friend"})]}),o.jsx("p",{className:"referral-description",children:"Share your code and both get a free day pass when they sign up!"}),o.jsxs("div",{className:"referral-code-box",children:[o.jsx("span",{className:"referral-code",children:f?.email?.split("@")[0]?.toUpperCase().slice(0,8)||"MORGUS"}),o.jsx("button",{className:"copy-code-btn",onClick:()=>{const j=f?.email?.split("@")[0]?.toUpperCase().slice(0,8)||"MORGUS";navigator.clipboard.writeText(j),alert("Referral code copied!")},children:" Copy"})]}),o.jsx("button",{className:"share-link-btn",onClick:()=>{const L=`https://morgus-console.pages.dev/signup?ref=${f?.email?.split("@")[0]?.toUpperCase().slice(0,8)||"MORGUS"}`;navigator.clipboard.writeText(L),alert("Share link copied!")},children:" Copy Share Link"})]})]}),!f&&o.jsxs("div",{className:"setting-section",children:[o.jsx("h3",{className:"section-title",children:" Account"}),o.jsxs("div",{className:"account-actions",children:[o.jsx("button",{className:"account-btn primary",onClick:()=>g?.("/login"),children:" Log In"}),o.jsx("button",{className:"account-btn",onClick:()=>g?.("/signup"),children:" Sign Up"})]})]}),o.jsxs("div",{className:"setting-item",children:[o.jsxs("div",{className:"setting-info",children:[o.jsx("span",{className:"setting-label",children:" Dark Mode"}),o.jsx("span",{className:"setting-description",children:"Toggle dark/light theme"})]}),o.jsxs("label",{className:"toggle-switch",children:[o.jsx("input",{type:"checkbox",checked:r,onChange:j=>i(j.target.checked)}),o.jsx("span",{className:"slider"})]})]}),o.jsxs("div",{className:"setting-item privacy-toggle",children:[o.jsxs("div",{className:"setting-info",children:[o.jsxs("span",{className:"setting-label",children:[o.jsx("span",{className:"snake-icon",children:""})," Don't Train on Me"]}),o.jsx("span",{className:"setting-description",children:F?"Your conversations won't be used for training":"Your conversations help improve Morgus for everyone"})]}),o.jsxs("label",{className:"toggle-switch privacy",children:[o.jsx("input",{type:"checkbox",checked:F,onChange:j=>I(j.target.checked)}),o.jsx("span",{className:"slider privacy-slider"})]})]}),o.jsxs("div",{className:"setting-item",children:[o.jsxs("div",{className:"setting-info",children:[o.jsx("span",{className:"setting-label",children:" Morgus Version"}),o.jsx("span",{className:"setting-description",children:"Skills Library v2.0  MCP Enabled"})]}),o.jsx("span",{className:"version-badge",children:"v2.0"})]}),o.jsx("div",{className:"setting-item",children:o.jsxs("div",{className:"setting-info",children:[o.jsx("span",{className:"setting-label",children:" Active Skills"}),o.jsxs("span",{className:"setting-description",children:[E.filter(j=>j.enabled).length," of ",E.length," skills enabled"]})]})}),o.jsx("div",{className:"setting-item",children:o.jsxs("div",{className:"setting-info",children:[o.jsx("span",{className:"setting-label",children:" MCP Servers"}),o.jsxs("span",{className:"setting-description",children:[_.filter(j=>j.enabled).length," connected"]})]})})]}),v==="mcp"&&o.jsxs("div",{className:"mcp-settings",children:[o.jsx(ej,{userId:f?.id,onServerInstalled:j=>{console.log("Server installed:",j),ie()},onServerUninstalled:j=>{console.log("Server uninstalled:",j),ie()}}),o.jsxs("div",{className:"manual-server-section",children:[o.jsx("h4",{children:" Add Custom Server"}),o.jsx("p",{className:"manual-hint",children:"For advanced users: manually connect to a custom MCP server"}),o.jsxs("div",{className:"add-server-form",children:[o.jsx("input",{type:"text",placeholder:"Server Name (e.g., My Database)",value:q,onChange:j=>R(j.target.value)}),o.jsx("input",{type:"text",placeholder:"Server URL (e.g., http://localhost:3000)",value:D,onChange:j=>C(j.target.value)}),o.jsx("button",{onClick:Ge,disabled:K||!D||!q,children:K?"Connecting...":"+ Add Server"})]})]}),_.length>0&&o.jsxs("div",{className:"custom-servers-section",children:[o.jsx("h4",{children:" Custom Servers"}),o.jsx("div",{className:"servers-list",children:_.map(j=>o.jsxs("div",{className:`server-item ${j.status}`,children:[o.jsxs("div",{className:"server-info",children:[o.jsx("span",{className:"server-name",children:j.name}),o.jsx("span",{className:"server-url",children:j.url}),o.jsx("span",{className:`status-badge ${j.status}`,children:j.status==="connected"?" Connected":j.status==="error"?" Error":" Disconnected"})]}),o.jsxs("div",{className:"server-actions",children:[o.jsxs("label",{className:"toggle-switch",children:[o.jsx("input",{type:"checkbox",checked:j.enabled,onChange:()=>N(j.id)}),o.jsx("span",{className:"slider"})]}),o.jsx("button",{className:"remove-btn",onClick:()=>Ze(j.id),children:""})]})]},j.id))})]})]}),v==="skills"&&o.jsxs("div",{className:"skills-settings",children:[o.jsxs("div",{className:"skills-header",children:[o.jsx("p",{children:"Enable or disable specific skills to customize Morgus's capabilities."}),o.jsxs("div",{className:"bulk-actions",children:[o.jsx("button",{onClick:te,children:"Enable All"}),o.jsx("button",{onClick:Z,children:"Disable All"})]})]}),ue.map(j=>o.jsxs("div",{className:"skill-category",children:[o.jsx("h3",{children:j}),o.jsx("div",{className:"skills-list",children:E.filter(L=>L.category===j).map(L=>o.jsxs("div",{className:`skill-item ${L.enabled?"enabled":"disabled"}`,children:[o.jsxs("div",{className:"skill-info",children:[o.jsx("span",{className:"skill-name",children:L.name}),o.jsx("span",{className:"skill-description",children:L.description})]}),o.jsxs("label",{className:"toggle-switch",children:[o.jsx("input",{type:"checkbox",checked:L.enabled,onChange:()=>V(L.id)}),o.jsx("span",{className:"slider"})]})]},L.id))})]},j))]})]})]})})}const nj=[{id:"bill",name:"Bill",title:"Marketing Hog",fullName:"Bill the Marketing Hog",handle:"@billthemarketinghog",level:3,xp:65,maxXp:100,color:"#00ffff",borderColor:"#00ffff",image:"/morgys/bill.png",specialty:"Growth, hooks, landing pages, CTAs, viral ideas",tools:["generate_marketing_video","generate_ad_copy"]},{id:"sally",name:"Sally",title:"Social Media Queen",fullName:"Sally the Promo Pig",handle:"@sallythepromo",level:2,xp:40,maxXp:100,color:"#ff00ff",borderColor:"#ff00ff",image:"/morgys/sally.png",specialty:"Social media posting, video scripts, content calendars, engagement analysis",tools:["generate_tiktok_reel","post_to_twitter","post_to_instagram","create_content_calendar","generate_video_script"]},{id:"professor",name:"Prof. Hogsworth",title:"Research Expert",fullName:"Prof. Hogsworth the Research Expert",handle:"@profhogsworth",level:5,xp:85,maxXp:100,color:"#00ffff",borderColor:"#00ffff",image:"/morgys/professor.png",specialty:"Deep research, analysis, complex problems, data synthesis",tools:["generate_dynamic_view","create_educational_lesson","generate_infographic","explain_simply"]}],aj=({isVisible:s,activeMorgys:n,onActivateMorgy:r,onDeactivateMorgy:i,onMentionMorgy:c,onClose:u})=>{const[f]=S.useState(nj),[p,m]=S.useState(!1),[g,v]=S.useState(null);if(!s)return null;const w=x=>{n.includes(x)?i(x):r(x)},_=(x,E)=>{E.stopPropagation(),c&&c(x.handle,x.fullName),n.includes(x.id)||r(x.id)};return o.jsxs("div",{className:"morgy-pen",children:[o.jsxs("div",{className:"morgy-pen-header",children:[o.jsxs("div",{className:"morgy-pen-header-left",children:[o.jsx("span",{className:"morgy-pen-icon",children:""}),o.jsx("span",{className:"morgy-pen-title",children:"Morgy Pen"})]}),o.jsx("button",{className:"morgy-pen-close",onClick:x=>{x.preventDefault(),x.stopPropagation(),console.log("[MorgyPen] Close button clicked"),u&&u()},onTouchEnd:x=>{x.preventDefault(),x.stopPropagation(),console.log("[MorgyPen] Close button touched"),u&&u()},type:"button","aria-label":"Close",children:""})]}),o.jsxs("div",{className:"morgy-how-to-call",children:[o.jsx("span",{className:"how-to-icon",children:""}),o.jsx("span",{className:"how-to-text",children:"Click @ to mention a Morgy in chat"})]}),o.jsxs("div",{className:"morgy-grid",children:[f.map(x=>{const E=n.includes(x.id),T=g===x.id;return o.jsxs("div",{className:`morgy-card ${E?"active":""}`,style:{"--morgy-color":x.color,"--morgy-border":x.borderColor},onClick:()=>w(x.id),onMouseEnter:()=>v(x.id),onMouseLeave:()=>v(null),children:[o.jsx("div",{className:"morgy-avatar",children:o.jsx("img",{src:x.image,alt:x.name})}),o.jsx("div",{className:"morgy-full-name",children:x.fullName}),o.jsx("div",{className:"morgy-handle",children:x.handle}),o.jsx("div",{className:"morgy-level-badge",children:o.jsxs("span",{className:"level-text",children:["Lvl ",x.level]})}),o.jsx("div",{className:"morgy-xp-bar",children:o.jsx("div",{className:"morgy-xp-fill",style:{width:`${x.xp/x.maxXp*100}%`,backgroundColor:x.color}})}),T&&o.jsxs("div",{className:"morgy-specialty-tooltip",children:[o.jsx("span",{className:"specialty-label",children:"Specialty:"}),o.jsx("span",{className:"specialty-text",children:x.specialty}),x.tools&&x.tools.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"specialty-label tools-label",children:"Tools:"}),o.jsxs("span",{className:"specialty-tools",children:[x.tools.slice(0,3).map(D=>o.jsx("span",{className:"tool-badge",children:D.replace(/_/g," ")},D)),x.tools.length>3&&o.jsxs("span",{className:"tool-more",children:["+",x.tools.length-3," more"]})]})]})]}),o.jsxs("div",{className:"morgy-actions",children:[o.jsx("button",{className:"morgy-action-btn mention",title:`Mention ${x.name} in chat`,onClick:D=>_(x,D),children:o.jsx("span",{children:"@"})}),o.jsx("button",{className:"morgy-action-btn activate",title:E?"Deactivate":"Activate",children:o.jsx("span",{children:E?"":""})})]})]},x.id)}),o.jsx("div",{className:"morgy-card add-morgy-card",onClick:()=>m(!0),children:o.jsxs("div",{className:"add-morgy-content",children:[o.jsx("span",{className:"add-morgy-icon",children:"+"}),o.jsx("span",{className:"add-morgy-text",children:"Add Morgy"})]})})]}),o.jsxs("div",{className:"morgy-pen-footer",children:[o.jsx("span",{className:"sounder-label",children:"Your Sounder"}),o.jsxs("span",{className:"sounder-count",children:[n.length," active"]})]}),p&&o.jsx("div",{className:"morgy-modal-overlay",onClick:()=>m(!1),children:o.jsxs("div",{className:"morgy-modal",onClick:x=>x.stopPropagation(),children:[o.jsx("h3",{children:" Create Custom Morgy"}),o.jsx("p",{children:"Design your own specialized Morgy agent!"}),o.jsxs("div",{className:"modal-coming-soon",children:[o.jsx("span",{className:"sparkle",children:""}),"Coming Soon",o.jsx("span",{className:"sparkle",children:""})]}),o.jsx("button",{onClick:()=>m(!1),children:"Close"})]})})]})},sj=[{id:"bill",name:"Bill",fullName:"Bill the Marketing Hog",handle:"@billthemarketinghog",image:"/morgys/bill.png",color:"#00ffff"},{id:"sally",name:"Sally",fullName:"Sally the Promo Pig",handle:"@sallythepromo",image:"/morgys/sally.png",color:"#ff00ff"},{id:"professor",name:"Prof. Hogsworth",fullName:"Prof. Hogsworth the Research Expert",handle:"@profhogsworth",image:"/morgys/professor.png",color:"#ff6600"}],rj=({inputValue:s,onSelect:n,inputRef:r,isVisible:i,onVisibilityChange:c})=>{const[u,f]=S.useState([]),[p,m]=S.useState(0),[g,v]=S.useState({top:0,left:0}),w=S.useRef(null);S.useEffect(()=>{const x=s.lastIndexOf("@");if(x===-1){c(!1);return}const E=s.slice(x+1).toLowerCase();if(E.includes(" ")){c(!1);return}const T=sj.filter(D=>D.name.toLowerCase().startsWith(E)||D.handle.toLowerCase().includes(E)||D.fullName.toLowerCase().includes(E));if(T.length>0){if(f(T),m(0),c(!0),r.current){const D=r.current.getBoundingClientRect();v({top:D.top-T.length*60-10,left:D.left})}}else c(!1)},[s,r,c]),S.useEffect(()=>{const x=E=>{if(i)switch(E.key){case"ArrowDown":E.preventDefault(),m(T=>T<u.length-1?T+1:0);break;case"ArrowUp":E.preventDefault(),m(T=>T>0?T-1:u.length-1);break;case"Enter":case"Tab":u.length>0&&(E.preventDefault(),_(u[p]));break;case"Escape":c(!1);break}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[i,u,p,c]);const _=x=>{const E=s.lastIndexOf("@"),T=s.slice(0,E)+x.handle+" ";n(T),c(!1)};return!i||u.length===0?null:o.jsxs("div",{ref:w,className:"morgy-autocomplete",style:{position:"fixed",bottom:"80px",left:g.left,zIndex:1e3},children:[o.jsxs("div",{className:"autocomplete-header",children:[o.jsx("span",{className:"autocomplete-icon",children:""}),o.jsx("span",{children:"Mention a Morgy"})]}),u.map((x,E)=>o.jsxs("div",{className:`autocomplete-item ${E===p?"selected":""}`,onClick:()=>_(x),onMouseEnter:()=>m(E),style:{borderLeftColor:x.color},children:[o.jsx("img",{src:x.image,alt:x.name,className:"autocomplete-avatar"}),o.jsxs("div",{className:"autocomplete-info",children:[o.jsx("span",{className:"autocomplete-name",children:x.fullName}),o.jsx("span",{className:"autocomplete-handle",style:{color:x.color},children:x.handle})]})]},x.id)),o.jsxs("div",{className:"autocomplete-hint",children:[o.jsx("span",{children:" to navigate"}),o.jsx("span",{children:" to select"}),o.jsx("span",{children:"esc to dismiss"})]})]})};function ij({sessionId:s,isActive:n,onClose:r}){const[i,c]=S.useState(null),[u,f]=S.useState([]),[p,m]=S.useState(!1);S.useEffect(()=>{if(s&&n){g();const E=re.channel(`research_${s}`).on("postgres_changes",{event:"*",schema:"public",table:"research_steps",filter:`session_id=eq.${s}`},()=>{v()}).on("postgres_changes",{event:"*",schema:"public",table:"research_sessions",filter:`id=eq.${s}`},()=>{g()}).subscribe();return()=>{E.unsubscribe()}}},[s,n]);const g=async()=>{if(!s)return;m(!0);const{data:E,error:T}=await re.from("research_sessions").select("*").eq("id",s).single();!T&&E&&(c(E),v()),m(!1)},v=async()=>{if(!s)return;const{data:E,error:T}=await re.from("research_steps").select("*").eq("session_id",s).order("step_index",{ascending:!0});!T&&E&&f(E)},w=E=>{switch(E){case"pending":return"";case"in_progress":return"";case"completed":return"";case"failed":return"";case"planning":return"";case"researching":return"";case"synthesizing":return"";default:return""}},_=E=>{switch(E){case"facts":return"";case"stats":return"";case"synthesis":return"";case"legal":return"";case"technical":return"";case"comparison":return"";case"definition":return"";default:return""}},x=()=>{if(u.length===0)return 0;const E=u.filter(T=>T.status==="completed").length;return Math.round(E/u.length*100)};return!n||!s?null:o.jsxs("div",{className:"deep-research-panel",children:[o.jsxs("div",{className:"research-header",children:[o.jsxs("div",{className:"research-title",children:[o.jsx("span",{className:"research-icon",children:""}),o.jsx("h3",{children:"Deep Research Mode"})]}),o.jsx("button",{className:"close-research",onClick:r,children:""})]}),p?o.jsxs("div",{className:"research-loading",children:[o.jsx("div",{className:"research-spinner"}),o.jsx("p",{children:"Loading research session..."})]}):i?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"research-question",children:[o.jsx("span",{className:"label",children:"Original Question:"}),o.jsx("p",{children:i.original_question})]}),o.jsxs("div",{className:"research-status",children:[o.jsxs("span",{className:"status-badge","data-status":i.status,children:[w(i.status)," ",i.status.charAt(0).toUpperCase()+i.status.slice(1)]}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill",style:{width:`${x()}%`}})}),o.jsxs("span",{className:"progress-text",children:[x(),"%"]})]}),o.jsxs("div",{className:"research-steps",children:[o.jsxs("h4",{children:["Research Steps (",u.length,")"]}),u.length===0?o.jsx("div",{className:"no-steps",children:o.jsx("p",{children:" Analyzing question and planning research steps..."})}):o.jsx("ul",{className:"steps-list",children:u.map(E=>o.jsxs("li",{className:`step-item ${E.status}`,children:[o.jsxs("div",{className:"step-header",children:[o.jsxs("span",{className:"step-number",children:["#",E.step_index]}),o.jsxs("span",{className:"step-type",children:[_(E.type)," ",E.type]}),o.jsx("span",{className:"step-status",children:w(E.status)})]}),o.jsx("p",{className:"step-question",children:E.question}),E.final_answer&&o.jsxs("div",{className:"step-answer",children:[o.jsx("span",{className:"answer-label",children:"Answer:"}),o.jsx("p",{children:E.final_answer}),E.final_confidence&&o.jsxs("span",{className:"confidence",children:["Confidence: ",Math.round(E.final_confidence*100),"%"]})]})]},E.id))})]}),i.final_answer&&o.jsxs("div",{className:"research-final-answer",children:[o.jsx("h4",{children:" Final Synthesis"}),o.jsx("div",{className:"final-answer-content",children:i.final_answer})]})]}):o.jsx("div",{className:"research-empty",children:o.jsx("p",{children:"No active research session"})})]})}function lj(){const[s,n]=S.useState(null),[r,i]=S.useState(!1),[c,u]=S.useState(!1),[f,p]=S.useState(!1);S.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const w=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;u(w);const _=localStorage.getItem("pwa-install-dismissed");if(_){const E=parseInt(_,10);if(Date.now()-E<10080*60*1e3)return}if(w){/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&setTimeout(()=>i(!0),3e3);return}const x=E=>{E.preventDefault(),n(E),setTimeout(()=>i(!0),2e3)};return window.addEventListener("beforeinstallprompt",x),()=>window.removeEventListener("beforeinstallprompt",x)},[]);const m=async()=>{if(c){p(!0);return}if(s){try{await s.prompt();const{outcome:v}=await s.userChoice;v==="accepted"?(console.log("[PWA] User accepted install prompt"),i(!1)):(console.log("[PWA] User dismissed install prompt"),g())}catch(v){console.error("[PWA] Install error:",v)}n(null)}},g=()=>{i(!1),p(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return r?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"pwa-install-banner",children:[o.jsxs("div",{className:"pwa-install-content",children:[o.jsx("img",{src:"/icons/morgus-192.png",alt:"Morgus",className:"pwa-install-icon"}),o.jsxs("div",{className:"pwa-install-text",children:[o.jsx("strong",{children:"Install Morgus"}),o.jsx("span",{children:"Add to home screen for the best experience"})]})]}),o.jsxs("div",{className:"pwa-install-actions",children:[o.jsx("button",{className:"pwa-install-btn",onClick:m,children:"Install"}),o.jsx("button",{className:"pwa-dismiss-btn",onClick:g,children:""})]})]}),f&&o.jsx("div",{className:"pwa-ios-modal-overlay",onClick:g,children:o.jsxs("div",{className:"pwa-ios-modal",onClick:v=>v.stopPropagation(),children:[o.jsx("button",{className:"pwa-ios-close",onClick:g,children:""}),o.jsx("img",{src:"/icons/morgus-192.png",alt:"Morgus",className:"pwa-ios-icon"}),o.jsx("h3",{children:"Install Morgus on iOS"}),o.jsxs("div",{className:"pwa-ios-steps",children:[o.jsxs("div",{className:"pwa-ios-step",children:[o.jsx("span",{className:"step-number",children:"1"}),o.jsxs("span",{children:["Tap the ",o.jsx("strong",{children:"Share"})," button ",o.jsx("span",{className:"ios-share-icon",children:""})]})]}),o.jsxs("div",{className:"pwa-ios-step",children:[o.jsx("span",{className:"step-number",children:"2"}),o.jsxs("span",{children:["Scroll down and tap ",o.jsx("strong",{children:'"Add to Home Screen"'})]})]}),o.jsxs("div",{className:"pwa-ios-step",children:[o.jsx("span",{className:"step-number",children:"3"}),o.jsxs("span",{children:["Tap ",o.jsx("strong",{children:'"Add"'})," in the top right"]})]})]}),o.jsx("button",{className:"pwa-ios-done",onClick:g,children:"Got it!"})]})})]}):null}const oj=7;const cj=["mistral","kat-coder","tongyi"],uj=`You are a research planner for Morgus AI. Your job is to analyze questions and determine if they need deep research.

For simple questions (greetings, basic facts, quick calculations), respond with:
{"needs_deep_research": false, "reason": "brief explanation"}

For complex questions that would benefit from multi-step research, decompose them into 3-7 subquestions. Respond with:
{
  "needs_deep_research": true,
  "subquestions": [
    {"question": "...", "type": "facts|stats|synthesis|comparison|analysis|opinion"},
    ...
  ]
}

Question types:
- facts: Verifiable factual information
- stats: Numerical data, statistics, metrics
- synthesis: Combining multiple sources/perspectives
- comparison: Comparing options, approaches, or entities
- analysis: Deep analysis of causes, effects, implications
- opinion: Expert opinions, recommendations, best practices

Rules:
- Maximum 7 subquestions
- Each subquestion should be self-contained
- Order subquestions logically (foundational facts first)
- Later questions can reference earlier findings

User question: {question}

Respond with valid JSON only.`,dj=`You are an expert researcher helping answer a specific question as part of a larger research task.

Original research question: {original_question}

Current subquestion: {subquestion}
Question type: {question_type}

{previous_findings}

{rag_context}

Instructions:
1. Answer the subquestion thoroughly but concisely
2. Cite specific evidence from the provided context when available
3. Be clear about uncertainty - distinguish facts from inferences
4. Rate your confidence (0-1) based on evidence quality

Respond in this JSON format:
{
  "answer": "Your detailed answer here",
  "confidence": 0.85,
  "citations": ["Source 1 quote/reference", "Source 2 quote/reference"],
  "limitations": "Any caveats or limitations to note"
}`,hj=`You are synthesizing research findings into a comprehensive final answer.

Original question: {original_question}

Research findings:
{findings}

Instructions:
1. Synthesize all findings into a coherent, comprehensive answer
2. Organize by topic/theme, not by subquestion
3. Include inline citations [1], [2], etc.
4. Note any conflicting findings or areas of uncertainty
5. Provide a confidence score based on overall evidence quality

Respond in this JSON format:
{
  "answer": "Your comprehensive synthesized answer with [citations]",
  "confidence": 0.85,
  "key_findings": ["Finding 1", "Finding 2", ...],
  "limitations": "Overall limitations and caveats",
  "sources": ["Source 1", "Source 2", ...]
}`;async function fj(s,n){const{data:r,error:i}=await re.from("research_sessions").insert({user_id:s,original_question:n,status:"planning",total_steps:0,completed_steps:0}).select().single();return i?(console.error("Error creating research session:",i),null):r}async function sr(s,n,r){const{error:i}=await re.from("research_sessions").update({status:n,...r,updated_at:new Date().toISOString()}).eq("id",s);i&&console.error("Error updating session status:",i)}async function mj(s,n,r,i){try{const c=uj.replace("{question}",n),u=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4.1-mini",messages:[{role:"user",content:c}],temperature:.3,max_tokens:1e3})});if(!u.ok)throw new Error(`Planner API error: ${u.status}`);const p=(await u.json()).choices[0]?.message?.content||"",m=JSON.parse(p);if(!m.needs_deep_research)return{needsDeepResearch:!1};const g=[];for(let v=0;v<Math.min(m.subquestions.length,oj);v++){const w=m.subquestions[v],{data:_,error:x}=await re.from("research_steps").insert({session_id:s,step_index:v,question:w.question,question_type:w.type,status:"pending"}).select().single();if(x){console.error("Error creating research step:",x);continue}g.push(_)}return await sr(s,"researching",{total_steps:g.length}),{needsDeepResearch:!0,steps:g}}catch(c){return console.error("Error planning research:",c),await sr(s,"failed"),{needsDeepResearch:!1}}}async function pj(s,n,r,i,c,u,f){try{await re.from("research_steps").update({status:"in_progress"}).eq("id",s.id);let p="";const m=r.length>0?`Previous research findings:
${r.map((_,x)=>`${x+1}. ${_}`).join(`
`)}`:"No previous findings yet.",g=dj.replace("{original_question}",n).replace("{subquestion}",s.question).replace("{question_type}",s.question_type).replace("{previous_findings}",m).replace("{rag_context}",p||"No knowledge base context available."),v=[];for(const _ of cj)try{const x=await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify({model:_==="kat-coder"?"gpt-4.1-nano":"gpt-4.1-mini",messages:[{role:"user",content:g}],temperature:.5,max_tokens:1500})});if(!x.ok)continue;const T=(await x.json()).choices[0]?.message?.content||"";try{const D=JSON.parse(T);v.push({model:_,answer:D.answer,confidence:D.confidence,citations:D.citations||[]}),await re.from("research_model_responses").insert({step_id:s.id,model_name:_,answer:D.answer,confidence:D.confidence,citations_json:D.citations})}catch{v.push({model:_,answer:T,confidence:.5,citations:[]})}}catch(x){console.error(`Error calling model ${_}:`,x)}if(v.length===0)throw new Error("No model responses received");const w=v.reduce((_,x)=>x.confidence>_.confidence?x:_);return await re.from("research_steps").update({status:"completed",final_answer:w.answer,final_confidence:w.confidence}).eq("id",s.id),{answer:w.answer,confidence:w.confidence}}catch(p){return console.error("Error executing research step:",p),await re.from("research_steps").update({status:"failed"}).eq("id",s.id),null}}async function gj(s,n,r,i,c){try{await sr(s,"synthesizing");const u=r.filter(v=>v.final_answer).map((v,w)=>`[${w+1}] ${v.question}
Answer: ${v.final_answer}
Confidence: ${v.final_confidence}`).join(`

---

`),f=hj.replace("{original_question}",n).replace("{findings}",u),p=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4.1-mini",messages:[{role:"user",content:f}],temperature:.3,max_tokens:3e3})});if(!p.ok)throw new Error(`Synthesis API error: ${p.status}`);const g=(await p.json()).choices[0]?.message?.content||"";try{const v=JSON.parse(g);return await sr(s,"completed",{final_answer:v.answer,final_confidence:v.confidence}),{answer:v.answer,confidence:v.confidence}}catch{return await sr(s,"completed",{final_answer:g,final_confidence:.7}),{answer:g,confidence:.7}}}catch(u){return console.error("Error synthesizing findings:",u),await sr(s,"failed"),null}}async function yj(s,n,r,i,c,u){try{const f=await fj(s,n);if(!f)throw new Error("Failed to create research session");const p=await mj(f.id,n,r,i);if(!p.needsDeepResearch||!p.steps||p.steps.length===0)return await re.from("research_sessions").delete().eq("id",f.id),null;if(u){const w={...f,status:"researching",total_steps:p.steps.length};u(w,p.steps)}const m=[];for(let w=0;w<p.steps.length;w++){const _=p.steps[w],x=await pj(_,n,m,s,r,i,c);if(x&&(m.push(x.answer),p.steps[w]={..._,status:"completed",final_answer:x.answer,final_confidence:x.confidence}),await re.from("research_sessions").update({completed_steps:w+1}).eq("id",f.id),u){const E={...f,status:"researching",completed_steps:w+1};u(E,p.steps)}}const g=await gj(f.id,n,p.steps,r,i);if(!g)throw new Error("Failed to synthesize findings");const{data:v}=await re.from("research_sessions").select("*").eq("id",f.id).single();return{session:v||{...f,status:"completed",final_answer:g.answer},answer:g.answer}}catch(f){return console.error("Error in deep research:",f),null}}const wg={"morgus-rag":{endpoint:"https://morgus-mcp-rag.morgan-426.workers.dev",tools:[{name:"rag_search",description:"Search the user's knowledge base using semantic similarity. Returns relevant document chunks.",inputSchema:{type:"object",properties:{query:{type:"string",description:"The search query to find relevant documents"},top_k:{type:"number",description:"Number of results to return (default: 5, max: 20)",default:5},min_similarity:{type:"number",description:"Minimum similarity score (0-1, default: 0.7)",default:.7}},required:["query"]}},{name:"list_documents",description:"List all documents in the user's knowledge base",inputSchema:{type:"object",properties:{status:{type:"string",description:"Filter by status",enum:["pending","processing","completed","failed"]}}}},{name:"get_document",description:"Get the full content of a specific document",inputSchema:{type:"object",properties:{document_id:{type:"string",description:"The ID of the document to retrieve"}},required:["document_id"]}}]},"morgus-web-search":{endpoint:"https://morgus-mcp-web-search.morgan-426.workers.dev",tools:[{name:"web_search",description:"Search the web for information. Returns relevant results with titles, snippets, and URLs.",inputSchema:{type:"object",properties:{query:{type:"string",description:"The search query"},num_results:{type:"number",description:"Number of results to return (default: 5, max: 10)",default:5}},required:["query"]}},{name:"fetch_webpage",description:"Fetch and extract the main content from a webpage URL",inputSchema:{type:"object",properties:{url:{type:"string",description:"The URL of the webpage to fetch"},extract_links:{type:"boolean",description:"Whether to extract links from the page",default:!1}},required:["url"]}}]},"morgus-code-executor":{endpoint:"https://morgus-mcp-code-executor.morgan-426.workers.dev",tools:[{name:"execute_python",description:"Execute Python code in a sandboxed environment",inputSchema:{type:"object",properties:{code:{type:"string",description:"The Python code to execute"},timeout:{type:"number",description:"Timeout in seconds (default: 30, max: 60)",default:30}},required:["code"]}},{name:"execute_javascript",description:"Execute JavaScript code in a sandboxed environment",inputSchema:{type:"object",properties:{code:{type:"string",description:"The JavaScript code to execute"},timeout:{type:"number",description:"Timeout in seconds (default: 30, max: 60)",default:30}},required:["code"]}}]},"morgus-github":{endpoint:"https://morgus-mcp-github.morgan-426.workers.dev",tools:[{name:"search_repos",description:"Search GitHub repositories by query",inputSchema:{type:"object",properties:{query:{type:"string",description:'Search query (e.g., "react stars:>1000")'},sort:{type:"string",description:"Sort order",enum:["stars","forks","updated","help-wanted-issues"]},per_page:{type:"number",description:"Results per page (max 30)",default:10}},required:["query"]}},{name:"get_repo",description:"Get detailed information about a repository",inputSchema:{type:"object",properties:{owner:{type:"string",description:"Repository owner (username or org)"},repo:{type:"string",description:"Repository name"}},required:["owner","repo"]}},{name:"list_issues",description:"List issues for a repository",inputSchema:{type:"object",properties:{owner:{type:"string",description:"Repository owner"},repo:{type:"string",description:"Repository name"},state:{type:"string",description:"Issue state",enum:["open","closed","all"],default:"open"},per_page:{type:"number",default:10}},required:["owner","repo"]}},{name:"get_file_contents",description:"Get the contents of a file from a repository",inputSchema:{type:"object",properties:{owner:{type:"string",description:"Repository owner"},repo:{type:"string",description:"Repository name"},path:{type:"string",description:"Path to the file"},ref:{type:"string",description:"Branch, tag, or commit SHA (default: main)"}},required:["owner","repo","path"]}}]}};class vj{servers=new Map;userId;userToken;constructor(n,r){this.userId=n,this.userToken=r}async initialize(){try{const{data:n,error:r}=await re.from("mcp_server_installs").select(`
          *,
          server:mcp_servers(*)
        `).eq("user_id",this.userId);if(r){console.error("Error loading MCP server installs:",r);return}for(const i of n||[]){const c=i.server;if(!c)continue;const u={id:c.id,name:c.name,displayName:c.display_name,description:c.description,serverUrl:wg[c.name]?.endpoint,tools:wg[c.name]?.tools||[],resources:[],isConnected:!1,isEnabled:i.is_enabled,config:i.config||{}};u.serverUrl&&u.isEnabled&&(u.isConnected=await this.testConnection(u)),this.servers.set(c.name,u)}console.log(`[MCP] Initialized ${this.servers.size} servers`)}catch(n){console.error("Error initializing MCP client:",n)}}async testConnection(n){if(!n.serverUrl)return!1;try{return(await fetch(`${n.serverUrl}/health`,{method:"GET",headers:{Authorization:`Bearer ${this.userToken}`}})).ok}catch{return!0}}getAvailableTools(){const n=[];for(const[r,i]of this.servers)if(i.isEnabled&&i.isConnected)for(const c of i.tools)n.push({server:r,tool:c});return n}getToolsForPrompt(){const n=this.getAvailableTools();if(n.length===0)return"";let r=`

## Available MCP Tools

`;r+=`You have access to the following tools via MCP servers. To use a tool, respond with a tool call in this format:

`,r+='```json\n{"mcp_tool_call": {"server": "server-name", "tool": "tool-name", "arguments": {...}}}\n```\n\n';for(const{server:i,tool:c}of n){r+=`### ${i}/${c.name}
`,r+=`${c.description}

`,r+=`**Parameters:**
`;for(const[u,f]of Object.entries(c.inputSchema.properties)){const p=c.inputSchema.required?.includes(u)?"(required)":"(optional)";r+=`- \`${u}\` ${p}: ${f.description||f.type}
`}r+=`
`}return r}async callTool(n){const r=this.servers.get(n.serverName);if(!r)return{success:!1,content:null,error:`Server '${n.serverName}' not found`,isError:!0};if(!r.isEnabled)return{success:!1,content:null,error:`Server '${n.serverName}' is disabled`,isError:!0};if(!r.serverUrl)return{success:!1,content:null,error:`Server '${n.serverName}' has no endpoint configured`,isError:!0};if(!r.tools.find(c=>c.name===n.toolName))return{success:!1,content:null,error:`Tool '${n.toolName}' not found on server '${n.serverName}'`,isError:!0};try{const c=await fetch(`${r.serverUrl}/tools/${n.toolName}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.userToken}`,"X-User-ID":this.userId},body:JSON.stringify({arguments:n.arguments})});if(!c.ok){const f=await c.text();return{success:!1,content:null,error:`Server error: ${c.status} - ${f}`,isError:!0}}const u=await c.json();return this.logToolUsage(r.id,n.toolName,!0),{success:!0,content:u.content||u,isError:!1}}catch(c){const u=c instanceof Error?c.message:"Unknown error";return this.logToolUsage(r.id,n.toolName,!1,u),{success:!1,content:null,error:`Failed to call tool: ${u}`,isError:!0}}}parseToolCalls(n){const r=[],i=/```json\s*(\{[\s\S]*?"mcp_tool_call"[\s\S]*?\})\s*```/g;let c;for(;(c=i.exec(n))!==null;)try{const f=JSON.parse(c[1]);f.mcp_tool_call&&r.push({serverName:f.mcp_tool_call.server,toolName:f.mcp_tool_call.tool,arguments:f.mcp_tool_call.arguments||{}})}catch{console.warn("Failed to parse MCP tool call:",c[1])}const u=/\{"mcp_tool_call":\s*\{[^}]+\}\}/g;for(;(c=u.exec(n))!==null;)try{const f=JSON.parse(c[0]);f.mcp_tool_call&&r.push({serverName:f.mcp_tool_call.server,toolName:f.mcp_tool_call.tool,arguments:f.mcp_tool_call.arguments||{}})}catch{}return r}async executeToolCalls(n){const r=new Map;for(const i of n){const c=`${i.serverName}/${i.toolName}`,u=await this.callTool(i);r.set(c,u)}return r}formatToolResults(n){if(n.size===0)return"";let r=`

## Tool Results

`;for(const[i,c]of n)r+=`### ${i}
`,c.success?(r+="```json\n",r+=JSON.stringify(c.content,null,2),r+="\n```\n\n"):r+=`**Error:** ${c.error}

`;return r}async logToolUsage(n,r,i,c){try{await re.from("mcp_server_usage").insert({user_id:this.userId,server_id:n,tool_name:r,success:i,error_message:c})}catch{}}getConnectedServers(){return Array.from(this.servers.values()).filter(n=>n.isConnected&&n.isEnabled)}getServer(n){return this.servers.get(n)}async setServerEnabled(n,r){const i=this.servers.get(n);i&&(i.isEnabled=r,await re.from("mcp_server_installs").update({is_enabled:r}).eq("user_id",this.userId).eq("server_id",i.id),r&&i.serverUrl&&(i.isConnected=await this.testConnection(i)))}async updateServerConfig(n,r){const i=this.servers.get(n);i&&(i.config={...i.config,...r},await re.from("mcp_server_installs").update({config:i.config}).eq("user_id",this.userId).eq("server_id",i.id))}}let ui=null;async function bj(s,n){return(!ui||ui.userId!==s)&&(ui=new vj(s,n),await ui.initialize()),ui}Me.setOptions({breaks:!0,gfm:!0});const di="https://morgus-orchestrator.morgan-426.workers.dev";function wj(){const s=Wn(),{user:n,profile:r,signOut:i}=xn(),[c,u]=S.useState([{id:"1",role:"assistant",content:" Hello! I'm Morgus, your autonomous AI agent. What would you like to accomplish today?",timestamp:new Date}]),[f,p]=S.useState(""),[m,g]=S.useState(!1),[v,w]=S.useState([]),[_,x]=S.useState(window.innerWidth>768),[E,T]=S.useState(!1),[D,C]=S.useState(!1),[q,R]=S.useState("chat"),[K]=S.useState(window.innerWidth<=768),[Q,H]=S.useState(null),[P]=S.useState(null),[F,I]=S.useState(null),[ie,xe]=S.useState([]),[ke,it]=S.useState(!1),[Ge,Ze]=S.useState(!1),[N,V]=S.useState(!1),[te]=S.useState(),[Z,ue]=S.useState(!1),[j,L]=S.useState(!1);S.useEffect(()=>{window.innerWidth<=768&&_&&x(!1)},[location.pathname]);const[W,ee]=S.useState([]),[pe,ye]=S.useState(!1),[_e,wt]=S.useState(!1),[We,Na]=S.useState(null),[es,ka]=S.useState(!1),[yo,_n]=S.useState(null),[Ti,cr]=S.useState([]),[ea,Ai]=S.useState(null),[ts,ur]=S.useState(!1),[Rt,Ri]=S.useState(()=>localStorage.getItem("morgus_dont_train")==="true");S.useEffect(()=>{r?.dont_train_on_me!==void 0&&(Ri(r.dont_train_on_me),localStorage.setItem("morgus_dont_train",r.dont_train_on_me?"true":"false"))},[r?.dont_train_on_me]);const dr=async M=>{if(Ri(M),localStorage.setItem("morgus_dont_train",M?"true":"false"),n)try{await re.from("profiles").update({dont_train_on_me:M}).eq("id",n.id),console.log("[App] Saved dont_train_on_me to profile:",M)}catch(X){console.error("[App] Failed to save dont_train_on_me:",X)}},Tt=S.useRef(null),Ci=S.useRef(null),ns=S.useRef(null),Oi=()=>{Tt.current?.scrollIntoView({behavior:"smooth"})};S.useEffect(()=>{Oi()},[c]),S.useEffect(()=>{hr()},[]),S.useEffect(()=>{(async()=>{if(n)try{const{data:{session:X}}=await re.auth.getSession();if(X?.access_token){const ae=await bj(n.id,X.access_token);Ai(ae);const de=ae.getAvailableTools();ur(de.length>0),console.log(`[MCP] Initialized with ${de.length} tools available`)}}catch(X){console.error("[MCP] Failed to initialize:",X)}})()},[n]),S.useEffect(()=>{const M=setInterval(()=>{const X=window.__isAudioPlaying||!1;V(X)},100);return()=>clearInterval(M)},[]),S.useEffect(()=>{P&&as(P)},[P]);const as=async M=>{try{const{data:X,error:ae}=await re.from("thought_messages").select("*").eq("thought_id",M).order("created_at",{ascending:!0});if(!ae&&X){const de=X.map(oe=>({id:oe.id,role:oe.role,content:oe.content,timestamp:new Date(oe.created_at)}));de.length===0?u([{id:"1",role:"assistant",content:" Hello! I'm Morgus, your autonomous AI agent. What would you like to accomplish today?",timestamp:new Date}]):u(de)}}catch(X){console.error("Failed to load thought messages:",X)}},hr=async()=>{const{data:M,error:X}=await re.from("conversations").select("id, title, created_at, updated_at").order("updated_at",{ascending:!1}).limit(20);!X&&M&&w(M.map(ae=>({id:ae.id,description:ae.title,status:"completed",created_at:ae.created_at})))},Di=async(M,X)=>{X.stopPropagation();const{error:ae}=await re.from("conversations").delete().eq("id",M);ae||(w(de=>de.filter(oe=>oe.id!==M)),Q===M&&(H(null),I(null)))},vo=M=>{const X=Array.from(M.target.files||[]);xe(ae=>[...ae,...X])},bo=M=>{xe(X=>X.filter((ae,de)=>de!==M))},Ta=M=>{navigator.clipboard.writeText(M)},Ct=(M,X)=>{const ae=new Blob([M],{type:"text/plain"}),de=URL.createObjectURL(ae),oe=document.createElement("a");oe.href=de,oe.download=X,oe.click(),URL.revokeObjectURL(de)},hn=async M=>{if(!P){alert("Please select a thought first!");return}try{const{error:X}=await re.from("thought_messages").insert({thought_id:P,role:M.role,content:M.content,created_at:new Date().toISOString()});if(X)throw X;alert(" Message saved to thought!")}catch(X){console.error("Failed to save message:",X),alert(" Failed to save message")}},xt=async(M,X)=>{try{const{error:ae}=await re.from("message_ratings").insert({message_id:M,rating:X,created_at:new Date().toISOString()});if(ae)throw ae;alert(`${X==="good"?"":X==="bad"?"":""} ${X==="good"?"Thanks for the feedback!":X==="bad"?"Sorry! I'll try to improve.":"Glitch reported!"}`)}catch(ae){console.error("Failed to save rating:",ae)}},fr=async(M,X,ae)=>{try{let de=[];if(X.length>0){const Le=new FormData;X.forEach(Bt=>Le.append("files",Bt));const Pe=await fetch(`${di}/upload`,{method:"POST",body:Le});Pe.ok&&(de=(await Pe.json()).urls||[])}let oe="";ea&&ts&&(oe=ea.getToolsForPrompt(),console.log("[MCP] Adding tools to system prompt:",oe.substring(0,200)+"..."));const be=await fetch(`${di}/moe-chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:M||(de.length>0?"Please analyze these files":""),task_id:Q,conversation_id:F,thought_id:P,history:c.slice(-10).map(Le=>({role:Le.role,content:Le.content})),files:de,dont_train_on_me:Rt,user_id:n?.id,mcp_tools_prompt:oe})});if(!be.ok)throw new Error(`HTTP error! status: ${be.status}`);const De=await be.json();let Ye=De.message,lt=[];if(ea&&De.message){const Le=ea.parseToolCalls(De.message);if(Le.length>0){console.log("[MCP] Found tool calls:",Le),lt=Le.map(at=>({server:at.serverName,tool:at.toolName,arguments:at.arguments,isExecuting:!0})),u(at=>at.map(yt=>yt.id===ae?{...yt,content:" Executing MCP tools...",toolCalls:lt}:yt));const Pe=[];for(let at=0;at<Le.length;at++){const yt=Le[at];console.log(`[MCP] Executing ${yt.serverName}/${yt.toolName}...`);const Ve=await ea.callTool(yt);Pe.push(Ve),lt=lt.map((ft,en)=>en===at?{...ft,result:Ve,isExecuting:!1}:ft),u(ft=>ft.map(en=>en.id===ae?{...en,toolCalls:[...lt]}:en))}const Bt=Pe.map((at,yt)=>{const Ve=Le[yt];return at.success?`Tool ${Ve.serverName}/${Ve.toolName} returned:
${JSON.stringify(at.content,null,2)}`:`Tool ${Ve.serverName}/${Ve.toolName} failed: ${at.error}`}).join(`

`),mr=await fetch(`${di}/moe-chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`Based on the following tool results, please provide a helpful response to the user's original question: "${M}"

${Bt}`,task_id:Q,conversation_id:F,thought_id:P,history:c.slice(-10).map(at=>({role:at.role,content:at.content})),dont_train_on_me:Rt,user_id:n?.id,is_tool_synthesis:!0})});mr.ok&&(Ye=(await mr.json()).message)}}u(Le=>Le.map(Pe=>Pe.id===ae?{...Pe,content:Ye,moeMetadata:De.moeMetadata,toolCalls:lt.length>0?lt:void 0,isStreaming:!1}:Pe)),Ge&&Ye&&setTimeout(()=>Ju(Ye),100),hr()}catch(de){console.error("Error:",de),u(oe=>oe.map(be=>be.id===ae?{...be,content:` Error: ${de instanceof Error?de.message:"Unknown error"}`,isStreaming:!1}:be))}},Mi=async()=>{if(!f.trim()&&ie.length===0||m)return;const M={id:Date.now().toString(),role:"user",content:f||"[Files attached]",timestamp:new Date,attachments:ie.map(be=>be.name)};u(be=>[...be,M]);const X=f,ae=[...ie];p(""),xe([]),g(!0);const de=(Date.now()+1).toString(),oe={id:de,role:"assistant",content:_e?" Starting Deep Research...":" Starting...",timestamp:new Date,isStreaming:!0};if(u(be=>[...be,oe]),_e&&n?.id)try{ka(!0);const be=await yj(n.id,X,`${di}/moe-chat`,"",void 0,(De,Ye)=>{_n(De),cr(Ye),Na(De.id);const lt=De.completed_steps>0?`(${De.completed_steps}/${De.total_steps} steps)`:"";u(Le=>Le.map(Pe=>Pe.id===de?{...Pe,content:` Deep Research in progress ${lt}...`}:Pe))});be?(u(De=>De.map(Ye=>Ye.id===de?{...Ye,content:be.answer,isStreaming:!1}:Ye)),_n(be.session)):await fr(X,ae,de),g(!1);return}catch(be){console.error("Deep research error:",be),await fr(X,ae,de),g(!1);return}await fr(X,ae,de),g(!1)},wo=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),Mi())},ss=M=>M.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),rs=M=>{if(!M||M.length<500)return!1;const X=M.trim(),ae=[/\.\.\.$/,/$/,/\.\.$/,/[a-z]$/i,/,$/,/:$/,/\d+\.$/,/bytes truncated/i,/content truncated/i,/\[truncated\]/i];for(const de of ae)if(de.test(X))return!0;return M.length>4e3},is=()=>{const M=[" Keep Going!"," Oink for More!"," Tell me more!"," Don't stop now!"," Continue the magic!"," What else?"," More wisdom please!"," Keep it coming!"];return M[Math.floor(Math.random()*M.length)]},Tn=async M=>{if(m)return;const X={id:Date.now().toString(),role:"user",content:"Please continue where you left off.",timestamp:new Date};u(oe=>[...oe,X]),g(!0);const ae=(Date.now()+1).toString(),de={id:ae,role:"assistant",content:" Continuing...",timestamp:new Date,isStreaming:!0};u(oe=>[...oe,de]);try{const oe=await fetch(`${di}/moe-chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"Please continue where you left off. Pick up exactly where you stopped.",task_id:Q,conversation_id:F,thought_id:P,history:c.slice(-10).map(De=>({role:De.role,content:De.content})),files:[],dont_train_on_me:Rt,user_id:n?.id,was_continued:!0})});if(!oe.ok)throw new Error(`HTTP error! status: ${oe.status}`);const be=await oe.json();u(De=>De.map(Ye=>Ye.id===ae?{...Ye,content:be.message,moeMetadata:be.moeMetadata,isStreaming:!1}:Ye)),Ge&&be.message&&setTimeout(()=>{Ju(be.message)},100),g(!1)}catch(oe){console.error("Error:",oe),u(be=>be.map(De=>De.id===ae?{...De,content:` Error: ${oe instanceof Error?oe.message:"Unknown error"}`,isStreaming:!1}:De)),g(!1)}};return o.jsxs("div",{className:`app ${Z?"dark-mode":"light-mode"} ${K?"is-mobile":""}`,children:[K&&o.jsxs("nav",{className:"mobile-bottom-nav",children:[o.jsxs("button",{className:`mobile-nav-item ${q==="chat"?"active":""}`,onClick:()=>{R("chat"),T(!1),L(!1),C(!1)},children:[o.jsx("span",{className:"mobile-nav-icon",children:""}),o.jsx("span",{className:"mobile-nav-label",children:"Chat"})]}),o.jsxs("button",{className:`mobile-nav-item ${q==="morgys"?"active":""}`,onClick:()=>{R("morgys"),T(!0)},children:[o.jsx("span",{className:"mobile-nav-icon",children:""}),o.jsx("span",{className:"mobile-nav-label",children:"Morgys"})]}),o.jsxs("button",{className:`mobile-nav-item ${q==="history"?"active":""}`,onClick:()=>{R("history"),C(!0)},children:[o.jsx("span",{className:"mobile-nav-icon",children:""}),o.jsx("span",{className:"mobile-nav-label",children:"Chats"})]}),o.jsxs("button",{className:`mobile-nav-item ${q==="kb"?"active":""}`,onClick:()=>{R("kb"),s("/knowledge-base")},children:[o.jsx("span",{className:"mobile-nav-icon",children:""}),o.jsx("span",{className:"mobile-nav-label",children:"Notes"})]}),o.jsxs("button",{className:`mobile-nav-item ${q==="profile"?"active":""}`,onClick:()=>{R("profile"),L(!0)},children:[o.jsx("span",{className:"mobile-nav-icon",children:""}),o.jsx("span",{className:"mobile-nav-label",children:"Profile"})]})]}),o.jsxs("div",{className:`sidebar ${_?"open":""}`,children:[o.jsxs("div",{className:"sidebar-header",children:[o.jsxs("div",{className:"logo",children:[o.jsx("div",{className:"logo-icon",children:"M"}),o.jsx("h1",{children:"Morgus"})]}),o.jsx("button",{className:"new-chat-button",onClick:async()=>{try{const{data:M,error:X}=await re.from("conversations").insert({title:"New Chat",thought_id:P,created_at:new Date().toISOString()}).select().single();!X&&M&&(I(M.id),u([{id:"1",role:"assistant",content:" Hello! I'm **Morgus**, your autonomous AI agent. What would you like to accomplish today?",timestamp:new Date}]),H(null),await hr())}catch(M){console.error("Failed to create conversation:",M)}},children:"+ New Chat"})]}),o.jsx(JS,{userId:n?.id||null,onNotebookSelect:M=>{console.log("Notebook selected:",M)}}),o.jsxs("div",{className:"task-list",children:[o.jsx("h3",{children:" Recent Chats"}),v.map(M=>o.jsxs("div",{className:`task-item ${Q===M.id?"active":""}`,onClick:async()=>{H(M.id),I(M.id);const{data:X,error:ae}=await re.from("conversation_messages").select("*").eq("conversation_id",M.id).order("created_at",{ascending:!0});if(!ae&&X){const de=X.map(oe=>({id:oe.id,role:oe.role,content:oe.content,timestamp:new Date(oe.created_at),moeMetadata:oe.metadata?.moeMetadata}));u(de.length>0?de:[{id:"1",role:"assistant",content:" Hello! I'm **Morgus**, your autonomous AI agent. What would you like to accomplish today?",timestamp:new Date}])}},children:[o.jsxs("div",{className:"task-info",children:[o.jsxs("div",{className:"task-title",children:[M.description.substring(0,50),"..."]}),o.jsx("div",{className:"task-status",children:M.status})]}),o.jsx("button",{className:"delete-task-button",onClick:X=>Di(M.id,X),title:"Delete task",children:""})]},M.id))]})]}),o.jsxs("div",{className:"main-content",children:[o.jsxs("div",{className:"chat-header",children:[!K&&o.jsx("button",{className:"sidebar-toggle morgy-pen-toggle",onClick:()=>T(!E),"aria-label":"Toggle Morgy Pen",children:""}),K&&o.jsx("div",{className:"mobile-header-left",children:o.jsx("button",{className:"mobile-moe-mini",onClick:()=>R("moe"),title:"View MOE Standings",children:o.jsx("span",{className:"moe-mini-icon",children:""})})}),K?o.jsxs("div",{className:"mobile-title-container",children:[o.jsx("h2",{children:"Morgus"}),o.jsx("span",{className:"mobile-slogan",children:"Your Autonomous AI Agent"})]}):o.jsx("h2",{children:"Morgus AI Agent"}),K&&o.jsxs("div",{className:"mobile-header-right",children:[o.jsx("button",{className:"mobile-toggle-btn",onClick:()=>ue(!Z),title:Z?"Light Mode":"Dark Mode",children:Z?"":""}),o.jsxs("button",{className:`mobile-toggle-btn training-btn ${Rt?"active":""}`,onClick:()=>dr(!Rt),title:Rt?"Training Off":"Training On",children:[o.jsx("span",{className:"snake-icon",children:""}),Rt&&o.jsx("div",{className:"no-slash"})]})]}),!K&&o.jsxs(o.Fragment,{children:[o.jsx(Qu,{}),o.jsx("button",{className:"settings-toggle",onClick:()=>L(!0),title:"Settings",children:""}),o.jsx("button",{className:"dark-mode-toggle",onClick:()=>ue(!Z),title:Z?"Switch to Light Mode":"Switch to Dark Mode",children:Z?"":""}),o.jsx("button",{className:`training-toggle-mini ${Rt?"active":""}`,onClick:()=>dr(!Rt),title:Rt?"Training Disabled - Click to Enable":"Training Enabled - Click to Disable",children:""}),o.jsxs("div",{className:"status-indicator",children:[o.jsx("span",{className:"status-dot online"}),"Online"]})]})]}),o.jsxs("div",{className:"messages-container",children:[K&&c.length<=1&&o.jsxs("div",{className:"mobile-welcome-section",children:[o.jsxs("div",{className:"mobile-moe-leaderboard",children:[o.jsxs("div",{className:"moe-header",children:[o.jsx("span",{className:"moe-title",children:" AI Model Competition"}),o.jsx("span",{className:"moe-subtitle",children:"Live Rankings"})]}),o.jsx(Qu,{})]}),o.jsxs("div",{className:"mobile-cta",children:[o.jsx("h3",{className:"cta-title",children:" What would you like to create?"}),o.jsx("p",{className:"cta-subtitle",children:"Tap to get started instantly"})]}),o.jsxs("div",{className:"mobile-quick-actions",children:[o.jsxs("div",{className:"quick-action-card",onClick:()=>p("Create a landing page for"),children:[o.jsx("span",{className:"quick-action-icon",children:""}),o.jsx("span",{className:"quick-action-text",children:"Landing Page"})]}),o.jsxs("div",{className:"quick-action-card",onClick:()=>p("Build a website for"),children:[o.jsx("span",{className:"quick-action-icon",children:""}),o.jsx("span",{className:"quick-action-text",children:"Website"})]}),o.jsxs("div",{className:"quick-action-card",onClick:()=>p("Create an app that"),children:[o.jsx("span",{className:"quick-action-icon",children:""}),o.jsx("span",{className:"quick-action-text",children:"App"})]}),o.jsxs("div",{className:"quick-action-card",onClick:()=>p("Create a spreadsheet to track"),children:[o.jsx("span",{className:"quick-action-icon",children:""}),o.jsx("span",{className:"quick-action-text",children:"Spreadsheet"})]}),o.jsxs("div",{className:"quick-action-card",onClick:()=>p("Create a presentation about"),children:[o.jsx("span",{className:"quick-action-icon",children:""}),o.jsx("span",{className:"quick-action-text",children:"Presentation"})]}),o.jsxs("div",{className:"quick-action-card",onClick:()=>p("Help me write a marketing email"),children:[o.jsx("span",{className:"quick-action-icon",children:""}),o.jsx("span",{className:"quick-action-text",children:"Email"})]}),o.jsxs("div",{className:"quick-action-card",onClick:()=>p("Research the latest trends in"),children:[o.jsx("span",{className:"quick-action-icon",children:""}),o.jsx("span",{className:"quick-action-text",children:"Research"})]}),o.jsxs("div",{className:"quick-action-card",onClick:()=>p("Analyze this data and create a report"),children:[o.jsx("span",{className:"quick-action-icon",children:""}),o.jsx("span",{className:"quick-action-text",children:"Analyze"})]})]}),o.jsxs("div",{className:"mobile-tips",children:[o.jsxs("div",{className:"tip-item",children:[o.jsx("span",{className:"tip-icon",children:""}),o.jsxs("span",{className:"tip-text",children:["Tap ",o.jsx("strong",{children:"Morgys"})," to summon AI specialists"]})]}),o.jsxs("div",{className:"tip-item",children:[o.jsx("span",{className:"tip-icon",children:""}),o.jsx("span",{className:"tip-text",children:"Use voice input for hands-free chatting"})]})]}),o.jsxs("div",{className:"mobile-social-section",children:[o.jsxs("div",{className:"social-links",children:[o.jsx("a",{href:"https://twitter.com/morgusai",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:""}),o.jsx("a",{href:"https://discord.gg/morgus",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:""}),o.jsx("a",{href:"https://github.com/morgus-ai",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:""})]}),o.jsx("div",{className:"app-version",children:"Morgus v2.0  Skills Library"})]})]}),c.map(M=>o.jsxs("div",{id:`msg-${M.id}`,className:`message ${M.role}`,children:[o.jsx("div",{className:"message-avatar",children:M.role==="assistant"?"":""}),o.jsxs("div",{className:"message-content",children:[M.moeMetadata&&o.jsx(XS,{metadata:M.moeMetadata}),M.toolCalls&&M.toolCalls.length>0&&o.jsxs("div",{className:"mcp-tool-calls",children:[o.jsx("div",{className:"tool-calls-header",children:" MCP Tools Used"}),M.toolCalls.map((X,ae)=>o.jsxs("div",{className:`tool-call ${X.isExecuting?"executing":X.result?.success?"success":"error"}`,children:[o.jsxs("div",{className:"tool-call-name",children:[X.isExecuting?"":X.result?.success?"":"",X.server,"/",X.tool]}),X.result&&!X.isExecuting&&o.jsxs("details",{className:"tool-call-result",children:[o.jsx("summary",{children:X.result.success?"View Result":"View Error"}),o.jsx("pre",{children:JSON.stringify(X.result.content||X.result.error,null,2)})]})]},ae))]}),o.jsxs("div",{className:"message-text",children:[o.jsx("div",{dangerouslySetInnerHTML:{__html:Me.parse(M.content)}}),M.attachments&&M.attachments.length>0&&o.jsx("div",{className:"attachments",children:M.attachments.map((X,ae)=>o.jsxs("div",{className:"attachment-chip",children:[" ",X]},ae))}),M.role==="assistant"&&M.content.includes("browserbase.com/devtools-fullscreen")&&(()=>{const X=M.content.match(/https:\/\/www\.browserbase\.com\/devtools-fullscreen\/[^)\s]+/);return X?o.jsx(FS,{liveViewUrl:X[0]}):null})(),M.role==="assistant"&&M.content.includes("![")&&o.jsx("div",{className:"image-download-buttons",children:(()=>{const X=/!\[([^\]]*)\]\(([^)]+)\)/g,ae=[...M.content.matchAll(X)];return ae.map((de,oe)=>o.jsxs("a",{href:de[2],download:`morgus-image-${Date.now()}-${oe}.png`,className:"download-image-btn",title:"Download image",children:[" Download Image ",ae.length>1?`${oe+1}`:""]},oe))})()}),M.role==="assistant"&&(()=>{const X=[/(?:base64[\s_-]*(?:encoded)?[\s_-]*(?:document|file|content)?[:\s]+)([A-Za-z0-9+/=]{100,})/gi,/```(?:base64)?\n?([A-Za-z0-9+/=]{100,})\n?```/g,/data:(?:application\/(?:pdf|vnd\.openxmlformats-officedocument\.wordprocessingml\.document|msword)|text\/plain);base64,([A-Za-z0-9+/=]+)/g],ae=[];for(const de of X){const oe=M.content.matchAll(de);for(const be of oe){const De=be[1]||be[0];if(De.length>100){let Ye="application/octet-stream",lt="bin",Le="document";try{const Pe=atob(De.substring(0,20));Pe.startsWith("PK")?M.content.toLowerCase().includes("docx")||M.content.toLowerCase().includes("word")?(Ye="application/vnd.openxmlformats-officedocument.wordprocessingml.document",lt="docx",Le="document"):M.content.toLowerCase().includes("xlsx")||M.content.toLowerCase().includes("excel")?(Ye="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",lt="xlsx",Le="spreadsheet"):(Ye="application/vnd.openxmlformats-officedocument.wordprocessingml.document",lt="docx",Le="document"):Pe.startsWith("%PDF")&&(Ye="application/pdf",lt="pdf",Le="document")}catch{}ae.push({base64:De,type:Ye,name:`morgus-${Le}-${Date.now()}.${lt}`})}}}return ae.length===0?null:o.jsxs("div",{className:"document-download-buttons",children:[o.jsx("div",{className:"document-download-header",children:" Documents Ready for Download"}),ae.map((de,oe)=>o.jsxs("button",{className:"download-document-btn",onClick:()=>{try{const be=atob(de.base64),De=new Array(be.length);for(let Bt=0;Bt<be.length;Bt++)De[Bt]=be.charCodeAt(Bt);const Ye=new Uint8Array(De),lt=new Blob([Ye],{type:de.type}),Le=URL.createObjectURL(lt),Pe=document.createElement("a");Pe.href=Le,Pe.download=de.name,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),URL.revokeObjectURL(Le)}catch(be){console.error("Failed to download document:",be),alert("Failed to decode document. The base64 data may be corrupted.")}},title:"Download document",children:[" Download ",de.name.includes(".docx")?"Word Document":de.name.includes(".pdf")?"PDF":de.name.includes(".xlsx")?"Excel":"Document"," ",ae.length>1?`${oe+1}`:""]},oe))]})})()]}),o.jsxs("div",{className:"message-actions",children:[o.jsx("div",{className:"message-time",children:ss(M.timestamp)}),M.role==="assistant"&&!M.isStreaming&&o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{className:"icon-button",onClick:()=>Ta(M.content),title:"Copy to clipboard",children:""}),o.jsx("button",{className:"icon-button",onClick:()=>Ct(M.content,`morgus-response-${M.id}.txt`),title:"Download as text",children:""}),o.jsx("button",{className:"icon-button",onClick:()=>hn(M),title:"Save to thought",children:""}),o.jsx("button",{className:"icon-button",onClick:()=>{P?hn(M):alert("Please select a thought first!")},title:"Quick add to current thought",children:""}),o.jsx("button",{className:"icon-button",onClick:()=>xt(M.id,"good"),title:"Good response",children:""}),o.jsx("button",{className:"icon-button",onClick:()=>xt(M.id,"bad"),title:"Bad response",children:""}),o.jsx("button",{className:"icon-button",onClick:()=>xt(M.id,"glitch"),title:"Report glitch",children:""}),M.content.includes("<details>")&&o.jsx("button",{className:"icon-button debug-toggle",onClick:()=>{const X=document.querySelector(`#msg-${M.id} details`);X&&(X.open=!X.open)},title:"Toggle debug info",children:""})]}),M.role==="assistant"&&!M.isStreaming&&rs(M.content)&&o.jsx("button",{className:"continue-button",onClick:()=>Tn(M.id),disabled:m,children:is()})]})]})]},M.id)),m&&o.jsx(WS,{toolName:te,isDeepResearch:_e}),o.jsx("div",{ref:Tt})]}),o.jsxs("div",{className:"input-container",children:[ie.length>0&&o.jsx("div",{className:"uploaded-files",children:ie.map((M,X)=>o.jsxs("div",{className:"file-chip",children:[" ",M.name,o.jsx("button",{onClick:()=>bo(X),children:""})]},X))}),o.jsxs("div",{className:"input-wrapper",children:[o.jsx("input",{type:"file",ref:Ci,onChange:vo,multiple:!0,accept:".pdf,.doc,.docx,.txt,.md,.csv,.png,.jpg,.jpeg,.gif,.mp4,.mov,.avi,.webm,.mkv",style:{display:"none"}}),o.jsx("button",{className:`deep-research-toggle ${_e?"active":""}`,onClick:()=>{wt(!_e),_e||ka(!0)},disabled:m,title:_e?"Deep Research Mode ON - Click to disable":"Enable Deep Research Mode",children:""}),ts&&o.jsx("span",{className:"mcp-tools-indicator",title:`MCP Tools Active: ${ea?.getAvailableTools().length||0} tools available`,children:""}),o.jsx("button",{className:"attach-button",onClick:()=>Ci.current?.click(),disabled:m,title:"Attach files",children:""}),o.jsx("textarea",{ref:ns,value:f,onChange:M=>p(M.target.value),onKeyPress:M=>{pe&&M.key==="Enter"||wo(M)},placeholder:"Message Morgus...",rows:1,disabled:m}),o.jsx(rj,{inputValue:f,onSelect:M=>{p(M),ns.current?.focus()},inputRef:ns,isVisible:pe,onVisibilityChange:ye}),o.jsx(QS,{onTranscript:M=>p(M),isListening:ke,onListeningChange:it}),o.jsx("button",{className:N?"stop-audio-button":"voice-button",onClick:()=>{if(N)oo();else{const M=!Ge;if(Ze(M),!M)oo();else{const X=c.filter(ae=>ae.role==="assistant").pop();X?.content&&Ju(X.content)}}},title:N?"Stop audio":Ge?"Disable auto-speak":"Enable auto-speak",children:N?"":Ge?"":""}),m?o.jsx("button",{className:"stop-button",onClick:()=>window.location.reload(),title:"Stop generation",children:""}):o.jsx("button",{className:"send-button",onClick:Mi,disabled:!f.trim()&&ie.length===0,children:""})]})]})]}),o.jsx("button",{className:"scroll-to-bottom-floating",onClick:()=>{const M=document.querySelector(".chat-messages, .messages-container");M&&M.scrollTo({top:M.scrollHeight,behavior:"smooth"})},title:"Scroll to bottom",children:""}),o.jsx(aj,{isVisible:E,onActivateMorgy:M=>ee(X=>[...X,M]),onDeactivateMorgy:M=>ee(X=>X.filter(ae=>ae!==M)),activeMorgys:W,onMentionMorgy:(M,X)=>{p(ae=>ae?`${ae} ${M} `:`${M} `)},onClose:()=>T(!1)}),o.jsx(ij,{sessionId:We,isActive:es,onClose:()=>ka(!1)}),o.jsx(tj,{isOpen:j,onClose:()=>L(!1),darkMode:Z,onDarkModeChange:ue,dontTrainOnMe:Rt,onDontTrainChange:dr,user:n,profile:r,onLogout:async()=>{console.log("[App] Logout handler called");try{await i(),console.log("[App] signOut completed")}catch(M){console.error("[App] signOut error:",M)}L(!1),console.log("[App] Redirecting to /login"),window.location.href="/login"},onNavigate:M=>{L(!1),s(M)}}),o.jsx(lj,{}),K&&D&&o.jsxs("div",{className:"mobile-fullscreen-panel",children:[o.jsxs("div",{className:"mobile-panel-header",children:[o.jsx("span",{className:"mobile-panel-title",children:" Chats"}),o.jsx("button",{className:"mobile-panel-close",onClick:()=>{C(!1),R("chat")},type:"button",children:""})]}),o.jsxs("div",{className:"mobile-panel-content",children:[o.jsx("button",{className:"mobile-new-chat-btn",onClick:async()=>{C(!1),R("chat"),u([{id:Date.now().toString(),role:"assistant",content:" Hello! I'm Morgus, your autonomous AI agent. What would you like to accomplish today?",timestamp:new Date}]),H(null),I(null)},children:"+ New Chat"}),v.map(M=>o.jsxs("div",{className:`mobile-chat-item ${Q===M.id?"active":""}`,onClick:async()=>{H(M.id),I(M.id),C(!1),R("chat");const{data:X,error:ae}=await re.from("conversation_messages").select("*").eq("conversation_id",M.id).order("created_at",{ascending:!0});if(!ae&&X){const de=X.map(oe=>({id:oe.id,role:oe.role,content:oe.content,timestamp:new Date(oe.created_at)}));u(de)}},children:[o.jsx("span",{className:"mobile-chat-title",children:M.title||M.description}),o.jsx("span",{className:"mobile-chat-date",children:new Date(M.created_at).toLocaleDateString()})]},M.id))]})]}),K&&E&&o.jsxs("div",{className:"mobile-fullscreen-panel mobile-morgy-panel",children:[o.jsxs("div",{className:"mobile-panel-header",children:[o.jsx("span",{className:"mobile-panel-title",children:" Morgy Pen"}),o.jsx("button",{className:"mobile-panel-close",onClick:()=>{T(!1),R("chat")},type:"button",children:""})]}),o.jsxs("div",{className:"mobile-panel-content",children:[o.jsx("div",{className:"mobile-morgy-hint",children:" Click @ to mention a Morgy in chat"}),o.jsx("div",{className:"mobile-morgy-grid",children:[{id:"bill",name:"Bill the Marketing Hog",handle:"@billthemarketinghog",level:3,xp:65,color:"#00ffff",image:"/morgys/bill.png"},{id:"sally",name:"Sally the Promo Pig",handle:"@sallythepromo",level:2,xp:40,color:"#ff00ff",image:"/morgys/sally.png"},{id:"professor",name:"Prof. Hogsworth the Research Expert",handle:"@profhogsworth",level:5,xp:85,color:"#00ffff",image:"/morgys/professor.png"}].map(M=>o.jsxs("div",{className:`mobile-morgy-card ${W.includes(M.id)?"active":""}`,style:{borderColor:M.color},children:[o.jsx("img",{src:M.image,alt:M.name,className:"mobile-morgy-avatar"}),o.jsx("div",{className:"mobile-morgy-name",children:M.name}),o.jsx("div",{className:"mobile-morgy-handle",style:{color:M.color},children:M.handle}),o.jsxs("div",{className:"mobile-morgy-level",children:["Lvl ",M.level]}),o.jsx("div",{className:"mobile-morgy-xp-bar",children:o.jsx("div",{className:"mobile-morgy-xp-fill",style:{width:`${M.xp}%`,backgroundColor:M.color}})}),o.jsxs("div",{className:"mobile-morgy-actions",children:[o.jsx("button",{className:"mobile-morgy-btn",onClick:()=>{p(X=>X?`${X} ${M.handle} `:`${M.handle} `),T(!1),R("chat"),W.includes(M.id)||ee(X=>[...X,M.id])},children:"@"}),o.jsx("button",{className:"mobile-morgy-btn mobile-morgy-activate",onClick:()=>{W.includes(M.id)?ee(X=>X.filter(ae=>ae!==M.id)):ee(X=>[...X,M.id])},children:""})]})]},M.id))}),o.jsx("button",{className:"mobile-add-morgy-btn",onClick:()=>{alert("Coming soon! Create your own custom Morgy.")},children:"+ Add a Morgy"})]})]}),K&&q==="moe"&&o.jsxs("div",{className:"mobile-fullscreen-panel moe-panel",children:[o.jsxs("div",{className:"mobile-panel-header",children:[o.jsx("span",{className:"mobile-panel-title",children:" AI Model Competition"}),o.jsx("button",{className:"mobile-panel-close",onClick:()=>R("chat"),type:"button",children:""})]}),o.jsx("div",{className:"mobile-panel-content moe-content",children:o.jsxs("div",{className:"moe-full-leaderboard",children:[o.jsx("h3",{children:"Live Model Rankings"}),o.jsx("p",{className:"moe-description",children:"Watch AI models compete in real-time! Each response is evaluated and the best model wins."}),o.jsx(Qu,{}),o.jsxs("div",{className:"moe-how-it-works",children:[o.jsx("h4",{children:"How It Works"}),o.jsxs("ul",{children:[o.jsx("li",{children:" Multiple AI models compete on each query"}),o.jsx("li",{children:" Responses are evaluated for quality & speed"}),o.jsx("li",{children:" The best response wins the competition"}),o.jsx("li",{children:" Rankings update every 30 seconds"})]})]}),o.jsx("p",{className:"moe-note",children:"Rankings are based on real competitions from all Morgus users."})]})})]})]})}function fd({message:s="Loading..."}){return o.jsx("div",{className:"loading-screen",children:o.jsxs("div",{className:"loading-content",children:[o.jsx("div",{className:"loading-spinner-large"}),o.jsx("p",{children:s})]})})}function xg({children:s}){const{user:n,loading:r}=xn();return r?o.jsx(fd,{message:"Checking authentication..."}):n?o.jsx(o.Fragment,{children:s}):o.jsx(zg,{to:"/login",replace:!0})}function xj({children:s}){const{user:n,profile:r,loading:i}=xn(),[c,u]=S.useState(!1);return console.log("[AdminRoute] State:",{loading:i,hasUser:!!n,hasProfile:!!r,isAdmin:r?.is_admin,profileTimeout:c}),S.useEffect(()=>{let f;return!i&&n&&!r&&!c&&(f=setTimeout(()=>{console.log("[AdminRoute] Profile loading timed out"),u(!0)},3e3)),()=>{f&&clearTimeout(f)}},[i,n,r,c]),i?o.jsx(fd,{message:"Checking authentication..."}):n?!r&&!c?o.jsx(fd,{message:"Loading profile..."}):!r&&c?o.jsx("div",{className:"loading-screen",children:o.jsxs("div",{className:"loading-content",children:[o.jsx("h2",{children:" Profile Error"}),o.jsx("p",{children:"Unable to load your profile. Please try refreshing the page."}),o.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",background:"linear-gradient(135deg, #00d4aa, #00b4d8)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",fontWeight:"bold"},children:"Refresh Page"}),o.jsx("a",{href:"/",className:"back-link",style:{display:"block",marginTop:"1rem"},children:" Back to Morgus"})]})}):r&&!r.is_admin?o.jsx("div",{className:"loading-screen",children:o.jsxs("div",{className:"loading-content",children:[o.jsx("h2",{children:" Access Denied"}),o.jsx("p",{children:"You don't have admin privileges."}),o.jsxs("p",{style:{opacity:.7,fontSize:"0.9rem"},children:["Logged in as: ",r?.email]}),o.jsx("a",{href:"/",className:"back-link",children:" Back to Morgus"})]})}):o.jsx(o.Fragment,{children:s}):o.jsx(zg,{to:"/login?redirect=/admin",replace:!0})}function _j(){return o.jsxs(M0,{children:[o.jsx(Jt,{path:"/landing",element:o.jsx(cS,{})}),o.jsx(Jt,{path:"/login",element:o.jsx(W_,{})}),o.jsx(Jt,{path:"/signup",element:o.jsx(F_,{})}),o.jsx(Jt,{path:"/forgot-password",element:o.jsx(eS,{})}),o.jsx(Jt,{path:"/pricing",element:o.jsx(aS,{})}),o.jsx(Jt,{path:"/checkout/success",element:o.jsx(sS,{})}),o.jsx(Jt,{path:"/terms",element:o.jsx(lS,{})}),o.jsx(Jt,{path:"/privacy",element:o.jsx(oS,{})}),o.jsx(Jt,{path:"/account",element:o.jsx(xg,{children:o.jsx(rS,{})})}),o.jsx(Jt,{path:"/knowledge-base",element:o.jsx(xg,{children:o.jsx(uS,{})})}),o.jsx(Jt,{path:"/admin",element:o.jsx(xj,{children:o.jsx(iS,{})})}),o.jsx(Jt,{path:"/*",element:o.jsx(wj,{})})]})}typeof window<"u"&&"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(s=>{console.log("[PWA] Service Worker registered:",s.scope),s.addEventListener("updatefound",()=>{const n=s.installing;n&&n.addEventListener("statechange",()=>{n.state==="installed"&&navigator.serviceWorker.controller&&console.log("[PWA] New content available, refresh to update")})})}).catch(s=>console.error("[PWA] Service Worker registration failed:",s))});Lb.createRoot(document.getElementById("root")).render(o.jsx(S.StrictMode,{children:o.jsx(rw,{children:o.jsx(Z_,{children:o.jsx(_j,{})})})}));
