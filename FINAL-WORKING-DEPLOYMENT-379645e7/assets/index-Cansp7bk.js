function c0(i,n){for(var s=0;s<n.length;s++){const l=n[s];if(typeof l!="string"&&!Array.isArray(l)){for(const o in l)if(o!=="default"&&!(o in i)){const u=Object.getOwnPropertyDescriptor(l,o);u&&Object.defineProperty(i,o,u.get?u:{enumerable:!0,get:()=>l[o]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();function u0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function d0(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var n=i.default;if(typeof n=="function"){var s=function l(){var o=!1;try{o=this instanceof l}catch{}return o?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(l){var o=Object.getOwnPropertyDescriptor(i,l);Object.defineProperty(s,l,o.get?o:{enumerable:!0,get:function(){return i[l]}})}),s}var Ru={exports:{}},ar={};var Op;function h0(){if(Op)return ar;Op=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(l,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:i,type:l,key:h,ref:o!==void 0?o:null,props:u}}return ar.Fragment=n,ar.jsx=s,ar.jsxs=s,ar}var Dp;function f0(){return Dp||(Dp=1,Ru.exports=h0()),Ru.exports}var c=f0(),Cu={exports:{}},pe={};var Mp;function m0(){if(Mp)return pe;Mp=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),S=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=S&&j[S]||j["@@iterator"],typeof j=="function"?j:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,T={};function C(j,z,W){this.props=j,this.context=z,this.refs=T,this.updater=W||_}C.prototype.isReactComponent={},C.prototype.setState=function(j,z){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,z,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function D(){}D.prototype=C.prototype;function L(j,z,W){this.props=j,this.context=z,this.refs=T,this.updater=W||_}var J=L.prototype=new D;J.constructor=L,A(J,C.prototype),J.isPureReactComponent=!0;var K=Array.isArray;function Y(){}var Q={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function H(j,z,W){var ee=W.ref;return{$$typeof:i,type:j,key:z,ref:ee!==void 0?ee:null,props:W}}function le(j,z){return H(j.type,z,j.props)}function ve(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function Te(j){var z={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(W){return z[W]})}var st=/\/+/g;function Ie(j,z){return typeof j=="object"&&j!==null&&j.key!=null?Te(""+j.key):z.toString(36)}function Ke(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(Y,Y):(j.status="pending",j.then(function(z){j.status==="pending"&&(j.status="fulfilled",j.value=z)},function(z){j.status==="pending"&&(j.status="rejected",j.reason=z)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function k(j,z,W,ee,me){var ye=typeof j;(ye==="undefined"||ye==="boolean")&&(j=null);var ke=!1;if(j===null)ke=!0;else switch(ye){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(j.$$typeof){case i:case n:ke=!0;break;case y:return ke=j._init,k(ke(j._payload),z,W,ee,me)}}if(ke)return me=me(j),ke=ee===""?"."+Ie(j,0):ee,K(me)?(W="",ke!=null&&(W=ke.replace(st,"$&/")+"/"),k(me,z,W,"",function(ts){return ts})):me!=null&&(ve(me)&&(me=le(me,W+(me.key==null||j&&j.key===me.key?"":(""+me.key).replace(st,"$&/")+"/")+ke)),z.push(me)),1;ke=0;var St=ee===""?".":ee+":";if(K(j))for(var Qe=0;Qe<j.length;Qe++)ee=j[Qe],ye=St+Ie(ee,Qe),ke+=k(ee,z,W,ye,me);else if(Qe=x(j),typeof Qe=="function")for(j=Qe.call(j),Qe=0;!(ee=j.next()).done;)ee=ee.value,ye=St+Ie(ee,Qe++),ke+=k(ee,z,W,ye,me);else if(ye==="object"){if(typeof j.then=="function")return k(Ke(j),z,W,ee,me);throw z=String(j),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return ke}function G(j,z,W){if(j==null)return j;var ee=[],me=0;return k(j,ee,"","",function(ye){return z.call(W,ye,me++)}),ee}function F(j){if(j._status===-1){var z=j._result;z=z(),z.then(function(W){(j._status===0||j._status===-1)&&(j._status=1,j._result=W)},function(W){(j._status===0||j._status===-1)&&(j._status=2,j._result=W)}),j._status===-1&&(j._status=0,j._result=z)}if(j._status===1)return j._result.default;throw j._result}var X=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},he={map:G,forEach:function(j,z,W){G(j,function(){z.apply(this,arguments)},W)},count:function(j){var z=0;return G(j,function(){z++}),z},toArray:function(j){return G(j,function(z){return z})||[]},only:function(j){if(!ve(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return pe.Activity=w,pe.Children=he,pe.Component=C,pe.Fragment=s,pe.Profiler=o,pe.PureComponent=L,pe.StrictMode=l,pe.Suspense=m,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,pe.__COMPILER_RUNTIME={__proto__:null,c:function(j){return Q.H.useMemoCache(j)}},pe.cache=function(j){return function(){return j.apply(null,arguments)}},pe.cacheSignal=function(){return null},pe.cloneElement=function(j,z,W){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ee=A({},j.props),me=j.key;if(z!=null)for(ye in z.key!==void 0&&(me=""+z.key),z)!te.call(z,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&z.ref===void 0||(ee[ye]=z[ye]);var ye=arguments.length-2;if(ye===1)ee.children=W;else if(1<ye){for(var ke=Array(ye),St=0;St<ye;St++)ke[St]=arguments[St+2];ee.children=ke}return H(j.type,me,ee)},pe.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:u,_context:j},j},pe.createElement=function(j,z,W){var ee,me={},ye=null;if(z!=null)for(ee in z.key!==void 0&&(ye=""+z.key),z)te.call(z,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(me[ee]=z[ee]);var ke=arguments.length-2;if(ke===1)me.children=W;else if(1<ke){for(var St=Array(ke),Qe=0;Qe<ke;Qe++)St[Qe]=arguments[Qe+2];me.children=St}if(j&&j.defaultProps)for(ee in ke=j.defaultProps,ke)me[ee]===void 0&&(me[ee]=ke[ee]);return H(j,ye,me)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(j){return{$$typeof:p,render:j}},pe.isValidElement=ve,pe.lazy=function(j){return{$$typeof:y,_payload:{_status:-1,_result:j},_init:F}},pe.memo=function(j,z){return{$$typeof:g,type:j,compare:z===void 0?null:z}},pe.startTransition=function(j){var z=Q.T,W={};Q.T=W;try{var ee=j(),me=Q.S;me!==null&&me(W,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Y,X)}catch(ye){X(ye)}finally{z!==null&&W.types!==null&&(z.types=W.types),Q.T=z}},pe.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},pe.use=function(j){return Q.H.use(j)},pe.useActionState=function(j,z,W){return Q.H.useActionState(j,z,W)},pe.useCallback=function(j,z){return Q.H.useCallback(j,z)},pe.useContext=function(j){return Q.H.useContext(j)},pe.useDebugValue=function(){},pe.useDeferredValue=function(j,z){return Q.H.useDeferredValue(j,z)},pe.useEffect=function(j,z){return Q.H.useEffect(j,z)},pe.useEffectEvent=function(j){return Q.H.useEffectEvent(j)},pe.useId=function(){return Q.H.useId()},pe.useImperativeHandle=function(j,z,W){return Q.H.useImperativeHandle(j,z,W)},pe.useInsertionEffect=function(j,z){return Q.H.useInsertionEffect(j,z)},pe.useLayoutEffect=function(j,z){return Q.H.useLayoutEffect(j,z)},pe.useMemo=function(j,z){return Q.H.useMemo(j,z)},pe.useOptimistic=function(j,z){return Q.H.useOptimistic(j,z)},pe.useReducer=function(j,z,W){return Q.H.useReducer(j,z,W)},pe.useRef=function(j){return Q.H.useRef(j)},pe.useState=function(j){return Q.H.useState(j)},pe.useSyncExternalStore=function(j,z,W){return Q.H.useSyncExternalStore(j,z,W)},pe.useTransition=function(){return Q.H.useTransition()},pe.version="19.2.0",pe}var Up;function md(){return Up||(Up=1,Cu.exports=m0()),Cu.exports}var E=md(),Ou={exports:{}},sr={},Du={exports:{}},Mu={};var zp;function p0(){return zp||(zp=1,(function(i){function n(k,G){var F=k.length;k.push(G);e:for(;0<F;){var X=F-1>>>1,he=k[X];if(0<o(he,G))k[X]=G,k[F]=he,F=X;else break e}}function s(k){return k.length===0?null:k[0]}function l(k){if(k.length===0)return null;var G=k[0],F=k.pop();if(F!==G){k[0]=F;e:for(var X=0,he=k.length,j=he>>>1;X<j;){var z=2*(X+1)-1,W=k[z],ee=z+1,me=k[ee];if(0>o(W,F))ee<he&&0>o(me,W)?(k[X]=me,k[ee]=F,X=ee):(k[X]=W,k[z]=F,X=z);else if(ee<he&&0>o(me,F))k[X]=me,k[ee]=F,X=ee;else break e}}return G}function o(k,G){var F=k.sortIndex-G.sortIndex;return F!==0?F:k.id-G.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var m=[],g=[],y=1,w=null,S=3,x=!1,_=!1,A=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function J(k){for(var G=s(g);G!==null;){if(G.callback===null)l(g);else if(G.startTime<=k)l(g),G.sortIndex=G.expirationTime,n(m,G);else break;G=s(g)}}function K(k){if(A=!1,J(k),!_)if(s(m)!==null)_=!0,Y||(Y=!0,Te());else{var G=s(g);G!==null&&Ke(K,G.startTime-k)}}var Y=!1,Q=-1,te=5,H=-1;function le(){return T?!0:!(i.unstable_now()-H<te)}function ve(){if(T=!1,Y){var k=i.unstable_now();H=k;var G=!0;try{e:{_=!1,A&&(A=!1,D(Q),Q=-1),x=!0;var F=S;try{t:{for(J(k),w=s(m);w!==null&&!(w.expirationTime>k&&le());){var X=w.callback;if(typeof X=="function"){w.callback=null,S=w.priorityLevel;var he=X(w.expirationTime<=k);if(k=i.unstable_now(),typeof he=="function"){w.callback=he,J(k),G=!0;break t}w===s(m)&&l(m),J(k)}else l(m);w=s(m)}if(w!==null)G=!0;else{var j=s(g);j!==null&&Ke(K,j.startTime-k),G=!1}}break e}finally{w=null,S=F,x=!1}G=void 0}}finally{G?Te():Y=!1}}}var Te;if(typeof L=="function")Te=function(){L(ve)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,Ie=st.port2;st.port1.onmessage=ve,Te=function(){Ie.postMessage(null)}}else Te=function(){C(ve,0)};function Ke(k,G){Q=C(function(){k(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(k){k.callback=null},i.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<k?Math.floor(1e3/k):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(k){switch(S){case 1:case 2:case 3:var G=3;break;default:G=S}var F=S;S=G;try{return k()}finally{S=F}},i.unstable_requestPaint=function(){T=!0},i.unstable_runWithPriority=function(k,G){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var F=S;S=k;try{return G()}finally{S=F}},i.unstable_scheduleCallback=function(k,G,F){var X=i.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?X+F:X):F=X,k){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=F+he,k={id:y++,callback:G,priorityLevel:k,startTime:F,expirationTime:he,sortIndex:-1},F>X?(k.sortIndex=F,n(g,k),s(m)===null&&k===s(g)&&(A?(D(Q),Q=-1):A=!0,Ke(K,F-X))):(k.sortIndex=he,n(m,k),_||x||(_=!0,Y||(Y=!0,Te()))),k},i.unstable_shouldYield=le,i.unstable_wrapCallback=function(k){var G=S;return function(){var F=S;S=G;try{return k.apply(this,arguments)}finally{S=F}}}})(Mu)),Mu}var Lp;function g0(){return Lp||(Lp=1,Du.exports=p0()),Du.exports}var Uu={exports:{}},jt={};var Bp;function v0(){if(Bp)return jt;Bp=1;var i=md();function n(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var l={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(m,g,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:m,containerInfo:g,implementation:y}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,jt.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return u(m,g,null,y)},jt.flushSync=function(m){var g=h.T,y=l.p;try{if(h.T=null,l.p=2,m)return m()}finally{h.T=g,l.p=y,l.d.f()}},jt.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,l.d.C(m,g))},jt.prefetchDNS=function(m){typeof m=="string"&&l.d.D(m)},jt.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,w=p(y,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?l.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:x}):y==="script"&&l.d.X(m,{crossOrigin:w,integrity:S,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},jt.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=p(g.as,g.crossOrigin);l.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&l.d.M(m)},jt.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,w=p(y,g.crossOrigin);l.d.L(m,y,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},jt.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=p(g.as,g.crossOrigin);l.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else l.d.m(m)},jt.requestFormReset=function(m){l.d.r(m)},jt.unstable_batchedUpdates=function(m,g){return m(g)},jt.useFormState=function(m,g,y){return h.H.useFormState(m,g,y)},jt.useFormStatus=function(){return h.H.useHostTransitionStatus()},jt.version="19.2.0",jt}var $p;function y0(){if($p)return Uu.exports;$p=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Uu.exports=v0(),Uu.exports}var qp;function b0(){if(qp)return sr;qp=1;var i=g0(),n=md(),s=y0();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(l(188))}function g(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(l(188));return t!==e?null:e}for(var a=e,r=t;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(r=d.return,r!==null){a=r;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return m(d),e;if(f===r)return m(d),t;f=f.sibling}throw Error(l(188))}if(a.return!==r.return)a=d,r=f;else{for(var v=!1,b=d.child;b;){if(b===a){v=!0,a=d,r=f;break}if(b===r){v=!0,r=d,a=f;break}b=b.sibling}if(!v){for(b=f.child;b;){if(b===a){v=!0,a=f,r=d;break}if(b===r){v=!0,r=f,a=d;break}b=b.sibling}if(!v)throw Error(l(189))}}if(a.alternate!==r)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,S=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),L=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),ve=Symbol.iterator;function Te(e){return e===null||typeof e!="object"?null:(e=ve&&e[ve]||e["@@iterator"],typeof e=="function"?e:null)}var st=Symbol.for("react.client.reference");function Ie(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===st?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case C:return"Profiler";case T:return"StrictMode";case K:return"Suspense";case Y:return"SuspenseList";case H:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case L:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q:return t=e.displayName||null,t!==null?t:Ie(e.type)||"Memo";case te:t=e._payload,e=e._init;try{return Ie(e(t))}catch{}}return null}var Ke=Array.isArray,k=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},X=[],he=-1;function j(e){return{current:e}}function z(e){0>he||(e.current=X[he],X[he]=null,he--)}function W(e,t){he++,X[he]=e.current,e.current=t}var ee=j(null),me=j(null),ye=j(null),ke=j(null);function St(e,t){switch(W(ye,t),W(me,e),W(ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?tp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=tp(t),e=np(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(ee),W(ee,e)}function Qe(){z(ee),z(me),z(ye)}function ts(e){e.memoizedState!==null&&W(ke,e);var t=ee.current,a=np(t,e.type);t!==a&&(W(me,e),W(ee,a))}function ns(e){me.current===e&&(z(ee),z(me)),ke.current===e&&(z(ke),Fi._currentValue=F)}var wn,Sr;function xn(e){if(wn===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);wn=t&&t[1]||"",Sr=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wn+e+Sr}var oi=!1;function ln(e,t){if(!e||oi)return"";oi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(q){var B=q}Reflect.construct(e,[],V)}else{try{V.call()}catch(q){B=q}e.call(V.prototype)}}else{try{throw Error()}catch(q){B=q}(V=e())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=r.DetermineComponentFrameRoot(),v=f[0],b=f[1];if(v&&b){var N=v.split(`
`),U=b.split(`
`);for(d=r=0;r<N.length&&!N[r].includes("DetermineComponentFrameRoot");)r++;for(;d<U.length&&!U[d].includes("DetermineComponentFrameRoot");)d++;if(r===N.length||d===U.length)for(r=N.length-1,d=U.length-1;1<=r&&0<=d&&N[r]!==U[d];)d--;for(;1<=r&&0<=d;r--,d--)if(N[r]!==U[d]){if(r!==1||d!==1)do if(r--,d--,0>d||N[r]!==U[d]){var P=`
`+N[r].replace(" at new "," at ");return e.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",e.displayName)),P}while(1<=r&&0<=d);break}}}finally{oi=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?xn(a):""}function jr(e,t){switch(e.tag){case 26:case 27:case 5:return xn(e.type);case 16:return xn("Lazy");case 13:return e.child!==t&&t!==null?xn("Suspense Fallback"):xn("Suspense");case 19:return xn("SuspenseList");case 0:case 15:return ln(e.type,!1);case 11:return ln(e.type.render,!1);case 1:return ln(e.type,!0);case 31:return xn("Activity");default:return""}}function ci(e){try{var t="",a=null;do t+=jr(e,a),a=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var as=Object.prototype.hasOwnProperty,ss=i.unstable_scheduleCallback,ka=i.unstable_cancelCallback,po=i.unstable_shouldYield,go=i.unstable_requestPaint,gt=i.unstable_now,vo=i.unstable_getCurrentPriorityLevel,Er=i.unstable_ImmediatePriority,Tr=i.unstable_UserBlockingPriority,is=i.unstable_NormalPriority,yo=i.unstable_LowPriority,ui=i.unstable_IdlePriority,di=i.log,hi=i.unstable_setDisableYieldValue,Wn=null,Tt=null;function _n(e){if(typeof di=="function"&&hi(e),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(Wn,e)}catch{}}var Nt=Math.clz32?Math.clz32:$,bo=Math.log,wo=Math.LN2;function $(e){return e>>>=0,e===0?32:31-(bo(e)/wo|0)|0}var Z=256,ae=262144,ue=4194304;function ce(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xe(e,t,a){var r=e.pendingLanes;if(r===0)return 0;var d=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var b=r&134217727;return b!==0?(r=b&~f,r!==0?d=ce(r):(v&=b,v!==0?d=ce(v):a||(a=b&~e,a!==0&&(d=ce(a))))):(b=r&~f,b!==0?d=ce(b):v!==0?d=ce(v):a||(a=r&~e,a!==0&&(d=ce(a)))),d===0?0:t!==0&&t!==d&&(t&f)===0&&(f=d&-d,a=t&-t,f>=a||f===32&&(a&4194048)!==0)?t:d}function Ae(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Je(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function it(){var e=ue;return ue<<=1,(ue&62914560)===0&&(ue=4194304),e}function Ue(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Be(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function on(e,t,a,r,d,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,N=e.expirationTimes,U=e.hiddenUpdates;for(a=v&~a;0<a;){var P=31-Nt(a),V=1<<P;b[P]=0,N[P]=-1;var B=U[P];if(B!==null)for(U[P]=null,P=0;P<B.length;P++){var q=B[P];q!==null&&(q.lane&=-536870913)}a&=~V}r!==0&&fi(e,r,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~t))}function fi(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Nt(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|a&261930}function tt(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var r=31-Nt(a),d=1<<r;d&t|e[r]&t&&(e[r]|=t),a&=~d}}function Jt(e,t){var a=t&-t;return a=(a&42)!==0?1:cn(a),(a&(e.suspendedLanes|t))!==0?0:a}function cn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ea(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:Ep(e.type))}function qd(e,t){var a=G.p;try{return G.p=e,t()}finally{G.p=a}}var ta=Math.random().toString(36).slice(2),vt="__reactFiber$"+ta,Rt="__reactProps$"+ta,rs="__reactContainer$"+ta,xo="__reactEvents$"+ta,Wv="__reactListeners$"+ta,Fv="__reactHandles$"+ta,Pd="__reactResources$"+ta,mi="__reactMarker$"+ta;function _o(e){delete e[vt],delete e[Rt],delete e[xo],delete e[Wv],delete e[Fv]}function ls(e){var t=e[vt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[rs]||a[vt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=cp(e);e!==null;){if(a=e[vt])return a;e=cp(e)}return t}e=a,a=e.parentNode}return null}function os(e){if(e=e[vt]||e[rs]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function pi(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function cs(e){var t=e[Pd];return t||(t=e[Pd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function mt(e){e[mi]=!0}var Hd=new Set,Gd={};function Aa(e,t){us(e,t),us(e+"Capture",t)}function us(e,t){for(Gd[e]=t,e=0;e<t.length;e++)Hd.add(t[e])}var ey=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Id={},Vd={};function ty(e){return as.call(Vd,e)?!0:as.call(Id,e)?!1:ey.test(e)?Vd[e]=!0:(Id[e]=!0,!1)}function Nr(e,t,a){if(ty(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function kr(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function kn(e,t,a,r){if(r===null)e.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+r)}}function Xt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ny(e,t,a){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(v){a=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function So(e){if(!e._valueTracker){var t=Yd(e)?"checked":"value";e._valueTracker=ny(e,t,""+e[t])}}function Kd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return e&&(r=Yd(e)?e.checked?"true":"false":e.value),e=r,e!==a?(t.setValue(e),!0):!1}function Ar(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ay=/[\n"\\]/g;function Zt(e){return e.replace(ay,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function jo(e,t,a,r,d,f,v,b){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Xt(t)):e.value!==""+Xt(t)&&(e.value=""+Xt(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?Eo(e,v,Xt(t)):a!=null?Eo(e,v,Xt(a)):r!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Xt(b):e.removeAttribute("name")}function Qd(e,t,a,r,d,f,v,b){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){So(e);return}a=a!=null?""+Xt(a):"",t=t!=null?""+Xt(t):a,b||t===e.value||(e.value=t),e.defaultValue=t}r=r??d,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=b?e.checked:!!r,e.defaultChecked=!!r,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),So(e)}function Eo(e,t,a){t==="number"&&Ar(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ds(e,t,a,r){if(e=e.options,t){t={};for(var d=0;d<a.length;d++)t["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=t.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&r&&(e[a].defaultSelected=!0)}else{for(a=""+Xt(a),t=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,r&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Jd(e,t,a){if(t!=null&&(t=""+Xt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Xt(a):""}function Xd(e,t,a,r){if(t==null){if(r!=null){if(a!=null)throw Error(l(92));if(Ke(r)){if(1<r.length)throw Error(l(93));r=r[0]}a=r}a==null&&(a=""),t=a}a=Xt(t),e.defaultValue=a,r=e.textContent,r===a&&r!==""&&r!==null&&(e.value=r),So(e)}function hs(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var sy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zd(e,t,a){var r=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,a):typeof a!="number"||a===0||sy.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Wd(e,t,a){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,a!=null){for(var r in a)!a.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var d in t)r=t[d],t.hasOwnProperty(d)&&a[d]!==r&&Zd(e,d,r)}else for(var f in t)t.hasOwnProperty(f)&&Zd(e,f,t[f])}function To(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ry=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rr(e){return ry.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function An(){}var No=null;function ko(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fs=null,ms=null;function Fd(e){var t=os(e);if(t&&(e=t.stateNode)){var a=e[Rt]||null;e:switch(e=t.stateNode,t.type){case"input":if(jo(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Zt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var d=r[Rt]||null;if(!d)throw Error(l(90));jo(r,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<a.length;t++)r=a[t],r.form===e.form&&Kd(r)}break e;case"textarea":Jd(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&ds(e,!!a.multiple,t,!1)}}}var Ao=!1;function eh(e,t,a){if(Ao)return e(t,a);Ao=!0;try{var r=e(t);return r}finally{if(Ao=!1,(fs!==null||ms!==null)&&(vl(),fs&&(t=fs,e=ms,ms=fs=null,Fd(t),e)))for(t=0;t<e.length;t++)Fd(e[t])}}function gi(e,t){var a=e.stateNode;if(a===null)return null;var r=a[Rt]||null;if(r===null)return null;a=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,t,typeof a));return a}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ro=!1;if(Rn)try{var vi={};Object.defineProperty(vi,"passive",{get:function(){Ro=!0}}),window.addEventListener("test",vi,vi),window.removeEventListener("test",vi,vi)}catch{Ro=!1}var na=null,Co=null,Cr=null;function th(){if(Cr)return Cr;var e,t=Co,a=t.length,r,d="value"in na?na.value:na.textContent,f=d.length;for(e=0;e<a&&t[e]===d[e];e++);var v=a-e;for(r=1;r<=v&&t[a-r]===d[f-r];r++);return Cr=d.slice(e,1<r?1-r:void 0)}function Or(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dr(){return!0}function nh(){return!1}function Ct(e){function t(a,r,d,f,v){this._reactName=a,this._targetInst=d,this.type=r,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Dr:nh,this.isPropagationStopped=nh,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),t}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mr=Ct(Ra),yi=w({},Ra,{view:0,detail:0}),ly=Ct(yi),Oo,Do,bi,Ur=w({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bi&&(bi&&e.type==="mousemove"?(Oo=e.screenX-bi.screenX,Do=e.screenY-bi.screenY):Do=Oo=0,bi=e),Oo)},movementY:function(e){return"movementY"in e?e.movementY:Do}}),ah=Ct(Ur),oy=w({},Ur,{dataTransfer:0}),cy=Ct(oy),uy=w({},yi,{relatedTarget:0}),Mo=Ct(uy),dy=w({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),hy=Ct(dy),fy=w({},Ra,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),my=Ct(fy),py=w({},Ra,{data:0}),sh=Ct(py),gy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function by(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yy[e])?!!t[e]:!1}function Uo(){return by}var wy=w({},yi,{key:function(e){if(e.key){var t=gy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Or(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uo,charCode:function(e){return e.type==="keypress"?Or(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Or(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xy=Ct(wy),_y=w({},Ur,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ih=Ct(_y),Sy=w({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uo}),jy=Ct(Sy),Ey=w({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ty=Ct(Ey),Ny=w({},Ur,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ky=Ct(Ny),Ay=w({},Ra,{newState:0,oldState:0}),Ry=Ct(Ay),Cy=[9,13,27,32],zo=Rn&&"CompositionEvent"in window,wi=null;Rn&&"documentMode"in document&&(wi=document.documentMode);var Oy=Rn&&"TextEvent"in window&&!wi,rh=Rn&&(!zo||wi&&8<wi&&11>=wi),lh=" ",oh=!1;function ch(e,t){switch(e){case"keyup":return Cy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ps=!1;function Dy(e,t){switch(e){case"compositionend":return uh(t);case"keypress":return t.which!==32?null:(oh=!0,lh);case"textInput":return e=t.data,e===lh&&oh?null:e;default:return null}}function My(e,t){if(ps)return e==="compositionend"||!zo&&ch(e,t)?(e=th(),Cr=Co=na=null,ps=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rh&&t.locale!=="ko"?null:t.data;default:return null}}var Uy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Uy[e.type]:t==="textarea"}function hh(e,t,a,r){fs?ms?ms.push(r):ms=[r]:fs=r,t=jl(t,"onChange"),0<t.length&&(a=new Mr("onChange","change",null,a,r),e.push({event:a,listeners:t}))}var xi=null,_i=null;function zy(e){Jm(e,0)}function zr(e){var t=pi(e);if(Kd(t))return e}function fh(e,t){if(e==="change")return t}var mh=!1;if(Rn){var Lo;if(Rn){var Bo="oninput"in document;if(!Bo){var ph=document.createElement("div");ph.setAttribute("oninput","return;"),Bo=typeof ph.oninput=="function"}Lo=Bo}else Lo=!1;mh=Lo&&(!document.documentMode||9<document.documentMode)}function gh(){xi&&(xi.detachEvent("onpropertychange",vh),_i=xi=null)}function vh(e){if(e.propertyName==="value"&&zr(_i)){var t=[];hh(t,_i,e,ko(e)),eh(zy,t)}}function Ly(e,t,a){e==="focusin"?(gh(),xi=t,_i=a,xi.attachEvent("onpropertychange",vh)):e==="focusout"&&gh()}function By(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zr(_i)}function $y(e,t){if(e==="click")return zr(t)}function qy(e,t){if(e==="input"||e==="change")return zr(t)}function Py(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lt=typeof Object.is=="function"?Object.is:Py;function Si(e,t){if(Lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var d=a[r];if(!as.call(t,d)||!Lt(e[d],t[d]))return!1}return!0}function yh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bh(e,t){var a=yh(e);e=0;for(var r;a;){if(a.nodeType===3){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=yh(a)}}function wh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ar(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Ar(e.document)}return t}function $o(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Hy=Rn&&"documentMode"in document&&11>=document.documentMode,gs=null,qo=null,ji=null,Po=!1;function _h(e,t,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Po||gs==null||gs!==Ar(r)||(r=gs,"selectionStart"in r&&$o(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ji&&Si(ji,r)||(ji=r,r=jl(qo,"onSelect"),0<r.length&&(t=new Mr("onSelect","select",null,t,a),e.push({event:t,listeners:r}),t.target=gs)))}function Ca(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var vs={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionrun:Ca("Transition","TransitionRun"),transitionstart:Ca("Transition","TransitionStart"),transitioncancel:Ca("Transition","TransitionCancel"),transitionend:Ca("Transition","TransitionEnd")},Ho={},Sh={};Rn&&(Sh=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Oa(e){if(Ho[e])return Ho[e];if(!vs[e])return e;var t=vs[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Sh)return Ho[e]=t[a];return e}var jh=Oa("animationend"),Eh=Oa("animationiteration"),Th=Oa("animationstart"),Gy=Oa("transitionrun"),Iy=Oa("transitionstart"),Vy=Oa("transitioncancel"),Nh=Oa("transitionend"),kh=new Map,Go="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Go.push("scrollEnd");function un(e,t){kh.set(e,t),Aa(t,[e])}var Lr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Wt=[],ys=0,Io=0;function Br(){for(var e=ys,t=Io=ys=0;t<e;){var a=Wt[t];Wt[t++]=null;var r=Wt[t];Wt[t++]=null;var d=Wt[t];Wt[t++]=null;var f=Wt[t];if(Wt[t++]=null,r!==null&&d!==null){var v=r.pending;v===null?d.next=d:(d.next=v.next,v.next=d),r.pending=d}f!==0&&Ah(a,d,f)}}function $r(e,t,a,r){Wt[ys++]=e,Wt[ys++]=t,Wt[ys++]=a,Wt[ys++]=r,Io|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Vo(e,t,a,r){return $r(e,t,a,r),qr(e)}function Da(e,t){return $r(e,null,null,t),qr(e)}function Ah(e,t,a){e.lanes|=a;var r=e.alternate;r!==null&&(r.lanes|=a);for(var d=!1,f=e.return;f!==null;)f.childLanes|=a,r=f.alternate,r!==null&&(r.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&t!==null&&(d=31-Nt(a),e=f.hiddenUpdates,r=e[d],r===null?e[d]=[t]:r.push(t),t.lane=a|536870912),f):null}function qr(e){if(50<Yi)throw Yi=0,eu=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var bs={};function Yy(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(e,t,a,r){return new Yy(e,t,a,r)}function Yo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cn(e,t){var a=e.alternate;return a===null?(a=Bt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Rh(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Pr(e,t,a,r,d,f){var v=0;if(r=e,typeof e=="function")Yo(e)&&(v=1);else if(typeof e=="string")v=Zb(e,a,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case H:return e=Bt(31,a,t,d),e.elementType=H,e.lanes=f,e;case A:return Ma(a.children,d,f,t);case T:v=8,d|=24;break;case C:return e=Bt(12,a,t,d|2),e.elementType=C,e.lanes=f,e;case K:return e=Bt(13,a,t,d),e.elementType=K,e.lanes=f,e;case Y:return e=Bt(19,a,t,d),e.elementType=Y,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:v=10;break e;case D:v=9;break e;case J:v=11;break e;case Q:v=14;break e;case te:v=16,r=null;break e}v=29,a=Error(l(130,e===null?"null":typeof e,"")),r=null}return t=Bt(v,a,t,d),t.elementType=e,t.type=r,t.lanes=f,t}function Ma(e,t,a,r){return e=Bt(7,e,r,t),e.lanes=a,e}function Ko(e,t,a){return e=Bt(6,e,null,t),e.lanes=a,e}function Ch(e){var t=Bt(18,null,null,0);return t.stateNode=e,t}function Qo(e,t,a){return t=Bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Oh=new WeakMap;function Ft(e,t){if(typeof e=="object"&&e!==null){var a=Oh.get(e);return a!==void 0?a:(t={value:e,source:t,stack:ci(t)},Oh.set(e,t),t)}return{value:e,source:t,stack:ci(t)}}var ws=[],xs=0,Hr=null,Ei=0,en=[],tn=0,aa=null,Sn=1,jn="";function On(e,t){ws[xs++]=Ei,ws[xs++]=Hr,Hr=e,Ei=t}function Dh(e,t,a){en[tn++]=Sn,en[tn++]=jn,en[tn++]=aa,aa=e;var r=Sn;e=jn;var d=32-Nt(r)-1;r&=~(1<<d),a+=1;var f=32-Nt(t)+d;if(30<f){var v=d-d%5;f=(r&(1<<v)-1).toString(32),r>>=v,d-=v,Sn=1<<32-Nt(t)+d|a<<d|r,jn=f+e}else Sn=1<<f|a<<d|r,jn=e}function Jo(e){e.return!==null&&(On(e,1),Dh(e,1,0))}function Xo(e){for(;e===Hr;)Hr=ws[--xs],ws[xs]=null,Ei=ws[--xs],ws[xs]=null;for(;e===aa;)aa=en[--tn],en[tn]=null,jn=en[--tn],en[tn]=null,Sn=en[--tn],en[tn]=null}function Mh(e,t){en[tn++]=Sn,en[tn++]=jn,en[tn++]=aa,Sn=t.id,jn=t.overflow,aa=e}var yt=null,Ve=null,Ne=!1,sa=null,nn=!1,Zo=Error(l(519));function ia(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ti(Ft(t,e)),Zo}function Uh(e){var t=e.stateNode,a=e.type,r=e.memoizedProps;switch(t[vt]=e,t[Rt]=r,a){case"dialog":Se("cancel",t),Se("close",t);break;case"iframe":case"object":case"embed":Se("load",t);break;case"video":case"audio":for(a=0;a<Qi.length;a++)Se(Qi[a],t);break;case"source":Se("error",t);break;case"img":case"image":case"link":Se("error",t),Se("load",t);break;case"details":Se("toggle",t);break;case"input":Se("invalid",t),Qd(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Se("invalid",t);break;case"textarea":Se("invalid",t),Xd(t,r.value,r.defaultValue,r.children)}a=r.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||r.suppressHydrationWarning===!0||Fm(t.textContent,a)?(r.popover!=null&&(Se("beforetoggle",t),Se("toggle",t)),r.onScroll!=null&&Se("scroll",t),r.onScrollEnd!=null&&Se("scrollend",t),r.onClick!=null&&(t.onclick=An),t=!0):t=!1,t||ia(e,!0)}function zh(e){for(yt=e.return;yt;)switch(yt.tag){case 5:case 31:case 13:nn=!1;return;case 27:case 3:nn=!0;return;default:yt=yt.return}}function _s(e){if(e!==yt)return!1;if(!Ne)return zh(e),Ne=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||pu(e.type,e.memoizedProps)),a=!a),a&&Ve&&ia(e),zh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Ve=op(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Ve=op(e)}else t===27?(t=Ve,ba(e.type)?(e=wu,wu=null,Ve=e):Ve=t):Ve=yt?sn(e.stateNode.nextSibling):null;return!0}function Ua(){Ve=yt=null,Ne=!1}function Wo(){var e=sa;return e!==null&&(Ut===null?Ut=e:Ut.push.apply(Ut,e),sa=null),e}function Ti(e){sa===null?sa=[e]:sa.push(e)}var Fo=j(null),za=null,Dn=null;function ra(e,t,a){W(Fo,t._currentValue),t._currentValue=a}function Mn(e){e._currentValue=Fo.current,z(Fo)}function ec(e,t,a){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===a)break;e=e.return}}function tc(e,t,a,r){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var v=d.child;f=f.firstContext;e:for(;f!==null;){var b=f;f=d;for(var N=0;N<t.length;N++)if(b.context===t[N]){f.lanes|=a,b=f.alternate,b!==null&&(b.lanes|=a),ec(f.return,a,e),r||(v=null);break e}f=b.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(l(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),ec(v,a,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Ss(e,t,a,r){e=null;for(var d=t,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(l(387));if(v=v.memoizedProps,v!==null){var b=d.type;Lt(d.pendingProps.value,v.value)||(e!==null?e.push(b):e=[b])}}else if(d===ke.current){if(v=d.alternate,v===null)throw Error(l(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Fi):e=[Fi])}d=d.return}e!==null&&tc(t,e,a,r),t.flags|=262144}function Gr(e){for(e=e.firstContext;e!==null;){if(!Lt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function La(e){za=e,Dn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function bt(e){return Lh(za,e)}function Ir(e,t){return za===null&&La(e),Lh(e,t)}function Lh(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Dn===null){if(e===null)throw Error(l(308));Dn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Dn=Dn.next=t;return a}var Ky=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Qy=i.unstable_scheduleCallback,Jy=i.unstable_NormalPriority,rt={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nc(){return{controller:new Ky,data:new Map,refCount:0}}function Ni(e){e.refCount--,e.refCount===0&&Qy(Jy,function(){e.controller.abort()})}var ki=null,ac=0,js=0,Es=null;function Xy(e,t){if(ki===null){var a=ki=[];ac=0,js=ru(),Es={status:"pending",value:void 0,then:function(r){a.push(r)}}}return ac++,t.then(Bh,Bh),t}function Bh(){if(--ac===0&&ki!==null){Es!==null&&(Es.status="fulfilled");var e=ki;ki=null,js=0,Es=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Zy(e,t){var a=[],r={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var d=0;d<a.length;d++)(0,a[d])(t)},function(d){for(r.status="rejected",r.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),r}var $h=k.S;k.S=function(e,t){Sm=gt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Xy(e,t),$h!==null&&$h(e,t)};var Ba=j(null);function sc(){var e=Ba.current;return e!==null?e:He.pooledCache}function Vr(e,t){t===null?W(Ba,Ba.current):W(Ba,t.pool)}function qh(){var e=sc();return e===null?null:{parent:rt._currentValue,pool:e}}var Ts=Error(l(460)),ic=Error(l(474)),Yr=Error(l(542)),Kr={then:function(){}};function Ph(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Hh(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(An,An),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ih(e),e;default:if(typeof t.status=="string")t.then(An,An);else{if(e=He,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=r}},function(r){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ih(e),e}throw qa=t,Ts}}function $a(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(qa=a,Ts):a}}var qa=null;function Gh(){if(qa===null)throw Error(l(459));var e=qa;return qa=null,e}function Ih(e){if(e===Ts||e===Yr)throw Error(l(483))}var Ns=null,Ai=0;function Qr(e){var t=Ai;return Ai+=1,Ns===null&&(Ns=[]),Hh(Ns,e,t)}function Ri(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Jr(e,t){throw t.$$typeof===S?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Vh(e){function t(O,R){if(e){var M=O.deletions;M===null?(O.deletions=[R],O.flags|=16):M.push(R)}}function a(O,R){if(!e)return null;for(;R!==null;)t(O,R),R=R.sibling;return null}function r(O){for(var R=new Map;O!==null;)O.key!==null?R.set(O.key,O):R.set(O.index,O),O=O.sibling;return R}function d(O,R){return O=Cn(O,R),O.index=0,O.sibling=null,O}function f(O,R,M){return O.index=M,e?(M=O.alternate,M!==null?(M=M.index,M<R?(O.flags|=67108866,R):M):(O.flags|=67108866,R)):(O.flags|=1048576,R)}function v(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function b(O,R,M,I){return R===null||R.tag!==6?(R=Ko(M,O.mode,I),R.return=O,R):(R=d(R,M),R.return=O,R)}function N(O,R,M,I){var oe=M.type;return oe===A?P(O,R,M.props.children,I,M.key):R!==null&&(R.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===te&&$a(oe)===R.type)?(R=d(R,M.props),Ri(R,M),R.return=O,R):(R=Pr(M.type,M.key,M.props,null,O.mode,I),Ri(R,M),R.return=O,R)}function U(O,R,M,I){return R===null||R.tag!==4||R.stateNode.containerInfo!==M.containerInfo||R.stateNode.implementation!==M.implementation?(R=Qo(M,O.mode,I),R.return=O,R):(R=d(R,M.children||[]),R.return=O,R)}function P(O,R,M,I,oe){return R===null||R.tag!==7?(R=Ma(M,O.mode,I,oe),R.return=O,R):(R=d(R,M),R.return=O,R)}function V(O,R,M){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Ko(""+R,O.mode,M),R.return=O,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case x:return M=Pr(R.type,R.key,R.props,null,O.mode,M),Ri(M,R),M.return=O,M;case _:return R=Qo(R,O.mode,M),R.return=O,R;case te:return R=$a(R),V(O,R,M)}if(Ke(R)||Te(R))return R=Ma(R,O.mode,M,null),R.return=O,R;if(typeof R.then=="function")return V(O,Qr(R),M);if(R.$$typeof===L)return V(O,Ir(O,R),M);Jr(O,R)}return null}function B(O,R,M,I){var oe=R!==null?R.key:null;if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return oe!==null?null:b(O,R,""+M,I);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case x:return M.key===oe?N(O,R,M,I):null;case _:return M.key===oe?U(O,R,M,I):null;case te:return M=$a(M),B(O,R,M,I)}if(Ke(M)||Te(M))return oe!==null?null:P(O,R,M,I,null);if(typeof M.then=="function")return B(O,R,Qr(M),I);if(M.$$typeof===L)return B(O,R,Ir(O,M),I);Jr(O,M)}return null}function q(O,R,M,I,oe){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return O=O.get(M)||null,b(R,O,""+I,oe);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case x:return O=O.get(I.key===null?M:I.key)||null,N(R,O,I,oe);case _:return O=O.get(I.key===null?M:I.key)||null,U(R,O,I,oe);case te:return I=$a(I),q(O,R,M,I,oe)}if(Ke(I)||Te(I))return O=O.get(M)||null,P(R,O,I,oe,null);if(typeof I.then=="function")return q(O,R,M,Qr(I),oe);if(I.$$typeof===L)return q(O,R,M,Ir(R,I),oe);Jr(R,I)}return null}function ne(O,R,M,I){for(var oe=null,Re=null,se=R,we=R=0,Ee=null;se!==null&&we<M.length;we++){se.index>we?(Ee=se,se=null):Ee=se.sibling;var Ce=B(O,se,M[we],I);if(Ce===null){se===null&&(se=Ee);break}e&&se&&Ce.alternate===null&&t(O,se),R=f(Ce,R,we),Re===null?oe=Ce:Re.sibling=Ce,Re=Ce,se=Ee}if(we===M.length)return a(O,se),Ne&&On(O,we),oe;if(se===null){for(;we<M.length;we++)se=V(O,M[we],I),se!==null&&(R=f(se,R,we),Re===null?oe=se:Re.sibling=se,Re=se);return Ne&&On(O,we),oe}for(se=r(se);we<M.length;we++)Ee=q(se,O,we,M[we],I),Ee!==null&&(e&&Ee.alternate!==null&&se.delete(Ee.key===null?we:Ee.key),R=f(Ee,R,we),Re===null?oe=Ee:Re.sibling=Ee,Re=Ee);return e&&se.forEach(function(ja){return t(O,ja)}),Ne&&On(O,we),oe}function de(O,R,M,I){if(M==null)throw Error(l(151));for(var oe=null,Re=null,se=R,we=R=0,Ee=null,Ce=M.next();se!==null&&!Ce.done;we++,Ce=M.next()){se.index>we?(Ee=se,se=null):Ee=se.sibling;var ja=B(O,se,Ce.value,I);if(ja===null){se===null&&(se=Ee);break}e&&se&&ja.alternate===null&&t(O,se),R=f(ja,R,we),Re===null?oe=ja:Re.sibling=ja,Re=ja,se=Ee}if(Ce.done)return a(O,se),Ne&&On(O,we),oe;if(se===null){for(;!Ce.done;we++,Ce=M.next())Ce=V(O,Ce.value,I),Ce!==null&&(R=f(Ce,R,we),Re===null?oe=Ce:Re.sibling=Ce,Re=Ce);return Ne&&On(O,we),oe}for(se=r(se);!Ce.done;we++,Ce=M.next())Ce=q(se,O,we,Ce.value,I),Ce!==null&&(e&&Ce.alternate!==null&&se.delete(Ce.key===null?we:Ce.key),R=f(Ce,R,we),Re===null?oe=Ce:Re.sibling=Ce,Re=Ce);return e&&se.forEach(function(o0){return t(O,o0)}),Ne&&On(O,we),oe}function Pe(O,R,M,I){if(typeof M=="object"&&M!==null&&M.type===A&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case x:e:{for(var oe=M.key;R!==null;){if(R.key===oe){if(oe=M.type,oe===A){if(R.tag===7){a(O,R.sibling),I=d(R,M.props.children),I.return=O,O=I;break e}}else if(R.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===te&&$a(oe)===R.type){a(O,R.sibling),I=d(R,M.props),Ri(I,M),I.return=O,O=I;break e}a(O,R);break}else t(O,R);R=R.sibling}M.type===A?(I=Ma(M.props.children,O.mode,I,M.key),I.return=O,O=I):(I=Pr(M.type,M.key,M.props,null,O.mode,I),Ri(I,M),I.return=O,O=I)}return v(O);case _:e:{for(oe=M.key;R!==null;){if(R.key===oe)if(R.tag===4&&R.stateNode.containerInfo===M.containerInfo&&R.stateNode.implementation===M.implementation){a(O,R.sibling),I=d(R,M.children||[]),I.return=O,O=I;break e}else{a(O,R);break}else t(O,R);R=R.sibling}I=Qo(M,O.mode,I),I.return=O,O=I}return v(O);case te:return M=$a(M),Pe(O,R,M,I)}if(Ke(M))return ne(O,R,M,I);if(Te(M)){if(oe=Te(M),typeof oe!="function")throw Error(l(150));return M=oe.call(M),de(O,R,M,I)}if(typeof M.then=="function")return Pe(O,R,Qr(M),I);if(M.$$typeof===L)return Pe(O,R,Ir(O,M),I);Jr(O,M)}return typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint"?(M=""+M,R!==null&&R.tag===6?(a(O,R.sibling),I=d(R,M),I.return=O,O=I):(a(O,R),I=Ko(M,O.mode,I),I.return=O,O=I),v(O)):a(O,R)}return function(O,R,M,I){try{Ai=0;var oe=Pe(O,R,M,I);return Ns=null,oe}catch(se){if(se===Ts||se===Yr)throw se;var Re=Bt(29,se,null,O.mode);return Re.lanes=I,Re.return=O,Re}finally{}}}var Pa=Vh(!0),Yh=Vh(!1),la=!1;function rc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function oa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ca(e,t,a){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(De&2)!==0){var d=r.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),r.pending=t,t=qr(e),Ah(e,null,a),t}return $r(e,r,t,a),qr(e)}function Ci(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,tt(e,a)}}function oc(e,t){var a=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?d=f=t:f=f.next=t}else d=f=t;a={baseState:r.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:r.shared,callbacks:r.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var cc=!1;function Oi(){if(cc){var e=Es;if(e!==null)throw e}}function Di(e,t,a,r){cc=!1;var d=e.updateQueue;la=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var N=b,U=N.next;N.next=null,v===null?f=U:v.next=U,v=N;var P=e.alternate;P!==null&&(P=P.updateQueue,b=P.lastBaseUpdate,b!==v&&(b===null?P.firstBaseUpdate=U:b.next=U,P.lastBaseUpdate=N))}if(f!==null){var V=d.baseState;v=0,P=U=N=null,b=f;do{var B=b.lane&-536870913,q=B!==b.lane;if(q?(je&B)===B:(r&B)===B){B!==0&&B===js&&(cc=!0),P!==null&&(P=P.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ne=e,de=b;B=t;var Pe=a;switch(de.tag){case 1:if(ne=de.payload,typeof ne=="function"){V=ne.call(Pe,V,B);break e}V=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=de.payload,B=typeof ne=="function"?ne.call(Pe,V,B):ne,B==null)break e;V=w({},V,B);break e;case 2:la=!0}}B=b.callback,B!==null&&(e.flags|=64,q&&(e.flags|=8192),q=d.callbacks,q===null?d.callbacks=[B]:q.push(B))}else q={lane:B,tag:b.tag,payload:b.payload,callback:b.callback,next:null},P===null?(U=P=q,N=V):P=P.next=q,v|=B;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;q=b,b=q.next,q.next=null,d.lastBaseUpdate=q,d.shared.pending=null}}while(!0);P===null&&(N=V),d.baseState=N,d.firstBaseUpdate=U,d.lastBaseUpdate=P,f===null&&(d.shared.lanes=0),ma|=v,e.lanes=v,e.memoizedState=V}}function Kh(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Qh(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Kh(a[e],t)}var ks=j(null),Xr=j(0);function Jh(e,t){e=Gn,W(Xr,e),W(ks,t),Gn=e|t.baseLanes}function uc(){W(Xr,Gn),W(ks,ks.current)}function dc(){Gn=Xr.current,z(ks),z(Xr)}var $t=j(null),an=null;function ua(e){var t=e.alternate;W(nt,nt.current&1),W($t,e),an===null&&(t===null||ks.current!==null||t.memoizedState!==null)&&(an=e)}function hc(e){W(nt,nt.current),W($t,e),an===null&&(an=e)}function Xh(e){e.tag===22?(W(nt,nt.current),W($t,e),an===null&&(an=e)):da()}function da(){W(nt,nt.current),W($t,$t.current)}function qt(e){z($t),an===e&&(an=null),z(nt)}var nt=j(0);function Zr(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||yu(a)||bu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Un=0,be=null,$e=null,lt=null,Wr=!1,As=!1,Ha=!1,Fr=0,Mi=0,Rs=null,Wy=0;function Fe(){throw Error(l(321))}function fc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Lt(e[a],t[a]))return!1;return!0}function mc(e,t,a,r,d,f){return Un=f,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,k.H=e===null||e.memoizedState===null?Mf:Ac,Ha=!1,f=a(r,d),Ha=!1,As&&(f=Wh(t,a,r,d)),Zh(e),f}function Zh(e){k.H=Li;var t=$e!==null&&$e.next!==null;if(Un=0,lt=$e=be=null,Wr=!1,Mi=0,Rs=null,t)throw Error(l(300));e===null||ot||(e=e.dependencies,e!==null&&Gr(e)&&(ot=!0))}function Wh(e,t,a,r){be=e;var d=0;do{if(As&&(Rs=null),Mi=0,As=!1,25<=d)throw Error(l(301));if(d+=1,lt=$e=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}k.H=Uf,f=t(a,r)}while(As);return f}function Fy(){var e=k.H,t=e.useState()[0];return t=typeof t.then=="function"?Ui(t):t,e=e.useState()[0],($e!==null?$e.memoizedState:null)!==e&&(be.flags|=1024),t}function pc(){var e=Fr!==0;return Fr=0,e}function gc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function vc(e){if(Wr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Wr=!1}Un=0,lt=$e=be=null,As=!1,Mi=Fr=0,Rs=null}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?be.memoizedState=lt=e:lt=lt.next=e,lt}function at(){if($e===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=lt===null?be.memoizedState:lt.next;if(t!==null)lt=t,$e=e;else{if(e===null)throw be.alternate===null?Error(l(467)):Error(l(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},lt===null?be.memoizedState=lt=e:lt=lt.next=e}return lt}function el(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ui(e){var t=Mi;return Mi+=1,Rs===null&&(Rs=[]),e=Hh(Rs,e,t),t=be,(lt===null?t.memoizedState:lt.next)===null&&(t=t.alternate,k.H=t===null||t.memoizedState===null?Mf:Ac),e}function tl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ui(e);if(e.$$typeof===L)return bt(e)}throw Error(l(438,String(e)))}function yc(e){var t=null,a=be.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var r=be.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=el(),be.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),r=0;r<e;r++)a[r]=le;return t.index++,a}function zn(e,t){return typeof t=="function"?t(e):t}function nl(e){var t=at();return bc(t,$e,e)}function bc(e,t,a){var r=e.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=a;var d=e.baseQueue,f=r.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}t.baseQueue=d=f,r.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{t=d.next;var b=v=null,N=null,U=t,P=!1;do{var V=U.lane&-536870913;if(V!==U.lane?(je&V)===V:(Un&V)===V){var B=U.revertLane;if(B===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),V===js&&(P=!0);else if((Un&B)===B){U=U.next,B===js&&(P=!0);continue}else V={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(b=N=V,v=f):N=N.next=V,be.lanes|=B,ma|=B;V=U.action,Ha&&a(f,V),f=U.hasEagerState?U.eagerState:a(f,V)}else B={lane:V,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(b=N=B,v=f):N=N.next=B,be.lanes|=V,ma|=V;U=U.next}while(U!==null&&U!==t);if(N===null?v=f:N.next=b,!Lt(f,e.memoizedState)&&(ot=!0,P&&(a=Es,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=N,r.lastRenderedState=f}return d===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function wc(e){var t=at(),a=t.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var r=a.dispatch,d=a.pending,f=t.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do f=e(f,v.action),v=v.next;while(v!==d);Lt(f,t.memoizedState)||(ot=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),a.lastRenderedState=f}return[f,r]}function Fh(e,t,a){var r=be,d=at(),f=Ne;if(f){if(a===void 0)throw Error(l(407));a=a()}else a=t();var v=!Lt(($e||d).memoizedState,a);if(v&&(d.memoizedState=a,ot=!0),d=d.queue,Sc(nf.bind(null,r,d,e),[e]),d.getSnapshot!==t||v||lt!==null&&lt.memoizedState.tag&1){if(r.flags|=2048,Cs(9,{destroy:void 0},tf.bind(null,r,d,a,t),null),He===null)throw Error(l(349));f||(Un&127)!==0||ef(r,t,a)}return a}function ef(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=be.updateQueue,t===null?(t=el(),be.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function tf(e,t,a,r){t.value=a,t.getSnapshot=r,af(t)&&sf(e)}function nf(e,t,a){return a(function(){af(t)&&sf(e)})}function af(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Lt(e,a)}catch{return!0}}function sf(e){var t=Da(e,2);t!==null&&zt(t,e,2)}function xc(e){var t=kt();if(typeof e=="function"){var a=e;if(e=a(),Ha){_n(!0);try{a()}finally{_n(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zn,lastRenderedState:e},t}function rf(e,t,a,r){return e.baseState=a,bc(e,$e,typeof r=="function"?r:zn)}function eb(e,t,a,r,d){if(il(e))throw Error(l(485));if(e=t.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};k.T!==null?a(!0):f.isTransition=!1,r(f),a=t.pending,a===null?(f.next=t.pending=f,lf(t,f)):(f.next=a.next,t.pending=a.next=f)}}function lf(e,t){var a=t.action,r=t.payload,d=e.state;if(t.isTransition){var f=k.T,v={};k.T=v;try{var b=a(d,r),N=k.S;N!==null&&N(v,b),of(e,t,b)}catch(U){_c(e,t,U)}finally{f!==null&&v.types!==null&&(f.types=v.types),k.T=f}}else try{f=a(d,r),of(e,t,f)}catch(U){_c(e,t,U)}}function of(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(r){cf(e,t,r)},function(r){return _c(e,t,r)}):cf(e,t,a)}function cf(e,t,a){t.status="fulfilled",t.value=a,uf(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,lf(e,a)))}function _c(e,t,a){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=a,uf(t),t=t.next;while(t!==r)}e.action=null}function uf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function df(e,t){return t}function hf(e,t){if(Ne){var a=He.formState;if(a!==null){e:{var r=be;if(Ne){if(Ve){t:{for(var d=Ve,f=nn;d.nodeType!==8;){if(!f){d=null;break t}if(d=sn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Ve=sn(d.nextSibling),r=d.data==="F!";break e}}ia(r)}r=!1}r&&(t=a[0])}}return a=kt(),a.memoizedState=a.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:df,lastRenderedState:t},a.queue=r,a=Cf.bind(null,be,r),r.dispatch=a,r=xc(!1),f=kc.bind(null,be,!1,r.queue),r=kt(),d={state:t,dispatch:null,action:e,pending:null},r.queue=d,a=eb.bind(null,be,d,f,a),d.dispatch=a,r.memoizedState=e,[t,a,!1]}function ff(e){var t=at();return mf(t,$e,e)}function mf(e,t,a){if(t=bc(e,t,df)[0],e=nl(zn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=Ui(t)}catch(v){throw v===Ts?Yr:v}else r=t;t=at();var d=t.queue,f=d.dispatch;return a!==t.memoizedState&&(be.flags|=2048,Cs(9,{destroy:void 0},tb.bind(null,d,a),null)),[r,f,e]}function tb(e,t){e.action=t}function pf(e){var t=at(),a=$e;if(a!==null)return mf(t,a,e);at(),t=t.memoizedState,a=at();var r=a.queue.dispatch;return a.memoizedState=e,[t,r,!1]}function Cs(e,t,a,r){return e={tag:e,create:a,deps:r,inst:t,next:null},t=be.updateQueue,t===null&&(t=el(),be.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,t.lastEffect=e),e}function gf(){return at().memoizedState}function al(e,t,a,r){var d=kt();be.flags|=e,d.memoizedState=Cs(1|t,{destroy:void 0},a,r===void 0?null:r)}function sl(e,t,a,r){var d=at();r=r===void 0?null:r;var f=d.memoizedState.inst;$e!==null&&r!==null&&fc(r,$e.memoizedState.deps)?d.memoizedState=Cs(t,f,a,r):(be.flags|=e,d.memoizedState=Cs(1|t,f,a,r))}function vf(e,t){al(8390656,8,e,t)}function Sc(e,t){sl(2048,8,e,t)}function nb(e){be.flags|=4;var t=be.updateQueue;if(t===null)t=el(),be.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function yf(e){var t=at().memoizedState;return nb({ref:t,nextImpl:e}),function(){if((De&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function bf(e,t){return sl(4,2,e,t)}function wf(e,t){return sl(4,4,e,t)}function xf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _f(e,t,a){a=a!=null?a.concat([e]):null,sl(4,4,xf.bind(null,t,e),a)}function jc(){}function Sf(e,t){var a=at();t=t===void 0?null:t;var r=a.memoizedState;return t!==null&&fc(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function jf(e,t){var a=at();t=t===void 0?null:t;var r=a.memoizedState;if(t!==null&&fc(t,r[1]))return r[0];if(r=e(),Ha){_n(!0);try{e()}finally{_n(!1)}}return a.memoizedState=[r,t],r}function Ec(e,t,a){return a===void 0||(Un&1073741824)!==0&&(je&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Em(),be.lanes|=e,ma|=e,a)}function Ef(e,t,a,r){return Lt(a,t)?a:ks.current!==null?(e=Ec(e,a,r),Lt(e,t)||(ot=!0),e):(Un&42)===0||(Un&1073741824)!==0&&(je&261930)===0?(ot=!0,e.memoizedState=a):(e=Em(),be.lanes|=e,ma|=e,t)}function Tf(e,t,a,r,d){var f=G.p;G.p=f!==0&&8>f?f:8;var v=k.T,b={};k.T=b,kc(e,!1,t,a);try{var N=d(),U=k.S;if(U!==null&&U(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var P=Zy(N,r);zi(e,t,P,Gt(e))}else zi(e,t,r,Gt(e))}catch(V){zi(e,t,{then:function(){},status:"rejected",reason:V},Gt())}finally{G.p=f,v!==null&&b.types!==null&&(v.types=b.types),k.T=v}}function ab(){}function Tc(e,t,a,r){if(e.tag!==5)throw Error(l(476));var d=Nf(e).queue;Tf(e,d,t,F,a===null?ab:function(){return kf(e),a(r)})}function Nf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zn,lastRenderedState:F},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zn,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function kf(e){var t=Nf(e);t.next===null&&(t=e.alternate.memoizedState),zi(e,t.next.queue,{},Gt())}function Nc(){return bt(Fi)}function Af(){return at().memoizedState}function Rf(){return at().memoizedState}function sb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Gt();e=oa(a);var r=ca(t,e,a);r!==null&&(zt(r,t,a),Ci(r,t,a)),t={cache:nc()},e.payload=t;return}t=t.return}}function ib(e,t,a){var r=Gt();a={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},il(e)?Of(t,a):(a=Vo(e,t,a,r),a!==null&&(zt(a,e,r),Df(a,t,r)))}function Cf(e,t,a){var r=Gt();zi(e,t,a,r)}function zi(e,t,a,r){var d={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(il(e))Of(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,b=f(v,a);if(d.hasEagerState=!0,d.eagerState=b,Lt(b,v))return $r(e,t,d,0),He===null&&Br(),!1}catch{}finally{}if(a=Vo(e,t,d,r),a!==null)return zt(a,e,r),Df(a,t,r),!0}return!1}function kc(e,t,a,r){if(r={lane:2,revertLane:ru(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},il(e)){if(t)throw Error(l(479))}else t=Vo(e,a,r,2),t!==null&&zt(t,e,2)}function il(e){var t=e.alternate;return e===be||t!==null&&t===be}function Of(e,t){As=Wr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Df(e,t,a){if((a&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,tt(e,a)}}var Li={readContext:bt,use:tl,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe};Li.useEffectEvent=Fe;var Mf={readContext:bt,use:tl,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:bt,useEffect:vf,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,al(4194308,4,xf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return al(4194308,4,e,t)},useInsertionEffect:function(e,t){al(4,2,e,t)},useMemo:function(e,t){var a=kt();t=t===void 0?null:t;var r=e();if(Ha){_n(!0);try{e()}finally{_n(!1)}}return a.memoizedState=[r,t],r},useReducer:function(e,t,a){var r=kt();if(a!==void 0){var d=a(t);if(Ha){_n(!0);try{a(t)}finally{_n(!1)}}}else d=t;return r.memoizedState=r.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},r.queue=e,e=e.dispatch=ib.bind(null,be,e),[r.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:function(e){e=xc(e);var t=e.queue,a=Cf.bind(null,be,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:jc,useDeferredValue:function(e,t){var a=kt();return Ec(a,e,t)},useTransition:function(){var e=xc(!1);return e=Tf.bind(null,be,e.queue,!0,!1),kt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var r=be,d=kt();if(Ne){if(a===void 0)throw Error(l(407));a=a()}else{if(a=t(),He===null)throw Error(l(349));(je&127)!==0||ef(r,t,a)}d.memoizedState=a;var f={value:a,getSnapshot:t};return d.queue=f,vf(nf.bind(null,r,f,e),[e]),r.flags|=2048,Cs(9,{destroy:void 0},tf.bind(null,r,f,a,t),null),a},useId:function(){var e=kt(),t=He.identifierPrefix;if(Ne){var a=jn,r=Sn;a=(r&~(1<<32-Nt(r)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Fr++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Wy++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Nc,useFormState:hf,useActionState:hf,useOptimistic:function(e){var t=kt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=kc.bind(null,be,!0,a),a.dispatch=t,[e,t]},useMemoCache:yc,useCacheRefresh:function(){return kt().memoizedState=sb.bind(null,be)},useEffectEvent:function(e){var t=kt(),a={impl:e};return t.memoizedState=a,function(){if((De&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},Ac={readContext:bt,use:tl,useCallback:Sf,useContext:bt,useEffect:Sc,useImperativeHandle:_f,useInsertionEffect:bf,useLayoutEffect:wf,useMemo:jf,useReducer:nl,useRef:gf,useState:function(){return nl(zn)},useDebugValue:jc,useDeferredValue:function(e,t){var a=at();return Ef(a,$e.memoizedState,e,t)},useTransition:function(){var e=nl(zn)[0],t=at().memoizedState;return[typeof e=="boolean"?e:Ui(e),t]},useSyncExternalStore:Fh,useId:Af,useHostTransitionStatus:Nc,useFormState:ff,useActionState:ff,useOptimistic:function(e,t){var a=at();return rf(a,$e,e,t)},useMemoCache:yc,useCacheRefresh:Rf};Ac.useEffectEvent=yf;var Uf={readContext:bt,use:tl,useCallback:Sf,useContext:bt,useEffect:Sc,useImperativeHandle:_f,useInsertionEffect:bf,useLayoutEffect:wf,useMemo:jf,useReducer:wc,useRef:gf,useState:function(){return wc(zn)},useDebugValue:jc,useDeferredValue:function(e,t){var a=at();return $e===null?Ec(a,e,t):Ef(a,$e.memoizedState,e,t)},useTransition:function(){var e=wc(zn)[0],t=at().memoizedState;return[typeof e=="boolean"?e:Ui(e),t]},useSyncExternalStore:Fh,useId:Af,useHostTransitionStatus:Nc,useFormState:pf,useActionState:pf,useOptimistic:function(e,t){var a=at();return $e!==null?rf(a,$e,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:yc,useCacheRefresh:Rf};Uf.useEffectEvent=yf;function Rc(e,t,a,r){t=e.memoizedState,a=a(r,t),a=a==null?t:w({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Cc={enqueueSetState:function(e,t,a){e=e._reactInternals;var r=Gt(),d=oa(r);d.payload=t,a!=null&&(d.callback=a),t=ca(e,d,r),t!==null&&(zt(t,e,r),Ci(t,e,r))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var r=Gt(),d=oa(r);d.tag=1,d.payload=t,a!=null&&(d.callback=a),t=ca(e,d,r),t!==null&&(zt(t,e,r),Ci(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Gt(),r=oa(a);r.tag=2,t!=null&&(r.callback=t),t=ca(e,r,a),t!==null&&(zt(t,e,a),Ci(t,e,a))}};function zf(e,t,a,r,d,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,f,v):t.prototype&&t.prototype.isPureReactComponent?!Si(a,r)||!Si(d,f):!0}function Lf(e,t,a,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&Cc.enqueueReplaceState(t,t.state,null)}function Ga(e,t){var a=t;if("ref"in t){a={};for(var r in t)r!=="ref"&&(a[r]=t[r])}if(e=e.defaultProps){a===t&&(a=w({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}function Bf(e){Lr(e)}function $f(e){console.error(e)}function qf(e){Lr(e)}function rl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Pf(e,t,a){try{var r=e.onCaughtError;r(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Oc(e,t,a){return a=oa(a),a.tag=3,a.payload={element:null},a.callback=function(){rl(e,t)},a}function Hf(e){return e=oa(e),e.tag=3,e}function Gf(e,t,a,r){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=r.value;e.payload=function(){return d(f)},e.callback=function(){Pf(t,a,r)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Pf(t,a,r),typeof d!="function"&&(pa===null?pa=new Set([this]):pa.add(this));var b=r.stack;this.componentDidCatch(r.value,{componentStack:b!==null?b:""})})}function rb(e,t,a,r,d){if(a.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=a.alternate,t!==null&&Ss(t,a,d,!0),a=$t.current,a!==null){switch(a.tag){case 31:case 13:return an===null?yl():a.alternate===null&&et===0&&(et=3),a.flags&=-257,a.flags|=65536,a.lanes=d,r===Kr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([r]):t.add(r),au(e,r,d)),!1;case 22:return a.flags|=65536,r===Kr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([r]):a.add(r)),au(e,r,d)),!1}throw Error(l(435,a.tag))}return au(e,r,d),yl(),!1}if(Ne)return t=$t.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,r!==Zo&&(e=Error(l(422),{cause:r}),Ti(Ft(e,a)))):(r!==Zo&&(t=Error(l(423),{cause:r}),Ti(Ft(t,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,r=Ft(r,a),d=Oc(e.stateNode,r,d),oc(e,d),et!==4&&(et=2)),!1;var f=Error(l(520),{cause:r});if(f=Ft(f,a),Vi===null?Vi=[f]:Vi.push(f),et!==4&&(et=2),t===null)return!0;r=Ft(r,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=Oc(a.stateNode,r,e),oc(a,e),!1;case 1:if(t=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(pa===null||!pa.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Hf(d),Gf(d,e,a,r),oc(a,d),!1}a=a.return}while(a!==null);return!1}var Dc=Error(l(461)),ot=!1;function wt(e,t,a,r){t.child=e===null?Yh(t,null,a,r):Pa(t,e.child,a,r)}function If(e,t,a,r,d){a=a.render;var f=t.ref;if("ref"in r){var v={};for(var b in r)b!=="ref"&&(v[b]=r[b])}else v=r;return La(t),r=mc(e,t,a,v,f,d),b=pc(),e!==null&&!ot?(gc(e,t,d),Ln(e,t,d)):(Ne&&b&&Jo(t),t.flags|=1,wt(e,t,r,d),t.child)}function Vf(e,t,a,r,d){if(e===null){var f=a.type;return typeof f=="function"&&!Yo(f)&&f.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=f,Yf(e,t,f,r,d)):(e=Pr(a.type,null,r,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!Pc(e,d)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Si,a(v,r)&&e.ref===t.ref)return Ln(e,t,d)}return t.flags|=1,e=Cn(f,r),e.ref=t.ref,e.return=t,t.child=e}function Yf(e,t,a,r,d){if(e!==null){var f=e.memoizedProps;if(Si(f,r)&&e.ref===t.ref)if(ot=!1,t.pendingProps=r=f,Pc(e,d))(e.flags&131072)!==0&&(ot=!0);else return t.lanes=e.lanes,Ln(e,t,d)}return Mc(e,t,a,r,d)}function Kf(e,t,a,r){var d=r.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,e!==null){for(r=t.child=e.child,d=0;r!==null;)d=d|r.lanes|r.childLanes,r=r.sibling;r=d&~f}else r=0,t.child=null;return Qf(e,t,f,a,r)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Vr(t,f!==null?f.cachePool:null),f!==null?Jh(t,f):uc(),Xh(t);else return r=t.lanes=536870912,Qf(e,t,f!==null?f.baseLanes|a:a,a,r)}else f!==null?(Vr(t,f.cachePool),Jh(t,f),da(),t.memoizedState=null):(e!==null&&Vr(t,null),uc(),da());return wt(e,t,d,a),t.child}function Bi(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Qf(e,t,a,r,d){var f=sc();return f=f===null?null:{parent:rt._currentValue,pool:f},t.memoizedState={baseLanes:a,cachePool:f},e!==null&&Vr(t,null),uc(),Xh(t),e!==null&&Ss(e,t,r,!0),t.childLanes=d,null}function ll(e,t){return t=cl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Jf(e,t,a){return Pa(t,e.child,null,a),e=ll(t,t.pendingProps),e.flags|=2,qt(t),t.memoizedState=null,e}function lb(e,t,a){var r=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ne){if(r.mode==="hidden")return e=ll(t,r),t.lanes=536870912,Bi(null,e);if(hc(t),(e=Ve)?(e=lp(e,nn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:aa!==null?{id:Sn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},a=Ch(e),a.return=t,t.child=a,yt=t,Ve=null)):e=null,e===null)throw ia(t);return t.lanes=536870912,null}return ll(t,r)}var f=e.memoizedState;if(f!==null){var v=f.dehydrated;if(hc(t),d)if(t.flags&256)t.flags&=-257,t=Jf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(ot||Ss(e,t,a,!1),d=(a&e.childLanes)!==0,ot||d){if(r=He,r!==null&&(v=Jt(r,a),v!==0&&v!==f.retryLane))throw f.retryLane=v,Da(e,v),zt(r,e,v),Dc;yl(),t=Jf(e,t,a)}else e=f.treeContext,Ve=sn(v.nextSibling),yt=t,Ne=!0,sa=null,nn=!1,e!==null&&Mh(t,e),t=ll(t,r),t.flags|=4096;return t}return e=Cn(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ol(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Mc(e,t,a,r,d){return La(t),a=mc(e,t,a,r,void 0,d),r=pc(),e!==null&&!ot?(gc(e,t,d),Ln(e,t,d)):(Ne&&r&&Jo(t),t.flags|=1,wt(e,t,a,d),t.child)}function Xf(e,t,a,r,d,f){return La(t),t.updateQueue=null,a=Wh(t,r,a,d),Zh(e),r=pc(),e!==null&&!ot?(gc(e,t,f),Ln(e,t,f)):(Ne&&r&&Jo(t),t.flags|=1,wt(e,t,a,f),t.child)}function Zf(e,t,a,r,d){if(La(t),t.stateNode===null){var f=bs,v=a.contextType;typeof v=="object"&&v!==null&&(f=bt(v)),f=new a(r,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Cc,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=r,f.state=t.memoizedState,f.refs={},rc(t),v=a.contextType,f.context=typeof v=="object"&&v!==null?bt(v):bs,f.state=t.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Rc(t,a,v,r),f.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Cc.enqueueReplaceState(f,f.state,null),Di(t,r,f,d),Oi(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){f=t.stateNode;var b=t.memoizedProps,N=Ga(a,b);f.props=N;var U=f.context,P=a.contextType;v=bs,typeof P=="object"&&P!==null&&(v=bt(P));var V=a.getDerivedStateFromProps;P=typeof V=="function"||typeof f.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,P||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b||U!==v)&&Lf(t,f,r,v),la=!1;var B=t.memoizedState;f.state=B,Di(t,r,f,d),Oi(),U=t.memoizedState,b||B!==U||la?(typeof V=="function"&&(Rc(t,a,V,r),U=t.memoizedState),(N=la||zf(t,a,N,r,B,U,v))?(P||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=U),f.props=r,f.state=U,f.context=v,r=N):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{f=t.stateNode,lc(e,t),v=t.memoizedProps,P=Ga(a,v),f.props=P,V=t.pendingProps,B=f.context,U=a.contextType,N=bs,typeof U=="object"&&U!==null&&(N=bt(U)),b=a.getDerivedStateFromProps,(U=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==V||B!==N)&&Lf(t,f,r,N),la=!1,B=t.memoizedState,f.state=B,Di(t,r,f,d),Oi();var q=t.memoizedState;v!==V||B!==q||la||e!==null&&e.dependencies!==null&&Gr(e.dependencies)?(typeof b=="function"&&(Rc(t,a,b,r),q=t.memoizedState),(P=la||zf(t,a,P,r,B,q,N)||e!==null&&e.dependencies!==null&&Gr(e.dependencies))?(U||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(r,q,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(r,q,N)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=q),f.props=r,f.state=q,f.context=N,r=P):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),r=!1)}return f=r,ol(e,t),r=(t.flags&128)!==0,f||r?(f=t.stateNode,a=r&&typeof a.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&r?(t.child=Pa(t,e.child,null,d),t.child=Pa(t,null,a,d)):wt(e,t,a,d),t.memoizedState=f.state,e=t.child):e=Ln(e,t,d),e}function Wf(e,t,a,r){return Ua(),t.flags|=256,wt(e,t,a,r),t.child}var Uc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zc(e){return{baseLanes:e,cachePool:qh()}}function Lc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ht),e}function Ff(e,t,a){var r=t.pendingProps,d=!1,f=(t.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(nt.current&2)!==0),v&&(d=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ne){if(d?ua(t):da(),(e=Ve)?(e=lp(e,nn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:aa!==null?{id:Sn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},a=Ch(e),a.return=t,t.child=a,yt=t,Ve=null)):e=null,e===null)throw ia(t);return bu(e)?t.lanes=32:t.lanes=536870912,null}var b=r.children;return r=r.fallback,d?(da(),d=t.mode,b=cl({mode:"hidden",children:b},d),r=Ma(r,d,a,null),b.return=t,r.return=t,b.sibling=r,t.child=b,r=t.child,r.memoizedState=zc(a),r.childLanes=Lc(e,v,a),t.memoizedState=Uc,Bi(null,r)):(ua(t),Bc(t,b))}var N=e.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(f)t.flags&256?(ua(t),t.flags&=-257,t=$c(e,t,a)):t.memoizedState!==null?(da(),t.child=e.child,t.flags|=128,t=null):(da(),b=r.fallback,d=t.mode,r=cl({mode:"visible",children:r.children},d),b=Ma(b,d,a,null),b.flags|=2,r.return=t,b.return=t,r.sibling=b,t.child=r,Pa(t,e.child,null,a),r=t.child,r.memoizedState=zc(a),r.childLanes=Lc(e,v,a),t.memoizedState=Uc,t=Bi(null,r));else if(ua(t),bu(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var U=v.dgst;v=U,r=Error(l(419)),r.stack="",r.digest=v,Ti({value:r,source:null,stack:null}),t=$c(e,t,a)}else if(ot||Ss(e,t,a,!1),v=(a&e.childLanes)!==0,ot||v){if(v=He,v!==null&&(r=Jt(v,a),r!==0&&r!==N.retryLane))throw N.retryLane=r,Da(e,r),zt(v,e,r),Dc;yu(b)||yl(),t=$c(e,t,a)}else yu(b)?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,Ve=sn(b.nextSibling),yt=t,Ne=!0,sa=null,nn=!1,e!==null&&Mh(t,e),t=Bc(t,r.children),t.flags|=4096);return t}return d?(da(),b=r.fallback,d=t.mode,N=e.child,U=N.sibling,r=Cn(N,{mode:"hidden",children:r.children}),r.subtreeFlags=N.subtreeFlags&65011712,U!==null?b=Cn(U,b):(b=Ma(b,d,a,null),b.flags|=2),b.return=t,r.return=t,r.sibling=b,t.child=r,Bi(null,r),r=t.child,b=e.child.memoizedState,b===null?b=zc(a):(d=b.cachePool,d!==null?(N=rt._currentValue,d=d.parent!==N?{parent:N,pool:N}:d):d=qh(),b={baseLanes:b.baseLanes|a,cachePool:d}),r.memoizedState=b,r.childLanes=Lc(e,v,a),t.memoizedState=Uc,Bi(e.child,r)):(ua(t),a=e.child,e=a.sibling,a=Cn(a,{mode:"visible",children:r.children}),a.return=t,a.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=a,t.memoizedState=null,a)}function Bc(e,t){return t=cl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function cl(e,t){return e=Bt(22,e,null,t),e.lanes=0,e}function $c(e,t,a){return Pa(t,e.child,null,a),e=Bc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function em(e,t,a){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ec(e.return,t,a)}function qc(e,t,a,r,d,f){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:d,treeForkCount:f}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=r,v.tail=a,v.tailMode=d,v.treeForkCount=f)}function tm(e,t,a){var r=t.pendingProps,d=r.revealOrder,f=r.tail;r=r.children;var v=nt.current,b=(v&2)!==0;if(b?(v=v&1|2,t.flags|=128):v&=1,W(nt,v),wt(e,t,r,a),r=Ne?Ei:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&em(e,a,t);else if(e.tag===19)em(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(a=t.child,d=null;a!==null;)e=a.alternate,e!==null&&Zr(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=t.child,t.child=null):(d=a.sibling,a.sibling=null),qc(t,!1,d,a,f,r);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Zr(e)===null){t.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}qc(t,!0,a,null,f,r);break;case"together":qc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Ln(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),ma|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Ss(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,a=Cn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Cn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Pc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Gr(e)))}function ob(e,t,a){switch(t.tag){case 3:St(t,t.stateNode.containerInfo),ra(t,rt,e.memoizedState.cache),Ua();break;case 27:case 5:ts(t);break;case 4:St(t,t.stateNode.containerInfo);break;case 10:ra(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,hc(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(ua(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Ff(e,t,a):(ua(t),e=Ln(e,t,a),e!==null?e.sibling:null);ua(t);break;case 19:var d=(e.flags&128)!==0;if(r=(a&t.childLanes)!==0,r||(Ss(e,t,a,!1),r=(a&t.childLanes)!==0),d){if(r)return tm(e,t,a);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),W(nt,nt.current),r)break;return null;case 22:return t.lanes=0,Kf(e,t,a,t.pendingProps);case 24:ra(t,rt,e.memoizedState.cache)}return Ln(e,t,a)}function nm(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)ot=!0;else{if(!Pc(e,a)&&(t.flags&128)===0)return ot=!1,ob(e,t,a);ot=(e.flags&131072)!==0}else ot=!1,Ne&&(t.flags&1048576)!==0&&Dh(t,Ei,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=$a(t.elementType),t.type=e,typeof e=="function")Yo(e)?(r=Ga(e,r),t.tag=1,t=Zf(null,t,e,r,a)):(t.tag=0,t=Mc(null,t,e,r,a));else{if(e!=null){var d=e.$$typeof;if(d===J){t.tag=11,t=If(null,t,e,r,a);break e}else if(d===Q){t.tag=14,t=Vf(null,t,e,r,a);break e}}throw t=Ie(e)||e,Error(l(306,t,""))}}return t;case 0:return Mc(e,t,t.type,t.pendingProps,a);case 1:return r=t.type,d=Ga(r,t.pendingProps),Zf(e,t,r,d,a);case 3:e:{if(St(t,t.stateNode.containerInfo),e===null)throw Error(l(387));r=t.pendingProps;var f=t.memoizedState;d=f.element,lc(e,t),Di(t,r,null,a);var v=t.memoizedState;if(r=v.cache,ra(t,rt,r),r!==f.cache&&tc(t,[rt],a,!0),Oi(),r=v.element,f.isDehydrated)if(f={element:r,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=Wf(e,t,r,a);break e}else if(r!==d){d=Ft(Error(l(424)),t),Ti(d),t=Wf(e,t,r,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ve=sn(e.firstChild),yt=t,Ne=!0,sa=null,nn=!0,a=Yh(t,null,r,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ua(),r===d){t=Ln(e,t,a);break e}wt(e,t,r,a)}t=t.child}return t;case 26:return ol(e,t),e===null?(a=fp(t.type,null,t.pendingProps,null))?t.memoizedState=a:Ne||(a=t.type,e=t.pendingProps,r=El(ye.current).createElement(a),r[vt]=t,r[Rt]=e,xt(r,a,e),mt(r),t.stateNode=r):t.memoizedState=fp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ts(t),e===null&&Ne&&(r=t.stateNode=up(t.type,t.pendingProps,ye.current),yt=t,nn=!0,d=Ve,ba(t.type)?(wu=d,Ve=sn(r.firstChild)):Ve=d),wt(e,t,t.pendingProps.children,a),ol(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ne&&((d=r=Ve)&&(r=Bb(r,t.type,t.pendingProps,nn),r!==null?(t.stateNode=r,yt=t,Ve=sn(r.firstChild),nn=!1,d=!0):d=!1),d||ia(t)),ts(t),d=t.type,f=t.pendingProps,v=e!==null?e.memoizedProps:null,r=f.children,pu(d,f)?r=null:v!==null&&pu(d,v)&&(t.flags|=32),t.memoizedState!==null&&(d=mc(e,t,Fy,null,null,a),Fi._currentValue=d),ol(e,t),wt(e,t,r,a),t.child;case 6:return e===null&&Ne&&((e=a=Ve)&&(a=$b(a,t.pendingProps,nn),a!==null?(t.stateNode=a,yt=t,Ve=null,e=!0):e=!1),e||ia(t)),null;case 13:return Ff(e,t,a);case 4:return St(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Pa(t,null,r,a):wt(e,t,r,a),t.child;case 11:return If(e,t,t.type,t.pendingProps,a);case 7:return wt(e,t,t.pendingProps,a),t.child;case 8:return wt(e,t,t.pendingProps.children,a),t.child;case 12:return wt(e,t,t.pendingProps.children,a),t.child;case 10:return r=t.pendingProps,ra(t,t.type,r.value),wt(e,t,r.children,a),t.child;case 9:return d=t.type._context,r=t.pendingProps.children,La(t),d=bt(d),r=r(d),t.flags|=1,wt(e,t,r,a),t.child;case 14:return Vf(e,t,t.type,t.pendingProps,a);case 15:return Yf(e,t,t.type,t.pendingProps,a);case 19:return tm(e,t,a);case 31:return lb(e,t,a);case 22:return Kf(e,t,a,t.pendingProps);case 24:return La(t),r=bt(rt),e===null?(d=sc(),d===null&&(d=He,f=nc(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),t.memoizedState={parent:r,cache:d},rc(t),ra(t,rt,d)):((e.lanes&a)!==0&&(lc(e,t),Di(t,null,null,a),Oi()),d=e.memoizedState,f=t.memoizedState,d.parent!==r?(d={parent:r,cache:r},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),ra(t,rt,r)):(r=f.cache,ra(t,rt,r),r!==d.cache&&tc(t,[rt],a,!0))),wt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Bn(e){e.flags|=4}function Hc(e,t,a,r,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Am())e.flags|=8192;else throw qa=Kr,ic}else e.flags&=-16777217}function am(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!yp(t))if(Am())e.flags|=8192;else throw qa=Kr,ic}function ul(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?it():536870912,e.lanes|=t,Us|=t)}function $i(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,r=0;if(t)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,r|=d.subtreeFlags&65011712,r|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,r|=d.subtreeFlags,r|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=r,e.childLanes=a,t}function cb(e,t,a){var r=t.pendingProps;switch(Xo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return Ye(t),null;case 3:return a=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Mn(rt),Qe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(_s(t)?Bn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Wo())),Ye(t),null;case 26:var d=t.type,f=t.memoizedState;return e===null?(Bn(t),f!==null?(Ye(t),am(t,f)):(Ye(t),Hc(t,d,null,r,a))):f?f!==e.memoizedState?(Bn(t),Ye(t),am(t,f)):(Ye(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&Bn(t),Ye(t),Hc(t,d,e,r,a)),null;case 27:if(ns(t),a=ye.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Bn(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return Ye(t),null}e=ee.current,_s(t)?Uh(t):(e=up(d,r,a),t.stateNode=e,Bn(t))}return Ye(t),null;case 5:if(ns(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Bn(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return Ye(t),null}if(f=ee.current,_s(t))Uh(t);else{var v=El(ye.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof r.is=="string"?v.createElement("select",{is:r.is}):v.createElement("select"),r.multiple?f.multiple=!0:r.size&&(f.size=r.size);break;default:f=typeof r.is=="string"?v.createElement(d,{is:r.is}):v.createElement(d)}}f[vt]=t,f[Rt]=r;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=f;e:switch(xt(f,d,r),d){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Bn(t)}}return Ye(t),Hc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Bn(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(l(166));if(e=ye.current,_s(t)){if(e=t.stateNode,a=t.memoizedProps,r=null,d=yt,d!==null)switch(d.tag){case 27:case 5:r=d.memoizedProps}e[vt]=t,e=!!(e.nodeValue===a||r!==null&&r.suppressHydrationWarning===!0||Fm(e.nodeValue,a)),e||ia(t,!0)}else e=El(e).createTextNode(r),e[vt]=t,t.stateNode=e}return Ye(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(r=_s(t),a!==null){if(e===null){if(!r)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[vt]=t}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),e=!1}else a=Wo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(qt(t),t):(qt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return Ye(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=_s(t),r!==null&&r.dehydrated!==null){if(e===null){if(!d)throw Error(l(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));d[vt]=t}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),d=!1}else d=Wo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(qt(t),t):(qt(t),null)}return qt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=r!==null,e=e!==null&&e.memoizedState!==null,a&&(r=t.child,d=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(d=r.alternate.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==d&&(r.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),ul(t,t.updateQueue),Ye(t),null);case 4:return Qe(),e===null&&uu(t.stateNode.containerInfo),Ye(t),null;case 10:return Mn(t.type),Ye(t),null;case 19:if(z(nt),r=t.memoizedState,r===null)return Ye(t),null;if(d=(t.flags&128)!==0,f=r.rendering,f===null)if(d)$i(r,!1);else{if(et!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=Zr(e),f!==null){for(t.flags|=128,$i(r,!1),e=f.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Rh(a,e),a=a.sibling;return W(nt,nt.current&1|2),Ne&&On(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&gt()>pl&&(t.flags|=128,d=!0,$i(r,!1),t.lanes=4194304)}else{if(!d)if(e=Zr(f),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),$i(r,!0),r.tail===null&&r.tailMode==="hidden"&&!f.alternate&&!Ne)return Ye(t),null}else 2*gt()-r.renderingStartTime>pl&&a!==536870912&&(t.flags|=128,d=!0,$i(r,!1),t.lanes=4194304);r.isBackwards?(f.sibling=t.child,t.child=f):(e=r.last,e!==null?e.sibling=f:t.child=f,r.last=f)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=gt(),e.sibling=null,a=nt.current,W(nt,d?a&1|2:a&1),Ne&&On(t,r.treeForkCount),e):(Ye(t),null);case 22:case 23:return qt(t),dc(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(a&536870912)!==0&&(t.flags&128)===0&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),a=t.updateQueue,a!==null&&ul(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==a&&(t.flags|=2048),e!==null&&z(Ba),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Mn(rt),Ye(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function ub(e,t){switch(Xo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mn(rt),Qe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ns(t),null;case 31:if(t.memoizedState!==null){if(qt(t),t.alternate===null)throw Error(l(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return z(nt),null;case 4:return Qe(),null;case 10:return Mn(t.type),null;case 22:case 23:return qt(t),dc(),e!==null&&z(Ba),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Mn(rt),null;case 25:return null;default:return null}}function sm(e,t){switch(Xo(t),t.tag){case 3:Mn(rt),Qe();break;case 26:case 27:case 5:ns(t);break;case 4:Qe();break;case 31:t.memoizedState!==null&&qt(t);break;case 13:qt(t);break;case 19:z(nt);break;case 10:Mn(t.type);break;case 22:case 23:qt(t),dc(),e!==null&&z(Ba);break;case 24:Mn(rt)}}function qi(e,t){try{var a=t.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var d=r.next;a=d;do{if((a.tag&e)===e){r=void 0;var f=a.create,v=a.inst;r=f(),v.destroy=r}a=a.next}while(a!==d)}}catch(b){Le(t,t.return,b)}}function ha(e,t,a){try{var r=t.updateQueue,d=r!==null?r.lastEffect:null;if(d!==null){var f=d.next;r=f;do{if((r.tag&e)===e){var v=r.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,d=t;var N=a,U=b;try{U()}catch(P){Le(d,N,P)}}}r=r.next}while(r!==f)}}catch(P){Le(t,t.return,P)}}function im(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Qh(t,a)}catch(r){Le(e,e.return,r)}}}function rm(e,t,a){a.props=Ga(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(r){Le(e,t,r)}}function Pi(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof a=="function"?e.refCleanup=a(r):a.current=r}}catch(d){Le(e,t,d)}}function En(e,t){var a=e.ref,r=e.refCleanup;if(a!==null)if(typeof r=="function")try{r()}catch(d){Le(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Le(e,t,d)}else a.current=null}function lm(e){var t=e.type,a=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break e;case"img":a.src?r.src=a.src:a.srcSet&&(r.srcset=a.srcSet)}}catch(d){Le(e,e.return,d)}}function Gc(e,t,a){try{var r=e.stateNode;Ob(r,e.type,a,t),r[Rt]=t}catch(d){Le(e,e.return,d)}}function om(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ba(e.type)||e.tag===4}function Ic(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||om(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ba(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vc(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=An));else if(r!==4&&(r===27&&ba(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Vc(e,t,a),e=e.sibling;e!==null;)Vc(e,t,a),e=e.sibling}function dl(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(r!==4&&(r===27&&ba(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(dl(e,t,a),e=e.sibling;e!==null;)dl(e,t,a),e=e.sibling}function cm(e){var t=e.stateNode,a=e.memoizedProps;try{for(var r=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);xt(t,r,a),t[vt]=e,t[Rt]=a}catch(f){Le(e,e.return,f)}}var $n=!1,ct=!1,Yc=!1,um=typeof WeakSet=="function"?WeakSet:Set,pt=null;function db(e,t){if(e=e.containerInfo,fu=Ol,e=xh(e),$o(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var d=r.anchorOffset,f=r.focusNode;r=r.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,b=-1,N=-1,U=0,P=0,V=e,B=null;t:for(;;){for(var q;V!==a||d!==0&&V.nodeType!==3||(b=v+d),V!==f||r!==0&&V.nodeType!==3||(N=v+r),V.nodeType===3&&(v+=V.nodeValue.length),(q=V.firstChild)!==null;)B=V,V=q;for(;;){if(V===e)break t;if(B===a&&++U===d&&(b=v),B===f&&++P===r&&(N=v),(q=V.nextSibling)!==null)break;V=B,B=V.parentNode}V=q}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(mu={focusedElem:e,selectionRange:a},Ol=!1,pt=t;pt!==null;)if(t=pt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pt=e;else for(;pt!==null;){switch(t=pt,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)d=e[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=t,d=f.memoizedProps,f=f.memoizedState,r=a.stateNode;try{var ne=Ga(a.type,d);e=r.getSnapshotBeforeUpdate(ne,f),r.__reactInternalSnapshotBeforeUpdate=e}catch(de){Le(a,a.return,de)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)vu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,pt=e;break}pt=t.return}}function dm(e,t,a){var r=a.flags;switch(a.tag){case 0:case 11:case 15:Pn(e,a),r&4&&qi(5,a);break;case 1:if(Pn(e,a),r&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(v){Le(a,a.return,v)}else{var d=Ga(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Le(a,a.return,v)}}r&64&&im(a),r&512&&Pi(a,a.return);break;case 3:if(Pn(e,a),r&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Qh(e,t)}catch(v){Le(a,a.return,v)}}break;case 27:t===null&&r&4&&cm(a);case 26:case 5:Pn(e,a),t===null&&r&4&&lm(a),r&512&&Pi(a,a.return);break;case 12:Pn(e,a);break;case 31:Pn(e,a),r&4&&mm(e,a);break;case 13:Pn(e,a),r&4&&pm(e,a),r&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=wb.bind(null,a),qb(e,a))));break;case 22:if(r=a.memoizedState!==null||$n,!r){t=t!==null&&t.memoizedState!==null||ct,d=$n;var f=ct;$n=r,(ct=t)&&!f?Hn(e,a,(a.subtreeFlags&8772)!==0):Pn(e,a),$n=d,ct=f}break;case 30:break;default:Pn(e,a)}}function hm(e){var t=e.alternate;t!==null&&(e.alternate=null,hm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&_o(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Xe=null,Ot=!1;function qn(e,t,a){for(a=a.child;a!==null;)fm(e,t,a),a=a.sibling}function fm(e,t,a){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Wn,a)}catch{}switch(a.tag){case 26:ct||En(a,t),qn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ct||En(a,t);var r=Xe,d=Ot;ba(a.type)&&(Xe=a.stateNode,Ot=!1),qn(e,t,a),Xi(a.stateNode),Xe=r,Ot=d;break;case 5:ct||En(a,t);case 6:if(r=Xe,d=Ot,Xe=null,qn(e,t,a),Xe=r,Ot=d,Xe!==null)if(Ot)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(a.stateNode)}catch(f){Le(a,t,f)}else try{Xe.removeChild(a.stateNode)}catch(f){Le(a,t,f)}break;case 18:Xe!==null&&(Ot?(e=Xe,ip(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Gs(e)):ip(Xe,a.stateNode));break;case 4:r=Xe,d=Ot,Xe=a.stateNode.containerInfo,Ot=!0,qn(e,t,a),Xe=r,Ot=d;break;case 0:case 11:case 14:case 15:ha(2,a,t),ct||ha(4,a,t),qn(e,t,a);break;case 1:ct||(En(a,t),r=a.stateNode,typeof r.componentWillUnmount=="function"&&rm(a,t,r)),qn(e,t,a);break;case 21:qn(e,t,a);break;case 22:ct=(r=ct)||a.memoizedState!==null,qn(e,t,a),ct=r;break;default:qn(e,t,a)}}function mm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Gs(e)}catch(a){Le(t,t.return,a)}}}function pm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Gs(e)}catch(a){Le(t,t.return,a)}}function hb(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new um),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new um),t;default:throw Error(l(435,e.tag))}}function hl(e,t){var a=hb(e);t.forEach(function(r){if(!a.has(r)){a.add(r);var d=xb.bind(null,e,r);r.then(d,d)}})}function Dt(e,t){var a=t.deletions;if(a!==null)for(var r=0;r<a.length;r++){var d=a[r],f=e,v=t,b=v;e:for(;b!==null;){switch(b.tag){case 27:if(ba(b.type)){Xe=b.stateNode,Ot=!1;break e}break;case 5:Xe=b.stateNode,Ot=!1;break e;case 3:case 4:Xe=b.stateNode.containerInfo,Ot=!0;break e}b=b.return}if(Xe===null)throw Error(l(160));fm(f,v,d),Xe=null,Ot=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)gm(t,e),t=t.sibling}var dn=null;function gm(e,t){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dt(t,e),Mt(e),r&4&&(ha(3,e,e.return),qi(3,e),ha(5,e,e.return));break;case 1:Dt(t,e),Mt(e),r&512&&(ct||a===null||En(a,a.return)),r&64&&$n&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?r:a.concat(r))));break;case 26:var d=dn;if(Dt(t,e),Mt(e),r&512&&(ct||a===null||En(a,a.return)),r&4){var f=a!==null?a.memoizedState:null;if(r=e.memoizedState,a===null)if(r===null)if(e.stateNode===null){e:{r=e.type,a=e.memoizedProps,d=d.ownerDocument||d;t:switch(r){case"title":f=d.getElementsByTagName("title")[0],(!f||f[mi]||f[vt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(r),d.head.insertBefore(f,d.querySelector("head > title"))),xt(f,r,a),f[vt]=e,mt(f),r=f;break e;case"link":var v=gp("link","href",d).get(r+(a.href||""));if(v){for(var b=0;b<v.length;b++)if(f=v[b],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(b,1);break t}}f=d.createElement(r),xt(f,r,a),d.head.appendChild(f);break;case"meta":if(v=gp("meta","content",d).get(r+(a.content||""))){for(b=0;b<v.length;b++)if(f=v[b],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(b,1);break t}}f=d.createElement(r),xt(f,r,a),d.head.appendChild(f);break;default:throw Error(l(468,r))}f[vt]=e,mt(f),r=f}e.stateNode=r}else vp(d,e.type,e.stateNode);else e.stateNode=pp(d,r,e.memoizedProps);else f!==r?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,r===null?vp(d,e.type,e.stateNode):pp(d,r,e.memoizedProps)):r===null&&e.stateNode!==null&&Gc(e,e.memoizedProps,a.memoizedProps)}break;case 27:Dt(t,e),Mt(e),r&512&&(ct||a===null||En(a,a.return)),a!==null&&r&4&&Gc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Dt(t,e),Mt(e),r&512&&(ct||a===null||En(a,a.return)),e.flags&32){d=e.stateNode;try{hs(d,"")}catch(ne){Le(e,e.return,ne)}}r&4&&e.stateNode!=null&&(d=e.memoizedProps,Gc(e,d,a!==null?a.memoizedProps:d)),r&1024&&(Yc=!0);break;case 6:if(Dt(t,e),Mt(e),r&4){if(e.stateNode===null)throw Error(l(162));r=e.memoizedProps,a=e.stateNode;try{a.nodeValue=r}catch(ne){Le(e,e.return,ne)}}break;case 3:if(kl=null,d=dn,dn=Tl(t.containerInfo),Dt(t,e),dn=d,Mt(e),r&4&&a!==null&&a.memoizedState.isDehydrated)try{Gs(t.containerInfo)}catch(ne){Le(e,e.return,ne)}Yc&&(Yc=!1,vm(e));break;case 4:r=dn,dn=Tl(e.stateNode.containerInfo),Dt(t,e),Mt(e),dn=r;break;case 12:Dt(t,e),Mt(e);break;case 31:Dt(t,e),Mt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,hl(e,r)));break;case 13:Dt(t,e),Mt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ml=gt()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,hl(e,r)));break;case 22:d=e.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,U=$n,P=ct;if($n=U||d,ct=P||N,Dt(t,e),ct=P,$n=U,Mt(e),r&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(a===null||N||$n||ct||Ia(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){N=a=t;try{if(f=N.stateNode,d)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=N.stateNode;var V=N.memoizedProps.style,B=V!=null&&V.hasOwnProperty("display")?V.display:null;b.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(ne){Le(N,N.return,ne)}}}else if(t.tag===6){if(a===null){N=t;try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch(ne){Le(N,N.return,ne)}}}else if(t.tag===18){if(a===null){N=t;try{var q=N.stateNode;d?rp(q,!0):rp(N.stateNode,!1)}catch(ne){Le(N,N.return,ne)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(a=r.retryQueue,a!==null&&(r.retryQueue=null,hl(e,a))));break;case 19:Dt(t,e),Mt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,hl(e,r)));break;case 30:break;case 21:break;default:Dt(t,e),Mt(e)}}function Mt(e){var t=e.flags;if(t&2){try{for(var a,r=e.return;r!==null;){if(om(r)){a=r;break}r=r.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var d=a.stateNode,f=Ic(e);dl(e,f,d);break;case 5:var v=a.stateNode;a.flags&32&&(hs(v,""),a.flags&=-33);var b=Ic(e);dl(e,b,v);break;case 3:case 4:var N=a.stateNode.containerInfo,U=Ic(e);Vc(e,U,N);break;default:throw Error(l(161))}}catch(P){Le(e,e.return,P)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;vm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Pn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)dm(e,t.alternate,t),t=t.sibling}function Ia(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ha(4,t,t.return),Ia(t);break;case 1:En(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&rm(t,t.return,a),Ia(t);break;case 27:Xi(t.stateNode);case 26:case 5:En(t,t.return),Ia(t);break;case 22:t.memoizedState===null&&Ia(t);break;case 30:Ia(t);break;default:Ia(t)}e=e.sibling}}function Hn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,d=e,f=t,v=f.flags;switch(f.tag){case 0:case 11:case 15:Hn(d,f,a),qi(4,f);break;case 1:if(Hn(d,f,a),r=f,d=r.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(U){Le(r,r.return,U)}if(r=f,d=r.updateQueue,d!==null){var b=r.stateNode;try{var N=d.shared.hiddenCallbacks;if(N!==null)for(d.shared.hiddenCallbacks=null,d=0;d<N.length;d++)Kh(N[d],b)}catch(U){Le(r,r.return,U)}}a&&v&64&&im(f),Pi(f,f.return);break;case 27:cm(f);case 26:case 5:Hn(d,f,a),a&&r===null&&v&4&&lm(f),Pi(f,f.return);break;case 12:Hn(d,f,a);break;case 31:Hn(d,f,a),a&&v&4&&mm(d,f);break;case 13:Hn(d,f,a),a&&v&4&&pm(d,f);break;case 22:f.memoizedState===null&&Hn(d,f,a),Pi(f,f.return);break;case 30:break;default:Hn(d,f,a)}t=t.sibling}}function Kc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ni(a))}function Qc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ni(e))}function hn(e,t,a,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ym(e,t,a,r),t=t.sibling}function ym(e,t,a,r){var d=t.flags;switch(t.tag){case 0:case 11:case 15:hn(e,t,a,r),d&2048&&qi(9,t);break;case 1:hn(e,t,a,r);break;case 3:hn(e,t,a,r),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ni(e)));break;case 12:if(d&2048){hn(e,t,a,r),e=t.stateNode;try{var f=t.memoizedProps,v=f.id,b=f.onPostCommit;typeof b=="function"&&b(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){Le(t,t.return,N)}}else hn(e,t,a,r);break;case 31:hn(e,t,a,r);break;case 13:hn(e,t,a,r);break;case 23:break;case 22:f=t.stateNode,v=t.alternate,t.memoizedState!==null?f._visibility&2?hn(e,t,a,r):Hi(e,t):f._visibility&2?hn(e,t,a,r):(f._visibility|=2,Os(e,t,a,r,(t.subtreeFlags&10256)!==0||!1)),d&2048&&Kc(v,t);break;case 24:hn(e,t,a,r),d&2048&&Qc(t.alternate,t);break;default:hn(e,t,a,r)}}function Os(e,t,a,r,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,v=t,b=a,N=r,U=v.flags;switch(v.tag){case 0:case 11:case 15:Os(f,v,b,N,d),qi(8,v);break;case 23:break;case 22:var P=v.stateNode;v.memoizedState!==null?P._visibility&2?Os(f,v,b,N,d):Hi(f,v):(P._visibility|=2,Os(f,v,b,N,d)),d&&U&2048&&Kc(v.alternate,v);break;case 24:Os(f,v,b,N,d),d&&U&2048&&Qc(v.alternate,v);break;default:Os(f,v,b,N,d)}t=t.sibling}}function Hi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,r=t,d=r.flags;switch(r.tag){case 22:Hi(a,r),d&2048&&Kc(r.alternate,r);break;case 24:Hi(a,r),d&2048&&Qc(r.alternate,r);break;default:Hi(a,r)}t=t.sibling}}var Gi=8192;function Ds(e,t,a){if(e.subtreeFlags&Gi)for(e=e.child;e!==null;)bm(e,t,a),e=e.sibling}function bm(e,t,a){switch(e.tag){case 26:Ds(e,t,a),e.flags&Gi&&e.memoizedState!==null&&Wb(a,dn,e.memoizedState,e.memoizedProps);break;case 5:Ds(e,t,a);break;case 3:case 4:var r=dn;dn=Tl(e.stateNode.containerInfo),Ds(e,t,a),dn=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Gi,Gi=16777216,Ds(e,t,a),Gi=r):Ds(e,t,a));break;default:Ds(e,t,a)}}function wm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ii(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];pt=r,_m(r,e)}wm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)xm(e),e=e.sibling}function xm(e){switch(e.tag){case 0:case 11:case 15:Ii(e),e.flags&2048&&ha(9,e,e.return);break;case 3:Ii(e);break;case 12:Ii(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,fl(e)):Ii(e);break;default:Ii(e)}}function fl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var r=t[a];pt=r,_m(r,e)}wm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ha(8,t,t.return),fl(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,fl(t));break;default:fl(t)}e=e.sibling}}function _m(e,t){for(;pt!==null;){var a=pt;switch(a.tag){case 0:case 11:case 15:ha(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var r=a.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Ni(a.memoizedState.cache)}if(r=a.child,r!==null)r.return=a,pt=r;else e:for(a=e;pt!==null;){r=pt;var d=r.sibling,f=r.return;if(hm(r),r===a){pt=null;break e}if(d!==null){d.return=f,pt=d;break e}pt=f}}}var fb={getCacheForType:function(e){var t=bt(rt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return bt(rt).controller.signal}},mb=typeof WeakMap=="function"?WeakMap:Map,De=0,He=null,_e=null,je=0,ze=0,Pt=null,fa=!1,Ms=!1,Jc=!1,Gn=0,et=0,ma=0,Va=0,Xc=0,Ht=0,Us=0,Vi=null,Ut=null,Zc=!1,ml=0,Sm=0,pl=1/0,gl=null,pa=null,dt=0,ga=null,zs=null,In=0,Wc=0,Fc=null,jm=null,Yi=0,eu=null;function Gt(){return(De&2)!==0&&je!==0?je&-je:k.T!==null?ru():ea()}function Em(){if(Ht===0)if((je&536870912)===0||Ne){var e=ae;ae<<=1,(ae&3932160)===0&&(ae=262144),Ht=e}else Ht=536870912;return e=$t.current,e!==null&&(e.flags|=32),Ht}function zt(e,t,a){(e===He&&(ze===2||ze===9)||e.cancelPendingCommit!==null)&&(Ls(e,0),va(e,je,Ht,!1)),Be(e,a),((De&2)===0||e!==He)&&(e===He&&((De&2)===0&&(Va|=a),et===4&&va(e,je,Ht,!1)),Tn(e))}function Tm(e,t,a){if((De&6)!==0)throw Error(l(327));var r=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Ae(e,t),d=r?vb(e,t):nu(e,t,!0),f=r;do{if(d===0){Ms&&!r&&va(e,t,0,!1);break}else{if(a=e.current.alternate,f&&!pb(a)){d=nu(e,t,!1),f=!1;continue}if(d===2){if(f=t,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var b=e;d=Vi;var N=b.current.memoizedState.isDehydrated;if(N&&(Ls(b,v).flags|=256),v=nu(b,v,!1),v!==2){if(Jc&&!N){b.errorRecoveryDisabledLanes|=f,Va|=f,d=4;break e}f=Ut,Ut=d,f!==null&&(Ut===null?Ut=f:Ut.push.apply(Ut,f))}d=v}if(f=!1,d!==2)continue}}if(d===1){Ls(e,0),va(e,t,0,!0);break}e:{switch(r=e,f=d,f){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:va(r,t,Ht,!fa);break e;case 2:Ut=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(d=ml+300-gt(),10<d)){if(va(r,t,Ht,!fa),xe(r,0,!0)!==0)break e;In=t,r.timeoutHandle=ap(Nm.bind(null,r,a,Ut,gl,Zc,t,Ht,Va,Us,fa,f,"Throttled",-0,0),d);break e}Nm(r,a,Ut,gl,Zc,t,Ht,Va,Us,fa,f,null,-0,0)}}break}while(!0);Tn(e)}function Nm(e,t,a,r,d,f,v,b,N,U,P,V,B,q){if(e.timeoutHandle=-1,V=t.subtreeFlags,V&8192||(V&16785408)===16785408){V={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:An},bm(t,f,V);var ne=(f&62914560)===f?ml-gt():(f&4194048)===f?Sm-gt():0;if(ne=Fb(V,ne),ne!==null){In=f,e.cancelPendingCommit=ne(Um.bind(null,e,t,f,a,r,d,v,b,N,P,V,null,B,q)),va(e,f,v,!U);return}}Um(e,t,f,a,r,d,v,b,N)}function pb(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var r=0;r<a.length;r++){var d=a[r],f=d.getSnapshot;d=d.value;try{if(!Lt(f(),d))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function va(e,t,a,r){t&=~Xc,t&=~Va,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var d=t;0<d;){var f=31-Nt(d),v=1<<f;r[f]=-1,d&=~v}a!==0&&fi(e,a,t)}function vl(){return(De&6)===0?(Ki(0),!1):!0}function tu(){if(_e!==null){if(ze===0)var e=_e.return;else e=_e,Dn=za=null,vc(e),Ns=null,Ai=0,e=_e;for(;e!==null;)sm(e.alternate,e),e=e.return;_e=null}}function Ls(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Ub(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),In=0,tu(),He=e,_e=a=Cn(e.current,null),je=t,ze=0,Pt=null,fa=!1,Ms=Ae(e,t),Jc=!1,Us=Ht=Xc=Va=ma=et=0,Ut=Vi=null,Zc=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var d=31-Nt(r),f=1<<d;t|=e[d],r&=~f}return Gn=t,Br(),a}function km(e,t){be=null,k.H=Li,t===Ts||t===Yr?(t=Gh(),ze=3):t===ic?(t=Gh(),ze=4):ze=t===Dc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Pt=t,_e===null&&(et=1,rl(e,Ft(t,e.current)))}function Am(){var e=$t.current;return e===null?!0:(je&4194048)===je?an===null:(je&62914560)===je||(je&536870912)!==0?e===an:!1}function Rm(){var e=k.H;return k.H=Li,e===null?Li:e}function Cm(){var e=k.A;return k.A=fb,e}function yl(){et=4,fa||(je&4194048)!==je&&$t.current!==null||(Ms=!0),(ma&134217727)===0&&(Va&134217727)===0||He===null||va(He,je,Ht,!1)}function nu(e,t,a){var r=De;De|=2;var d=Rm(),f=Cm();(He!==e||je!==t)&&(gl=null,Ls(e,t)),t=!1;var v=et;e:do try{if(ze!==0&&_e!==null){var b=_e,N=Pt;switch(ze){case 8:tu(),v=6;break e;case 3:case 2:case 9:case 6:$t.current===null&&(t=!0);var U=ze;if(ze=0,Pt=null,Bs(e,b,N,U),a&&Ms){v=0;break e}break;default:U=ze,ze=0,Pt=null,Bs(e,b,N,U)}}gb(),v=et;break}catch(P){km(e,P)}while(!0);return t&&e.shellSuspendCounter++,Dn=za=null,De=r,k.H=d,k.A=f,_e===null&&(He=null,je=0,Br()),v}function gb(){for(;_e!==null;)Om(_e)}function vb(e,t){var a=De;De|=2;var r=Rm(),d=Cm();He!==e||je!==t?(gl=null,pl=gt()+500,Ls(e,t)):Ms=Ae(e,t);e:do try{if(ze!==0&&_e!==null){t=_e;var f=Pt;t:switch(ze){case 1:ze=0,Pt=null,Bs(e,t,f,1);break;case 2:case 9:if(Ph(f)){ze=0,Pt=null,Dm(t);break}t=function(){ze!==2&&ze!==9||He!==e||(ze=7),Tn(e)},f.then(t,t);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:Ph(f)?(ze=0,Pt=null,Dm(t)):(ze=0,Pt=null,Bs(e,t,f,7));break;case 5:var v=null;switch(_e.tag){case 26:v=_e.memoizedState;case 5:case 27:var b=_e;if(v?yp(v):b.stateNode.complete){ze=0,Pt=null;var N=b.sibling;if(N!==null)_e=N;else{var U=b.return;U!==null?(_e=U,bl(U)):_e=null}break t}}ze=0,Pt=null,Bs(e,t,f,5);break;case 6:ze=0,Pt=null,Bs(e,t,f,6);break;case 8:tu(),et=6;break e;default:throw Error(l(462))}}yb();break}catch(P){km(e,P)}while(!0);return Dn=za=null,k.H=r,k.A=d,De=a,_e!==null?0:(He=null,je=0,Br(),et)}function yb(){for(;_e!==null&&!po();)Om(_e)}function Om(e){var t=nm(e.alternate,e,Gn);e.memoizedProps=e.pendingProps,t===null?bl(e):_e=t}function Dm(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Xf(a,t,t.pendingProps,t.type,void 0,je);break;case 11:t=Xf(a,t,t.pendingProps,t.type.render,t.ref,je);break;case 5:vc(t);default:sm(a,t),t=_e=Rh(t,Gn),t=nm(a,t,Gn)}e.memoizedProps=e.pendingProps,t===null?bl(e):_e=t}function Bs(e,t,a,r){Dn=za=null,vc(t),Ns=null,Ai=0;var d=t.return;try{if(rb(e,d,t,a,je)){et=1,rl(e,Ft(a,e.current)),_e=null;return}}catch(f){if(d!==null)throw _e=d,f;et=1,rl(e,Ft(a,e.current)),_e=null;return}t.flags&32768?(Ne||r===1?e=!0:Ms||(je&536870912)!==0?e=!1:(fa=e=!0,(r===2||r===9||r===3||r===6)&&(r=$t.current,r!==null&&r.tag===13&&(r.flags|=16384))),Mm(t,e)):bl(t)}function bl(e){var t=e;do{if((t.flags&32768)!==0){Mm(t,fa);return}e=t.return;var a=cb(t.alternate,t,Gn);if(a!==null){_e=a;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);et===0&&(et=5)}function Mm(e,t){do{var a=ub(e.alternate,e);if(a!==null){a.flags&=32767,_e=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){_e=e;return}_e=e=a}while(e!==null);et=6,_e=null}function Um(e,t,a,r,d,f,v,b,N){e.cancelPendingCommit=null;do wl();while(dt!==0);if((De&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(f=t.lanes|t.childLanes,f|=Io,on(e,a,f,v,b,N),e===He&&(_e=He=null,je=0),zs=t,ga=e,In=a,Wc=f,Fc=d,jm=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,_b(is,function(){return qm(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=k.T,k.T=null,d=G.p,G.p=2,v=De,De|=4;try{db(e,t,a)}finally{De=v,G.p=d,k.T=r}}dt=1,zm(),Lm(),Bm()}}function zm(){if(dt===1){dt=0;var e=ga,t=zs,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var r=G.p;G.p=2;var d=De;De|=4;try{gm(t,e);var f=mu,v=xh(e.containerInfo),b=f.focusedElem,N=f.selectionRange;if(v!==b&&b&&b.ownerDocument&&wh(b.ownerDocument.documentElement,b)){if(N!==null&&$o(b)){var U=N.start,P=N.end;if(P===void 0&&(P=U),"selectionStart"in b)b.selectionStart=U,b.selectionEnd=Math.min(P,b.value.length);else{var V=b.ownerDocument||document,B=V&&V.defaultView||window;if(B.getSelection){var q=B.getSelection(),ne=b.textContent.length,de=Math.min(N.start,ne),Pe=N.end===void 0?de:Math.min(N.end,ne);!q.extend&&de>Pe&&(v=Pe,Pe=de,de=v);var O=bh(b,de),R=bh(b,Pe);if(O&&R&&(q.rangeCount!==1||q.anchorNode!==O.node||q.anchorOffset!==O.offset||q.focusNode!==R.node||q.focusOffset!==R.offset)){var M=V.createRange();M.setStart(O.node,O.offset),q.removeAllRanges(),de>Pe?(q.addRange(M),q.extend(R.node,R.offset)):(M.setEnd(R.node,R.offset),q.addRange(M))}}}}for(V=[],q=b;q=q.parentNode;)q.nodeType===1&&V.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<V.length;b++){var I=V[b];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}Ol=!!fu,mu=fu=null}finally{De=d,G.p=r,k.T=a}}e.current=t,dt=2}}function Lm(){if(dt===2){dt=0;var e=ga,t=zs,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var r=G.p;G.p=2;var d=De;De|=4;try{dm(e,t.alternate,t)}finally{De=d,G.p=r,k.T=a}}dt=3}}function Bm(){if(dt===4||dt===3){dt=0,go();var e=ga,t=zs,a=In,r=jm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?dt=5:(dt=0,zs=ga=null,$m(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(pa=null),Fn(a),t=t.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Wn,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=k.T,d=G.p,G.p=2,k.T=null;try{for(var f=e.onRecoverableError,v=0;v<r.length;v++){var b=r[v];f(b.value,{componentStack:b.stack})}}finally{k.T=t,G.p=d}}(In&3)!==0&&wl(),Tn(e),d=e.pendingLanes,(a&261930)!==0&&(d&42)!==0?e===eu?Yi++:(Yi=0,eu=e):Yi=0,Ki(0)}}function $m(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ni(t)))}function wl(){return zm(),Lm(),Bm(),qm()}function qm(){if(dt!==5)return!1;var e=ga,t=Wc;Wc=0;var a=Fn(In),r=k.T,d=G.p;try{G.p=32>a?32:a,k.T=null,a=Fc,Fc=null;var f=ga,v=In;if(dt=0,zs=ga=null,In=0,(De&6)!==0)throw Error(l(331));var b=De;if(De|=4,xm(f.current),ym(f,f.current,v,a),De=b,Ki(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Wn,f)}catch{}return!0}finally{G.p=d,k.T=r,$m(e,t)}}function Pm(e,t,a){t=Ft(a,t),t=Oc(e.stateNode,t,2),e=ca(e,t,2),e!==null&&(Be(e,2),Tn(e))}function Le(e,t,a){if(e.tag===3)Pm(e,e,a);else for(;t!==null;){if(t.tag===3){Pm(t,e,a);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pa===null||!pa.has(r))){e=Ft(a,e),a=Hf(2),r=ca(t,a,2),r!==null&&(Gf(a,r,t,e),Be(r,2),Tn(r));break}}t=t.return}}function au(e,t,a){var r=e.pingCache;if(r===null){r=e.pingCache=new mb;var d=new Set;r.set(t,d)}else d=r.get(t),d===void 0&&(d=new Set,r.set(t,d));d.has(a)||(Jc=!0,d.add(a),e=bb.bind(null,e,t,a),t.then(e,e))}function bb(e,t,a){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,He===e&&(je&a)===a&&(et===4||et===3&&(je&62914560)===je&&300>gt()-ml?(De&2)===0&&Ls(e,0):Xc|=a,Us===je&&(Us=0)),Tn(e)}function Hm(e,t){t===0&&(t=it()),e=Da(e,t),e!==null&&(Be(e,t),Tn(e))}function wb(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Hm(e,a)}function xb(e,t){var a=0;switch(e.tag){case 31:case 13:var r=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(t),Hm(e,a)}function _b(e,t){return ss(e,t)}var xl=null,$s=null,su=!1,_l=!1,iu=!1,ya=0;function Tn(e){e!==$s&&e.next===null&&($s===null?xl=$s=e:$s=$s.next=e),_l=!0,su||(su=!0,jb())}function Ki(e,t){if(!iu&&_l){iu=!0;do for(var a=!1,r=xl;r!==null;){if(e!==0){var d=r.pendingLanes;if(d===0)var f=0;else{var v=r.suspendedLanes,b=r.pingedLanes;f=(1<<31-Nt(42|e)+1)-1,f&=d&~(v&~b),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Ym(r,f))}else f=je,f=xe(r,r===He?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(f&3)===0||Ae(r,f)||(a=!0,Ym(r,f));r=r.next}while(a);iu=!1}}function Sb(){Gm()}function Gm(){_l=su=!1;var e=0;ya!==0&&Mb()&&(e=ya);for(var t=gt(),a=null,r=xl;r!==null;){var d=r.next,f=Im(r,t);f===0?(r.next=null,a===null?xl=d:a.next=d,d===null&&($s=a)):(a=r,(e!==0||(f&3)!==0)&&(_l=!0)),r=d}dt!==0&&dt!==5||Ki(e),ya!==0&&(ya=0)}function Im(e,t){for(var a=e.suspendedLanes,r=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Nt(f),b=1<<v,N=d[v];N===-1?((b&a)===0||(b&r)!==0)&&(d[v]=Je(b,t)):N<=t&&(e.expiredLanes|=b),f&=~b}if(t=He,a=je,a=xe(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,a===0||e===t&&(ze===2||ze===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&ka(r),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ae(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(r!==null&&ka(r),Fn(a)){case 2:case 8:a=Tr;break;case 32:a=is;break;case 268435456:a=ui;break;default:a=is}return r=Vm.bind(null,e),a=ss(a,r),e.callbackPriority=t,e.callbackNode=a,t}return r!==null&&r!==null&&ka(r),e.callbackPriority=2,e.callbackNode=null,2}function Vm(e,t){if(dt!==0&&dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(wl()&&e.callbackNode!==a)return null;var r=je;return r=xe(e,e===He?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(Tm(e,r,t),Im(e,gt()),e.callbackNode!=null&&e.callbackNode===a?Vm.bind(null,e):null)}function Ym(e,t){if(wl())return null;Tm(e,t,!0)}function jb(){zb(function(){(De&6)!==0?ss(Er,Sb):Gm()})}function ru(){if(ya===0){var e=js;e===0&&(e=Z,Z<<=1,(Z&261888)===0&&(Z=256)),ya=e}return ya}function Km(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Rr(""+e)}function Qm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Eb(e,t,a,r,d){if(t==="submit"&&a&&a.stateNode===d){var f=Km((d[Rt]||null).action),v=r.submitter;v&&(t=(t=v[Rt]||null)?Km(t.formAction):v.getAttribute("formAction"),t!==null&&(f=t,v=null));var b=new Mr("action","action",null,r,d);e.push({event:b,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(ya!==0){var N=v?Qm(d,v):new FormData(d);Tc(a,{pending:!0,data:N,method:d.method,action:f},null,N)}}else typeof f=="function"&&(b.preventDefault(),N=v?Qm(d,v):new FormData(d),Tc(a,{pending:!0,data:N,method:d.method,action:f},f,N))},currentTarget:d}]})}}for(var lu=0;lu<Go.length;lu++){var ou=Go[lu],Tb=ou.toLowerCase(),Nb=ou[0].toUpperCase()+ou.slice(1);un(Tb,"on"+Nb)}un(jh,"onAnimationEnd"),un(Eh,"onAnimationIteration"),un(Th,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(Gy,"onTransitionRun"),un(Iy,"onTransitionStart"),un(Vy,"onTransitionCancel"),un(Nh,"onTransitionEnd"),us("onMouseEnter",["mouseout","mouseover"]),us("onMouseLeave",["mouseout","mouseover"]),us("onPointerEnter",["pointerout","pointerover"]),us("onPointerLeave",["pointerout","pointerover"]),Aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Aa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qi));function Jm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var r=e[a],d=r.event;r=r.listeners;e:{var f=void 0;if(t)for(var v=r.length-1;0<=v;v--){var b=r[v],N=b.instance,U=b.currentTarget;if(b=b.listener,N!==f&&d.isPropagationStopped())break e;f=b,d.currentTarget=U;try{f(d)}catch(P){Lr(P)}d.currentTarget=null,f=N}else for(v=0;v<r.length;v++){if(b=r[v],N=b.instance,U=b.currentTarget,b=b.listener,N!==f&&d.isPropagationStopped())break e;f=b,d.currentTarget=U;try{f(d)}catch(P){Lr(P)}d.currentTarget=null,f=N}}}}function Se(e,t){var a=t[xo];a===void 0&&(a=t[xo]=new Set);var r=e+"__bubble";a.has(r)||(Xm(t,e,2,!1),a.add(r))}function cu(e,t,a){var r=0;t&&(r|=4),Xm(a,e,r,t)}var Sl="_reactListening"+Math.random().toString(36).slice(2);function uu(e){if(!e[Sl]){e[Sl]=!0,Hd.forEach(function(a){a!=="selectionchange"&&(kb.has(a)||cu(a,!1,e),cu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sl]||(t[Sl]=!0,cu("selectionchange",!1,t))}}function Xm(e,t,a,r){switch(Ep(t)){case 2:var d=n0;break;case 8:d=a0;break;default:d=Eu}a=d.bind(null,t,a,e),d=void 0,!Ro||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),r?d!==void 0?e.addEventListener(t,a,{capture:!0,passive:d}):e.addEventListener(t,a,!0):d!==void 0?e.addEventListener(t,a,{passive:d}):e.addEventListener(t,a,!1)}function du(e,t,a,r,d){var f=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var v=r.tag;if(v===3||v===4){var b=r.stateNode.containerInfo;if(b===d)break;if(v===4)for(v=r.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;b!==null;){if(v=ls(b),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){r=f=v;continue e}b=b.parentNode}}r=r.return}eh(function(){var U=f,P=ko(a),V=[];e:{var B=kh.get(e);if(B!==void 0){var q=Mr,ne=e;switch(e){case"keypress":if(Or(a)===0)break e;case"keydown":case"keyup":q=xy;break;case"focusin":ne="focus",q=Mo;break;case"focusout":ne="blur",q=Mo;break;case"beforeblur":case"afterblur":q=Mo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=ah;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=jy;break;case jh:case Eh:case Th:q=hy;break;case Nh:q=Ty;break;case"scroll":case"scrollend":q=ly;break;case"wheel":q=ky;break;case"copy":case"cut":case"paste":q=my;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=ih;break;case"toggle":case"beforetoggle":q=Ry}var de=(t&4)!==0,Pe=!de&&(e==="scroll"||e==="scrollend"),O=de?B!==null?B+"Capture":null:B;de=[];for(var R=U,M;R!==null;){var I=R;if(M=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||M===null||O===null||(I=gi(R,O),I!=null&&de.push(Ji(R,I,M))),Pe)break;R=R.return}0<de.length&&(B=new q(B,ne,null,a,P),V.push({event:B,listeners:de}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",B&&a!==No&&(ne=a.relatedTarget||a.fromElement)&&(ls(ne)||ne[rs]))break e;if((q||B)&&(B=P.window===P?P:(B=P.ownerDocument)?B.defaultView||B.parentWindow:window,q?(ne=a.relatedTarget||a.toElement,q=U,ne=ne?ls(ne):null,ne!==null&&(Pe=u(ne),de=ne.tag,ne!==Pe||de!==5&&de!==27&&de!==6)&&(ne=null)):(q=null,ne=U),q!==ne)){if(de=ah,I="onMouseLeave",O="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(de=ih,I="onPointerLeave",O="onPointerEnter",R="pointer"),Pe=q==null?B:pi(q),M=ne==null?B:pi(ne),B=new de(I,R+"leave",q,a,P),B.target=Pe,B.relatedTarget=M,I=null,ls(P)===U&&(de=new de(O,R+"enter",ne,a,P),de.target=M,de.relatedTarget=Pe,I=de),Pe=I,q&&ne)t:{for(de=Ab,O=q,R=ne,M=0,I=O;I;I=de(I))M++;I=0;for(var oe=R;oe;oe=de(oe))I++;for(;0<M-I;)O=de(O),M--;for(;0<I-M;)R=de(R),I--;for(;M--;){if(O===R||R!==null&&O===R.alternate){de=O;break t}O=de(O),R=de(R)}de=null}else de=null;q!==null&&Zm(V,B,q,de,!1),ne!==null&&Pe!==null&&Zm(V,Pe,ne,de,!0)}}e:{if(B=U?pi(U):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var Re=fh;else if(dh(B))if(mh)Re=qy;else{Re=By;var se=Ly}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?U&&To(U.elementType)&&(Re=fh):Re=$y;if(Re&&(Re=Re(e,U))){hh(V,Re,a,P);break e}se&&se(e,B,U),e==="focusout"&&U&&B.type==="number"&&U.memoizedProps.value!=null&&Eo(B,"number",B.value)}switch(se=U?pi(U):window,e){case"focusin":(dh(se)||se.contentEditable==="true")&&(gs=se,qo=U,ji=null);break;case"focusout":ji=qo=gs=null;break;case"mousedown":Po=!0;break;case"contextmenu":case"mouseup":case"dragend":Po=!1,_h(V,a,P);break;case"selectionchange":if(Hy)break;case"keydown":case"keyup":_h(V,a,P)}var we;if(zo)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else ps?ch(e,a)&&(Ee="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(rh&&a.locale!=="ko"&&(ps||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&ps&&(we=th()):(na=P,Co="value"in na?na.value:na.textContent,ps=!0)),se=jl(U,Ee),0<se.length&&(Ee=new sh(Ee,e,null,a,P),V.push({event:Ee,listeners:se}),we?Ee.data=we:(we=uh(a),we!==null&&(Ee.data=we)))),(we=Oy?Dy(e,a):My(e,a))&&(Ee=jl(U,"onBeforeInput"),0<Ee.length&&(se=new sh("onBeforeInput","beforeinput",null,a,P),V.push({event:se,listeners:Ee}),se.data=we)),Eb(V,e,U,a,P)}Jm(V,t)})}function Ji(e,t,a){return{instance:e,listener:t,currentTarget:a}}function jl(e,t){for(var a=t+"Capture",r=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=gi(e,a),d!=null&&r.unshift(Ji(e,d,f)),d=gi(e,t),d!=null&&r.push(Ji(e,d,f))),e.tag===3)return r;e=e.return}return[]}function Ab(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Zm(e,t,a,r,d){for(var f=t._reactName,v=[];a!==null&&a!==r;){var b=a,N=b.alternate,U=b.stateNode;if(b=b.tag,N!==null&&N===r)break;b!==5&&b!==26&&b!==27||U===null||(N=U,d?(U=gi(a,f),U!=null&&v.unshift(Ji(a,U,N))):d||(U=gi(a,f),U!=null&&v.push(Ji(a,U,N)))),a=a.return}v.length!==0&&e.push({event:t,listeners:v})}var Rb=/\r\n?/g,Cb=/\u0000|\uFFFD/g;function Wm(e){return(typeof e=="string"?e:""+e).replace(Rb,`
`).replace(Cb,"")}function Fm(e,t){return t=Wm(t),Wm(e)===t}function qe(e,t,a,r,d,f){switch(a){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||hs(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&hs(e,""+r);break;case"className":kr(e,"class",r);break;case"tabIndex":kr(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(e,a,r);break;case"style":Wd(e,r,f);break;case"data":if(t!=="object"){kr(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=Rr(""+r),e.setAttribute(a,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(t!=="input"&&qe(e,t,"name",d.name,d,null),qe(e,t,"formEncType",d.formEncType,d,null),qe(e,t,"formMethod",d.formMethod,d,null),qe(e,t,"formTarget",d.formTarget,d,null)):(qe(e,t,"encType",d.encType,d,null),qe(e,t,"method",d.method,d,null),qe(e,t,"target",d.target,d,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(a);break}r=Rr(""+r),e.setAttribute(a,r);break;case"onClick":r!=null&&(e.onclick=An);break;case"onScroll":r!=null&&Se("scroll",e);break;case"onScrollEnd":r!=null&&Se("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(a=r.__html,a!=null){if(d.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}a=Rr(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""+r):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":r===!0?e.setAttribute(a,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(a,r):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(a,r):e.removeAttribute(a);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(a):e.setAttribute(a,r);break;case"popover":Se("beforetoggle",e),Se("toggle",e),Nr(e,"popover",r);break;case"xlinkActuate":kn(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":kn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":kn(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":kn(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":kn(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":kn(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":kn(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":kn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":kn(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Nr(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=iy.get(a)||a,Nr(e,a,r))}}function hu(e,t,a,r,d,f){switch(a){case"style":Wd(e,r,f);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(a=r.__html,a!=null){if(d.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof r=="string"?hs(e,r):(typeof r=="number"||typeof r=="bigint")&&hs(e,""+r);break;case"onScroll":r!=null&&Se("scroll",e);break;case"onScrollEnd":r!=null&&Se("scrollend",e);break;case"onClick":r!=null&&(e.onclick=An);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gd.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),t=a.slice(2,d?a.length-7:void 0),f=e[Rt]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(t,f,d),typeof r=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,r,d);break e}a in e?e[a]=r:r===!0?e.setAttribute(a,""):Nr(e,a,r)}}}function xt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",e),Se("load",e);var r=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":r=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:qe(e,t,f,v,a,null)}}d&&qe(e,t,"srcSet",a.srcSet,a,null),r&&qe(e,t,"src",a.src,a,null);return;case"input":Se("invalid",e);var b=f=v=d=null,N=null,U=null;for(r in a)if(a.hasOwnProperty(r)){var P=a[r];if(P!=null)switch(r){case"name":d=P;break;case"type":v=P;break;case"checked":N=P;break;case"defaultChecked":U=P;break;case"value":f=P;break;case"defaultValue":b=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(l(137,t));break;default:qe(e,t,r,P,a,null)}}Qd(e,f,b,N,U,v,d,!1);return;case"select":Se("invalid",e),r=v=f=null;for(d in a)if(a.hasOwnProperty(d)&&(b=a[d],b!=null))switch(d){case"value":f=b;break;case"defaultValue":v=b;break;case"multiple":r=b;default:qe(e,t,d,b,a,null)}t=f,a=v,e.multiple=!!r,t!=null?ds(e,!!r,t,!1):a!=null&&ds(e,!!r,a,!0);return;case"textarea":Se("invalid",e),f=d=r=null;for(v in a)if(a.hasOwnProperty(v)&&(b=a[v],b!=null))switch(v){case"value":r=b;break;case"defaultValue":d=b;break;case"children":f=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(l(91));break;default:qe(e,t,v,b,a,null)}Xd(e,r,d,f);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(r=a[N],r!=null))switch(N){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:qe(e,t,N,r,a,null)}return;case"dialog":Se("beforetoggle",e),Se("toggle",e),Se("cancel",e),Se("close",e);break;case"iframe":case"object":Se("load",e);break;case"video":case"audio":for(r=0;r<Qi.length;r++)Se(Qi[r],e);break;case"image":Se("error",e),Se("load",e);break;case"details":Se("toggle",e);break;case"embed":case"source":case"link":Se("error",e),Se("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(r=a[U],r!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:qe(e,t,U,r,a,null)}return;default:if(To(t)){for(P in a)a.hasOwnProperty(P)&&(r=a[P],r!==void 0&&hu(e,t,P,r,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(r=a[b],r!=null&&qe(e,t,b,r,a,null))}function Ob(e,t,a,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,v=null,b=null,N=null,U=null,P=null;for(q in a){var V=a[q];if(a.hasOwnProperty(q)&&V!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":N=V;default:r.hasOwnProperty(q)||qe(e,t,q,null,r,V)}}for(var B in r){var q=r[B];if(V=a[B],r.hasOwnProperty(B)&&(q!=null||V!=null))switch(B){case"type":f=q;break;case"name":d=q;break;case"checked":U=q;break;case"defaultChecked":P=q;break;case"value":v=q;break;case"defaultValue":b=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(l(137,t));break;default:q!==V&&qe(e,t,B,q,r,V)}}jo(e,v,b,N,U,P,f,d);return;case"select":q=v=b=B=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":q=N;default:r.hasOwnProperty(f)||qe(e,t,f,null,r,N)}for(d in r)if(f=r[d],N=a[d],r.hasOwnProperty(d)&&(f!=null||N!=null))switch(d){case"value":B=f;break;case"defaultValue":b=f;break;case"multiple":v=f;default:f!==N&&qe(e,t,d,f,r,N)}t=b,a=v,r=q,B!=null?ds(e,!!a,B,!1):!!r!=!!a&&(t!=null?ds(e,!!a,t,!0):ds(e,!!a,a?[]:"",!1));return;case"textarea":q=B=null;for(b in a)if(d=a[b],a.hasOwnProperty(b)&&d!=null&&!r.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:qe(e,t,b,null,r,d)}for(v in r)if(d=r[v],f=a[v],r.hasOwnProperty(v)&&(d!=null||f!=null))switch(v){case"value":B=d;break;case"defaultValue":q=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(l(91));break;default:d!==f&&qe(e,t,v,d,r,f)}Jd(e,B,q);return;case"option":for(var ne in a)if(B=a[ne],a.hasOwnProperty(ne)&&B!=null&&!r.hasOwnProperty(ne))switch(ne){case"selected":e.selected=!1;break;default:qe(e,t,ne,null,r,B)}for(N in r)if(B=r[N],q=a[N],r.hasOwnProperty(N)&&B!==q&&(B!=null||q!=null))switch(N){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:qe(e,t,N,B,r,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in a)B=a[de],a.hasOwnProperty(de)&&B!=null&&!r.hasOwnProperty(de)&&qe(e,t,de,null,r,B);for(U in r)if(B=r[U],q=a[U],r.hasOwnProperty(U)&&B!==q&&(B!=null||q!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(l(137,t));break;default:qe(e,t,U,B,r,q)}return;default:if(To(t)){for(var Pe in a)B=a[Pe],a.hasOwnProperty(Pe)&&B!==void 0&&!r.hasOwnProperty(Pe)&&hu(e,t,Pe,void 0,r,B);for(P in r)B=r[P],q=a[P],!r.hasOwnProperty(P)||B===q||B===void 0&&q===void 0||hu(e,t,P,B,r,q);return}}for(var O in a)B=a[O],a.hasOwnProperty(O)&&B!=null&&!r.hasOwnProperty(O)&&qe(e,t,O,null,r,B);for(V in r)B=r[V],q=a[V],!r.hasOwnProperty(V)||B===q||B==null&&q==null||qe(e,t,V,B,r,q)}function ep(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Db(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),r=0;r<a.length;r++){var d=a[r],f=d.transferSize,v=d.initiatorType,b=d.duration;if(f&&b&&ep(v)){for(v=0,b=d.responseEnd,r+=1;r<a.length;r++){var N=a[r],U=N.startTime;if(U>b)break;var P=N.transferSize,V=N.initiatorType;P&&ep(V)&&(N=N.responseEnd,v+=P*(N<b?1:(b-U)/(N-U)))}if(--r,t+=8*(f+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var fu=null,mu=null;function El(e){return e.nodeType===9?e:e.ownerDocument}function tp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function np(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function pu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gu=null;function Mb(){var e=window.event;return e&&e.type==="popstate"?e===gu?!1:(gu=e,!0):(gu=null,!1)}var ap=typeof setTimeout=="function"?setTimeout:void 0,Ub=typeof clearTimeout=="function"?clearTimeout:void 0,sp=typeof Promise=="function"?Promise:void 0,zb=typeof queueMicrotask=="function"?queueMicrotask:typeof sp<"u"?function(e){return sp.resolve(null).then(e).catch(Lb)}:ap;function Lb(e){setTimeout(function(){throw e})}function ba(e){return e==="head"}function ip(e,t){var a=t,r=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(r===0){e.removeChild(d),Gs(t);return}r--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")r++;else if(a==="html")Xi(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Xi(a);for(var f=a.firstChild;f;){var v=f.nextSibling,b=f.nodeName;f[mi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=v}}else a==="body"&&Xi(e.ownerDocument.body);a=d}while(a);Gs(t)}function rp(e,t){var a=e;e=0;do{var r=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),r&&r.nodeType===8)if(a=r.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=r}while(a)}function vu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":vu(a),_o(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Bb(e,t,a,r){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[mi])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=sn(e.nextSibling),e===null)break}return null}function $b(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=sn(e.nextSibling),e===null))return null;return e}function lp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=sn(e.nextSibling),e===null))return null;return e}function yu(e){return e.data==="$?"||e.data==="$~"}function bu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function qb(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var r=function(){t(),a.removeEventListener("DOMContentLoaded",r)};a.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var wu=null;function op(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return sn(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function cp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function up(e,t,a){switch(t=El(a),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Xi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);_o(e)}var rn=new Map,dp=new Set;function Tl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Vn=G.d;G.d={f:Pb,r:Hb,D:Gb,C:Ib,L:Vb,m:Yb,X:Qb,S:Kb,M:Jb};function Pb(){var e=Vn.f(),t=vl();return e||t}function Hb(e){var t=os(e);t!==null&&t.tag===5&&t.type==="form"?kf(t):Vn.r(e)}var qs=typeof document>"u"?null:document;function hp(e,t,a){var r=qs;if(r&&typeof t=="string"&&t){var d=Zt(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),dp.has(d)||(dp.add(d),e={rel:e,crossOrigin:a,href:t},r.querySelector(d)===null&&(t=r.createElement("link"),xt(t,"link",e),mt(t),r.head.appendChild(t)))}}function Gb(e){Vn.D(e),hp("dns-prefetch",e,null)}function Ib(e,t){Vn.C(e,t),hp("preconnect",e,t)}function Vb(e,t,a){Vn.L(e,t,a);var r=qs;if(r&&e&&t){var d='link[rel="preload"][as="'+Zt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Zt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Zt(a.imageSizes)+'"]')):d+='[href="'+Zt(e)+'"]';var f=d;switch(t){case"style":f=Ps(e);break;case"script":f=Hs(e)}rn.has(f)||(e=w({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),rn.set(f,e),r.querySelector(d)!==null||t==="style"&&r.querySelector(Zi(f))||t==="script"&&r.querySelector(Wi(f))||(t=r.createElement("link"),xt(t,"link",e),mt(t),r.head.appendChild(t)))}}function Yb(e,t){Vn.m(e,t);var a=qs;if(a&&e){var r=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Zt(r)+'"][href="'+Zt(e)+'"]',f=d;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Hs(e)}if(!rn.has(f)&&(e=w({rel:"modulepreload",href:e},t),rn.set(f,e),a.querySelector(d)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Wi(f)))return}r=a.createElement("link"),xt(r,"link",e),mt(r),a.head.appendChild(r)}}}function Kb(e,t,a){Vn.S(e,t,a);var r=qs;if(r&&e){var d=cs(r).hoistableStyles,f=Ps(e);t=t||"default";var v=d.get(f);if(!v){var b={loading:0,preload:null};if(v=r.querySelector(Zi(f)))b.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},a),(a=rn.get(f))&&xu(e,a);var N=v=r.createElement("link");mt(N),xt(N,"link",e),N._p=new Promise(function(U,P){N.onload=U,N.onerror=P}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Nl(v,t,r)}v={type:"stylesheet",instance:v,count:1,state:b},d.set(f,v)}}}function Qb(e,t){Vn.X(e,t);var a=qs;if(a&&e){var r=cs(a).hoistableScripts,d=Hs(e),f=r.get(d);f||(f=a.querySelector(Wi(d)),f||(e=w({src:e,async:!0},t),(t=rn.get(d))&&_u(e,t),f=a.createElement("script"),mt(f),xt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},r.set(d,f))}}function Jb(e,t){Vn.M(e,t);var a=qs;if(a&&e){var r=cs(a).hoistableScripts,d=Hs(e),f=r.get(d);f||(f=a.querySelector(Wi(d)),f||(e=w({src:e,async:!0,type:"module"},t),(t=rn.get(d))&&_u(e,t),f=a.createElement("script"),mt(f),xt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},r.set(d,f))}}function fp(e,t,a,r){var d=(d=ye.current)?Tl(d):null;if(!d)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Ps(a.href),a=cs(d).hoistableStyles,r=a.get(t),r||(r={type:"style",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ps(a.href);var f=cs(d).hoistableStyles,v=f.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=d.querySelector(Zi(e)))&&!f._p&&(v.instance=f,v.state.loading=5),rn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},rn.set(e,a),f||Xb(d,e,a,v.state))),t&&r===null)throw Error(l(528,""));return v}if(t&&r!==null)throw Error(l(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Hs(a),a=cs(d).hoistableScripts,r=a.get(t),r||(r={type:"script",instance:null,count:0,state:null},a.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Ps(e){return'href="'+Zt(e)+'"'}function Zi(e){return'link[rel="stylesheet"]['+e+"]"}function mp(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Xb(e,t,a,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),xt(t,"link",a),mt(t),e.head.appendChild(t))}function Hs(e){return'[src="'+Zt(e)+'"]'}function Wi(e){return"script[async]"+e}function pp(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Zt(a.href)+'"]');if(r)return t.instance=r,mt(r),r;var d=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),mt(r),xt(r,"style",d),Nl(r,a.precedence,e),t.instance=r;case"stylesheet":d=Ps(a.href);var f=e.querySelector(Zi(d));if(f)return t.state.loading|=4,t.instance=f,mt(f),f;r=mp(a),(d=rn.get(d))&&xu(r,d),f=(e.ownerDocument||e).createElement("link"),mt(f);var v=f;return v._p=new Promise(function(b,N){v.onload=b,v.onerror=N}),xt(f,"link",r),t.state.loading|=4,Nl(f,a.precedence,e),t.instance=f;case"script":return f=Hs(a.src),(d=e.querySelector(Wi(f)))?(t.instance=d,mt(d),d):(r=a,(d=rn.get(f))&&(r=w({},a),_u(r,d)),e=e.ownerDocument||e,d=e.createElement("script"),mt(d),xt(d,"link",r),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,Nl(r,a.precedence,e));return t.instance}function Nl(e,t,a){for(var r=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=r.length?r[r.length-1]:null,f=d,v=0;v<r.length;v++){var b=r[v];if(b.dataset.precedence===t)f=b;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function xu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function _u(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var kl=null;function gp(e,t,a){if(kl===null){var r=new Map,d=kl=new Map;d.set(a,r)}else d=kl,r=d.get(a),r||(r=new Map,d.set(a,r));if(r.has(e))return r;for(r.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var f=a[d];if(!(f[mi]||f[vt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(t)||"";v=e+v;var b=r.get(v);b?b.push(f):r.set(v,[f])}}return r}function vp(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Zb(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function yp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Wb(e,t,a,r){if(a.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Ps(r.href),f=t.querySelector(Zi(d));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Al.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=f,mt(f);return}f=t.ownerDocument||t,r=mp(r),(d=rn.get(d))&&xu(r,d),f=f.createElement("link"),mt(f);var v=f;v._p=new Promise(function(b,N){v.onload=b,v.onerror=N}),xt(f,"link",r),a.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Al.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Su=0;function Fb(e,t){return e.stylesheets&&e.count===0&&Cl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var r=setTimeout(function(){if(e.stylesheets&&Cl(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Su===0&&(Su=62500*Db());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Cl(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Su?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(d)}}:null}function Al(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Rl=null;function Cl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Rl=new Map,t.forEach(e0,e),Rl=null,Al.call(e))}function e0(e,t){if(!(t.state.loading&4)){var a=Rl.get(e);if(a)var r=a.get(null);else{a=new Map,Rl.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var v=d[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),r=v)}r&&a.set(null,r)}d=t.instance,v=d.getAttribute("data-precedence"),f=a.get(v)||r,f===r&&a.set(null,d),a.set(v,d),this.count++,r=Al.bind(this),d.addEventListener("load",r),d.addEventListener("error",r),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var Fi={$$typeof:L,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function t0(e,t,a,r,d,f,v,b,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ue(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ue(0),this.hiddenUpdates=Ue(null),this.identifierPrefix=r,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function bp(e,t,a,r,d,f,v,b,N,U,P,V){return e=new t0(e,t,a,v,N,U,P,V,b),t=1,f===!0&&(t|=24),f=Bt(3,null,null,t),e.current=f,f.stateNode=e,t=nc(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:r,isDehydrated:a,cache:t},rc(f),e}function wp(e){return e?(e=bs,e):bs}function xp(e,t,a,r,d,f){d=wp(d),r.context===null?r.context=d:r.pendingContext=d,r=oa(t),r.payload={element:a},f=f===void 0?null:f,f!==null&&(r.callback=f),a=ca(e,r,t),a!==null&&(zt(a,e,t),Ci(a,e,t))}function _p(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function ju(e,t){_p(e,t),(e=e.alternate)&&_p(e,t)}function Sp(e){if(e.tag===13||e.tag===31){var t=Da(e,67108864);t!==null&&zt(t,e,67108864),ju(e,67108864)}}function jp(e){if(e.tag===13||e.tag===31){var t=Gt();t=cn(t);var a=Da(e,t);a!==null&&zt(a,e,t),ju(e,t)}}var Ol=!0;function n0(e,t,a,r){var d=k.T;k.T=null;var f=G.p;try{G.p=2,Eu(e,t,a,r)}finally{G.p=f,k.T=d}}function a0(e,t,a,r){var d=k.T;k.T=null;var f=G.p;try{G.p=8,Eu(e,t,a,r)}finally{G.p=f,k.T=d}}function Eu(e,t,a,r){if(Ol){var d=Tu(r);if(d===null)du(e,t,r,Dl,a),Tp(e,r);else if(i0(d,e,t,a,r))r.stopPropagation();else if(Tp(e,r),t&4&&-1<s0.indexOf(e)){for(;d!==null;){var f=os(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=ce(f.pendingLanes);if(v!==0){var b=f;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var N=1<<31-Nt(v);b.entanglements[1]|=N,v&=~N}Tn(f),(De&6)===0&&(pl=gt()+500,Ki(0))}}break;case 31:case 13:b=Da(f,2),b!==null&&zt(b,f,2),vl(),ju(f,2)}if(f=Tu(r),f===null&&du(e,t,r,Dl,a),f===d)break;d=f}d!==null&&r.stopPropagation()}else du(e,t,r,null,a)}}function Tu(e){return e=ko(e),Nu(e)}var Dl=null;function Nu(e){if(Dl=null,e=ls(e),e!==null){var t=u(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=p(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Dl=e,null}function Ep(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vo()){case Er:return 2;case Tr:return 8;case is:case yo:return 32;case ui:return 268435456;default:return 32}default:return 32}}var ku=!1,wa=null,xa=null,_a=null,er=new Map,tr=new Map,Sa=[],s0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tp(e,t){switch(e){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":xa=null;break;case"mouseover":case"mouseout":_a=null;break;case"pointerover":case"pointerout":er.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tr.delete(t.pointerId)}}function nr(e,t,a,r,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:f,targetContainers:[d]},t!==null&&(t=os(t),t!==null&&Sp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function i0(e,t,a,r,d){switch(t){case"focusin":return wa=nr(wa,e,t,a,r,d),!0;case"dragenter":return xa=nr(xa,e,t,a,r,d),!0;case"mouseover":return _a=nr(_a,e,t,a,r,d),!0;case"pointerover":var f=d.pointerId;return er.set(f,nr(er.get(f)||null,e,t,a,r,d)),!0;case"gotpointercapture":return f=d.pointerId,tr.set(f,nr(tr.get(f)||null,e,t,a,r,d)),!0}return!1}function Np(e){var t=ls(e.target);if(t!==null){var a=u(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,qd(e.priority,function(){jp(a)});return}}else if(t===31){if(t=p(a),t!==null){e.blockedOn=t,qd(e.priority,function(){jp(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ml(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Tu(e.nativeEvent);if(a===null){a=e.nativeEvent;var r=new a.constructor(a.type,a);No=r,a.target.dispatchEvent(r),No=null}else return t=os(a),t!==null&&Sp(t),e.blockedOn=a,!1;t.shift()}return!0}function kp(e,t,a){Ml(e)&&a.delete(t)}function r0(){ku=!1,wa!==null&&Ml(wa)&&(wa=null),xa!==null&&Ml(xa)&&(xa=null),_a!==null&&Ml(_a)&&(_a=null),er.forEach(kp),tr.forEach(kp)}function Ul(e,t){e.blockedOn===t&&(e.blockedOn=null,ku||(ku=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,r0)))}var zl=null;function Ap(e){zl!==e&&(zl=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){zl===e&&(zl=null);for(var t=0;t<e.length;t+=3){var a=e[t],r=e[t+1],d=e[t+2];if(typeof r!="function"){if(Nu(r||a)===null)continue;break}var f=os(a);f!==null&&(e.splice(t,3),t-=3,Tc(f,{pending:!0,data:d,method:a.method,action:r},r,d))}}))}function Gs(e){function t(N){return Ul(N,e)}wa!==null&&Ul(wa,e),xa!==null&&Ul(xa,e),_a!==null&&Ul(_a,e),er.forEach(t),tr.forEach(t);for(var a=0;a<Sa.length;a++){var r=Sa[a];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Sa.length&&(a=Sa[0],a.blockedOn===null);)Np(a),a.blockedOn===null&&Sa.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(r=0;r<a.length;r+=3){var d=a[r],f=a[r+1],v=d[Rt]||null;if(typeof f=="function")v||Ap(a);else if(v){var b=null;if(f&&f.hasAttribute("formAction")){if(d=f,v=f[Rt]||null)b=v.formAction;else if(Nu(d)!==null)continue}else b=v.action;typeof b=="function"?a[r+1]=b:(a.splice(r,3),r-=3),Ap(a)}}}function Rp(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),r||setTimeout(a,20)}function a(){if(!r&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function Au(e){this._internalRoot=e}Ll.prototype.render=Au.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var a=t.current,r=Gt();xp(a,r,e,t,null,null)},Ll.prototype.unmount=Au.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xp(e.current,2,null,e,null,null),vl(),t[rs]=null}};function Ll(e){this._internalRoot=e}Ll.prototype.unstable_scheduleHydration=function(e){if(e){var t=ea();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Sa.length&&t!==0&&t<Sa[a].priority;a++);Sa.splice(a,0,e),a===0&&Np(e)}};var Cp=n.version;if(Cp!=="19.2.0")throw Error(l(527,Cp,"19.2.0"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=g(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var l0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Wn=Bl.inject(l0),Tt=Bl}catch{}}return sr.createRoot=function(e,t){if(!o(e))throw Error(l(299));var a=!1,r="",d=Bf,f=$f,v=qf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=bp(e,1,!1,null,null,a,r,null,d,f,v,Rp),e[rs]=t.current,uu(e),new Au(t)},sr.hydrateRoot=function(e,t,a){if(!o(e))throw Error(l(299));var r=!1,d="",f=Bf,v=$f,b=qf,N=null;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),t=bp(e,1,!0,t,a??null,r,d,N,f,v,b,Rp),t.context=wp(null),a=t.current,r=Gt(),r=cn(r),d=oa(r),d.callback=null,ca(a,d,r),a=r,t.current.lanes=a,Be(t,a),Tn(t),e[rs]=t.current,uu(e),new Ll(t)},sr.version="19.2.0",sr}var Pp;function w0(){if(Pp)return Ou.exports;Pp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Ou.exports=b0(),Ou.exports}var x0=w0();var Hp="popstate";function _0(i={}){function n(l,o){let{pathname:u,search:h,hash:p}=l.location;return Qu("",{pathname:u,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(l,o){return typeof o=="string"?o:pr(o)}return j0(n,s,null,i)}function Ze(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function Qt(i,n){if(!i){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function S0(){return Math.random().toString(36).substring(2,10)}function Gp(i,n){return{usr:i.state,key:i.key,idx:n}}function Qu(i,n,s=null,l){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof n=="string"?ai(n):n,state:s,key:n&&n.key||l||S0()}}function pr({pathname:i="/",search:n="",hash:s=""}){return n&&n!=="?"&&(i+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(i+=s.charAt(0)==="#"?s:"#"+s),i}function ai(i){let n={};if(i){let s=i.indexOf("#");s>=0&&(n.hash=i.substring(s),i=i.substring(0,s));let l=i.indexOf("?");l>=0&&(n.search=i.substring(l),i=i.substring(0,l)),i&&(n.pathname=i)}return n}function j0(i,n,s,l={}){let{window:o=document.defaultView,v5Compat:u=!1}=l,h=o.history,p="POP",m=null,g=y();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function y(){return(h.state||{idx:null}).idx}function w(){p="POP";let T=y(),C=T==null?null:T-g;g=T,m&&m({action:p,location:A.location,delta:C})}function S(T,C){p="PUSH";let D=Qu(A.location,T,C);g=y()+1;let L=Gp(D,g),J=A.createHref(D);try{h.pushState(L,"",J)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(J)}u&&m&&m({action:p,location:A.location,delta:1})}function x(T,C){p="REPLACE";let D=Qu(A.location,T,C);g=y();let L=Gp(D,g),J=A.createHref(D);h.replaceState(L,"",J),u&&m&&m({action:p,location:A.location,delta:0})}function _(T){return E0(T)}let A={get action(){return p},get location(){return i(o,h)},listen(T){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Hp,w),m=T,()=>{o.removeEventListener(Hp,w),m=null}},createHref(T){return n(o,T)},createURL:_,encodeLocation(T){let C=_(T);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:S,replace:x,go(T){return h.go(T)}};return A}function E0(i,n=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Ze(s,"No window.location.(origin|href) available to create URL");let l=typeof i=="string"?i:pr(i);return l=l.replace(/ $/,"%20"),!n&&l.startsWith("//")&&(l=s+l),new URL(l,s)}function Cg(i,n,s="/"){return T0(i,n,s,!1)}function T0(i,n,s,l){let o=typeof n=="string"?ai(n):n,u=Jn(o.pathname||"/",s);if(u==null)return null;let h=Og(i);N0(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let g=B0(u);p=z0(h[m],g,l)}return p}function Og(i,n=[],s=[],l="",o=!1){let u=(h,p,m=o,g)=>{let y={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(l)&&m)return;Ze(y.relativePath.startsWith(l),`Absolute route path "${y.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(l.length)}let w=Qn([l,y.relativePath]),S=s.concat(y);h.children&&h.children.length>0&&(Ze(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),Og(h.children,n,S,w,m)),!(h.path==null&&!h.index)&&n.push({path:w,score:M0(w,h.index),routesMeta:S})};return i.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let m of Dg(h.path))u(h,p,!0,m)}),n}function Dg(i){let n=i.split("/");if(n.length===0)return[];let[s,...l]=n,o=s.endsWith("?"),u=s.replace(/\?$/,"");if(l.length===0)return o?[u,""]:[u];let h=Dg(l.join("/")),p=[];return p.push(...h.map(m=>m===""?u:[u,m].join("/"))),o&&p.push(...h),p.map(m=>i.startsWith("/")&&m===""?"/":m)}function N0(i){i.sort((n,s)=>n.score!==s.score?s.score-n.score:U0(n.routesMeta.map(l=>l.childrenIndex),s.routesMeta.map(l=>l.childrenIndex)))}var k0=/^:[\w-]+$/,A0=3,R0=2,C0=1,O0=10,D0=-2,Ip=i=>i==="*";function M0(i,n){let s=i.split("/"),l=s.length;return s.some(Ip)&&(l+=D0),n&&(l+=R0),s.filter(o=>!Ip(o)).reduce((o,u)=>o+(k0.test(u)?A0:u===""?C0:O0),l)}function U0(i,n){return i.length===n.length&&i.slice(0,-1).every((l,o)=>l===n[o])?i[i.length-1]-n[n.length-1]:0}function z0(i,n,s=!1){let{routesMeta:l}=i,o={},u="/",h=[];for(let p=0;p<l.length;++p){let m=l[p],g=p===l.length-1,y=u==="/"?n:n.slice(u.length)||"/",w=Wl({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),S=m.route;if(!w&&g&&s&&!l[l.length-1].route.index&&(w=Wl({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:Qn([u,w.pathname]),pathnameBase:G0(Qn([u,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(u=Qn([u,w.pathnameBase]))}return h}function Wl(i,n){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[s,l]=L0(i.path,i.caseSensitive,i.end),o=n.match(s);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:l.reduce((g,{paramName:y,isOptional:w},S)=>{if(y==="*"){let _=p[S]||"";h=u.slice(0,u.length-_.length).replace(/(.)\/+$/,"$1")}const x=p[S];return w&&!x?g[y]=void 0:g[y]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:i}}function L0(i,n=!1,s=!0){Qt(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let l=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(l.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(l.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),l]}function B0(i){try{return i.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Qt(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),i}}function Jn(i,n){if(n==="/")return i;if(!i.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,l=i.charAt(s);return l&&l!=="/"?null:i.slice(s)||"/"}var $0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q0=i=>$0.test(i);function P0(i,n="/"){let{pathname:s,search:l="",hash:o=""}=typeof i=="string"?ai(i):i,u;if(s)if(q0(s))u=s;else{if(s.includes("//")){let h=s;s=s.replace(/\/\/+/g,"/"),Qt(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${s}`)}s.startsWith("/")?u=Vp(s.substring(1),"/"):u=Vp(s,n)}else u=n;return{pathname:u,search:I0(l),hash:V0(o)}}function Vp(i,n){let s=n.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function zu(i,n,s,l){return`Cannot include a '${i}' character in a manually specified \`to.${n}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function H0(i){return i.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function pd(i){let n=H0(i);return n.map((s,l)=>l===n.length-1?s.pathname:s.pathnameBase)}function gd(i,n,s,l=!1){let o;typeof i=="string"?o=ai(i):(o={...i},Ze(!o.pathname||!o.pathname.includes("?"),zu("?","pathname","search",o)),Ze(!o.pathname||!o.pathname.includes("#"),zu("#","pathname","hash",o)),Ze(!o.search||!o.search.includes("#"),zu("#","search","hash",o)));let u=i===""||o.pathname==="",h=u?"/":o.pathname,p;if(h==null)p=s;else{let w=n.length-1;if(!l&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),w-=1;o.pathname=S.join("/")}p=w>=0?n[w]:"/"}let m=P0(o,p),g=h&&h!=="/"&&h.endsWith("/"),y=(u||h===".")&&s.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var Qn=i=>i.join("/").replace(/\/\/+/g,"/"),G0=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),I0=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,V0=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Y0(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Mg=["POST","PUT","PATCH","DELETE"];new Set(Mg);var K0=["GET",...Mg];new Set(K0);var si=E.createContext(null);si.displayName="DataRouter";var oo=E.createContext(null);oo.displayName="DataRouterState";E.createContext(!1);var Ug=E.createContext({isTransitioning:!1});Ug.displayName="ViewTransition";var Q0=E.createContext(new Map);Q0.displayName="Fetchers";var J0=E.createContext(null);J0.displayName="Await";var yn=E.createContext(null);yn.displayName="Navigation";var br=E.createContext(null);br.displayName="Location";var Nn=E.createContext({outlet:null,matches:[],isDataRoute:!1});Nn.displayName="Route";var vd=E.createContext(null);vd.displayName="RouteError";function X0(i,{relative:n}={}){Ze(ii(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:l}=E.useContext(yn),{hash:o,pathname:u,search:h}=wr(i,{relative:n}),p=u;return s!=="/"&&(p=u==="/"?s:Qn([s,u])),l.createHref({pathname:p,search:h,hash:o})}function ii(){return E.useContext(br)!=null}function Xn(){return Ze(ii(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(br).location}var zg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Lg(i){E.useContext(yn).static||E.useLayoutEffect(i)}function Zn(){let{isDataRoute:i}=E.useContext(Nn);return i?cw():Z0()}function Z0(){Ze(ii(),"useNavigate() may be used only in the context of a <Router> component.");let i=E.useContext(si),{basename:n,navigator:s}=E.useContext(yn),{matches:l}=E.useContext(Nn),{pathname:o}=Xn(),u=JSON.stringify(pd(l)),h=E.useRef(!1);return Lg(()=>{h.current=!0}),E.useCallback((m,g={})=>{if(Qt(h.current,zg),!h.current)return;if(typeof m=="number"){s.go(m);return}let y=gd(m,JSON.parse(u),o,g.relative==="path");i==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:Qn([n,y.pathname])),(g.replace?s.replace:s.push)(y,g.state,g)},[n,s,u,o,i])}E.createContext(null);function wr(i,{relative:n}={}){let{matches:s}=E.useContext(Nn),{pathname:l}=Xn(),o=JSON.stringify(pd(s));return E.useMemo(()=>gd(i,JSON.parse(o),l,n==="path"),[i,o,l,n])}function W0(i,n){return Bg(i,n)}function Bg(i,n,s,l,o){Ze(ii(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=E.useContext(yn),{matches:h}=E.useContext(Nn),p=h[h.length-1],m=p?p.params:{},g=p?p.pathname:"/",y=p?p.pathnameBase:"/",w=p&&p.route;{let D=w&&w.path||"";$g(g,!w||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let S=Xn(),x;if(n){let D=typeof n=="string"?ai(n):n;Ze(y==="/"||D.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${D.pathname}" was given in the \`location\` prop.`),x=D}else x=S;let _=x.pathname||"/",A=_;if(y!=="/"){let D=y.replace(/^\//,"").split("/");A="/"+_.replace(/^\//,"").split("/").slice(D.length).join("/")}let T=Cg(i,{pathname:A});Qt(w||T!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Qt(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=aw(T&&T.map(D=>Object.assign({},D,{params:Object.assign({},m,D.params),pathname:Qn([y,u.encodeLocation?u.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?y:Qn([y,u.encodeLocation?u.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),h,s,l,o);return n&&C?E.createElement(br.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},C):C}function F0(){let i=ow(),n=Y0(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),s=i instanceof Error?i.stack:null,l="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:l},u={padding:"2px 4px",backgroundColor:l},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:u},"ErrorBoundary")," or"," ",E.createElement("code",{style:u},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},n),s?E.createElement("pre",{style:o},s):null,h)}var ew=E.createElement(F0,null),tw=class extends E.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,n){return n.location!==i.location||n.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:n.error,location:n.location,revalidation:i.revalidation||n.revalidation}}componentDidCatch(i,n){this.props.onError?this.props.onError(i,n):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?E.createElement(Nn.Provider,{value:this.props.routeContext},E.createElement(vd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nw({routeContext:i,match:n,children:s}){let l=E.useContext(si);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(Nn.Provider,{value:i},s)}function aw(i,n=[],s=null,l=null,o=null){if(i==null){if(!s)return null;if(s.errors)i=s.matches;else if(n.length===0&&!s.initialized&&s.matches.length>0)i=s.matches;else return null}let u=i,h=s?.errors;if(h!=null){let y=u.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);Ze(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let p=!1,m=-1;if(s)for(let y=0;y<u.length;y++){let w=u[y];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=y),w.route.id){let{loaderData:S,errors:x}=s,_=w.route.loader&&!S.hasOwnProperty(w.route.id)&&(!x||x[w.route.id]===void 0);if(w.route.lazy||_){p=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}let g=s&&l?(y,w)=>{l(y,{location:s.location,params:s.matches?.[0]?.params??{},errorInfo:w})}:void 0;return u.reduceRight((y,w,S)=>{let x,_=!1,A=null,T=null;s&&(x=h&&w.route.id?h[w.route.id]:void 0,A=w.route.errorElement||ew,p&&(m<0&&S===0?($g("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,T=null):m===S&&(_=!0,T=w.route.hydrateFallbackElement||null)));let C=n.concat(u.slice(0,S+1)),D=()=>{let L;return x?L=A:_?L=T:w.route.Component?L=E.createElement(w.route.Component,null):w.route.element?L=w.route.element:L=y,E.createElement(nw,{match:w,routeContext:{outlet:y,matches:C,isDataRoute:s!=null},children:L})};return s&&(w.route.ErrorBoundary||w.route.errorElement||S===0)?E.createElement(tw,{location:s.location,revalidation:s.revalidation,component:A,error:x,children:D(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:g}):D()},null)}function yd(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sw(i){let n=E.useContext(si);return Ze(n,yd(i)),n}function iw(i){let n=E.useContext(oo);return Ze(n,yd(i)),n}function rw(i){let n=E.useContext(Nn);return Ze(n,yd(i)),n}function bd(i){let n=rw(i),s=n.matches[n.matches.length-1];return Ze(s.route.id,`${i} can only be used on routes that contain a unique "id"`),s.route.id}function lw(){return bd("useRouteId")}function ow(){let i=E.useContext(vd),n=iw("useRouteError"),s=bd("useRouteError");return i!==void 0?i:n.errors?.[s]}function cw(){let{router:i}=sw("useNavigate"),n=bd("useNavigate"),s=E.useRef(!1);return Lg(()=>{s.current=!0}),E.useCallback(async(o,u={})=>{Qt(s.current,zg),s.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:n,...u}))},[i,n])}var Yp={};function $g(i,n,s){!n&&!Yp[i]&&(Yp[i]=!0,Qt(!1,s))}E.memo(uw);function uw({routes:i,future:n,state:s,unstable_onError:l}){return Bg(i,void 0,s,l,n)}function qg({to:i,replace:n,state:s,relative:l}){Ze(ii(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=E.useContext(yn);Qt(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=E.useContext(Nn),{pathname:h}=Xn(),p=Zn(),m=gd(i,pd(u),h,l==="path"),g=JSON.stringify(m);return E.useEffect(()=>{p(JSON.parse(g),{replace:n,state:s,relative:l})},[p,g,l,n,s]),null}function It(i){Ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dw({basename:i="/",children:n=null,location:s,navigationType:l="POP",navigator:o,static:u=!1}){Ze(!ii(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),p=E.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof s=="string"&&(s=ai(s));let{pathname:m="/",search:g="",hash:y="",state:w=null,key:S="default"}=s,x=E.useMemo(()=>{let _=Jn(m,h);return _==null?null:{location:{pathname:_,search:g,hash:y,state:w,key:S},navigationType:l}},[h,m,g,y,w,S,l]);return Qt(x!=null,`<Router basename="${h}"> is not able to match the URL "${m}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:E.createElement(yn.Provider,{value:p},E.createElement(br.Provider,{children:n,value:x}))}function hw({children:i,location:n}){return W0(Ju(i),n)}function Ju(i,n=[]){let s=[];return E.Children.forEach(i,(l,o)=>{if(!E.isValidElement(l))return;let u=[...n,o];if(l.type===E.Fragment){s.push.apply(s,Ju(l.props.children,u));return}Ze(l.type===It,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ze(!l.props.index||!l.props.children,"An index route cannot have child routes.");let h={id:l.props.id||u.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,middleware:l.props.middleware,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(h.children=Ju(l.props.children,u)),s.push(h)}),s}var Xl="get",Zl="application/x-www-form-urlencoded";function co(i){return i!=null&&typeof i.tagName=="string"}function fw(i){return co(i)&&i.tagName.toLowerCase()==="button"}function mw(i){return co(i)&&i.tagName.toLowerCase()==="form"}function pw(i){return co(i)&&i.tagName.toLowerCase()==="input"}function gw(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function vw(i,n){return i.button===0&&(!n||n==="_self")&&!gw(i)}function Xu(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((n,s)=>{let l=i[s];return n.concat(Array.isArray(l)?l.map(o=>[s,o]):[[s,l]])},[]))}function yw(i,n){let s=Xu(i);return n&&n.forEach((l,o)=>{s.has(o)||n.getAll(o).forEach(u=>{s.append(o,u)})}),s}var $l=null;function bw(){if($l===null)try{new FormData(document.createElement("form"),0),$l=!1}catch{$l=!0}return $l}var ww=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lu(i){return i!=null&&!ww.has(i)?(Qt(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zl}"`),null):i}function xw(i,n){let s,l,o,u,h;if(mw(i)){let p=i.getAttribute("action");l=p?Jn(p,n):null,s=i.getAttribute("method")||Xl,o=Lu(i.getAttribute("enctype"))||Zl,u=new FormData(i)}else if(fw(i)||pw(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=i.getAttribute("formaction")||p.getAttribute("action");if(l=m?Jn(m,n):null,s=i.getAttribute("formmethod")||p.getAttribute("method")||Xl,o=Lu(i.getAttribute("formenctype"))||Lu(p.getAttribute("enctype"))||Zl,u=new FormData(p,i),!bw()){let{name:g,type:y,value:w}=i;if(y==="image"){let S=g?`${g}.`:"";u.append(`${S}x`,"0"),u.append(`${S}y`,"0")}else g&&u.append(g,w)}}else{if(co(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Xl,l=null,o=Zl,h=i}return u&&o==="text/plain"&&(h=u,u=void 0),{action:l,method:s.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wd(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function _w(i,n,s){let l=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return l.pathname==="/"?l.pathname=`_root.${s}`:n&&Jn(l.pathname,n)==="/"?l.pathname=`${n.replace(/\/$/,"")}/_root.${s}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${s}`,l}async function Sw(i,n){if(i.id in n)return n[i.id];try{let s=await import(i.module);return n[i.id]=s,s}catch(s){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jw(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function Ew(i,n,s){let l=await Promise.all(i.map(async o=>{let u=n.routes[o.route.id];if(u){let h=await Sw(u,s);return h.links?h.links():[]}return[]}));return Aw(l.flat(1).filter(jw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Kp(i,n,s,l,o,u){let h=(m,g)=>s[g]?m.route.id!==s[g].route.id:!0,p=(m,g)=>s[g].pathname!==m.pathname||s[g].route.path?.endsWith("*")&&s[g].params["*"]!==m.params["*"];return u==="assets"?n.filter((m,g)=>h(m,g)||p(m,g)):u==="data"?n.filter((m,g)=>{let y=l.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(h(m,g)||p(m,g))return!0;if(m.route.shouldRevalidate){let w=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function Tw(i,n,{includeHydrateFallback:s}={}){return Nw(i.map(l=>{let o=n.routes[l.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),s&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Nw(i){return[...new Set(i)]}function kw(i){let n={},s=Object.keys(i).sort();for(let l of s)n[l]=i[l];return n}function Aw(i,n){let s=new Set;return new Set(n),i.reduce((l,o)=>{let u=JSON.stringify(kw(o));return s.has(u)||(s.add(u),l.push({key:u,link:o})),l},[])}function Pg(){let i=E.useContext(si);return wd(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function Rw(){let i=E.useContext(oo);return wd(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var xd=E.createContext(void 0);xd.displayName="FrameworkContext";function Hg(){let i=E.useContext(xd);return wd(i,"You must render this element inside a <HydratedRouter> element"),i}function Cw(i,n){let s=E.useContext(xd),[l,o]=E.useState(!1),[u,h]=E.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:w}=n,S=E.useRef(null);E.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let A=C=>{C.forEach(D=>{h(D.isIntersecting)})},T=new IntersectionObserver(A,{threshold:.5});return S.current&&T.observe(S.current),()=>{T.disconnect()}}},[i]),E.useEffect(()=>{if(l){let A=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(A)}}},[l]);let x=()=>{o(!0)},_=()=>{o(!1),h(!1)};return s?i!=="intent"?[u,S,{}]:[u,S,{onFocus:ir(p,x),onBlur:ir(m,_),onMouseEnter:ir(g,x),onMouseLeave:ir(y,_),onTouchStart:ir(w,x)}]:[!1,S,{}]}function ir(i,n){return s=>{i&&i(s),s.defaultPrevented||n(s)}}function Ow({page:i,...n}){let{router:s}=Pg(),l=E.useMemo(()=>Cg(s.routes,i,s.basename),[s.routes,i,s.basename]);return l?E.createElement(Mw,{page:i,matches:l,...n}):null}function Dw(i){let{manifest:n,routeModules:s}=Hg(),[l,o]=E.useState([]);return E.useEffect(()=>{let u=!1;return Ew(i,n,s).then(h=>{u||o(h)}),()=>{u=!0}},[i,n,s]),l}function Mw({page:i,matches:n,...s}){let l=Xn(),{manifest:o,routeModules:u}=Hg(),{basename:h}=Pg(),{loaderData:p,matches:m}=Rw(),g=E.useMemo(()=>Kp(i,n,m,o,l,"data"),[i,n,m,o,l]),y=E.useMemo(()=>Kp(i,n,m,o,l,"assets"),[i,n,m,o,l]),w=E.useMemo(()=>{if(i===l.pathname+l.search+l.hash)return[];let _=new Set,A=!1;if(n.forEach(C=>{let D=o.routes[C.route.id];!D||!D.hasLoader||(!g.some(L=>L.route.id===C.route.id)&&C.route.id in p&&u[C.route.id]?.shouldRevalidate||D.hasClientLoader?A=!0:_.add(C.route.id))}),_.size===0)return[];let T=_w(i,h,"data");return A&&_.size>0&&T.searchParams.set("_routes",n.filter(C=>_.has(C.route.id)).map(C=>C.route.id).join(",")),[T.pathname+T.search]},[h,p,l,o,g,n,i,u]),S=E.useMemo(()=>Tw(y,o),[y,o]),x=Dw(y);return E.createElement(E.Fragment,null,w.map(_=>E.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...s})),S.map(_=>E.createElement("link",{key:_,rel:"modulepreload",href:_,...s})),x.map(({key:_,link:A})=>E.createElement("link",{key:_,nonce:s.nonce,...A})))}function Uw(...i){return n=>{i.forEach(s=>{typeof s=="function"?s(n):s!=null&&(s.current=n)})}}var Gg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gg&&(window.__reactRouterVersion="7.9.6")}catch{}function zw({basename:i,children:n,window:s}){let l=E.useRef();l.current==null&&(l.current=_0({window:s,v5Compat:!0}));let o=l.current,[u,h]=E.useState({action:o.action,location:o.location}),p=E.useCallback(m=>{E.startTransition(()=>h(m))},[h]);return E.useLayoutEffect(()=>o.listen(p),[o,p]),E.createElement(dw,{basename:i,children:n,location:u.location,navigationType:u.action,navigator:o})}var Ig=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=E.forwardRef(function({onClick:n,discover:s="render",prefetch:l="none",relative:o,reloadDocument:u,replace:h,state:p,target:m,to:g,preventScrollReset:y,viewTransition:w,...S},x){let{basename:_}=E.useContext(yn),A=typeof g=="string"&&Ig.test(g),T,C=!1;if(typeof g=="string"&&A&&(T=g,Gg))try{let H=new URL(window.location.href),le=g.startsWith("//")?new URL(H.protocol+g):new URL(g),ve=Jn(le.pathname,_);le.origin===H.origin&&ve!=null?g=ve+le.search+le.hash:C=!0}catch{Qt(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=X0(g,{relative:o}),[L,J,K]=Cw(l,S),Y=qw(g,{replace:h,state:p,target:m,preventScrollReset:y,relative:o,viewTransition:w});function Q(H){n&&n(H),H.defaultPrevented||Y(H)}let te=E.createElement("a",{...S,...K,href:T||D,onClick:C||u?n:Q,ref:Uw(x,J),target:m,"data-discover":!A&&s==="render"?"true":void 0});return L&&!A?E.createElement(E.Fragment,null,te,E.createElement(Ow,{page:D})):te});ft.displayName="Link";var Lw=E.forwardRef(function({"aria-current":n="page",caseSensitive:s=!1,className:l="",end:o=!1,style:u,to:h,viewTransition:p,children:m,...g},y){let w=wr(h,{relative:g.relative}),S=Xn(),x=E.useContext(oo),{navigator:_,basename:A}=E.useContext(yn),T=x!=null&&Vw(w)&&p===!0,C=_.encodeLocation?_.encodeLocation(w).pathname:w.pathname,D=S.pathname,L=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(D=D.toLowerCase(),L=L?L.toLowerCase():null,C=C.toLowerCase()),L&&A&&(L=Jn(L,A)||L);const J=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let K=D===C||!o&&D.startsWith(C)&&D.charAt(J)==="/",Y=L!=null&&(L===C||!o&&L.startsWith(C)&&L.charAt(C.length)==="/"),Q={isActive:K,isPending:Y,isTransitioning:T},te=K?n:void 0,H;typeof l=="function"?H=l(Q):H=[l,K?"active":null,Y?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let le=typeof u=="function"?u(Q):u;return E.createElement(ft,{...g,"aria-current":te,className:H,ref:y,style:le,to:h,viewTransition:p},typeof m=="function"?m(Q):m)});Lw.displayName="NavLink";var Bw=E.forwardRef(({discover:i="render",fetcherKey:n,navigate:s,reloadDocument:l,replace:o,state:u,method:h=Xl,action:p,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:w,...S},x)=>{let _=Gw(),A=Iw(p,{relative:g}),T=h.toLowerCase()==="get"?"get":"post",C=typeof p=="string"&&Ig.test(p),D=L=>{if(m&&m(L),L.defaultPrevented)return;L.preventDefault();let J=L.nativeEvent.submitter,K=J?.getAttribute("formmethod")||h;_(J||L.currentTarget,{fetcherKey:n,method:K,navigate:s,replace:o,state:u,relative:g,preventScrollReset:y,viewTransition:w})};return E.createElement("form",{ref:x,method:T,action:A,onSubmit:l?m:D,...S,"data-discover":!C&&i==="render"?"true":void 0})});Bw.displayName="Form";function $w(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vg(i){let n=E.useContext(si);return Ze(n,$w(i)),n}function qw(i,{target:n,replace:s,state:l,preventScrollReset:o,relative:u,viewTransition:h}={}){let p=Zn(),m=Xn(),g=wr(i,{relative:u});return E.useCallback(y=>{if(vw(y,n)){y.preventDefault();let w=s!==void 0?s:pr(m)===pr(g);p(i,{replace:w,state:l,preventScrollReset:o,relative:u,viewTransition:h})}},[m,p,g,s,l,n,i,o,u,h])}function Yg(i){Qt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=E.useRef(Xu(i)),s=E.useRef(!1),l=Xn(),o=E.useMemo(()=>yw(l.search,s.current?null:n.current),[l.search]),u=Zn(),h=E.useCallback((p,m)=>{const g=Xu(typeof p=="function"?p(new URLSearchParams(o)):p);s.current=!0,u("?"+g,m)},[u,o]);return[o,h]}var Pw=0,Hw=()=>`__${String(++Pw)}__`;function Gw(){let{router:i}=Vg("useSubmit"),{basename:n}=E.useContext(yn),s=lw();return E.useCallback(async(l,o={})=>{let{action:u,method:h,encType:p,formData:m,body:g}=xw(l,n);if(o.navigate===!1){let y=o.fetcherKey||Hw();await i.fetch(y,s,o.action||u,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||h,formEncType:o.encType||p,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||h,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:s,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,n,s])}function Iw(i,{relative:n}={}){let{basename:s}=E.useContext(yn),l=E.useContext(Nn);Ze(l,"useFormAction must be used inside a RouteContext");let[o]=l.matches.slice(-1),u={...wr(i||".",{relative:n})},h=Xn();if(i==null){u.search=h.search;let p=new URLSearchParams(u.search),m=p.getAll("index");if(m.some(y=>y==="")){p.delete("index"),m.filter(w=>w).forEach(w=>p.append("index",w));let y=p.toString();u.search=y?`?${y}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(u.pathname=u.pathname==="/"?s:Qn([s,u.pathname])),pr(u)}function Vw(i,{relative:n}={}){let s=E.useContext(Ug);Ze(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=Vg("useViewTransitionState"),o=wr(i,{relative:n});if(!s.isTransitioning)return!1;let u=Jn(s.currentLocation.pathname,l)||s.currentLocation.pathname,h=Jn(s.nextLocation.pathname,l)||s.nextLocation.pathname;return Wl(o.pathname,h)!=null||Wl(o.pathname,u)!=null}var Zu=function(i,n){return Zu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(s[o]=l[o])},Zu(i,n)};function Kg(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Zu(i,n);function s(){this.constructor=i}i.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}var Fl=function(){return Fl=Object.assign||function(n){for(var s,l=1,o=arguments.length;l<o;l++){s=arguments[l];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(n[u]=s[u])}return n},Fl.apply(this,arguments)};function ri(i,n){var s={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.indexOf(l)<0&&(s[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(i);o<l.length;o++)n.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(i,l[o])&&(s[l[o]]=i[l[o]]);return s}function Qg(i,n,s,l){var o=arguments.length,u=o<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,s):l,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,n,s,l);else for(var p=i.length-1;p>=0;p--)(h=i[p])&&(u=(o<3?h(u):o>3?h(n,s,u):h(n,s))||u);return o>3&&u&&Object.defineProperty(n,s,u),u}function Jg(i,n){return function(s,l){n(s,l,i)}}function Xg(i,n,s,l,o,u){function h(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var p=l.kind,m=p==="getter"?"get":p==="setter"?"set":"value",g=!n&&i?l.static?i:i.prototype:null,y=n||(g?Object.getOwnPropertyDescriptor(g,l.name):{}),w,S=!1,x=s.length-1;x>=0;x--){var _={};for(var A in l)_[A]=A==="access"?{}:l[A];for(var A in l.access)_.access[A]=l.access[A];_.addInitializer=function(C){if(S)throw new TypeError("Cannot add initializers after decoration has completed");u.push(h(C||null))};var T=(0,s[x])(p==="accessor"?{get:y.get,set:y.set}:y[m],_);if(p==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(w=h(T.get))&&(y.get=w),(w=h(T.set))&&(y.set=w),(w=h(T.init))&&o.unshift(w)}else(w=h(T))&&(p==="field"?o.unshift(w):y[m]=w)}g&&Object.defineProperty(g,l.name,y),S=!0}function Zg(i,n,s){for(var l=arguments.length>2,o=0;o<n.length;o++)s=l?n[o].call(i,s):n[o].call(i);return l?s:void 0}function Wg(i){return typeof i=="symbol"?i:"".concat(i)}function Fg(i,n,s){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:s?"".concat(s," ",n):n})}function ev(i,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,n)}function ie(i,n,s,l){function o(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function p(y){try{g(l.next(y))}catch(w){h(w)}}function m(y){try{g(l.throw(y))}catch(w){h(w)}}function g(y){y.done?u(y.value):o(y.value).then(p,m)}g((l=l.apply(i,n||[])).next())})}function tv(i,n){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},l,o,u,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=p(0),h.throw=p(1),h.return=p(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(y){return m([g,y])}}function m(g){if(l)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(s=0)),s;)try{if(l=1,o&&(u=g[0]&2?o.return:g[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,g[1])).done)return u;switch(o=0,u&&(g=[g[0]&2,u.value]),g[0]){case 0:case 1:u=g;break;case 4:return s.label++,{value:g[1],done:!1};case 5:s.label++,o=g[1],g=[0];continue;case 7:g=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(g[0]===6||g[0]===2)){s=0;continue}if(g[0]===3&&(!u||g[1]>u[0]&&g[1]<u[3])){s.label=g[1];break}if(g[0]===6&&s.label<u[1]){s.label=u[1],u=g;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(g);break}u[2]&&s.ops.pop(),s.trys.pop();continue}g=n.call(i,s)}catch(y){g=[6,y],o=0}finally{l=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var uo=Object.create?(function(i,n,s,l){l===void 0&&(l=s);var o=Object.getOwnPropertyDescriptor(n,s);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,l,o)}):(function(i,n,s,l){l===void 0&&(l=s),i[l]=n[s]});function nv(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&uo(n,i,s)}function eo(i){var n=typeof Symbol=="function"&&Symbol.iterator,s=n&&i[n],l=0;if(s)return s.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&l>=i.length&&(i=void 0),{value:i&&i[l++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function _d(i,n){var s=typeof Symbol=="function"&&i[Symbol.iterator];if(!s)return i;var l=s.call(i),o,u=[],h;try{for(;(n===void 0||n-- >0)&&!(o=l.next()).done;)u.push(o.value)}catch(p){h={error:p}}finally{try{o&&!o.done&&(s=l.return)&&s.call(l)}finally{if(h)throw h.error}}return u}function av(){for(var i=[],n=0;n<arguments.length;n++)i=i.concat(_d(arguments[n]));return i}function sv(){for(var i=0,n=0,s=arguments.length;n<s;n++)i+=arguments[n].length;for(var l=Array(i),o=0,n=0;n<s;n++)for(var u=arguments[n],h=0,p=u.length;h<p;h++,o++)l[o]=u[h];return l}function iv(i,n,s){if(s||arguments.length===2)for(var l=0,o=n.length,u;l<o;l++)(u||!(l in n))&&(u||(u=Array.prototype.slice.call(n,0,l)),u[l]=n[l]);return i.concat(u||Array.prototype.slice.call(n))}function ni(i){return this instanceof ni?(this.v=i,this):new ni(i)}function rv(i,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=s.apply(i,n||[]),o,u=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",h),o[Symbol.asyncIterator]=function(){return this},o;function h(x){return function(_){return Promise.resolve(_).then(x,w)}}function p(x,_){l[x]&&(o[x]=function(A){return new Promise(function(T,C){u.push([x,A,T,C])>1||m(x,A)})},_&&(o[x]=_(o[x])))}function m(x,_){try{g(l[x](_))}catch(A){S(u[0][3],A)}}function g(x){x.value instanceof ni?Promise.resolve(x.value.v).then(y,w):S(u[0][2],x)}function y(x){m("next",x)}function w(x){m("throw",x)}function S(x,_){x(_),u.shift(),u.length&&m(u[0][0],u[0][1])}}function lv(i){var n,s;return n={},l("next"),l("throw",function(o){throw o}),l("return"),n[Symbol.iterator]=function(){return this},n;function l(o,u){n[o]=i[o]?function(h){return(s=!s)?{value:ni(i[o](h)),done:!1}:u?u(h):h}:u}}function ov(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i[Symbol.asyncIterator],s;return n?n.call(i):(i=typeof eo=="function"?eo(i):i[Symbol.iterator](),s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s);function l(u){s[u]=i[u]&&function(h){return new Promise(function(p,m){h=i[u](h),o(p,m,h.done,h.value)})}}function o(u,h,p,m){Promise.resolve(m).then(function(g){u({value:g,done:p})},h)}}function cv(i,n){return Object.defineProperty?Object.defineProperty(i,"raw",{value:n}):i.raw=n,i}var Yw=Object.create?(function(i,n){Object.defineProperty(i,"default",{enumerable:!0,value:n})}):function(i,n){i.default=n},Wu=function(i){return Wu=Object.getOwnPropertyNames||function(n){var s=[];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(s[s.length]=l);return s},Wu(i)};function uv(i){if(i&&i.__esModule)return i;var n={};if(i!=null)for(var s=Wu(i),l=0;l<s.length;l++)s[l]!=="default"&&uo(n,i,s[l]);return Yw(n,i),n}function dv(i){return i&&i.__esModule?i:{default:i}}function hv(i,n,s,l){if(s==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?i!==n||!l:!n.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?l:s==="a"?l.call(i):l?l.value:n.get(i)}function fv(i,n,s,l,o){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?i!==n||!o:!n.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?o.call(i,s):o?o.value=s:n.set(i,s),s}function mv(i,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?n===i:i.has(n)}function pv(i,n,s){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var l,o;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");l=n[Symbol.asyncDispose]}if(l===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");l=n[Symbol.dispose],s&&(o=l)}if(typeof l!="function")throw new TypeError("Object not disposable.");o&&(l=function(){try{o.call(this)}catch(u){return Promise.reject(u)}}),i.stack.push({value:n,dispose:l,async:s})}else s&&i.stack.push({async:!0});return n}var Kw=typeof SuppressedError=="function"?SuppressedError:function(i,n,s){var l=new Error(s);return l.name="SuppressedError",l.error=i,l.suppressed=n,l};function gv(i){function n(u){i.error=i.hasError?new Kw(u,i.error,"An error was suppressed during disposal."):u,i.hasError=!0}var s,l=0;function o(){for(;s=i.stack.pop();)try{if(!s.async&&l===1)return l=0,i.stack.push(s),Promise.resolve().then(o);if(s.dispose){var u=s.dispose.call(s.value);if(s.async)return l|=2,Promise.resolve(u).then(o,function(h){return n(h),o()})}else l|=1}catch(h){n(h)}if(l===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return o()}function vv(i,n){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,l,o,u,h){return l?n?".jsx":".js":o&&(!u||!h)?s:o+u+"."+h.toLowerCase()+"js"}):i}const Qw={__extends:Kg,__assign:Fl,__rest:ri,__decorate:Qg,__param:Jg,__esDecorate:Xg,__runInitializers:Zg,__propKey:Wg,__setFunctionName:Fg,__metadata:ev,__awaiter:ie,__generator:tv,__createBinding:uo,__exportStar:nv,__values:eo,__read:_d,__spread:av,__spreadArrays:sv,__spreadArray:iv,__await:ni,__asyncGenerator:rv,__asyncDelegator:lv,__asyncValues:ov,__makeTemplateObject:cv,__importStar:uv,__importDefault:dv,__classPrivateFieldGet:hv,__classPrivateFieldSet:fv,__classPrivateFieldIn:mv,__addDisposableResource:pv,__disposeResources:gv,__rewriteRelativeImportExtension:vv},Jw=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:pv,get __assign(){return Fl},__asyncDelegator:lv,__asyncGenerator:rv,__asyncValues:ov,__await:ni,__awaiter:ie,__classPrivateFieldGet:hv,__classPrivateFieldIn:mv,__classPrivateFieldSet:fv,__createBinding:uo,__decorate:Qg,__disposeResources:gv,__esDecorate:Xg,__exportStar:nv,__extends:Kg,__generator:tv,__importDefault:dv,__importStar:uv,__makeTemplateObject:cv,__metadata:ev,__param:Jg,__propKey:Wg,__read:_d,__rest:ri,__rewriteRelativeImportExtension:vv,__runInitializers:Zg,__setFunctionName:Fg,__spread:av,__spreadArray:iv,__spreadArrays:sv,__values:eo,default:Qw},Symbol.toStringTag,{value:"Module"})),Xw=i=>i?(...n)=>i(...n):(...n)=>fetch(...n);class Sd extends Error{constructor(n,s="FunctionsError",l){super(n),this.name=s,this.context=l}}class Zw extends Sd{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Qp extends Sd{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Jp extends Sd{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Fu;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Fu||(Fu={}));class Ww{constructor(n,{headers:s={},customFetch:l,region:o=Fu.Any}={}){this.url=n,this.headers=s,this.region=o,this.fetch=Xw(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return ie(this,arguments,void 0,function*(s,l={}){var o;let u,h;try{const{headers:p,method:m,body:g,signal:y,timeout:w}=l;let S={},{region:x}=l;x||(x=this.region);const _=new URL(`${this.url}/${s}`);x&&x!=="any"&&(S["x-region"]=x,_.searchParams.set("forceFunctionRegion",x));let A;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",A=g):typeof g=="string"?(S["Content-Type"]="text/plain",A=g):typeof FormData<"u"&&g instanceof FormData?A=g:(S["Content-Type"]="application/json",A=JSON.stringify(g)):A=g;let T=y;w&&(h=new AbortController,u=setTimeout(()=>h.abort(),w),y?(T=h.signal,y.addEventListener("abort",()=>h.abort())):T=h.signal);const C=yield this.fetch(_.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),p),body:A,signal:T}).catch(K=>{throw new Zw(K)}),D=C.headers.get("x-relay-error");if(D&&D==="true")throw new Qp(C);if(!C.ok)throw new Jp(C);let L=((o=C.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),J;return L==="application/json"?J=yield C.json():L==="application/octet-stream"||L==="application/pdf"?J=yield C.blob():L==="text/event-stream"?J=C:L==="multipart/form-data"?J=yield C.formData():J=yield C.text(),{data:J,error:null,response:C}}catch(p){return{data:null,error:p,response:p instanceof Jp||p instanceof Qp?p.context:void 0}}finally{u&&clearTimeout(u)}})}}var Et={};const li=d0(Jw);var ql={},Pl={},Hl={},Gl={},Il={},Vl={},Xp;function yv(){if(Xp)return Vl;Xp=1,Object.defineProperty(Vl,"__esModule",{value:!0});class i extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Vl.default=i,Vl}var Zp;function bv(){if(Zp)return Il;Zp=1,Object.defineProperty(Il,"__esModule",{value:!0});const n=li.__importDefault(yv());class s{constructor(o){var u,h;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(u=o.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=o.signal,this.isMaybeSingle=(h=o.isMaybeSingle)!==null&&h!==void 0?h:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,u){return this.headers=new Headers(this.headers),this.headers.set(o,u),this}then(o,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let p=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var g,y,w,S;let x=null,_=null,A=null,T=m.status,C=m.statusText;if(m.ok){if(this.method!=="HEAD"){const K=await m.text();K===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?_=K:_=JSON.parse(K))}const L=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),J=(w=m.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");L&&J&&J.length>1&&(A=parseInt(J[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(x={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,A=null,T=406,C="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const L=await m.text();try{x=JSON.parse(L),Array.isArray(x)&&m.status===404&&(_=[],x=null,T=200,C="OK")}catch{m.status===404&&L===""?(T=204,C="No Content"):x={message:L}}if(x&&this.isMaybeSingle&&(!((S=x?.details)===null||S===void 0)&&S.includes("0 rows"))&&(x=null,T=200,C="OK"),x&&this.shouldThrowOnError)throw new n.default(x)}return{error:x,data:_,count:A,status:T,statusText:C}});return this.shouldThrowOnError||(p=p.catch(m=>{var g,y,w,S,x,_;let A="";const T=m?.cause;if(T){const C=(g=T?.message)!==null&&g!==void 0?g:"",D=(y=T?.code)!==null&&y!==void 0?y:"";A=`${(w=m?.name)!==null&&w!==void 0?w:"FetchError"}: ${m?.message}`,A+=`

Caused by: ${(S=T?.name)!==null&&S!==void 0?S:"Error"}: ${C}`,D&&(A+=` (${D})`),T?.stack&&(A+=`
${T.stack}`)}else A=(x=m?.stack)!==null&&x!==void 0?x:"";return{error:{message:`${(_=m?.name)!==null&&_!==void 0?_:"FetchError"}: ${m?.message}`,details:A,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),p.then(o,u)}returns(){return this}overrideTypes(){return this}}return Il.default=s,Il}var Wp;function wv(){if(Wp)return Gl;Wp=1,Object.defineProperty(Gl,"__esModule",{value:!0});const n=li.__importDefault(bv());class s extends n.default{select(o){let u=!1;const h=(o??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:u=!0,nullsFirst:h,foreignTable:p,referencedTable:m=p}={}){const g=m?`${m}.order`:"order",y=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${y?`${y},`:""}${o}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:u,referencedTable:h=u}={}){const p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${o}`),this}range(o,u,{foreignTable:h,referencedTable:p=h}={}){const m=typeof p>"u"?"offset":`${p}.offset`,g=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(g,`${u-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:u=!1,settings:h=!1,buffers:p=!1,wal:m=!1,format:g="text"}={}){var y;const w=[o?"analyze":null,u?"verbose":null,h?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),S=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${S}"; options=${w};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Gl.default=s,Gl}var Fp;function jd(){if(Fp)return Hl;Fp=1,Object.defineProperty(Hl,"__esModule",{value:!0});const n=li.__importDefault(wv()),s=new RegExp("[,()]");class l extends n.default{eq(u,h){return this.url.searchParams.append(u,`eq.${h}`),this}neq(u,h){return this.url.searchParams.append(u,`neq.${h}`),this}gt(u,h){return this.url.searchParams.append(u,`gt.${h}`),this}gte(u,h){return this.url.searchParams.append(u,`gte.${h}`),this}lt(u,h){return this.url.searchParams.append(u,`lt.${h}`),this}lte(u,h){return this.url.searchParams.append(u,`lte.${h}`),this}like(u,h){return this.url.searchParams.append(u,`like.${h}`),this}likeAllOf(u,h){return this.url.searchParams.append(u,`like(all).{${h.join(",")}}`),this}likeAnyOf(u,h){return this.url.searchParams.append(u,`like(any).{${h.join(",")}}`),this}ilike(u,h){return this.url.searchParams.append(u,`ilike.${h}`),this}ilikeAllOf(u,h){return this.url.searchParams.append(u,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(u,h){return this.url.searchParams.append(u,`ilike(any).{${h.join(",")}}`),this}regexMatch(u,h){return this.url.searchParams.append(u,`match.${h}`),this}regexIMatch(u,h){return this.url.searchParams.append(u,`imatch.${h}`),this}is(u,h){return this.url.searchParams.append(u,`is.${h}`),this}isDistinct(u,h){return this.url.searchParams.append(u,`isdistinct.${h}`),this}in(u,h){const p=Array.from(new Set(h)).map(m=>typeof m=="string"&&s.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(u,`in.(${p})`),this}contains(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cs.{${h.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(h)}`),this}containedBy(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cd.{${h.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(h)}`),this}rangeGt(u,h){return this.url.searchParams.append(u,`sr.${h}`),this}rangeGte(u,h){return this.url.searchParams.append(u,`nxl.${h}`),this}rangeLt(u,h){return this.url.searchParams.append(u,`sl.${h}`),this}rangeLte(u,h){return this.url.searchParams.append(u,`nxr.${h}`),this}rangeAdjacent(u,h){return this.url.searchParams.append(u,`adj.${h}`),this}overlaps(u,h){return typeof h=="string"?this.url.searchParams.append(u,`ov.${h}`):this.url.searchParams.append(u,`ov.{${h.join(",")}}`),this}textSearch(u,h,{config:p,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const y=p===void 0?"":`(${p})`;return this.url.searchParams.append(u,`${g}fts${y}.${h}`),this}match(u){return Object.entries(u).forEach(([h,p])=>{this.url.searchParams.append(h,`eq.${p}`)}),this}not(u,h,p){return this.url.searchParams.append(u,`not.${h}.${p}`),this}or(u,{foreignTable:h,referencedTable:p=h}={}){const m=p?`${p}.or`:"or";return this.url.searchParams.append(m,`(${u})`),this}filter(u,h,p){return this.url.searchParams.append(u,`${h}.${p}`),this}}return Hl.default=l,Hl}var eg;function xv(){if(eg)return Pl;eg=1,Object.defineProperty(Pl,"__esModule",{value:!0});const n=li.__importDefault(jd());class s{constructor(o,{headers:u={},schema:h,fetch:p}){this.url=o,this.headers=new Headers(u),this.schema=h,this.fetch=p}select(o,u){const{head:h=!1,count:p}=u??{},m=h?"HEAD":"GET";let g=!1;const y=(o??"*").split("").map(w=>/\s/.test(w)&&!g?"":(w==='"'&&(g=!g),w)).join("");return this.url.searchParams.set("select",y),p&&this.headers.append("Prefer",`count=${p}`),new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:u,defaultToNull:h=!0}={}){var p;const m="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((y,w)=>y.concat(Object.keys(w)),[]);if(g.length>0){const y=[...new Set(g)].map(w=>`"${w}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(o,{onConflict:u,ignoreDuplicates:h=!1,count:p,defaultToNull:m=!0}={}){var g;const y="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const w=o.reduce((S,x)=>S.concat(Object.keys(x)),[]);if(w.length>0){const S=[...new Set(w)].map(x=>`"${x}"`);this.url.searchParams.set("columns",S.join(","))}}return new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(o,{count:u}={}){var h;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:o}={}){var u;const h="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Pl.default=s,Pl}var tg;function Fw(){if(tg)return ql;tg=1,Object.defineProperty(ql,"__esModule",{value:!0});const i=li,n=i.__importDefault(xv()),s=i.__importDefault(jd());class l{constructor(u,{headers:h={},schema:p,fetch:m}={}){this.url=u,this.headers=new Headers(h),this.schemaName=p,this.fetch=m}from(u){if(!u||typeof u!="string"||u.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const h=new URL(`${this.url}/${u}`);return new n.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new l(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:p=!1,get:m=!1,count:g}={}){var y;let w;const S=new URL(`${this.url}/rpc/${u}`);let x;p||m?(w=p?"HEAD":"GET",Object.entries(h).filter(([A,T])=>T!==void 0).map(([A,T])=>[A,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([A,T])=>{S.searchParams.append(A,T)})):(w="POST",x=h);const _=new Headers(this.headers);return g&&_.set("Prefer",`count=${g}`),new s.default({method:w,url:S,headers:_,schema:this.schemaName,body:x,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return ql.default=l,ql}var ng;function ex(){if(ng)return Et;ng=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.PostgrestError=Et.PostgrestBuilder=Et.PostgrestTransformBuilder=Et.PostgrestFilterBuilder=Et.PostgrestQueryBuilder=Et.PostgrestClient=void 0;const i=li,n=i.__importDefault(Fw());Et.PostgrestClient=n.default;const s=i.__importDefault(xv());Et.PostgrestQueryBuilder=s.default;const l=i.__importDefault(jd());Et.PostgrestFilterBuilder=l.default;const o=i.__importDefault(wv());Et.PostgrestTransformBuilder=o.default;const u=i.__importDefault(bv());Et.PostgrestBuilder=u.default;const h=i.__importDefault(yv());return Et.PostgrestError=h.default,Et.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:u.default,PostgrestError:h.default},Et}var _v=ex();const Sv=u0(_v),tx=c0({__proto__:null,default:Sv},[_v]),{PostgrestClient:nx,PostgrestQueryBuilder:Oj,PostgrestFilterBuilder:Dj,PostgrestTransformBuilder:Mj,PostgrestBuilder:Uj,PostgrestError:zj}=Sv||tx;class ax{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const l=s.node,o=parseInt(l.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const l=this.getWebSocketConstructor();return new l(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const sx="2.84.0",ix=`realtime-js/${sx}`,jv="1.0.0",rx="2.0.0",ag=jv,ed=1e4,lx=1e3,ox=100;var Ja;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Ja||(Ja={}));var ht;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(ht||(ht={}));var pn;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(pn||(pn={}));var td;(function(i){i.websocket="websocket"})(td||(td={}));var Xa;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Xa||(Xa={}));class cx{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(n,s){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(n));let l=[n.join_ref,n.ref,n.topic,n.event,n.payload];return s(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(n){var s;return this._isArrayBuffer((s=n.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var s,l,o,u;const h=n.topic,p=(s=n.ref)!==null&&s!==void 0?s:"",m=(l=n.join_ref)!==null&&l!==void 0?l:"",g=n.payload.event,y=(u=(o=n.payload)===null||o===void 0?void 0:o.payload)!==null&&u!==void 0?u:new ArrayBuffer(0),w=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+h.length+g.length,S=new ArrayBuffer(this.HEADER_LENGTH+w);let x=new DataView(S),_=0;x.setUint8(_++,this.KINDS.userBroadcastPush),x.setUint8(_++,m.length),x.setUint8(_++,p.length),x.setUint8(_++,h.length),x.setUint8(_++,g.length),x.setUint8(_++,this.BINARY_ENCODING),Array.from(m,T=>x.setUint8(_++,T.charCodeAt(0))),Array.from(p,T=>x.setUint8(_++,T.charCodeAt(0))),Array.from(h,T=>x.setUint8(_++,T.charCodeAt(0))),Array.from(g,T=>x.setUint8(_++,T.charCodeAt(0)));var A=new Uint8Array(S.byteLength+y.byteLength);return A.set(new Uint8Array(S),0),A.set(new Uint8Array(y),S.byteLength),A.buffer}_encodeJsonUserBroadcastPush(n){var s,l,o,u;const h=n.topic,p=(s=n.ref)!==null&&s!==void 0?s:"",m=(l=n.join_ref)!==null&&l!==void 0?l:"",g=n.payload.event,y=(u=(o=n.payload)===null||o===void 0?void 0:o.payload)!==null&&u!==void 0?u:{},S=new TextEncoder().encode(JSON.stringify(y)).buffer,x=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+h.length+g.length,_=new ArrayBuffer(this.HEADER_LENGTH+x);let A=new DataView(_),T=0;A.setUint8(T++,this.KINDS.userBroadcastPush),A.setUint8(T++,m.length),A.setUint8(T++,p.length),A.setUint8(T++,h.length),A.setUint8(T++,g.length),A.setUint8(T++,this.JSON_ENCODING),Array.from(m,D=>A.setUint8(T++,D.charCodeAt(0))),Array.from(p,D=>A.setUint8(T++,D.charCodeAt(0))),Array.from(h,D=>A.setUint8(T++,D.charCodeAt(0))),Array.from(g,D=>A.setUint8(T++,D.charCodeAt(0)));var C=new Uint8Array(_.byteLength+S.byteLength);return C.set(new Uint8Array(_),0),C.set(new Uint8Array(S),_.byteLength),C.buffer}decode(n,s){if(this._isArrayBuffer(n)){let l=this._binaryDecode(n);return s(l)}if(typeof n=="string"){const l=JSON.parse(n),[o,u,h,p,m]=l;return s({join_ref:o,ref:u,topic:h,event:p,payload:m})}return s({})}_binaryDecode(n){const s=new DataView(n),l=s.getUint8(0),o=new TextDecoder;switch(l){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,s,o)}}_decodeUserBroadcast(n,s,l){const o=s.getUint8(1),u=s.getUint8(2),h=s.getUint8(3),p=s.getUint8(4);let m=this.HEADER_LENGTH+4;const g=l.decode(n.slice(m,m+o));m=m+o;const y=l.decode(n.slice(m,m+u));m=m+u;const w=l.decode(n.slice(m,m+h));m=m+h;const S=n.slice(m,n.byteLength),x=p===this.JSON_ENCODING?JSON.parse(l.decode(S)):S,_={type:this.BROADCAST_EVENT,event:y,payload:x};return h>0&&(_.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(n){var s;return n instanceof ArrayBuffer||((s=n?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}}class Ev{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ge;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ge||(Ge={}));const sg=(i,n,s={})=>{var l;const o=(l=s.skipTypes)!==null&&l!==void 0?l:[];return n?Object.keys(n).reduce((u,h)=>(u[h]=ux(h,i,n,o),u),{}):{}},ux=(i,n,s,l)=>{const o=n.find(p=>p.name===i),u=o?.type,h=s[i];return u&&!l.includes(u)?Tv(u,h):nd(h)},Tv=(i,n)=>{if(i.charAt(0)==="_"){const s=i.slice(1,i.length);return mx(n,s)}switch(i){case Ge.bool:return dx(n);case Ge.float4:case Ge.float8:case Ge.int2:case Ge.int4:case Ge.int8:case Ge.numeric:case Ge.oid:return hx(n);case Ge.json:case Ge.jsonb:return fx(n);case Ge.timestamp:return px(n);case Ge.abstime:case Ge.date:case Ge.daterange:case Ge.int4range:case Ge.int8range:case Ge.money:case Ge.reltime:case Ge.text:case Ge.time:case Ge.timestamptz:case Ge.timetz:case Ge.tsrange:case Ge.tstzrange:return nd(n);default:return nd(n)}},nd=i=>i,dx=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},hx=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},fx=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(n){return console.log(`JSON parse error: ${n}`),i}return i},mx=(i,n)=>{if(typeof i!="string")return i;const s=i.length-1,l=i[s];if(i[0]==="{"&&l==="}"){let u;const h=i.slice(1,s);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(p=>Tv(n,p))}return i},px=i=>typeof i=="string"?i.replace(" ","T"):i,Nv=i=>{const n=new URL(i);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Bu{constructor(n,s,l={},o=ed){this.channel=n,this.event=s,this.payload=l,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var l;return this._hasReceived(n)&&s((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var ig;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(ig||(ig={}));class hr{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},o=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hr.syncState(this.state,o,u,h),this.pendingDiffs.forEach(m=>{this.state=hr.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],p()}),this.channel._on(l.diff,{},o=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=hr.syncDiff(this.state,o,u,h),p())}),this.onJoin((o,u,h)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:h})}),this.onLeave((o,u,h)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,l,o){const u=this.cloneDeep(n),h=this.transformState(s),p={},m={};return this.map(u,(g,y)=>{h[g]||(m[g]=y)}),this.map(h,(g,y)=>{const w=u[g];if(w){const S=y.map(T=>T.presence_ref),x=w.map(T=>T.presence_ref),_=y.filter(T=>x.indexOf(T.presence_ref)<0),A=w.filter(T=>S.indexOf(T.presence_ref)<0);_.length>0&&(p[g]=_),A.length>0&&(m[g]=A)}else p[g]=y}),this.syncDiff(u,{joins:p,leaves:m},l,o)}static syncDiff(n,s,l,o){const{joins:u,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return l||(l=()=>{}),o||(o=()=>{}),this.map(u,(p,m)=>{var g;const y=(g=n[p])!==null&&g!==void 0?g:[];if(n[p]=this.cloneDeep(m),y.length>0){const w=n[p].map(x=>x.presence_ref),S=y.filter(x=>w.indexOf(x.presence_ref)<0);n[p].unshift(...S)}l(p,y,m)}),this.map(h,(p,m)=>{let g=n[p];if(!g)return;const y=m.map(w=>w.presence_ref);g=g.filter(w=>y.indexOf(w.presence_ref)<0),n[p]=g,o(p,g,m),g.length===0&&delete n[p]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(l=>s(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,l)=>{const o=n[l];return"metas"in o?s[l]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[l]=o,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rg;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(rg||(rg={}));var fr;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(fr||(fr={}));var Kn;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Kn||(Kn={}));class Ed{constructor(n,s={config:{}},l){var o,u;if(this.topic=n,this.params=s,this.socket=l,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Bu(this,pn.join,this.params,this.timeout),this.rejoinTimer=new Ev(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pn.reply,{},(h,p)=>{this._trigger(this._replyEventName(p),h)}),this.presence=new hr(this),this.broadcastEndpointURL=Nv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,s=this.timeout){var l,o,u;if(this.socket.isConnected()||this.socket.connect(),this.state==ht.closed){const{config:{broadcast:h,presence:p,private:m}}=this.params,g=(o=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(x=>x.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[fr.PRESENCE]&&this.bindings[fr.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,w={},S={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:y}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(x=>n?.(Kn.CHANNEL_ERROR,x)),this._onClose(()=>n?.(Kn.CLOSED)),this.updateJoinPayload(Object.assign({config:S},w)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:x})=>{var _;if(this.socket.setAuth(),x===void 0){n?.(Kn.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,T=(_=A?.length)!==null&&_!==void 0?_:0,C=[];for(let D=0;D<T;D++){const L=A[D],{filter:{event:J,schema:K,table:Y,filter:Q}}=L,te=x&&x[D];if(te&&te.event===J&&te.schema===K&&te.table===Y&&te.filter===Q)C.push(Object.assign(Object.assign({},L),{id:te.id}));else{this.unsubscribe(),this.state=ht.errored,n?.(Kn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,n&&n(Kn.SUBSCRIBED);return}}).receive("error",x=>{this.state=ht.errored,n?.(Kn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{n?.(Kn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,l){return this.state===ht.joined&&n===fr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,l)}async httpSend(n,s,l={}){var o;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:s,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(o=l.timeout)!==null&&o!==void 0?o:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const g=await p.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(n,s={}){var l,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:h}=n,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(l=s.timeout)!==null&&l!==void 0?l:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,p,m;const g=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ht.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pn.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(o=>{l=new Bu(this,pn.leave,{},n),l.receive("ok",()=>{s(),o("ok")}).receive("timeout",()=>{s(),o("timed out")}).receive("error",()=>{o("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ht.closed,this.bindings={}}async _fetchWithTimeout(n,s,l){const o=new AbortController,u=setTimeout(()=>o.abort(),l),h=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:o.signal}));return clearTimeout(u),h}_push(n,s,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Bu(this,n,s,l);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>ox){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,l){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,l){var o,u;const h=n.toLocaleLowerCase(),{close:p,error:m,leave:g,join:y}=pn;if(l&&[p,m,g,y].indexOf(h)>=0&&l!==this._joinRef())return;let S=this._onMessage(h,s,l);if(s&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(x=>{var _,A,T;return((_=x.filter)===null||_===void 0?void 0:_.event)==="*"||((T=(A=x.filter)===null||A===void 0?void 0:A.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===h}).map(x=>x.callback(S,l)):(u=this.bindings[h])===null||u===void 0||u.filter(x=>{var _,A,T,C,D,L;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in x){const J=x.id,K=(_=x.filter)===null||_===void 0?void 0:_.event;return J&&((A=s.ids)===null||A===void 0?void 0:A.includes(J))&&(K==="*"||K?.toLocaleLowerCase()===((T=s.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const J=(D=(C=x?.filter)===null||C===void 0?void 0:C.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return J==="*"||J===((L=s?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===h}).map(x=>{if(typeof S=="object"&&"ids"in S){const _=S.data,{schema:A,table:T,commit_timestamp:C,type:D,errors:L}=_;S=Object.assign(Object.assign({},{schema:A,table:T,commit_timestamp:C,eventType:D,new:{},old:{},errors:L}),this._getPayloadRecords(_))}x.callback(S,l)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,l){const o=n.toLocaleLowerCase(),u={type:o,filter:s,callback:l};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(n,s){const l=n.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===l&&Ed.isEqual(o.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const l in n)if(n[l]!==s[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(pn.close,{},n)}_onError(n){this._on(pn.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=sg(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=sg(n.columns,n.old_record)),s}}const $u=()=>{},Yl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},gx=[1e3,2e3,5e3,1e4],vx=1e4,yx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bx{constructor(n,s){var l;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ed,this.transport=null,this.heartbeatIntervalMs=Yl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$u,this.ref=0,this.reconnectTimer=null,this.vsn=ag,this.logger=$u,this.conn=null,this.sendBuffer=[],this.serializer=new cx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...u)=>o(...u):(...u)=>fetch(...u),!(!((l=s?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${td.websocket}`,this.httpEndpoint=Nv(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ax.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,l){this.logger(n,s,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Ja.connecting:return Xa.Connecting;case Ja.open:return Xa.Open;case Ja.closing:return Xa.Closing;default:return Xa.Closed}}isConnected(){return this.connectionState()===Xa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const l=`realtime:${n}`,o=this.getChannels().find(u=>u.topic===l);if(o)return o;{const u=new Ed(`realtime:${n}`,s,this);return this.channels.push(u),u}}push(n){const{topic:s,event:l,payload:o,ref:u}=n,h=()=>{this.encode(n,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${s} ${l} (${u})`,o),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(lx,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Yl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:o,payload:u,ref:h}=s,p=h?`(${h})`:"",m=u.status||"";this.log("receive",`${m} ${l} ${o} ${p}`.trim(),u),this.channels.filter(g=>g._isMember(l)).forEach(g=>g._trigger(o,u,h)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ja.open||this.conn.readyState===Ja.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(pn.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const l=n.match(/\?/)?"&":"?",o=new URLSearchParams(s);return`${n}${l}${o}`}_workerObjectUrl(n){let s;if(n)s=n;else{const l=new Blob([yx],{type:"application/javascript"});s=URL.createObjectURL(l)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(l=>{const o={access_token:s,version:ix};s&&l.updateJoinPayload(o),l.joinedOnce&&l._isJoined()&&l._push(pn.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(l=>{try{l(s)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(l){this.log("error",`error triggering ${n} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Ev(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Yl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,l,o,u,h,p,m,g,y,w,S,x;switch(this.transport=(s=n?.transport)!==null&&s!==void 0?s:null,this.timeout=(l=n?.timeout)!==null&&l!==void 0?l:ed,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:Yl.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=n?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:$u,this.vsn=(m=n?.vsn)!==null&&m!==void 0?m:ag,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=n?.reconnectAfterMs)!==null&&g!==void 0?g:(_=>gx[_-1]||vx),this.vsn){case jv:this.encode=(y=n?.encode)!==null&&y!==void 0?y:((_,A)=>A(JSON.stringify(_))),this.decode=(w=n?.decode)!==null&&w!==void 0?w:((_,A)=>A(JSON.parse(_)));break;case rx:this.encode=(S=n?.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(x=n?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class Td extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function We(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class wx extends Td{constructor(n,s,l){super(n),this.name="StorageApiError",this.status=s,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ad extends Td{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}const Nd=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),xx=()=>Response,sd=i=>{if(Array.isArray(i))return i.map(s=>sd(s));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([s,l])=>{const o=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[o]=sd(l)}),n},_x=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},qu=i=>{var n;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(n=i.error)===null||n===void 0?void 0:n.message)||JSON.stringify(i)},Sx=(i,n,s)=>ie(void 0,void 0,void 0,function*(){const l=yield xx();i instanceof l&&!s?.noResolveJson?i.json().then(o=>{const u=i.status||500,h=o?.statusCode||u+"";n(new wx(qu(o),u,h))}).catch(o=>{n(new ad(qu(o),o))}):n(new ad(qu(i),i))}),jx=(i,n,s,l)=>{const o={method:i,headers:n?.headers||{}};return i==="GET"||!l?o:(_x(l)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(l)):o.body=l,n?.duplex&&(o.duplex=n.duplex),Object.assign(Object.assign({},o),s))};function xr(i,n,s,l,o,u){return ie(this,void 0,void 0,function*(){return new Promise((h,p)=>{i(s,jx(n,l,o,u)).then(m=>{if(!m.ok)throw m;return l?.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>Sx(m,p,l))})})}function gr(i,n,s,l){return ie(this,void 0,void 0,function*(){return xr(i,"GET",n,s,l)})}function mn(i,n,s,l,o){return ie(this,void 0,void 0,function*(){return xr(i,"POST",n,l,o,s)})}function id(i,n,s,l,o){return ie(this,void 0,void 0,function*(){return xr(i,"PUT",n,l,o,s)})}function Ex(i,n,s,l){return ie(this,void 0,void 0,function*(){return xr(i,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),l)})}function kd(i,n,s,l,o){return ie(this,void 0,void 0,function*(){return xr(i,"DELETE",n,l,o,s)})}class Tx{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s}then(n,s){return this.execute().then(n,s)}execute(){return ie(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}}var kv;class Nx{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s,this[kv]="BlobDownloadBuilder",this.promise=null}asStream(){return new Tx(this.downloadFn,this.shouldThrowOnError)}then(n,s){return this.getPromise().then(n,s)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ie(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}}kv=Symbol.toStringTag;const kx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ax{constructor(n,s={},l,o){this.shouldThrowOnError=!1,this.url=n,this.headers=s,this.bucketId=l,this.fetch=Nd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,s,l,o){return ie(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},lg),o);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&l instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",l)):typeof FormData<"u"&&l instanceof FormData?(u=l,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),m&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(m))):(u=l,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),o?.headers&&(p=Object.assign(Object.assign({},p),o.headers));const g=this._removeEmptyFolders(s),y=this._getFinalPath(g),w=yield(n=="PUT"?id:mn)(this.fetch,`${this.url}/object/${y}`,u,Object.assign({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:w.Id,fullPath:w.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(We(u))return{data:null,error:u};throw u}})}upload(n,s,l){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,l)})}uploadToSignedUrl(n,s,l,o){return ie(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",s);try{let m;const g=Object.assign({upsert:lg.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&l instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",l)):typeof FormData<"u"&&l instanceof FormData?(m=l,m.append("cacheControl",g.cacheControl)):(m=l,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType);const w=yield id(this.fetch,p.toString(),m,{headers:y});return{data:{path:u,fullPath:w.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(We(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(n,s){return ie(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n);const o=Object.assign({},this.headers);s?.upsert&&(o["x-upsert"]="true");const u=yield mn(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:o}),h=new URL(this.url+u.url),p=h.searchParams.get("token");if(!p)throw new Td("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:p},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(We(l))return{data:null,error:l};throw l}})}update(n,s,l){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,l)})}move(n,s,l){return ie(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:l?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}})}copy(n,s,l){return ie(this,void 0,void 0,function*(){try{return{data:{path:(yield mn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:l?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}})}createSignedUrl(n,s,l){return ie(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n),u=yield mn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:s},l?.transform?{transform:l.transform}:{}),{headers:this.headers});const h=l?.download?`&download=${l.download===!0?"":l.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}})}createSignedUrls(n,s,l){return ie(this,void 0,void 0,function*(){try{const o=yield mn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),u=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{data:o.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}})}download(n,s){const o=typeof s?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(s?.transform||{}),h=u?`?${u}`:"",p=this._getFinalPath(n),m=()=>gr(this.fetch,`${this.url}/${o}/${p}${h}`,{headers:this.headers,noResolveJson:!0});return new Nx(m,this.shouldThrowOnError)}info(n){return ie(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const l=yield gr(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:sd(l),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(We(l))return{data:null,error:l};throw l}})}exists(n){return ie(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield Ex(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(We(l)&&l instanceof ad){const o=l.originalError;if([400,404].includes(o?.status))return{data:!1,error:l}}throw l}})}getPublicUrl(n,s){const l=this._getFinalPath(n),o=[],u=s?.download?`download=${s.download===!0?"":s.download}`:"";u!==""&&o.push(u);const p=typeof s?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(s?.transform||{});m!==""&&o.push(m);let g=o.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${l}${g}`)}}}remove(n){return ie(this,void 0,void 0,function*(){try{return{data:yield kd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}list(n,s,l){return ie(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},kx),s),{prefix:n||""});return{data:yield mn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},l),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}})}listV2(n,s){return ie(this,void 0,void 0,function*(){try{const l=Object.assign({},n);return{data:yield mn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,l,{headers:this.headers},s),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(We(l))return{data:null,error:l};throw l}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const Av="2.84.0",Rv={"X-Client-Info":`storage-js/${Av}`};class Rx{constructor(n,s={},l,o){this.shouldThrowOnError=!1;const u=new URL(n);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rv),s),this.fetch=Nd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(n){return ie(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(n);return{data:yield gr(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}getBucket(n){return ie(this,void 0,void 0,function*(){try{return{data:yield gr(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}createBucket(n){return ie(this,arguments,void 0,function*(s,l={public:!1}){try{return{data:yield mn(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:l.type,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}})}updateBucket(n,s){return ie(this,void 0,void 0,function*(){try{return{data:yield id(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(We(l))return{data:null,error:l};throw l}})}emptyBucket(n){return ie(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}deleteBucket(n){return ie(this,void 0,void 0,function*(){try{return{data:yield kd(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(n){const s={};return n&&("limit"in n&&(s.limit=String(n.limit)),"offset"in n&&(s.offset=String(n.offset)),n.search&&(s.search=n.search),n.sortColumn&&(s.sortColumn=n.sortColumn),n.sortOrder&&(s.sortOrder=n.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}class Cx{constructor(n,s={},l){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rv),s),this.fetch=Nd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return ie(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}listBuckets(n){return ie(this,void 0,void 0,function*(){try{const s=new URLSearchParams;n?.limit!==void 0&&s.set("limit",n.limit.toString()),n?.offset!==void 0&&s.set("offset",n.offset.toString()),n?.sortColumn&&s.set("sortColumn",n.sortColumn),n?.sortOrder&&s.set("sortOrder",n.sortOrder),n?.search&&s.set("search",n.search);const l=s.toString(),o=l?`${this.url}/bucket?${l}`:`${this.url}/bucket`;return{data:yield gr(this.fetch,o,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}deleteBucket(n){return ie(this,void 0,void 0,function*(){try{return{data:yield kd(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}}const Ad={"X-Client-Info":`storage-js/${Av}`,"Content-Type":"application/json"};class Cv extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Yt(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class Pu extends Cv{constructor(n,s,l){super(n),this.name="StorageVectorsApiError",this.status=s,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ox extends Cv{constructor(n,s){super(n),this.name="StorageVectorsUnknownError",this.originalError=s}}var og;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(og||(og={}));const Rd=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),Dx=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},cg=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Mx=(i,n,s)=>ie(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!s?.noResolveJson){const o=i.status||500,u=i;if(typeof u.json=="function")u.json().then(h=>{const p=h?.statusCode||h?.code||o+"";n(new Pu(cg(h),o,p))}).catch(()=>{const h=o+"",p=u.statusText||`HTTP ${o} error`;n(new Pu(p,o,h))});else{const h=o+"",p=u.statusText||`HTTP ${o} error`;n(new Pu(p,o,h))}}else n(new Ox(cg(i),i))}),Ux=(i,n,s,l)=>{const o={method:i,headers:n?.headers||{}};return l?(Dx(l)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(l)):o.body=l,Object.assign(Object.assign({},o),s)):o};function zx(i,n,s,l,o,u){return ie(this,void 0,void 0,function*(){return new Promise((h,p)=>{i(s,Ux(n,l,o,u)).then(m=>{if(!m.ok)throw m;if(l?.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>Mx(m,p,l))})})}function Kt(i,n,s,l,o){return ie(this,void 0,void 0,function*(){return zx(i,"POST",n,l,o,s)})}class Lx{constructor(n,s={},l){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ad),s),this.fetch=Rd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return ie(this,void 0,void 0,function*(){try{return{data:(yield Kt(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}getIndex(n,s){return ie(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:s},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Yt(l))return{data:null,error:l};throw l}})}listIndexes(n){return ie(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}deleteIndex(n,s){return ie(this,void 0,void 0,function*(){try{return{data:(yield Kt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:s},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Yt(l))return{data:null,error:l};throw l}})}}class Bx{constructor(n,s={},l){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ad),s),this.fetch=Rd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return ie(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Kt(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}getVectors(n){return ie(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}listVectors(n){return ie(this,void 0,void 0,function*(){try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:yield Kt(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}queryVectors(n){return ie(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}deleteVectors(n){return ie(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Kt(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}}class $x{constructor(n,s={},l){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ad),s),this.fetch=Rd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return ie(this,void 0,void 0,function*(){try{return{data:(yield Kt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}getBucket(n){return ie(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}listBuckets(){return ie(this,arguments,void 0,function*(n={}){try{return{data:yield Kt(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}deleteBucket(n){return ie(this,void 0,void 0,function*(){try{return{data:(yield Kt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Yt(s))return{data:null,error:s};throw s}})}}class qx extends $x{constructor(n,s={}){super(n,s.headers||{},s.fetch)}from(n){return new Px(this.url,this.headers,n,this.fetch)}}class Px extends Lx{constructor(n,s,l,o){super(n,s,o),this.vectorBucketName=l}createIndex(n){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ie(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ie(this,arguments,void 0,function*(s={}){return n.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ie(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ie(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new Hx(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class Hx extends Bx{constructor(n,s,l,o,u){super(n,s,u),this.vectorBucketName=l,this.indexName=o}putVectors(n){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ie(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ie(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ie(this,arguments,void 0,function*(s={}){return n.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ie(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ie(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Gx extends Rx{constructor(n,s={},l,o){super(n,s,l,o)}from(n){return new Ax(this.url,this.headers,n,this.fetch)}get vectors(){return new qx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Cx(this.url+"/iceberg",this.headers,this.fetch)}}const Ix="2.84.0";let ur="";typeof Deno<"u"?ur="deno":typeof document<"u"?ur="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ur="react-native":ur="node";const Vx={"X-Client-Info":`supabase-js-${ur}/${Ix}`},Yx={headers:Vx},Kx={schema:"public"},Qx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jx={},Xx=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),Zx=()=>Headers,Wx=(i,n,s)=>{const l=Xx(s),o=Zx();return async(u,h)=>{var p;const m=(p=await n())!==null&&p!==void 0?p:i;let g=new o(h?.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),l(u,Object.assign(Object.assign({},h),{headers:g}))}};function Fx(i){return i.endsWith("/")?i:i+"/"}function e_(i,n){var s,l;const{db:o,auth:u,realtime:h,global:p}=i,{db:m,auth:g,realtime:y,global:w}=n,S={db:Object.assign(Object.assign({},m),o),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},y),h),storage:{},global:Object.assign(Object.assign(Object.assign({},w),p),{headers:Object.assign(Object.assign({},(s=w?.headers)!==null&&s!==void 0?s:{}),(l=p?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return i.accessToken?S.accessToken=i.accessToken:delete S.accessToken,S}function t_(i){const n=i?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Fx(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ov="2.84.0",Xs=30*1e3,rd=3,Hu=rd*Xs,n_="http://localhost:9999",a_="supabase.auth.token",s_={"X-Client-Info":`gotrue-js/${Ov}`},ld="X-Supabase-Api-Version",Dv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},i_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,r_=600*1e3;class vr extends Error{constructor(n,s,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=l}}function re(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class l_ extends vr{constructor(n,s,l){super(n,s,l),this.name="AuthApiError",this.status=s,this.code=l}}function o_(i){return re(i)&&i.name==="AuthApiError"}class Za extends vr{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class Na extends vr{constructor(n,s,l,o){super(n,l,o),this.name=s,this.status=l}}class Vt extends Na{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function c_(i){return re(i)&&i.name==="AuthSessionMissingError"}class Is extends Na{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kl extends Na{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Ql extends Na{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function u_(i){return re(i)&&i.name==="AuthImplicitGrantRedirectError"}class ug extends Na{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class od extends Na{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function Gu(i){return re(i)&&i.name==="AuthRetryableFetchError"}class dg extends Na{constructor(n,s,l){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=l}}class cd extends Na{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const to="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),hg=` 	
\r=`.split(""),d_=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<hg.length;n+=1)i[hg[n].charCodeAt(0)]=-2;for(let n=0;n<to.length;n+=1)i[to[n].charCodeAt(0)]=n;return i})();function fg(i,n,s){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;s(to[l]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;s(to[l]),n.queuedBits-=6}}function Mv(i,n,s){const l=d_[i];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function mg(i){const n=[],s=h=>{n.push(String.fromCodePoint(h))},l={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=h=>{m_(h,l,s)};for(let h=0;h<i.length;h+=1)Mv(i.charCodeAt(h),o,u);return n.join("")}function h_(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function f_(i,n){for(let s=0;s<i.length;s+=1){let l=i.charCodeAt(s);if(l>55295&&l<=56319){const o=(l-55296)*1024&65535;l=(i.charCodeAt(s+1)-56320&65535|o)+65536,s+=1}h_(l,n)}}function m_(i,n,s){if(n.utf8seq===0){if(i<=127){s(i);return}for(let l=1;l<6;l+=1)if((i>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function ti(i){const n=[],s={queue:0,queuedBits:0},l=o=>{n.push(o)};for(let o=0;o<i.length;o+=1)Mv(i.charCodeAt(o),s,l);return new Uint8Array(n)}function p_(i){const n=[];return f_(i,s=>n.push(s)),new Uint8Array(n)}function Wa(i){const n=[],s={queue:0,queuedBits:0},l=o=>{n.push(o)};return i.forEach(o=>fg(o,s,l)),fg(null,s,l),n.join("")}function g_(i){return Math.round(Date.now()/1e3)+i}function v_(){return Symbol("auth-callback")}const _t=()=>typeof window<"u"&&typeof document<"u",Ya={tested:!1,writable:!1},Uv=()=>{if(!_t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ya.tested)return Ya.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Ya.tested=!0,Ya.writable=!0}catch{Ya.tested=!0,Ya.writable=!1}return Ya.writable};function y_(i){const n={},s=new URL(i);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((o,u)=>{n[u]=o})}catch{}return s.searchParams.forEach((l,o)=>{n[o]=l}),n}const zv=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),b_=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Zs=async(i,n,s)=>{await i.setItem(n,JSON.stringify(s))},Ka=async(i,n)=>{const s=await i.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ea=async(i,n)=>{await i.removeItem(n)};class ho{constructor(){this.promise=new ho.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}ho.promiseConstructor=Promise;function Iu(i){const n=i.split(".");if(n.length!==3)throw new cd("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!i_.test(n[l]))throw new cd("JWT not in base64url format");return{header:JSON.parse(mg(n[0])),payload:JSON.parse(mg(n[1])),signature:ti(n[2]),raw:{header:n[0],payload:n[1]}}}async function w_(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function x_(i,n){return new Promise((l,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await i(u);if(!n(u,null,h)){l(h);return}}catch(h){if(!n(u,h)){o(h);return}}})()})}function __(i){return("0"+i.toString(16)).substr(-2)}function S_(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=s.length;let o="";for(let u=0;u<56;u++)o+=s.charAt(Math.floor(Math.random()*l));return o}return crypto.getRandomValues(n),Array.from(n,__).join("")}async function j_(i){const s=new TextEncoder().encode(i),l=await crypto.subtle.digest("SHA-256",s),o=new Uint8Array(l);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function E_(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const s=await j_(i);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vs(i,n,s=!1){const l=S_();let o=l;s&&(o+="/PASSWORD_RECOVERY"),await Zs(i,`${n}-code-verifier`,o);const u=await E_(l);return[u,l===u?"plain":"s256"]}const T_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function N_(i){const n=i.headers.get(ld);if(!n||!n.match(T_))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function k_(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function A_(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const R_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ys(i){if(!R_.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vu(){const i={};return new Proxy(i,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function C_(i,n){return new Proxy(i,{get:(s,l,o)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const u=l.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,l,o)}return!n.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(s,l,o)}})}function pg(i){return JSON.parse(JSON.stringify(i))}const Qa=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),O_=[502,503,504];async function gg(i){var n;if(!b_(i))throw new od(Qa(i),0);if(O_.includes(i.status))throw new od(Qa(i),i.status);let s;try{s=await i.json()}catch(u){throw new Za(Qa(u),u)}let l;const o=N_(i);if(o&&o.getTime()>=Dv["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?l=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(l=s.error_code),l){if(l==="weak_password")throw new dg(Qa(s),i.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new Vt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new dg(Qa(s),i.status,s.weak_password.reasons);throw new l_(Qa(s),i.status||500,l)}const D_=(i,n,s,l)=>{const o={method:i,headers:n?.headers||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(l),Object.assign(Object.assign({},o),s))};async function fe(i,n,s,l){var o;const u=Object.assign({},l?.headers);u[ld]||(u[ld]=Dv["2024-01-01"].name),l?.jwt&&(u.Authorization=`Bearer ${l.jwt}`);const h=(o=l?.query)!==null&&o!==void 0?o:{};l?.redirectTo&&(h.redirect_to=l.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await M_(i,n,s+p,{headers:u,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(m):{data:Object.assign({},m),error:null}}async function M_(i,n,s,l,o,u){const h=D_(n,l,o,u);let p;try{p=await i(s,Object.assign({},h))}catch(m){throw console.error(m),new od(Qa(m),0)}if(p.ok||await gg(p),l?.noResolveJson)return p;try{return await p.json()}catch(m){await gg(m)}}function fn(i){var n;let s=null;L_(i)&&(s=Object.assign({},i),i.expires_at||(s.expires_at=g_(i.expires_in)));const l=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:s,user:l},error:null}}function vg(i){const n=fn(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0)&&(n.data.weak_password=i.weak_password),n}function Ta(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function U_(i){return{data:i,error:null}}function z_(i){const{action_link:n,email_otp:s,hashed_token:l,redirect_to:o,verification_type:u}=i,h=ri(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:s,hashed_token:l,redirect_to:o,verification_type:u},m=Object.assign({},h);return{data:{properties:p,user:m},error:null}}function yg(i){return i}function L_(i){return i.access_token&&i.refresh_token&&i.expires_in}const Yu=["global","local","others"];class B_{constructor({url:n="",headers:s={},fetch:l}){this.url=n,this.headers=s,this.fetch=zv(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,s=Yu[0]){if(Yu.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Yu.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(re(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,s={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ta})}catch(l){if(re(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:s}=n,l=ri(n,["options"]),o=Object.assign(Object.assign({},l),s);return"newEmail"in l&&(o.new_email=l?.newEmail,delete o.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:z_,redirectTo:s?.redirectTo})}catch(s){if(re(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Ta})}catch(s){if(re(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,l,o,u,h,p,m;try{const g={nextPage:null,lastPage:0,total:0},y=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(u=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:yg});if(y.error)throw y.error;const w=await y.json(),S=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,x=(m=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return x.length>0&&(x.forEach(_=>{const A=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(_.split(";")[1].split("=")[1]);g[`${T}Page`]=A}),g.total=parseInt(S)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(re(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){Ys(n);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Ta})}catch(s){if(re(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){Ys(n);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:Ta})}catch(l){if(re(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,s=!1){Ys(n);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ta})}catch(l){if(re(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){Ys(n.userId);try{const{data:s,error:l}=await fe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:s,error:l}}catch(s){if(re(s))return{data:null,error:s};throw s}}async _deleteFactor(n){Ys(n.userId),Ys(n.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}}async _listOAuthClients(n){var s,l,o,u,h,p,m;try{const g={nextPage:null,lastPage:0,total:0},y=await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(u=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:yg});if(y.error)throw y.error;const w=await y.json(),S=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,x=(m=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return x.length>0&&(x.forEach(_=>{const A=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(_.split(";")[1].split("=")[1]);g[`${T}Page`]=A}),g.total=parseInt(S)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(re(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(n){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(re(s))return{data:null,error:s};throw s}}async _getOAuthClient(n){try{return await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(re(s))return{data:null,error:s};throw s}}async _updateOAuthClient(n,s){try{return await fe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:s,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(re(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(n){try{return await fe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(n){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(re(s))return{data:null,error:s};throw s}}}function bg(i={}){return{getItem:n=>i[n]||null,setItem:(n,s)=>{i[n]=s},removeItem:n=>{delete i[n]}}}const Ks={debug:!!(globalThis&&Uv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lv extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class $_ extends Lv{}async function q_(i,n,s){Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const l=new globalThis.AbortController;return n>0&&setTimeout(()=>{l.abort(),Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async o=>{if(o){Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,o.name);try{return await s()}finally{Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,o.name)}}else{if(n===0)throw Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new $_(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Ks.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function P_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Bv(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function H_(i){return parseInt(i,16)}function G_(i){const n=new TextEncoder().encode(i);return"0x"+Array.from(n,l=>l.toString(16).padStart(2,"0")).join("")}function I_(i){var n;const{chainId:s,domain:l,expirationTime:o,issuedAt:u=new Date,nonce:h,notBefore:p,requestId:m,resources:g,scheme:y,uri:w,version:S}=i;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((n=i.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const x=Bv(i.address),_=y?`${y}://${l}`:l,A=i.statement?`${i.statement}
`:"",T=`${_} wants you to sign in with your Ethereum account:
${x}

${A}`;let C=`URI: ${w}
Version: ${S}
Chain ID: ${s}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(o&&(C+=`
Expiration Time: ${o.toISOString()}`),p&&(C+=`
Not Before: ${p.toISOString()}`),m&&(C+=`
Request ID: ${m}`),g){let D=`
Resources:`;for(const L of g){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);D+=`
- ${L}`}C+=D}return`${T}
${C}`}class ut extends Error{constructor({message:n,code:s,cause:l,name:o}){var u;super(n,{cause:l}),this.__isWebAuthnError=!0,this.name=(u=o??(l instanceof Error?l.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=s}}class no extends ut{constructor(n,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:n}),this.name="WebAuthnUnknownError",this.originalError=s}}function V_({error:i,options:n}){var s,l,o;const{publicKey:u}=n;if(!u)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ut({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((s=u.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new ut({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(n.mediation==="conditional"&&((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new ut({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ut({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new ut({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new ut({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new ut({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new ut({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const h=window.location.hostname;if($v(h)){if(u.rp.id!==h)return new ut({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new ut({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function Y_({error:i,options:n}){const{publicKey:s}=n;if(!s)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ut({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new ut({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const l=window.location.hostname;if($v(l)){if(s.rpId!==l)return new ut({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class K_{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Q_=new K_;function J_(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:n,user:s,excludeCredentials:l}=i,o=ri(i,["challenge","user","excludeCredentials"]),u=ti(n).buffer,h=Object.assign(Object.assign({},s),{id:ti(s.id).buffer}),p=Object.assign(Object.assign({},o),{challenge:u,user:h});if(l&&l.length>0){p.excludeCredentials=new Array(l.length);for(let m=0;m<l.length;m++){const g=l[m];p.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:ti(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function X_(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:n,allowCredentials:s}=i,l=ri(i,["challenge","allowCredentials"]),o=ti(n).buffer,u=Object.assign(Object.assign({},l),{challenge:o});if(s&&s.length>0){u.allowCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const p=s[h];u.allowCredentials[h]=Object.assign(Object.assign({},p),{id:ti(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function Z_(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const s=i;return{id:i.id,rawId:i.id,response:{attestationObject:Wa(new Uint8Array(i.response.attestationObject)),clientDataJSON:Wa(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function W_(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const s=i,l=i.getClientExtensionResults(),o=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Wa(new Uint8Array(o.authenticatorData)),clientDataJSON:Wa(new Uint8Array(o.clientDataJSON)),signature:Wa(new Uint8Array(o.signature)),userHandle:o.userHandle?Wa(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function $v(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function wg(){var i,n;return!!(_t()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function F_(i){try{const n=await navigator.credentials.create(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new no("Browser returned unexpected credential type",n)}:{data:null,error:new no("Empty credential response",n)}}catch(n){return{data:null,error:V_({error:n,options:i})}}}async function eS(i){try{const n=await navigator.credentials.get(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new no("Browser returned unexpected credential type",n)}:{data:null,error:new no("Empty credential response",n)}}catch(n){return{data:null,error:Y_({error:n,options:i})}}}const tS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},nS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ao(...i){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),s=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),l={};for(const o of i)if(o)for(const u in o){const h=o[u];if(h!==void 0)if(Array.isArray(h))l[u]=h;else if(s(h))l[u]=h;else if(n(h)){const p=l[u];n(p)?l[u]=ao(p,h):l[u]=ao(h)}else l[u]=h}return l}function aS(i,n){return ao(tS,i,n||{})}function sS(i,n){return ao(nS,i,n||{})}class iS{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:s,friendlyName:l,signal:o},u){try{const{data:h,error:p}=await this.client.mfa.challenge({factorId:n,webauthn:s});if(!h)return{data:null,error:p};const m=o??Q_.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:g}=h.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${l}`),g.displayName||(g.displayName=g.name)}switch(h.webauthn.type){case"create":{const g=aS(h.webauthn.credential_options.publicKey,u?.create),{data:y,error:w}=await F_({publicKey:g,signal:m});return y?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:w}}case"request":{const g=sS(h.webauthn.credential_options.publicKey,u?.request),{data:y,error:w}=await eS(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:g,signal:m}));return y?{data:{factorId:n,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:w}}}}catch(h){return re(h)?{data:null,error:h}:{data:null,error:new Za("Unexpected error in challenge",h)}}}async _verify({challengeId:n,factorId:s,webauthn:l}){return this.client.mfa.verify({factorId:s,challengeId:n,webauthn:l})}async _authenticate({factorId:n,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},u){if(!s)return{data:null,error:new vr("rpId is required for WebAuthn authentication")};try{if(!wg())return{data:null,error:new Za("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this.challenge({factorId:n,webauthn:{rpId:s,rpOrigins:l},signal:o},{request:u});if(!h)return{data:null,error:p};const{webauthn:m}=h;return this._verify({factorId:n,challengeId:h.challengeId,webauthn:{type:m.type,rpId:s,rpOrigins:l,credential_response:m.credential_response}})}catch(h){return re(h)?{data:null,error:h}:{data:null,error:new Za("Unexpected error in authenticate",h)}}}async _register({friendlyName:n,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},u){if(!s)return{data:null,error:new vr("rpId is required for WebAuthn registration")};try{if(!wg())return{data:null,error:new Za("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this._enroll({friendlyName:n});if(!h)return await this.client.mfa.listFactors().then(y=>{var w;return(w=y.data)===null||w===void 0?void 0:w.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===n&&S.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:p};const{data:m,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:s,rpOrigins:l},signal:o},{create:u});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:s,rpOrigins:l,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(h){return re(h)?{data:null,error:h}:{data:null,error:new Za("Unexpected error in register",h)}}}}P_();const rS={url:n_,storageKey:a_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:s_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function xg(i,n,s){return await s()}const Qs={};class yr{get jwks(){var n,s;return(s=(n=Qs[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){Qs[this.storageKey]=Object.assign(Object.assign({},Qs[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=Qs[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Qs[this.storageKey]=Object.assign(Object.assign({},Qs[this.storageKey]),{cachedAt:n})}constructor(n){var s,l,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},rS),n);if(this.storageKey=u.storageKey,this.instanceID=(s=yr.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,yr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&_t()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new B_({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=zv(u.fetch),this.lock=u.lock||xg,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:_t()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=q_:this.lock=xg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new iS(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Uv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=bg(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=bg(this.memoryStorage)),_t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ov}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let s={},l="none";if(_t()&&(s=y_(window.location.href),this._isImplicitGrantCallback(s)?l="implicit":await this._isPKCECallback(s)&&(l="pkce")),_t()&&this.detectSessionInUrl&&l!=="none"){const{data:o,error:u}=await this._getSessionFromURL(s,l);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),u_(u)){const m=(n=u.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:p}=o;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return re(s)?this._returnResult({error:s}):this._returnResult({error:new Za("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,l,o;try{const u=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(s=n?.options)===null||s===void 0?void 0:s.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:fn}),{data:h,error:p}=u;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(n){var s,l,o;try{let u;if("email"in n){const{email:y,password:w,options:S}=n;let x=null,_=null;this.flowType==="pkce"&&([x,_]=await Vs(this.storage,this.storageKey)),u=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:y,password:w,data:(s=S?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:x,code_challenge_method:_},xform:fn})}else if("phone"in n){const{phone:y,password:w,options:S}=n;u=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:w,data:(l=S?.data)!==null&&l!==void 0?l:{},channel:(o=S?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:fn})}else throw new Kl("You must provide either an email or phone number and a password");const{data:h,error:p}=u;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(u){if(re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(n){try{let s;if("email"in n){const{email:u,password:h,options:p}=n;s=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:vg})}else if("phone"in n){const{phone:u,password:h,options:p}=n;s=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:vg})}else throw new Kl("You must provide either an email or phone number and a password");const{data:l,error:o}=s;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!l||!l.session||!l.user){const u=new Is;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:o})}catch(s){if(re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(n){var s,l,o,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;switch(s){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(n){var s,l,o,u,h,p,m,g,y,w,S;let x,_;if("message"in n)x=n.message,_=n.signature;else{const{chain:A,wallet:T,statement:C,options:D}=n;let L;if(_t())if(typeof T=="object")L=T;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")L=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=T}const J=new URL((s=D?.url)!==null&&s!==void 0?s:window.location.href),K=await L.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!K||K.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=Bv(K[0]);let Q=(l=D?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!Q){const H=await L.request({method:"eth_chainId"});Q=H_(H)}const te={domain:J.host,address:Y,statement:C,uri:J.href,version:"1",chainId:Q,nonce:(o=D?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(h=(u=D?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=D?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=D?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=D?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(y=D?.signInWithEthereum)===null||y===void 0?void 0:y.resources};x=I_(te),_=await L.request({method:"personal_sign",params:[G_(x),Y]})}try{const{data:A,error:T}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:_},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=n.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:fn});if(T)throw T;if(!A||!A.session||!A.user){const C=new Is;return this._returnResult({data:{user:null,session:null},error:C})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:T})}catch(A){if(re(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(n){var s,l,o,u,h,p,m,g,y,w,S,x;let _,A;if("message"in n)_=n.message,A=n.signature;else{const{chain:T,wallet:C,statement:D,options:L}=n;let J;if(_t())if(typeof C=="object")J=C;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))J=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");J=C}const K=new URL((s=L?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in J&&J.signIn){const Y=await J.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:K.host,uri:K.href}),D?{statement:D}:null));let Q;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")Q=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)Q=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Q&&"signature"in Q&&(typeof Q.signedMessage=="string"||Q.signedMessage instanceof Uint8Array)&&Q.signature instanceof Uint8Array)_=typeof Q.signedMessage=="string"?Q.signedMessage:new TextDecoder().decode(Q.signedMessage),A=Q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in J)||typeof J.signMessage!="function"||!("publicKey"in J)||typeof J!="object"||!J.publicKey||!("toBase58"in J.publicKey)||typeof J.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${K.host} wants you to sign in with your Solana account:`,J.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${K.href}`,`Issued At: ${(o=(l=L?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=L?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((h=L?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((p=L?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((m=L?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((g=L?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((w=(y=L?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||w===void 0)&&w.length?["Resources",...L.signInWithSolana.resources.map(Q=>`- ${Q}`)]:[]].join(`
`);const Y=await J.signMessage(new TextEncoder().encode(_),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=Y}}try{const{data:T,error:C}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Wa(A)},!((S=n.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:fn});if(C)throw C;if(!T||!T.session||!T.user){const D=new Is;return this._returnResult({data:{user:null,session:null},error:D})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:C})}catch(T){if(re(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(n){const s=await Ka(this.storage,`${this.storageKey}-code-verifier`),[l,o]=(s??"").split("/");try{const{data:u,error:h}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:fn});if(await Ea(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const p=new Is;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:h})}catch(u){if(re(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(n){try{const{options:s,provider:l,token:o,access_token:u,nonce:h}=n,p=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:o,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:fn}),{data:m,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const y=new Is;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(s){if(re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(n){var s,l,o,u,h;try{if("email"in n){const{email:p,options:m}=n;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await Vs(this.storage,this.storageKey));const{error:w}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=m?.data)!==null&&s!==void 0?s:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in n){const{phone:p,options:m}=n,{data:g,error:y}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(u=m?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(h=m?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:y})}throw new Kl("You must provide either an email or phone number.")}catch(p){if(re(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(n){var s,l;try{let o,u;"options"in n&&(o=(s=n.options)===null||s===void 0?void 0:s.redirectTo,u=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:h,error:p}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:fn});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,g=h.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(o){if(re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var s,l,o,u,h;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Vs(this.storage,this.storageKey));const g=await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&l!==void 0?l:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:U_});return!((u=g.data)===null||u===void 0)&&u.url&&_t()&&!(!((h=n.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(re(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:l}=n;if(l)throw l;if(!s)throw new Vt;const{error:o}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:l,type:o,options:u}=n,{error:h}=await fe(this.fetch,"POST",s,{headers:this.headers,body:{email:l,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in n){const{phone:l,type:o,options:u}=n,{data:h,error:p}=await fe(this.fetch,"POST",s,{headers:this.headers,body:{phone:l,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new Kl("You must provide either an email or phone number and a type")}catch(s){if(re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await l,await s()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=s();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await Ka(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<Hu:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.userStorage){const h=await Ka(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=Vu()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};n.user=C_(n.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Ta}):await this._useSession(async s=>{var l,o,u;const{data:h,error:p}=s;if(p)throw p;return!(!((l=h.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vt}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:Ta})})}catch(s){if(re(s))return c_(s)&&(await this._removeSession(),await Ea(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async l=>{const{data:o,error:u}=l;if(u)throw u;if(!o.session)throw new Vt;const h=o.session;let p=null,m=null;this.flowType==="pkce"&&n.email!=null&&([p,m]=await Vs(this.storage,this.storageKey));const{data:g,error:y}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:m}),jwt:h.access_token,xform:Ta});if(y)throw y;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(l){if(re(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Vt;const s=Date.now()/1e3;let l=s,o=!0,u=null;const{payload:h}=Iu(n.access_token);if(h.exp&&(l=h.exp,o=l<=s),o){const{data:p,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:m}=await this._getUser(n.access_token);if(m)throw m;u={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:l-s,expires_at:l},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(s){if(re(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var l;if(!n){const{data:h,error:p}=s;if(p)throw p;n=(l=h.session)!==null&&l!==void 0?l:void 0}if(!n?.refresh_token)throw new Vt;const{data:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(n,s){try{if(!_t())throw new Ql("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Ql(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new ug("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ql("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new ug("No code detected.");const{data:D,error:L}=await this._exchangeCodeForSession(n.code);if(L)throw L;const J=new URL(window.location.href);return J.searchParams.delete("code"),window.history.replaceState(window.history.state,"",J.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:o,access_token:u,refresh_token:h,expires_in:p,expires_at:m,token_type:g}=n;if(!u||!p||!h||!g)throw new Ql("No session defined in URL");const y=Math.round(Date.now()/1e3),w=parseInt(p);let S=y+w;m&&(S=parseInt(m));const x=S-y;x*1e3<=Xs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${w}s`);const _=S-w;y-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,S,y):y-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,S,y);const{data:A,error:T}=await this._getUser(u);if(T)throw T;const C={provider_token:l,provider_refresh_token:o,access_token:u,expires_in:w,expires_at:S,refresh_token:h,token_type:g,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:n.type},error:null})}catch(l){if(re(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await Ka(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var l;const{data:o,error:u}=s;if(u)return this._returnResult({error:u});const h=(l=o.session)===null||l===void 0?void 0:l.access_token;if(h){const{error:p}=await this.admin.signOut(h,n);if(p&&!(o_(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return n!=="others"&&(await this._removeSession(),await Ea(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const s=v_(),l={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async s=>{var l,o;try{const{data:{session:u},error:h}=s;if(h)throw h;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,s={}){let l=null,o=null;this.flowType==="pkce"&&([l,o]=await Vs(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:o,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(re(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var n;try{const{data:s,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var s;try{const{data:l,error:o}=await this._useSession(async u=>{var h,p,m,g,y;const{data:w,error:S}=u;if(S)throw S;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",x,{headers:this.headers,jwt:(y=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return _t()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:n.provider,url:l?.url},error:null})}catch(l){if(re(l))return this._returnResult({data:{provider:n.provider,url:null},error:l});throw l}}async linkIdentityIdToken(n){return await this._useSession(async s=>{var l;try{const{error:o,data:{session:u}}=s;if(o)throw o;const{options:h,provider:p,token:m,access_token:g,nonce:y}=n,w=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=u?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:p,id_token:m,access_token:g,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:fn}),{data:S,error:x}=w;return x?this._returnResult({data:{user:null,session:null},error:x}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new Is}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:x}))}catch(o){if(re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async s=>{var l,o;const{data:u,error:h}=s;if(h)throw h;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&o!==void 0?o:void 0})})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const l=Date.now();return await x_(async o=>(o>0&&await w_(200*Math.pow(2,o-1)),this._debug(s,"refreshing attempt",o),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:fn})),(o,u)=>{const h=200*Math.pow(2,o);return u&&Gu(u)&&Date.now()+h-l<Xs})}catch(l){if(this._debug(s,"error",l),re(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",l),_t()&&!s.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n,s;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const o=await Ka(this.storage,this.storageKey);if(o&&this.userStorage){let h=await Ka(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:o.user},await Zs(this.userStorage,this.storageKey+"-user",h)),o.user=(n=h?.user)!==null&&n!==void 0?n:Vu()}else if(o&&!o.user&&!o.user){const h=await Ka(this.storage,this.storageKey+"-user");h&&h?.user?(o.user=h.user,await Ea(this.storage,this.storageKey+"-user"),await Zs(this.storage,this.storageKey,o)):o.user=Vu()}if(this._debug(l,"session from storage",o),!this._isValidSession(o)){this._debug(l,"session is not valid"),o!==null&&await this._removeSession();return}const u=((s=o.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Hu;if(this._debug(l,`session has${u?"":" not"} expired with margin of ${Hu}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:h}=await this._callRefreshToken(o.refresh_token);h&&(console.error(h),Gu(h)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(o.access_token);!p&&h?.user?(o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(l,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(l,"error",o),console.error(o);return}finally{this._debug(l,"end")}}async _callRefreshToken(n){var s,l;if(!n)throw new Vt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new ho;const{data:u,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!u.session)throw new Vt;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(o,"error",u),re(u)){const h={data:null,error:u};return Gu(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,s,l=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",s,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:s});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,s)}catch(m){u.push(m)}});if(await Promise.all(h),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),l=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&s.user&&await Zs(this.userStorage,this.storageKey+"-user",{user:s.user});const o=Object.assign({},s);delete o.user;const u=pg(o);await Zs(this.storage,this.storageKey,u)}else{const o=pg(s);await Zs(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Ea(this.storage,this.storageKey),await Ea(this.storage,this.storageKey+"-code-verifier"),await Ea(this.storage,this.storageKey+"-user"),this.userStorage&&await Ea(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&_t()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Xs);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:l}}=s;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((l.expires_at*1e3-n)/Xs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Xs}ms, refresh threshold is ${rd} ticks`),o<=rd&&await this._callRefreshToken(l.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Lv)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_t()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,l){const o=[`provider=${encodeURIComponent(s)}`];if(l?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&o.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[u,h]=await Vs(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});o.push(p.toString())}if(l?.queryParams){const u=new URLSearchParams(l.queryParams);o.push(u.toString())}return l?.skipBrowserRedirect&&o.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var l;const{data:o,error:u}=s;return u?this._returnResult({data:null,error:u}):await fe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=o?.session)===null||l===void 0?void 0:l.access_token})})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(n){try{return await this._useSession(async s=>{var l,o;const{data:u,error:h}=s;if(h)return this._returnResult({data:null,error:h});const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:m,error:g}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(l=u?.session)===null||l===void 0?void 0:l.access_token});return g?this._returnResult({data:null,error:g}):(n.factorType==="totp"&&m.type==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:o,error:u}=s;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Z_(n.webauthn.credential_response):W_(n.webauthn.credential_response)})}:{code:n.code}),{data:p,error:m}=await fe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:h,headers:this.headers,jwt:(l=o?.session)===null||l===void 0?void 0:l.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:o,error:u}=s;if(u)return this._returnResult({data:null,error:u});const h=await fe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(l=o?.session)===null||l===void 0?void 0:l.access_token});if(h.error)return h;const{data:p}=h;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:J_(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:X_(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(n){const{data:s,error:l}=await this._challenge({factorId:n.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){var n;const{data:{user:s},error:l}=await this.getUser();if(l)return{data:null,error:l};const o={all:[],phone:[],totp:[],webauthn:[]};for(const u of(n=s?.factors)!==null&&n!==void 0?n:[])o.all.push(u),u.status==="verified"&&o[u.factor_type].push(u);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var n,s;const{data:{session:l},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Iu(l.access_token);let h=null;u.aal&&(h=u.aal);let p=h;((s=(n=l.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const g=u.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async s=>{const{data:{session:l},error:o}=s;return o?this._returnResult({data:null,error:o}):l?await fe(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:l.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Vt})})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(n,s){try{return await this._useSession(async l=>{const{data:{session:o},error:u}=l;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new Vt});const h=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&_t()&&!s?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(l){if(re(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(n,s){try{return await this._useSession(async l=>{const{data:{session:o},error:u}=l;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new Vt});const h=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&_t()&&!s?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(l){if(re(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:s},error:l}=n;return l?this._returnResult({data:null,error:l}):s?await fe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Vt})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async s=>{const{data:{session:l},error:o}=s;return o?this._returnResult({data:null,error:o}):l?await fe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:n.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Vt})})}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(n,s={keys:[]}){let l=s.keys.find(p=>p.kid===n);if(l)return l;const o=Date.now();if(l=this.jwks.keys.find(p=>p.kid===n),l&&this.jwks_cached_at+r_>o)return l;const{data:u,error:h}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,l=u.keys.find(p=>p.kid===n),!l)?null:l}async getClaims(n,s={}){try{let l=n;if(!l){const{data:x,error:_}=await this.getSession();if(_||!x.session)return this._returnResult({data:null,error:_});l=x.session.access_token}const{header:o,payload:u,signature:h,raw:{header:p,payload:m}}=Iu(l);s?.allowExpired||k_(u.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!g){const{error:x}=await this.getUser(l);if(x)throw x;return{data:{claims:u,header:o,signature:h},error:null}}const y=A_(o.alg),w=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,w,h,p_(`${p}.${m}`)))throw new cd("Invalid JWT signature");return{data:{claims:u,header:o,signature:h},error:null}}catch(l){if(re(l))return this._returnResult({data:null,error:l});throw l}}}yr.nextInstanceID={};const lS=yr;class oS extends lS{constructor(n){super(n)}}class cS{constructor(n,s,l){var o,u,h;this.supabaseUrl=n,this.supabaseKey=s;const p=t_(n);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,g={db:Kx,realtime:Jx,auth:Object.assign(Object.assign({},Qx),{storageKey:m}),global:Yx},y=e_(l??{},g);this.storageKey=(o=y.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=y.global.headers)!==null&&u!==void 0?u:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(w,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=y.auth)!==null&&h!==void 0?h:{},this.headers,y.global.fetch),this.fetch=Wx(s,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&this.accessToken().then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new nx(new URL("rest/v1",p).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new Gx(this.storageUrl.href,this.headers,this.fetch,l?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new Ww(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,s,l)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n,s;if(this.accessToken)return await this.accessToken();const{data:l}=await this.auth.getSession();return(s=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:l,storage:o,userStorage:u,storageKey:h,flowType:p,lock:m,debug:g,throwOnError:y},w,S){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new oS({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),w),storageKey:h,autoRefreshToken:n,persistSession:s,detectSessionInUrl:l,storage:o,userStorage:u,flowType:p,lock:m,debug:g,throwOnError:y,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new bx(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,l)=>{this._handleTokenChanged(s,"CLIENT",l?.access_token)})}_handleTokenChanged(n,s,l){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uS=(i,n,s)=>new cS(i,n,s);function dS(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const n=i.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}dS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const hS="https://dnxqgphaisdxvdyeiwnh.supabase.co",fS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRueHFncGhhaXNkeHZkeWVpd25oIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4MjI0NzQsImV4cCI6MjA3OTM5ODQ3NH0.EOob0ftntm4WlxGMKezV3Vu3FGXQs6hiMLsSTinTrEs",ge=uS(hS,fS),qv=E.createContext(void 0);function mS({children:i}){const[n,s]=E.useState(null),[l,o]=E.useState(null),[u,h]=E.useState(null),[p,m]=E.useState(!0),g=async T=>{try{const{data:C,error:D}=await ge.from("profiles").select("*").eq("id",T).single();if(D){console.error("Error fetching profile:",D);return}o(C)}catch(C){console.error("Error fetching profile:",C)}},y=async()=>{n&&await g(n.id)};E.useEffect(()=>{ge.auth.getSession().then(({data:{session:C}})=>{h(C),s(C?.user??null),C?.user&&g(C.user.id),m(!1)});const{data:{subscription:T}}=ge.auth.onAuthStateChange(async(C,D)=>{h(D),s(D?.user??null),D?.user?await g(D.user.id):o(null),m(!1)});return()=>T.unsubscribe()},[]);const w=async(T,C)=>{const{error:D}=await ge.auth.signInWithPassword({email:T,password:C});return{error:D}},S=async(T,C,D,L)=>{const{error:J}=await ge.auth.signUp({email:T,password:C});return{error:J}},x=async()=>{const{error:T}=await ge.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`}});return{error:T}},_=async()=>{await ge.auth.signOut(),s(null),o(null),h(null)},A=async T=>{const{error:C}=await ge.auth.resetPasswordForEmail(T);return{error:C}};return c.jsx(qv.Provider,{value:{user:n,profile:l,session:u,loading:p,signIn:w,signUp:S,signOut:_,signInWithGoogle:x,resetPassword:A,refreshProfile:y},children:i})}function bn(){const i=E.useContext(qv);if(i===void 0)throw new Error("useAuth must be used within an AuthProvider");return i}function pS(){const[i,n]=E.useState(""),[s,l]=E.useState(""),[o,u]=E.useState(""),[h,p]=E.useState(!1),{signIn:m,signInWithGoogle:g}=bn(),y=Zn(),[w]=Yg(),S=w.get("redirect")||"/",x=async A=>{A.preventDefault(),u(""),p(!0);try{console.log("[Login] Starting sign in...");const{error:T}=await m(i,s);if(T){console.error("[Login] Sign in error:",T.message);let C=T.message;C.includes("Invalid login credentials")?C="Invalid email or password. Please try again.":C.includes("Email not confirmed")?C="Please check your email and confirm your account before signing in.":(C.includes("fetch")||C.includes("network"))&&(C="Network error. Please check your connection and try again."),u(C),p(!1)}else console.log("[Login] Sign in successful, navigating..."),setTimeout(()=>{y(S),p(!1)},500)}catch(T){console.error("[Login] Unexpected error:",T),u("An unexpected error occurred. Please try again."),p(!1)}},_=async()=>{u("");const{error:A}=await g();A&&u(A.message)};return c.jsx("div",{className:"auth-container",children:c.jsxs("div",{className:"auth-card",children:[c.jsxs("div",{className:"auth-header",children:[c.jsxs("div",{className:"auth-logo",children:[c.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),c.jsx("span",{className:"logo-text",children:"Morgus"})]}),c.jsx("h1",{children:"Welcome back!"}),c.jsx("p",{children:"Sign in to continue to Morgus"})]}),o&&c.jsx("div",{className:"auth-error",children:o}),c.jsxs("form",{onSubmit:x,className:"auth-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{id:"email",type:"email",value:i,onChange:A=>n(A.target.value),placeholder:"you@example.com",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{htmlFor:"password",children:["Password",c.jsx(ft,{to:"/forgot-password",className:"forgot-link",children:"Forgot?"})]}),c.jsx("input",{id:"password",type:"password",value:s,onChange:A=>l(A.target.value),placeholder:"",required:!0})]}),c.jsx("button",{type:"submit",className:"auth-button primary",disabled:h,children:h?"Signing in...":"Sign in"})]}),c.jsx("div",{className:"auth-divider",children:c.jsx("span",{children:"or"})}),c.jsxs("button",{onClick:_,className:"auth-button google",children:[c.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),c.jsxs("p",{className:"auth-footer",children:["Don't have an account? ",c.jsx(ft,{to:"/signup",children:"Sign up"})]})]})})}function gS(){const[i,n]=E.useState(""),[s,l]=E.useState(""),[o,u]=E.useState(""),[h,p]=E.useState(""),[m,g]=E.useState(""),[y,w]=E.useState(""),[S,x]=E.useState(!1),[_,A]=E.useState(!1),{signUp:T,signInWithGoogle:C}=bn(),[D]=Yg();E.useEffect(()=>{const K=D.get("ref");K&&g(K)},[D]);const L=async K=>{if(K.preventDefault(),w(""),s!==o){w("Passwords do not match");return}if(s.length<8){w("Password must be at least 8 characters");return}x(!0);const{error:Y}=await T(i,s,h,m);Y?(w(Y.message),x(!1)):A(!0)},J=async()=>{w("");const{error:K}=await C();K&&w(K.message)};return _?c.jsx("div",{className:"auth-container",children:c.jsxs("div",{className:"auth-card",children:[c.jsxs("div",{className:"auth-header",children:[c.jsxs("div",{className:"auth-logo",children:[c.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),c.jsx("span",{className:"logo-text",children:"Morgus"})]}),c.jsx("h1",{children:"Check your email!"}),c.jsxs("p",{children:["We sent a confirmation link to ",c.jsx("strong",{children:i})]})]}),c.jsxs("div",{className:"auth-success",children:[c.jsx("p",{children:"Click the link in the email to activate your account."}),m&&c.jsx("p",{className:"referral-bonus",children:" Your referral bonus will be applied once you confirm!"})]}),c.jsx(ft,{to:"/login",className:"auth-button secondary",children:"Back to Login"})]})}):c.jsx("div",{className:"auth-container",children:c.jsxs("div",{className:"auth-card",children:[c.jsxs("div",{className:"auth-header",children:[c.jsxs("div",{className:"auth-logo",children:[c.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),c.jsx("span",{className:"logo-text",children:"Morgus"})]}),c.jsx("h1",{children:"Create your account"}),c.jsx("p",{children:"Join Morgus and start building amazing things"})]}),y&&c.jsx("div",{className:"auth-error",children:y}),m&&c.jsx("div",{className:"referral-banner",children:" You've been referred! Sign up to get a free day pass."}),c.jsxs("form",{onSubmit:L,className:"auth-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"displayName",children:"Display Name (optional)"}),c.jsx("input",{id:"displayName",type:"text",value:h,onChange:K=>p(K.target.value),placeholder:"Your name"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{id:"email",type:"email",value:i,onChange:K=>n(K.target.value),placeholder:"you@example.com",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"password",children:"Password"}),c.jsx("input",{id:"password",type:"password",value:s,onChange:K=>l(K.target.value),placeholder:"At least 8 characters",required:!0,minLength:8})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),c.jsx("input",{id:"confirmPassword",type:"password",value:o,onChange:K=>u(K.target.value),placeholder:"Confirm your password",required:!0})]}),!m&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"referralCode",children:"Referral Code (optional)"}),c.jsx("input",{id:"referralCode",type:"text",value:m,onChange:K=>g(K.target.value.toUpperCase()),placeholder:"Enter referral code"})]}),c.jsx("button",{type:"submit",className:"auth-button primary",disabled:S,children:S?"Creating account...":"Create account"})]}),c.jsx("div",{className:"auth-divider",children:c.jsx("span",{children:"or"})}),c.jsxs("button",{onClick:J,className:"auth-button google",children:[c.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),c.jsxs("p",{className:"auth-footer",children:["Already have an account? ",c.jsx(ft,{to:"/login",children:"Sign in"})]}),c.jsxs("div",{className:"privacy-notice",children:[c.jsx("div",{className:"privacy-notice-icon",children:""}),c.jsxs("p",{className:"privacy-notice-text",children:[c.jsx("strong",{children:"Your Privacy Matters:"}),` By default, your conversations help improve Morgus for everyone. You can opt out anytime in Settings with the "Don't Train on Me" toggle. We `,c.jsx("em",{children:"never"})," store passwords, payment info, or government IDs."]})]}),c.jsxs("p",{className:"auth-terms",children:["By creating an account, you agree to our"," ",c.jsx("a",{href:"/terms",target:"_blank",children:"Terms of Service"})," and"," ",c.jsx("a",{href:"/privacy",target:"_blank",children:"Privacy Policy"})]})]})})}function vS(){const[i,n]=E.useState(""),[s,l]=E.useState(""),[o,u]=E.useState(!1),[h,p]=E.useState(!1),{resetPassword:m}=bn(),g=async y=>{y.preventDefault(),l(""),u(!0);const{error:w}=await m(i);w?(l(w.message),u(!1)):p(!0)};return h?c.jsx("div",{className:"auth-container",children:c.jsxs("div",{className:"auth-card",children:[c.jsxs("div",{className:"auth-header",children:[c.jsxs("div",{className:"auth-logo",children:[c.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),c.jsx("span",{className:"logo-text",children:"Morgus"})]}),c.jsx("h1",{children:"Check your email!"}),c.jsxs("p",{children:["We sent a password reset link to ",c.jsx("strong",{children:i})]})]}),c.jsxs("div",{className:"auth-success",children:[c.jsx("p",{children:"Click the link in the email to reset your password."}),c.jsx("p",{children:"Didn't receive it? Check your spam folder or try again."})]}),c.jsx(ft,{to:"/login",className:"auth-button secondary",children:"Back to Login"})]})}):c.jsx("div",{className:"auth-container",children:c.jsxs("div",{className:"auth-card",children:[c.jsxs("div",{className:"auth-header",children:[c.jsxs("div",{className:"auth-logo",children:[c.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),c.jsx("span",{className:"logo-text",children:"Morgus"})]}),c.jsx("h1",{children:"Reset your password"}),c.jsx("p",{children:"Enter your email and we'll send you a reset link"})]}),s&&c.jsx("div",{className:"auth-error",children:s}),c.jsxs("form",{onSubmit:g,className:"auth-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{id:"email",type:"email",value:i,onChange:y=>n(y.target.value),placeholder:"you@example.com",required:!0})]}),c.jsx("button",{type:"submit",className:"auth-button primary",disabled:o,children:o?"Sending...":"Send reset link"})]}),c.jsxs("p",{className:"auth-footer",children:["Remember your password? ",c.jsx(ft,{to:"/login",children:"Sign in"})]})]})})}const yS="https://morgus-orchestrator.morgan-426.workers.dev",bS=[{id:"free",name:"Free",price:0,priceLabel:"$0",period:"forever",description:"Try Morgus with basic features",features:["20 messages per day","1 website build per day","1 deployment per day","3 image generations per day","10 web searches per day","1 basic Morgy companion"]},{id:"daily",name:"Day Pass",price:3,priceLabel:"$3",period:"per day",description:"Full access for 24 hours",features:["Unlimited messages","Unlimited website builds","Unlimited deployments","Unlimited image generations","Unlimited web searches","2 video generations","GitHub integration","All Morgy tools unlocked"]},{id:"weekly",name:"Weekly",price:21,priceLabel:"$21",period:"per week",description:"Best value for regular users",features:["Everything in Day Pass","10 video generations per day","Priority support","Early access to new features","Save $0/week vs daily"],highlight:!0,badge:"Most Popular"},{id:"monthly",name:"Monthly",price:75,priceLabel:"$75",period:"per month",description:"Maximum power for power users",features:["Everything in Weekly","Unlimited video generations","Custom Morgy skins","API access","Team collaboration (coming soon)","Save $9/month vs weekly"],badge:"Best Value"}];function wS(){const{user:i,profile:n}=bn(),s=Zn(),[l,o]=E.useState(null),[u,h]=E.useState(""),p=async g=>{if(g==="free"){i||s("/signup");return}if(!i){s("/signup?redirect=/pricing");return}o(g),h("");try{const w=await(await fetch(`${yS}/api/checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i.id,email:i.email,planId:g,successUrl:`${window.location.origin}/checkout/success`,cancelUrl:`${window.location.origin}/pricing`})})).json();if(w.error)throw new Error(w.error);window.location.href=w.url}catch(y){h(y.message||"Failed to start checkout"),o(null)}},m=n?.subscription_tier||"free";return c.jsxs("div",{className:"pricing-container",children:[c.jsxs("div",{className:"pricing-header",children:[c.jsx("h1",{children:"Choose Your Plan"}),c.jsx("p",{children:"Unlock the full power of Morgus AI Agent"})]}),u&&c.jsx("div",{className:"pricing-error",children:u}),c.jsx("div",{className:"pricing-grid",children:bS.map(g=>c.jsxs("div",{className:`pricing-card ${g.highlight?"highlight":""} ${m===g.id?"current":""}`,children:[g.badge&&c.jsx("div",{className:"pricing-badge",children:g.badge}),m===g.id&&c.jsx("div",{className:"current-badge",children:"Current Plan"}),c.jsx("h2",{children:g.name}),c.jsxs("div",{className:"pricing-price",children:[c.jsx("span",{className:"price",children:g.priceLabel}),c.jsx("span",{className:"period",children:g.period})]}),c.jsx("p",{className:"pricing-description",children:g.description}),c.jsx("ul",{className:"pricing-features",children:g.features.map((y,w)=>c.jsxs("li",{children:[c.jsx("span",{className:"check",children:""}),y]},w))}),c.jsx("button",{className:`pricing-button ${g.highlight?"primary":"secondary"}`,onClick:()=>p(g.id),disabled:l===g.id||m===g.id,children:l===g.id?"Loading...":m===g.id?"Current Plan":g.id==="free"?"Get Started":"Subscribe"})]},g.id))}),c.jsxs("div",{className:"pricing-faq",children:[c.jsx("h2",{children:"Frequently Asked Questions"}),c.jsxs("div",{className:"faq-item",children:[c.jsx("h3",{children:"Can I cancel anytime?"}),c.jsx("p",{children:"Yes! You can cancel your subscription at any time. You'll continue to have access until the end of your billing period."})]}),c.jsxs("div",{className:"faq-item",children:[c.jsx("h3",{children:"What payment methods do you accept?"}),c.jsx("p",{children:"We accept all major credit cards through Stripe, including Visa, Mastercard, American Express, and more."})]}),c.jsxs("div",{className:"faq-item",children:[c.jsx("h3",{children:"What are Day Passes?"}),c.jsx("p",{children:"Day Passes give you 24 hours of full access. You can earn free Day Passes by referring friends or redeeming promo codes!"})]}),c.jsxs("div",{className:"faq-item",children:[c.jsx("h3",{children:"What happens when I hit my free tier limits?"}),c.jsx("p",{children:"You'll see a friendly upgrade prompt. You can either wait until tomorrow when limits reset, or upgrade to continue immediately."})]})]}),c.jsx("div",{className:"pricing-footer",children:c.jsxs("p",{children:["Have questions? ",c.jsx("a",{href:"mailto:support@morgus.ai",children:"Contact us"})]})})]})}function xS(){const{refreshProfile:i}=bn();return E.useEffect(()=>{i()},[i]),c.jsx("div",{className:"auth-container",children:c.jsxs("div",{className:"auth-card",style:{textAlign:"center"},children:[c.jsxs("div",{className:"auth-header",children:[c.jsx("div",{style:{fontSize:"64px",marginBottom:"20px"},children:""}),c.jsx("h1",{children:"Welcome to Morgus!"}),c.jsx("p",{children:"Your subscription is now active"})]}),c.jsxs("div",{className:"auth-success",children:[c.jsx("p",{children:"Thank you for subscribing! You now have full access to all Morgus features."}),c.jsx("p",{style:{marginTop:"16px"},children:c.jsx("strong",{children:"What's next?"})}),c.jsxs("ul",{style:{textAlign:"left",marginTop:"12px",paddingLeft:"20px"},children:[c.jsx("li",{children:"Build unlimited websites"}),c.jsx("li",{children:"Generate images and videos"}),c.jsx("li",{children:"Use all Morgy tools"}),c.jsx("li",{children:"Connect your GitHub"})]})]}),c.jsx(ft,{to:"/",className:"auth-button primary",children:"Start Building! "}),c.jsxs("p",{className:"auth-footer",style:{marginTop:"24px"},children:["Need help? ",c.jsx("a",{href:"mailto:support@morgus.ai",children:"Contact support"})]})]})})}const rr="https://morgus-orchestrator.morgan-426.workers.dev";function _S(){const{user:i,profile:n,signOut:s,refreshProfile:l}=bn(),o=Zn(),[u,h]=E.useState(null),[p,m]=E.useState(null),[g,y]=E.useState(""),[w,S]=E.useState(!1),[x,_]=E.useState(null),[A,T]=E.useState(!1);E.useEffect(()=>{if(!i){o("/login?redirect=/account");return}C(),D()},[i,o]);const C=async()=>{if(i)try{const H=await(await fetch(`${rr}/api/usage/${i.id}`)).json();h(H.usage)}catch(te){console.error("Failed to fetch usage:",te)}},D=async()=>{if(i)try{const H=await(await fetch(`${rr}/api/referral/${i.id}`)).json();m(H)}catch(te){console.error("Failed to fetch referral:",te)}},L=async te=>{if(te.preventDefault(),!(!i||!g.trim())){S(!0),_(null);try{const le=await(await fetch(`${rr}/api/promo/redeem`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i.id,code:g.trim()})})).json();le.success?(_({type:"success",text:le.message}),y(""),l()):_({type:"error",text:le.message})}catch{_({type:"error",text:"Failed to redeem promo code"})}finally{S(!1)}}},J=async()=>{if(i){T(!0);try{const H=await(await fetch(`${rr}/api/billing-portal`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i.id,returnUrl:window.location.href})})).json();H.url?window.location.href=H.url:alert(H.error||"Failed to open billing portal")}catch{alert("Failed to open billing portal")}finally{T(!1)}}},K=async()=>{if(i)try{const H=await(await fetch(`${rr}/api/wallet/use`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i.id})})).json();H.success?(alert(H.message),l()):alert(H.message)}catch{alert("Failed to use day pass")}},Y=()=>{p?.referralLink&&(navigator.clipboard.writeText(p.referralLink),alert("Referral link copied!"))},Q=async()=>{await s(),o("/")};return!i||!n?c.jsx("div",{className:"account-loading",children:"Loading..."}):c.jsxs("div",{className:"account-container",children:[c.jsxs("div",{className:"account-header",children:[c.jsx("h1",{children:"Account Settings"}),c.jsx("button",{onClick:Q,className:"sign-out-button",children:"Sign Out"})]}),c.jsxs("div",{className:"account-grid",children:[c.jsxs("div",{className:"account-card",children:[c.jsx("h2",{children:"Profile"}),c.jsxs("div",{className:"profile-info",children:[c.jsx("div",{className:"profile-avatar",children:n.avatar_url?c.jsx("img",{src:n.avatar_url,alt:"Avatar"}):c.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill"})}),c.jsxs("div",{className:"profile-details",children:[c.jsx("p",{className:"profile-name",children:n.display_name||"Morgus User"}),c.jsx("p",{className:"profile-email",children:n.email})]})]})]}),c.jsxs("div",{className:"account-card",children:[c.jsx("h2",{children:"Subscription"}),c.jsxs("div",{className:"subscription-info",children:[c.jsx("div",{className:"subscription-badge","data-tier":n.subscription_tier,children:n.subscription_tier==="free"?"Free":n.subscription_tier==="daily"?"Day Pass":n.subscription_tier==="weekly"?"Weekly":n.subscription_tier==="monthly"?"Monthly":"Free"}),n.subscription_ends_at&&n.subscription_tier!=="free"&&c.jsxs("p",{className:"subscription-expires",children:["Expires: ",new Date(n.subscription_ends_at).toLocaleDateString()]})]}),c.jsx("div",{className:"subscription-actions",children:n.subscription_tier==="free"?c.jsx("button",{onClick:()=>o("/pricing"),className:"upgrade-button",children:"Upgrade Now"}):c.jsx("button",{onClick:J,disabled:A,className:"manage-button",children:A?"Loading...":"Manage Billing"})})]}),c.jsxs("div",{className:"account-card",children:[c.jsx("h2",{children:"Day Pass Wallet"}),c.jsxs("div",{className:"wallet-balance",children:[c.jsx("span",{className:"balance-number",children:n.day_pass_balance||0}),c.jsx("span",{className:"balance-label",children:"Day Passes"})]}),(n.day_pass_balance||0)>0&&n.subscription_tier==="free"&&c.jsx("button",{onClick:K,className:"use-pass-button",children:"Use Day Pass"}),c.jsx("p",{className:"wallet-hint",children:"Earn day passes by referring friends or redeeming promo codes!"})]}),c.jsxs("div",{className:"account-card",children:[c.jsx("h2",{children:"Redeem Promo Code"}),c.jsxs("form",{onSubmit:L,className:"promo-form",children:[c.jsx("input",{type:"text",value:g,onChange:te=>y(te.target.value.toUpperCase()),placeholder:"Enter promo code",maxLength:20}),c.jsx("button",{type:"submit",disabled:w||!g.trim(),children:w?"Redeeming...":"Redeem"})]}),x&&c.jsx("div",{className:`promo-message ${x.type}`,children:x.text})]}),c.jsxs("div",{className:"account-card wide",children:[c.jsx("h2",{children:"Refer Friends"}),c.jsx("p",{className:"referral-description",children:"Share your referral link and earn free day passes! You get 1 day pass for each friend who signs up."}),p&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"referral-link-box",children:[c.jsx("input",{type:"text",value:p.referralLink,readOnly:!0}),c.jsx("button",{onClick:Y,children:"Copy"})]}),c.jsxs("div",{className:"referral-stats",children:[c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-number",children:p.completedReferrals}),c.jsx("span",{className:"stat-label",children:"Successful Referrals"})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-number",children:p.pendingReferrals}),c.jsx("span",{className:"stat-label",children:"Pending"})]}),p.nextMilestone&&c.jsxs("div",{className:"stat milestone",children:[c.jsx("span",{className:"stat-number",children:p.nextMilestone.count-p.completedReferrals}),c.jsxs("span",{className:"stat-label",children:["Until: ",p.nextMilestone.reward]})]})]})]})]}),c.jsxs("div",{className:"account-card wide",children:[c.jsx("h2",{children:"Today's Usage"}),u&&c.jsxs("div",{className:"usage-grid",children:[c.jsx(Js,{label:"Messages",current:u.messages.current,limit:u.messages.limit}),c.jsx(Js,{label:"Builds",current:u.builds.current,limit:u.builds.limit}),c.jsx(Js,{label:"Deployments",current:u.deployments.current,limit:u.deployments.limit}),c.jsx(Js,{label:"Images",current:u.images.current,limit:u.images.limit}),c.jsx(Js,{label:"Searches",current:u.searches.current,limit:u.searches.limit}),c.jsx(Js,{label:"Videos",current:u.videos.current,limit:u.videos.limit})]}),c.jsx("p",{className:"usage-hint",children:"Usage resets daily at midnight UTC"})]})]})]})}function Js({label:i,current:n,limit:s}){const l=s===-1?0:Math.min(n/s*100,100),o=s===-1;return c.jsxs("div",{className:"usage-item",children:[c.jsxs("div",{className:"usage-header",children:[c.jsx("span",{className:"usage-label",children:i}),c.jsxs("span",{className:"usage-count",children:[n," / ",o?"":s]})]}),c.jsx("div",{className:"usage-bar",children:c.jsx("div",{className:"usage-fill",style:{width:o?"100%":`${l}%`},"data-unlimited":o})})]})}function SS(){const{user:i,profile:n,loading:s}=bn(),[l,o]=E.useState("promos"),[u,h]=E.useState([]),[p,m]=E.useState([]),[g,y]=E.useState(!1),[w,S]=E.useState(null),[x,_]=E.useState({code:"",type:"day_pass",value:1,maxUses:"",expiresAt:"",description:""}),[A,T]=E.useState(!1),[C,D]=E.useState(null);E.useEffect(()=>{n?.is_admin&&L()},[n]);const L=async()=>{y(!0),S(null);try{const{data:H,error:le}=await ge.from("promo_codes").select("*").order("created_at",{ascending:!1});if(le)throw console.error("Error fetching promo codes:",le),le;h(H||[]);const{data:ve,error:Te}=await ge.from("profiles").select("*").order("created_at",{ascending:!1});if(Te)throw console.error("Error fetching users:",Te),Te;m(ve||[])}catch(H){console.error("Failed to fetch admin data:",H),S("Failed to load admin data. Please check your permissions.")}finally{y(!1)}},J=async H=>{if(H.preventDefault(),!!x.code.trim()){T(!0),D(null);try{const{error:le}=await ge.from("promo_codes").insert({code:x.code.toUpperCase().trim(),reward_type:x.type,reward_value:x.value,max_uses:x.maxUses?parseInt(x.maxUses):null,expires_at:x.expiresAt||null,description:x.description||null,is_active:!0,times_used:0});le?(console.error("Error creating promo:",le),D({type:"error",text:le.message||"Failed to create promo code"})):(D({type:"success",text:"Promo code created!"}),_({code:"",type:"day_pass",value:1,maxUses:"",expiresAt:"",description:""}),L())}catch{D({type:"error",text:"Failed to create promo code"})}finally{T(!1)}}},K=async(H,le)=>{try{const{error:ve}=await ge.from("promo_codes").update({is_active:!le}).eq("id",H);ve?console.error("Error toggling promo:",ve):L()}catch(ve){console.error("Failed to toggle promo:",ve)}},Y=async H=>{if(confirm("Are you sure you want to delete this promo code?"))try{const{error:le}=await ge.from("promo_codes").delete().eq("id",H);le?console.error("Error deleting promo:",le):L()}catch(le){console.error("Failed to delete promo:",le)}},Q=async H=>{const le=prompt("How many day passes to grant?","1");if(le)try{const{data:ve,error:Te}=await ge.from("profiles").select("day_pass_balance").eq("id",H).single();if(Te){console.error("Error fetching user:",Te);return}const st=(ve?.day_pass_balance||0)+parseInt(le),{error:Ie}=await ge.from("profiles").update({day_pass_balance:st}).eq("id",H);Ie?console.error("Error updating day pass:",Ie):(L(),alert(`Granted ${le} day pass(es)!`))}catch(ve){console.error("Failed to grant day pass:",ve)}},te=async(H,le)=>{if(confirm(le?"Remove admin privileges?":"Grant admin privileges?"))try{const{error:ve}=await ge.from("profiles").update({is_admin:!le}).eq("id",H);ve?console.error("Error toggling admin:",ve):L()}catch(ve){console.error("Failed to toggle admin:",ve)}};return s?c.jsx("div",{className:"admin-container",children:c.jsxs("div",{className:"admin-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Checking authentication..."})]})}):i?n?n.is_admin?c.jsxs("div",{className:"admin-container",children:[c.jsxs("div",{className:"admin-header",children:[c.jsxs("div",{className:"admin-title-row",children:[c.jsx("h1",{children:" Admin Dashboard"}),c.jsx(ft,{to:"/",className:"back-to-app",children:" Back to Morgus"})]}),c.jsxs("p",{className:"admin-welcome",children:["Welcome, ",n.display_name||n.email]}),c.jsxs("div",{className:"admin-tabs",children:[c.jsx("button",{className:l==="promos"?"active":"",onClick:()=>o("promos"),children:" Promo Codes"}),c.jsx("button",{className:l==="users"?"active":"",onClick:()=>o("users"),children:" Users"})]})]}),w&&c.jsxs("div",{className:"admin-error",children:[c.jsx("p",{children:w}),c.jsx("button",{onClick:L,children:"Retry"})]}),g?c.jsxs("div",{className:"admin-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Loading data..."})]}):l==="promos"?c.jsxs("div",{className:"admin-section",children:[c.jsxs("div",{className:"admin-card",children:[c.jsx("h2",{children:" Create Promo Code"}),c.jsxs("form",{onSubmit:J,className:"promo-create-form",children:[c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Code"}),c.jsx("input",{type:"text",value:x.code,onChange:H=>_({...x,code:H.target.value.toUpperCase()}),placeholder:"MORGUS2024",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Type"}),c.jsxs("select",{value:x.type,onChange:H=>_({...x,type:H.target.value}),children:[c.jsx("option",{value:"day_pass",children:"Day Pass"}),c.jsx("option",{value:"discount",children:"Discount %"})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Value"}),c.jsx("input",{type:"number",value:x.value,onChange:H=>_({...x,value:parseInt(H.target.value)}),min:"1",required:!0})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Max Uses (empty = unlimited)"}),c.jsx("input",{type:"number",value:x.maxUses,onChange:H=>_({...x,maxUses:H.target.value}),placeholder:"Unlimited",min:"1"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Expires At (optional)"}),c.jsx("input",{type:"date",value:x.expiresAt,onChange:H=>_({...x,expiresAt:H.target.value})})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Description"}),c.jsx("input",{type:"text",value:x.description,onChange:H=>_({...x,description:H.target.value}),placeholder:"Launch promo"})]})]}),c.jsx("div",{className:"form-actions",children:c.jsx("button",{type:"submit",disabled:A,className:"create-btn",children:A?"Creating...":" Create Code"})})]}),C&&c.jsx("div",{className:`admin-message ${C.type}`,children:C.text})]}),c.jsxs("div",{className:"admin-card",children:[c.jsxs("h2",{children:[" Active Promo Codes (",u.length,")"]}),c.jsxs("table",{className:"admin-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Code"}),c.jsx("th",{children:"Type"}),c.jsx("th",{children:"Value"}),c.jsx("th",{children:"Uses"}),c.jsx("th",{children:"Expires"}),c.jsx("th",{children:"Status"}),c.jsx("th",{children:"Actions"})]})}),c.jsxs("tbody",{children:[u.map(H=>c.jsxs("tr",{children:[c.jsx("td",{children:c.jsx("code",{children:H.code})}),c.jsx("td",{children:H.reward_type}),c.jsx("td",{children:H.reward_value}),c.jsxs("td",{children:[H.times_used||0," / ",H.max_uses||""]}),c.jsx("td",{children:H.expires_at?new Date(H.expires_at).toLocaleDateString():"Never"}),c.jsx("td",{children:c.jsx("span",{className:`status-badge ${H.is_active?"active":"inactive"}`,children:H.is_active?"Active":"Inactive"})}),c.jsxs("td",{children:[c.jsx("button",{className:"action-btn",onClick:()=>K(H.id,H.is_active),children:H.is_active?"Disable":"Enable"}),c.jsx("button",{className:"action-btn delete",onClick:()=>Y(H.id),children:"Delete"})]})]},H.id)),u.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"empty-row",children:"No promo codes yet. Create one above!"})})]})]})]})]}):c.jsx("div",{className:"admin-section",children:c.jsxs("div",{className:"admin-card",children:[c.jsxs("h2",{children:[" Users (",p.length,")"]}),c.jsxs("table",{className:"admin-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Email"}),c.jsx("th",{children:"Name"}),c.jsx("th",{children:"Plan"}),c.jsx("th",{children:"Day Passes"}),c.jsx("th",{children:"Admin"}),c.jsx("th",{children:"Joined"}),c.jsx("th",{children:"Actions"})]})}),c.jsxs("tbody",{children:[p.map(H=>c.jsxs("tr",{children:[c.jsx("td",{children:H.email}),c.jsx("td",{children:H.display_name||"-"}),c.jsx("td",{children:c.jsx("span",{className:`plan-badge ${H.subscription_tier}`,children:H.subscription_tier})}),c.jsx("td",{children:H.day_pass_balance}),c.jsx("td",{children:c.jsx("span",{className:`status-badge ${H.is_admin?"active":"inactive"}`,children:H.is_admin?" Yes":"No"})}),c.jsx("td",{children:new Date(H.created_at).toLocaleDateString()}),c.jsxs("td",{children:[c.jsx("button",{className:"action-btn",onClick:()=>Q(H.id),children:"Grant Pass"}),c.jsx("button",{className:"action-btn",onClick:()=>te(H.id,H.is_admin),children:H.is_admin?"Remove Admin":"Make Admin"})]})]},H.id)),p.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"empty-row",children:"No users yet"})})]})]})]})})]}):c.jsx("div",{className:"admin-container",children:c.jsxs("div",{className:"admin-access-denied",children:[c.jsx("h2",{children:" Access Denied"}),c.jsx("p",{children:"You don't have admin privileges."}),c.jsxs("p",{className:"admin-email",children:["Logged in as: ",n.email]}),c.jsx(ft,{to:"/",className:"admin-login-btn",children:"Back to Morgus"})]})}):c.jsx("div",{className:"admin-container",children:c.jsxs("div",{className:"admin-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Loading profile..."})]})}):c.jsx("div",{className:"admin-container",children:c.jsxs("div",{className:"admin-access-denied",children:[c.jsx("h2",{children:" Login Required"}),c.jsx("p",{children:"Please log in to access the admin panel."}),c.jsx(ft,{to:"/login?redirect=/admin",className:"admin-login-btn",children:"Log In"})]})})}function jS(){return c.jsx("div",{className:"legal-container",children:c.jsxs("div",{className:"legal-card",children:[c.jsx(ft,{to:"/",className:"legal-back",children:" Back to Morgus"}),c.jsxs("div",{className:"legal-header",children:[c.jsxs("div",{className:"legal-logo",children:[c.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),c.jsx("span",{className:"logo-text",children:"Morgus"})]}),c.jsx("h1",{children:"Terms of Service"}),c.jsx("p",{className:"legal-updated",children:"Last updated: December 20, 2025"})]}),c.jsxs("div",{className:"legal-content",children:[c.jsxs("section",{children:[c.jsx("h2",{children:"1. Acceptance of Terms"}),c.jsx("p",{children:'By accessing or using Morgus ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.'})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"2. Description of Service"}),c.jsx("p",{children:"Morgus is an AI-powered assistant platform that provides various capabilities including but not limited to:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Natural language processing and conversation"}),c.jsx("li",{children:"Document generation and analysis"}),c.jsx("li",{children:"Image generation and processing"}),c.jsx("li",{children:"Web research and data retrieval"}),c.jsx("li",{children:"Code generation and technical assistance"})]})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"3. User Accounts"}),c.jsx("p",{children:"To access certain features of the Service, you must create an account. You agree to:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Provide accurate and complete registration information"}),c.jsx("li",{children:"Maintain the security of your account credentials"}),c.jsx("li",{children:"Notify us immediately of any unauthorized access"}),c.jsx("li",{children:"Accept responsibility for all activities under your account"})]})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"4. Subscription Plans"}),c.jsx("p",{children:"Morgus offers various subscription tiers including free and paid plans. Paid subscriptions are billed according to the plan selected. You may cancel your subscription at any time, but refunds are provided only as required by applicable law."}),c.jsx("h3",{children:"4.1 Day Passes"}),c.jsx("p",{children:"Day passes provide temporary access to premium features. Day passes expire 24 hours after activation and are non-refundable."}),c.jsx("h3",{children:"4.2 Promo Codes"}),c.jsx("p",{children:"Promotional codes may be offered from time to time. These codes are subject to specific terms and expiration dates as indicated at the time of issuance."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"5. Acceptable Use"}),c.jsx("p",{children:"You agree NOT to use the Service to:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Violate any applicable laws or regulations"}),c.jsx("li",{children:"Generate illegal, harmful, or offensive content"}),c.jsx("li",{children:"Infringe on intellectual property rights"}),c.jsx("li",{children:"Attempt to gain unauthorized access to systems"}),c.jsx("li",{children:"Distribute malware or engage in hacking activities"}),c.jsx("li",{children:"Harass, abuse, or harm others"}),c.jsx("li",{children:"Generate spam or unsolicited communications"}),c.jsx("li",{children:"Impersonate others or misrepresent your identity"})]})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"6. AI-Generated Content"}),c.jsx("p",{children:'Content generated by Morgus is provided "as is" without warranties of accuracy or completeness. You acknowledge that:'}),c.jsxs("ul",{children:[c.jsx("li",{children:"AI-generated content may contain errors or inaccuracies"}),c.jsx("li",{children:"You are responsible for reviewing and verifying all generated content"}),c.jsx("li",{children:"Generated content should not be relied upon for medical, legal, or financial advice"}),c.jsx("li",{children:"You retain ownership of content you create using the Service"})]})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"7. Data and Privacy"}),c.jsxs("p",{children:["Your use of the Service is also governed by our ",c.jsx(ft,{to:"/privacy",children:"Privacy Policy"}),". By using the Service, you consent to the collection and use of information as described therein."]}),c.jsx("h3",{children:"7.1 Training Data"}),c.jsx("p",{children:`By default, your conversations may be used to improve Morgus. You can opt out of this at any time using the "Don't Train on Me" toggle in Settings.`})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"8. Intellectual Property"}),c.jsx("p",{children:"The Service, including its design, features, and content (excluding user-generated content), is owned by Morgus and protected by intellectual property laws. You may not copy, modify, or distribute any part of the Service without permission."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"9. Limitation of Liability"}),c.jsx("p",{children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, MORGUS SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, INCLUDING LOSS OF PROFITS, DATA, OR GOODWILL, ARISING FROM YOUR USE OF THE SERVICE."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"10. Disclaimer of Warranties"}),c.jsx("p",{children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.'})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"11. Modifications to Terms"}),c.jsx("p",{children:"We reserve the right to modify these Terms at any time. We will notify users of significant changes via email or through the Service. Continued use after changes constitutes acceptance of the new Terms."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"12. Termination"}),c.jsx("p",{children:"We may suspend or terminate your access to the Service at any time for violation of these Terms or for any other reason at our discretion. Upon termination, your right to use the Service will immediately cease."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"13. Governing Law"}),c.jsx("p",{children:"These Terms shall be governed by and construed in accordance with the laws of the State of California, United States, without regard to its conflict of law provisions."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"14. Contact Us"}),c.jsx("p",{children:"If you have any questions about these Terms, please contact us at:"}),c.jsxs("p",{className:"contact-info",children:[c.jsx("strong",{children:"Email:"})," legal@morgus.ai",c.jsx("br",{}),c.jsx("strong",{children:"Website:"})," https://morgus.ai"]})]})]}),c.jsxs("div",{className:"legal-footer",children:[c.jsx(ft,{to:"/privacy",children:"Privacy Policy"}),c.jsx("span",{children:""}),c.jsx(ft,{to:"/",children:"Return to Morgus"})]})]})})}function ES(){return c.jsx("div",{className:"legal-container",children:c.jsxs("div",{className:"legal-card",children:[c.jsx(ft,{to:"/",className:"legal-back",children:" Back to Morgus"}),c.jsxs("div",{className:"legal-header",children:[c.jsxs("div",{className:"legal-logo",children:[c.jsx("img",{src:"/bill-avatar-large.png",alt:"Bill",className:"logo-icon-img"}),c.jsx("span",{className:"logo-text",children:"Morgus"})]}),c.jsx("h1",{children:"Privacy Policy"}),c.jsx("p",{className:"legal-updated",children:"Last updated: December 20, 2025"})]}),c.jsxs("div",{className:"legal-content",children:[c.jsxs("section",{children:[c.jsx("h2",{children:"1. Introduction"}),c.jsx("p",{children:"At Morgus, we take your privacy seriously. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our AI assistant service."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"2. Information We Collect"}),c.jsx("h3",{children:"2.1 Information You Provide"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Account Information:"})," Email address, display name, and password when you create an account"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Conversation Data:"})," Messages, prompts, and content you share with Morgus"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Uploaded Files:"})," Documents, images, and other files you upload for processing"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Payment Information:"})," Billing details for paid subscriptions (processed by our payment provider)"]})]}),c.jsx("h3",{children:"2.2 Information Collected Automatically"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Usage Data:"})," Features used, session duration, and interaction patterns"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Device Information:"})," Browser type, operating system, and device identifiers"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Log Data:"})," IP address, access times, and referring URLs"]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"3. How We Use Your Information"}),c.jsx("p",{children:"We use the collected information to:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Provide, maintain, and improve the Service"}),c.jsx("li",{children:"Process your requests and deliver AI-generated responses"}),c.jsx("li",{children:"Personalize your experience"}),c.jsx("li",{children:"Process payments and manage subscriptions"}),c.jsx("li",{children:"Send important notices and updates"}),c.jsx("li",{children:"Detect and prevent fraud or abuse"}),c.jsx("li",{children:"Comply with legal obligations"})]})]}),c.jsxs("section",{className:"highlight-section",children:[c.jsx("h2",{children:`4. Training Data & The "Don't Train on Me" Option`}),c.jsxs("p",{children:[c.jsx("strong",{children:" Your Choice Matters:"})," By default, your conversations may be used to improve Morgus's capabilities for all users. However, you have full control over this."]}),c.jsx("h3",{children:"4.1 Default Behavior (Training Enabled)"}),c.jsx("p",{children:"When training is enabled, we may use your conversations to:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Improve AI response quality and accuracy"}),c.jsx("li",{children:"Develop new features and capabilities"}),c.jsx("li",{children:"Train and fine-tune our models"})]}),c.jsx("h3",{children:`4.2 "Don't Train on Me" Mode`}),c.jsx("p",{children:`When you enable the "Don't Train on Me" toggle:`}),c.jsxs("ul",{children:[c.jsx("li",{children:"Your conversations will NOT be used for model training"}),c.jsx("li",{children:"Your data will only be used to provide the Service"}),c.jsx("li",{children:"Conversations may still be temporarily stored for service delivery"})]}),c.jsx("h3",{children:"4.3 What We NEVER Use for Training"}),c.jsx("p",{children:"Regardless of your settings, we NEVER store or use:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Passwords or authentication credentials"}),c.jsx("li",{children:"Credit card numbers or payment details"}),c.jsx("li",{children:"Social Security numbers or government IDs"}),c.jsx("li",{children:"Health information (PHI/HIPAA data)"}),c.jsx("li",{children:"Content explicitly marked as confidential"})]})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"5. Data Sharing and Disclosure"}),c.jsx("p",{children:"We may share your information with:"}),c.jsx("h3",{children:"5.1 Service Providers"}),c.jsx("p",{children:"Third-party vendors who assist in operating our Service, including cloud hosting providers, payment processors, and analytics services."}),c.jsx("h3",{children:"5.2 AI Model Providers"}),c.jsx("p",{children:"We use third-party AI models (such as OpenAI, Google, and Anthropic) to process your requests. These providers have their own privacy policies and data handling practices."}),c.jsx("h3",{children:"5.3 Legal Requirements"}),c.jsx("p",{children:"We may disclose information if required by law, court order, or government request, or to protect our rights, property, or safety."}),c.jsx("h3",{children:"5.4 Business Transfers"}),c.jsx("p",{children:"In the event of a merger, acquisition, or sale of assets, your information may be transferred as part of that transaction."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"6. Data Security"}),c.jsx("p",{children:"We implement appropriate technical and organizational measures to protect your information, including:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Encryption of data in transit and at rest"}),c.jsx("li",{children:"Regular security assessments and audits"}),c.jsx("li",{children:"Access controls and authentication requirements"}),c.jsx("li",{children:"Employee training on data protection"})]}),c.jsx("p",{children:"However, no method of transmission over the Internet is 100% secure. We cannot guarantee absolute security of your data."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"7. Data Retention"}),c.jsx("p",{children:"We retain your information for as long as:"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Your account is active"}),c.jsx("li",{children:"Needed to provide you with the Service"}),c.jsx("li",{children:"Required by law or for legitimate business purposes"})]}),c.jsx("p",{children:"You can request deletion of your account and associated data at any time by contacting us."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"8. Your Rights"}),c.jsx("p",{children:"Depending on your location, you may have the right to:"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Access:"})," Request a copy of your personal data"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Correction:"})," Request correction of inaccurate data"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Deletion:"})," Request deletion of your data"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Portability:"})," Receive your data in a portable format"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Objection:"})," Object to certain processing activities"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Opt-out:"}),` Opt out of training data usage via the "Don't Train on Me" toggle`]})]})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"9. Children's Privacy"}),c.jsx("p",{children:"The Service is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If you believe we have collected such information, please contact us immediately."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"10. International Data Transfers"}),c.jsx("p",{children:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place for such transfers in compliance with applicable data protection laws."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"11. Cookies and Tracking"}),c.jsx("p",{children:"We use cookies and similar technologies to maintain your session, remember your preferences, and analyze usage patterns. You can control cookie settings through your browser."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"12. Changes to This Policy"}),c.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of significant changes via email or through the Service. Your continued use after changes constitutes acceptance."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"13. Contact Us"}),c.jsx("p",{children:"If you have questions about this Privacy Policy or our data practices, please contact us:"}),c.jsxs("p",{className:"contact-info",children:[c.jsx("strong",{children:"Email:"})," privacy@morgus.ai",c.jsx("br",{}),c.jsx("strong",{children:"Website:"})," https://morgus.ai"]})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"14. California Privacy Rights (CCPA)"}),c.jsx("p",{children:"California residents have additional rights under the California Consumer Privacy Act (CCPA), including the right to know what personal information is collected and the right to opt out of the sale of personal information. We do not sell your personal information."})]}),c.jsxs("section",{children:[c.jsx("h2",{children:"15. European Privacy Rights (GDPR)"}),c.jsx("p",{children:"If you are in the European Economic Area (EEA), you have rights under the General Data Protection Regulation (GDPR), including the right to lodge a complaint with a supervisory authority."})]})]}),c.jsxs("div",{className:"legal-footer",children:[c.jsx(ft,{to:"/terms",children:"Terms of Service"}),c.jsx("span",{children:""}),c.jsx(ft,{to:"/",children:"Return to Morgus"})]})]})})}function TS(){const[i,n]=E.useState("open"),[s,l]=E.useState(!1),[o,u]=E.useState([]),h=Zn();E.useEffect(()=>{const m=Array.from({length:100},(g,y)=>({id:y,x:Math.random()*100,y:Math.random()*100,size:Math.random()*3+1,delay:Math.random()*3}));u(m)},[]);const p=()=>{n("closing"),setTimeout(()=>{n("opening"),l(!0)},1500),setTimeout(()=>{h("/login")},3e3)};return c.jsxs("div",{className:"landing-container",children:[c.jsx("div",{className:"starfield",children:o.map(m=>c.jsx("div",{className:"star",style:{left:`${m.x}%`,top:`${m.y}%`,width:`${m.size}px`,height:`${m.size}px`,animationDelay:`${m.delay}s`}},m.id))}),c.jsx("div",{className:"particles",children:Array.from({length:20}).map((m,g)=>c.jsx("div",{className:"particle",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${10+Math.random()*10}s`}},g))}),c.jsxs("div",{className:`doors-container ${i}`,children:[c.jsx("div",{className:"door door-top",children:c.jsxs("div",{className:"door-panel",children:[c.jsx("div",{className:"door-rivets",children:Array.from({length:12}).map((m,g)=>c.jsx("div",{className:"rivet"},g))}),c.jsx("div",{className:"door-stripe"}),c.jsx("div",{className:"door-stripe"}),c.jsx("div",{className:"door-glow"})]})}),c.jsx("div",{className:"door door-bottom",children:c.jsxs("div",{className:"door-panel",children:[c.jsx("div",{className:"door-rivets",children:Array.from({length:12}).map((m,g)=>c.jsx("div",{className:"rivet"},g))}),c.jsx("div",{className:"door-stripe"}),c.jsx("div",{className:"door-stripe"}),c.jsx("div",{className:"door-glow"})]})}),c.jsx("div",{className:"door-seam"})]}),c.jsxs("div",{className:`landing-content ${i==="closing"||i==="closed"||i==="opening"?"fading":""}`,children:[c.jsxs("div",{className:"bill-container",children:[c.jsx("div",{className:"bill-glow"}),c.jsx("img",{src:"/bill-full.jpg",alt:"Bill the Marketing Hog",className:"bill-image"}),c.jsx("div",{className:"bill-reflection"})]}),c.jsxs("div",{className:"landing-text",children:[c.jsxs("h1",{className:"landing-title",children:[c.jsx("span",{className:"title-morgus",children:"MORGUS"}),c.jsx("span",{className:"title-ai",children:".AI"})]}),c.jsx("p",{className:"landing-tagline",children:"Your Autonomous AI Agent"}),c.jsx("p",{className:"landing-subtitle",children:"Meet Bill and the Morgys  your team of specialized AI agents ready to tackle any challenge"}),c.jsxs("button",{className:"enter-button",onClick:p,children:[c.jsx("span",{className:"button-text",children:"Enter the Hog House"}),c.jsx("span",{className:"button-icon",children:""}),c.jsx("div",{className:"button-glow"})]})]})]}),s&&c.jsx("div",{className:"portal-light"}),c.jsxs("div",{className:"neon-frame",children:[c.jsx("div",{className:"neon-corner top-left"}),c.jsx("div",{className:"neon-corner top-right"}),c.jsx("div",{className:"neon-corner bottom-left"}),c.jsx("div",{className:"neon-corner bottom-right"})]})]})}function NS(){const i=Zn(),{user:n}=bn(),[s,l]=E.useState([]),[o,u]=E.useState(!0),[h,p]=E.useState(!1),[m,g]=E.useState(0),[y,w]=E.useState("documents"),[S,x]=E.useState(""),[_,A]=E.useState(""),[T,C]=E.useState(""),[D,L]=E.useState(""),[J,K]=E.useState(null),[Y,Q]=E.useState(null),te=E.useRef(null);E.useEffect(()=>{n&&H()},[n]);const H=async()=>{if(n){u(!0),K(null);try{const{data:X,error:he}=await ge.from("knowledge_documents").select("*").eq("user_id",n.id).order("created_at",{ascending:!1});if(he)throw he;l(X||[])}catch(X){console.error("Error loading documents:",X),K("Failed to load documents")}finally{u(!1)}}},le=async X=>{const he=X.target.files;if(!(!he||he.length===0||!n)){p(!0),g(0),K(null),Q(null);try{for(let j=0;j<he.length;j++){const z=he[j];g(Math.round((j+.5)/he.length*100));const{data:W,error:ee}=await ge.from("knowledge_documents").insert({user_id:n.id,title:z.name,source_type:"upload",file_type:z.type||Ie(z.name),file_size:z.size,status:"pending"}).select().single();if(ee)throw ee;const me=`${n.id}/${W.id}/${z.name}`,{error:ye}=await ge.storage.from("knowledge-files").upload(me,z);if(ye)throw await ge.from("knowledge_documents").update({status:"failed",error_message:ye.message}).eq("id",W.id),ye;await ge.from("knowledge_documents").update({source_url:me,status:"processing"}).eq("id",W.id),g(Math.round((j+1)/he.length*100))}Q(`Successfully uploaded ${he.length} file(s)`),H(),w("documents")}catch(j){console.error("Error uploading files:",j),K("Failed to upload files. Please try again.")}finally{p(!1),g(0),te.current&&(te.current.value="")}}},ve=async()=>{if(!(!S.trim()||!n)){p(!0),K(null),Q(null);try{const{error:X}=await ge.from("knowledge_documents").insert({user_id:n.id,title:S,source_type:"url",source_url:S,status:"pending"});if(X)throw X;Q("URL added successfully. Processing will begin shortly."),x(""),H(),w("documents")}catch(X){console.error("Error adding URL:",X),K("Failed to add URL. Please try again.")}finally{p(!1)}}},Te=async()=>{if(!(!_.trim()||!T.trim()||!n)){p(!0),K(null),Q(null);try{const{error:X}=await ge.from("knowledge_documents").insert({user_id:n.id,title:T,source_type:"text",content:_,status:"pending"});if(X)throw X;Q("Text added successfully. Processing will begin shortly."),A(""),C(""),H(),w("documents")}catch(X){console.error("Error adding text:",X),K("Failed to add text. Please try again.")}finally{p(!1)}}},st=async X=>{if(confirm("Are you sure you want to delete this document?"))try{await ge.from("knowledge_chunks").delete().eq("document_id",X);const{error:he}=await ge.from("knowledge_documents").delete().eq("id",X);if(he)throw he;Q("Document deleted successfully"),H()}catch(he){console.error("Error deleting document:",he),K("Failed to delete document")}},Ie=X=>X.split(".").pop()?.toLowerCase()||"unknown",Ke=X=>X?X<1024?`${X} B`:X<1024*1024?`${(X/1024).toFixed(1)} KB`:`${(X/(1024*1024)).toFixed(1)} MB`:"Unknown",k=X=>{switch(X){case"pending":return"";case"processing":return"";case"completed":return"";case"failed":return"";default:return""}},G=X=>{switch(X){case"upload":return"";case"url":return"";case"text":return"";default:return""}},F=s.filter(X=>X.title.toLowerCase().includes(D.toLowerCase()));return c.jsxs("div",{className:"knowledge-base-page",children:[c.jsxs("div",{className:"kb-page-header",children:[c.jsx("button",{className:"back-button",onClick:()=>i("/"),children:" Back to Morgus"}),c.jsxs("div",{className:"kb-page-title",children:[c.jsx("span",{className:"kb-page-icon",children:""}),c.jsx("h1",{children:"Knowledge Base"})]}),c.jsx("p",{className:"kb-page-subtitle",children:"Build your personal knowledge base for Deep Research Mode"})]}),c.jsxs("div",{className:"kb-page-content",children:[c.jsxs("div",{className:"kb-tabs",children:[c.jsxs("button",{className:`kb-tab ${y==="documents"?"active":""}`,onClick:()=>w("documents"),children:[" My Documents (",s.length,")"]}),c.jsx("button",{className:`kb-tab ${y==="add"?"active":""}`,onClick:()=>w("add"),children:" Add Knowledge"})]}),J&&c.jsxs("div",{className:"kb-alert error",children:[c.jsx("span",{children:""})," ",J,c.jsx("button",{onClick:()=>K(null),children:""})]}),Y&&c.jsxs("div",{className:"kb-alert success",children:[c.jsx("span",{children:""})," ",Y,c.jsx("button",{onClick:()=>Q(null),children:""})]}),y==="documents"&&c.jsxs("div",{className:"kb-documents",children:[c.jsx("div",{className:"kb-search",children:c.jsx("input",{type:"text",placeholder:" Search documents...",value:D,onChange:X=>L(X.target.value)})}),o?c.jsxs("div",{className:"kb-loading",children:[c.jsx("div",{className:"kb-spinner"}),c.jsx("p",{children:"Loading documents..."})]}):F.length===0?c.jsxs("div",{className:"kb-empty",children:[c.jsx("span",{className:"empty-icon",children:""}),c.jsx("h3",{children:"No documents yet"}),c.jsx("p",{children:"Add documents, URLs, or text to build your knowledge base for Deep Research."}),c.jsx("button",{onClick:()=>w("add"),children:" Add Your First Document"})]}):c.jsx("div",{className:"kb-document-grid",children:F.map(X=>c.jsxs("div",{className:`kb-document-card ${X.status}`,children:[c.jsx("div",{className:"doc-icon",children:G(X.source_type)}),c.jsxs("div",{className:"doc-info",children:[c.jsx("h4",{children:X.title}),c.jsxs("div",{className:"doc-meta",children:[c.jsx("span",{className:"doc-type",children:X.source_type}),X.file_size&&c.jsx("span",{className:"doc-size",children:Ke(X.file_size)}),c.jsxs("span",{className:"doc-chunks",children:[X.chunk_count||0," chunks"]})]}),c.jsxs("div",{className:`doc-status ${X.status}`,children:[k(X.status)," ",X.status]}),X.error_message&&c.jsx("p",{className:"doc-error",children:X.error_message})]}),c.jsx("button",{className:"doc-delete",onClick:()=>st(X.id),title:"Delete document",children:""})]},X.id))})]}),y==="add"&&c.jsx("div",{className:"kb-add",children:c.jsxs("div",{className:"add-cards",children:[c.jsxs("div",{className:"add-card",children:[c.jsx("div",{className:"add-card-icon",children:""}),c.jsx("h3",{children:"Upload Files"}),c.jsx("p",{children:"Upload PDF, Word, TXT, MD, or CSV files"}),c.jsx("input",{ref:te,type:"file",multiple:!0,accept:".pdf,.doc,.docx,.txt,.md,.csv,.json",onChange:le,style:{display:"none"}}),c.jsx("button",{className:"upload-button",onClick:()=>te.current?.click(),disabled:h,children:h?c.jsxs(c.Fragment,{children:["Uploading... ",m,"%"]}):c.jsx(c.Fragment,{children:" Choose Files"})}),h&&c.jsx("div",{className:"upload-progress",children:c.jsx("div",{className:"progress-fill",style:{width:`${m}%`}})})]}),c.jsxs("div",{className:"add-card",children:[c.jsx("div",{className:"add-card-icon",children:""}),c.jsx("h3",{children:"Add URL"}),c.jsx("p",{children:"Add a webpage or article URL"}),c.jsxs("div",{className:"url-input-group",children:[c.jsx("input",{type:"url",placeholder:"https://example.com/article",value:S,onChange:X=>x(X.target.value)}),c.jsx("button",{onClick:ve,disabled:!S.trim()||h,children:"Add"})]})]}),c.jsxs("div",{className:"add-card full-width",children:[c.jsx("div",{className:"add-card-icon",children:""}),c.jsx("h3",{children:"Add Text"}),c.jsx("p",{children:"Paste text content directly"}),c.jsx("input",{type:"text",placeholder:"Title for this content",value:T,onChange:X=>C(X.target.value),className:"text-title-input"}),c.jsx("textarea",{placeholder:"Paste your text content here...",value:_,onChange:X=>A(X.target.value),rows:6}),c.jsx("button",{onClick:Te,disabled:!_.trim()||!T.trim()||h,className:"add-text-button",children:" Add Text"})]})]})})]}),c.jsxs("div",{className:"kb-page-footer",children:[c.jsxs("div",{className:"kb-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-value",children:s.length}),c.jsx("span",{className:"stat-label",children:"Documents"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-value",children:s.reduce((X,he)=>X+(he.chunk_count||0),0)}),c.jsx("span",{className:"stat-label",children:"Total Chunks"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-value",children:s.filter(X=>X.status==="completed").length}),c.jsx("span",{className:"stat-label",children:"Ready for Search"})]})]}),c.jsx("p",{className:"kb-hint",children:" Documents are automatically chunked and embedded for semantic search during Deep Research."})]})]})}function Cd(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var es=Cd();function Pv(i){es=i}var mr={exec:()=>null};function Oe(i,n=""){let s=typeof i=="string"?i:i.source,l={replace:(o,u)=>{let h=typeof u=="string"?u:u.source;return h=h.replace(At.caret,"$1"),s=s.replace(o,h),l},getRegex:()=>new RegExp(s,n)};return l}var kS=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),At={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:i=>new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}#`),htmlBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}<(?:[a-z].*>|!--)`,"i")},AS=/^(?:[ \t]*(?:\n|$))+/,RS=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,CS=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,_r=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,OS=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Od=/(?:[*+-]|\d{1,9}[.)])/,Hv=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Gv=Oe(Hv).replace(/bull/g,Od).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),DS=Oe(Hv).replace(/bull/g,Od).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Dd=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,MS=/^[^\n]+/,Md=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,US=Oe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Md).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),zS=Oe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Od).getRegex(),fo="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ud=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,LS=Oe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ud).replace("tag",fo).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Iv=Oe(Dd).replace("hr",_r).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fo).getRegex(),BS=Oe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Iv).getRegex(),zd={blockquote:BS,code:RS,def:US,fences:CS,heading:OS,hr:_r,html:LS,lheading:Gv,list:zS,newline:AS,paragraph:Iv,table:mr,text:MS},_g=Oe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",_r).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fo).getRegex(),$S={...zd,lheading:DS,table:_g,paragraph:Oe(Dd).replace("hr",_r).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",_g).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fo).getRegex()},qS={...zd,html:Oe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ud).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:mr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Oe(Dd).replace("hr",_r).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Gv).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},PS=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,HS=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Vv=/^( {2,}|\\)\n(?!\s*$)/,GS=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,mo=/[\p{P}\p{S}]/u,Ld=/[\s\p{P}\p{S}]/u,Yv=/[^\s\p{P}\p{S}]/u,IS=Oe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ld).getRegex(),Kv=/(?!~)[\p{P}\p{S}]/u,VS=/(?!~)[\s\p{P}\p{S}]/u,YS=/(?:[^\s\p{P}\p{S}]|~)/u,KS=Oe(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",kS?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Qv=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,QS=Oe(Qv,"u").replace(/punct/g,mo).getRegex(),JS=Oe(Qv,"u").replace(/punct/g,Kv).getRegex(),Jv="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",XS=Oe(Jv,"gu").replace(/notPunctSpace/g,Yv).replace(/punctSpace/g,Ld).replace(/punct/g,mo).getRegex(),ZS=Oe(Jv,"gu").replace(/notPunctSpace/g,YS).replace(/punctSpace/g,VS).replace(/punct/g,Kv).getRegex(),WS=Oe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Yv).replace(/punctSpace/g,Ld).replace(/punct/g,mo).getRegex(),FS=Oe(/\\(punct)/,"gu").replace(/punct/g,mo).getRegex(),ej=Oe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),tj=Oe(Ud).replace("(?:-->|$)","-->").getRegex(),nj=Oe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",tj).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),so=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,aj=Oe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",so).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Xv=Oe(/^!?\[(label)\]\[(ref)\]/).replace("label",so).replace("ref",Md).getRegex(),Zv=Oe(/^!?\[(ref)\](?:\[\])?/).replace("ref",Md).getRegex(),sj=Oe("reflink|nolink(?!\\()","g").replace("reflink",Xv).replace("nolink",Zv).getRegex(),Sg=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Bd={_backpedal:mr,anyPunctuation:FS,autolink:ej,blockSkip:KS,br:Vv,code:HS,del:mr,emStrongLDelim:QS,emStrongRDelimAst:XS,emStrongRDelimUnd:WS,escape:PS,link:aj,nolink:Zv,punctuation:IS,reflink:Xv,reflinkSearch:sj,tag:nj,text:GS,url:mr},ij={...Bd,link:Oe(/^!?\[(label)\]\((.*?)\)/).replace("label",so).getRegex(),reflink:Oe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",so).getRegex()},ud={...Bd,emStrongRDelimAst:ZS,emStrongLDelim:JS,url:Oe(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Sg).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Oe(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Sg).getRegex()},rj={...ud,br:Oe(Vv).replace("{2,}","*").getRegex(),text:Oe(ud.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Jl={normal:zd,gfm:$S,pedantic:qS},lr={normal:Bd,gfm:ud,breaks:rj,pedantic:ij},lj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jg=i=>lj[i];function Yn(i,n){if(n){if(At.escapeTest.test(i))return i.replace(At.escapeReplace,jg)}else if(At.escapeTestNoEncode.test(i))return i.replace(At.escapeReplaceNoEncode,jg);return i}function Eg(i){try{i=encodeURI(i).replace(At.percentDecode,"%")}catch{return null}return i}function Tg(i,n){let s=i.replace(At.findPipe,(u,h,p)=>{let m=!1,g=h;for(;--g>=0&&p[g]==="\\";)m=!m;return m?"|":" |"}),l=s.split(At.splitPipe),o=0;if(l[0].trim()||l.shift(),l.length>0&&!l.at(-1)?.trim()&&l.pop(),n)if(l.length>n)l.splice(n);else for(;l.length<n;)l.push("");for(;o<l.length;o++)l[o]=l[o].trim().replace(At.slashPipe,"|");return l}function or(i,n,s){let l=i.length;if(l===0)return"";let o=0;for(;o<l&&i.charAt(l-o-1)===n;)o++;return i.slice(0,l-o)}function oj(i,n){if(i.indexOf(n[1])===-1)return-1;let s=0;for(let l=0;l<i.length;l++)if(i[l]==="\\")l++;else if(i[l]===n[0])s++;else if(i[l]===n[1]&&(s--,s<0))return l;return s>0?-2:-1}function Ng(i,n,s,l,o){let u=n.href,h=n.title||null,p=i[1].replace(o.other.outputLinkReplace,"$1");l.state.inLink=!0;let m={type:i[0].charAt(0)==="!"?"image":"link",raw:s,href:u,title:h,text:p,tokens:l.inlineTokens(p)};return l.state.inLink=!1,m}function cj(i,n,s){let l=i.match(s.other.indentCodeCompensation);if(l===null)return n;let o=l[1];return n.split(`
`).map(u=>{let h=u.match(s.other.beginningSpace);if(h===null)return u;let[p]=h;return p.length>=o.length?u.slice(o.length):u}).join(`
`)}var io=class{options;rules;lexer;constructor(i){this.options=i||es}space(i){let n=this.rules.block.newline.exec(i);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(i){let n=this.rules.block.code.exec(i);if(n){let s=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?s:or(s,`
`)}}}fences(i){let n=this.rules.block.fences.exec(i);if(n){let s=n[0],l=cj(s,n[3]||"",this.rules);return{type:"code",raw:s,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:l}}}heading(i){let n=this.rules.block.heading.exec(i);if(n){let s=n[2].trim();if(this.rules.other.endingHash.test(s)){let l=or(s,"#");(this.options.pedantic||!l||this.rules.other.endingSpaceChar.test(l))&&(s=l.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(i){let n=this.rules.block.hr.exec(i);if(n)return{type:"hr",raw:or(n[0],`
`)}}blockquote(i){let n=this.rules.block.blockquote.exec(i);if(n){let s=or(n[0],`
`).split(`
`),l="",o="",u=[];for(;s.length>0;){let h=!1,p=[],m;for(m=0;m<s.length;m++)if(this.rules.other.blockquoteStart.test(s[m]))p.push(s[m]),h=!0;else if(!h)p.push(s[m]);else break;s=s.slice(m);let g=p.join(`
`),y=g.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");l=l?`${l}
${g}`:g,o=o?`${o}
${y}`:y;let w=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(y,u,!0),this.lexer.state.top=w,s.length===0)break;let S=u.at(-1);if(S?.type==="code")break;if(S?.type==="blockquote"){let x=S,_=x.raw+`
`+s.join(`
`),A=this.blockquote(_);u[u.length-1]=A,l=l.substring(0,l.length-x.raw.length)+A.raw,o=o.substring(0,o.length-x.text.length)+A.text;break}else if(S?.type==="list"){let x=S,_=x.raw+`
`+s.join(`
`),A=this.list(_);u[u.length-1]=A,l=l.substring(0,l.length-S.raw.length)+A.raw,o=o.substring(0,o.length-x.raw.length)+A.raw,s=_.substring(u.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:l,tokens:u,text:o}}}list(i){let n=this.rules.block.list.exec(i);if(n){let s=n[1].trim(),l=s.length>1,o={type:"list",raw:"",ordered:l,start:l?+s.slice(0,-1):"",loose:!1,items:[]};s=l?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=l?s:"[*+-]");let u=this.rules.other.listItemRegex(s),h=!1;for(;i;){let m=!1,g="",y="";if(!(n=u.exec(i))||this.rules.block.hr.test(i))break;g=n[0],i=i.substring(g.length);let w=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,A=>" ".repeat(3*A.length)),S=i.split(`
`,1)[0],x=!w.trim(),_=0;if(this.options.pedantic?(_=2,y=w.trimStart()):x?_=n[1].length+1:(_=n[2].search(this.rules.other.nonSpaceChar),_=_>4?1:_,y=w.slice(_),_+=n[1].length),x&&this.rules.other.blankLine.test(S)&&(g+=S+`
`,i=i.substring(S.length+1),m=!0),!m){let A=this.rules.other.nextBulletRegex(_),T=this.rules.other.hrRegex(_),C=this.rules.other.fencesBeginRegex(_),D=this.rules.other.headingBeginRegex(_),L=this.rules.other.htmlBeginRegex(_);for(;i;){let J=i.split(`
`,1)[0],K;if(S=J,this.options.pedantic?(S=S.replace(this.rules.other.listReplaceNesting,"  "),K=S):K=S.replace(this.rules.other.tabCharGlobal,"    "),C.test(S)||D.test(S)||L.test(S)||A.test(S)||T.test(S))break;if(K.search(this.rules.other.nonSpaceChar)>=_||!S.trim())y+=`
`+K.slice(_);else{if(x||w.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||C.test(w)||D.test(w)||T.test(w))break;y+=`
`+S}!x&&!S.trim()&&(x=!0),g+=J+`
`,i=i.substring(J.length+1),w=K.slice(_)}}o.loose||(h?o.loose=!0:this.rules.other.doubleBlankLine.test(g)&&(h=!0)),o.items.push({type:"list_item",raw:g,task:!!this.options.gfm&&this.rules.other.listIsTask.test(y),loose:!1,text:y,tokens:[]}),o.raw+=g}let p=o.items.at(-1);if(p)p.raw=p.raw.trimEnd(),p.text=p.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let m of o.items){if(this.lexer.state.top=!1,m.tokens=this.lexer.blockTokens(m.text,[]),m.task){if(m.text=m.text.replace(this.rules.other.listReplaceTask,""),m.tokens[0]?.type==="text"||m.tokens[0]?.type==="paragraph"){m.tokens[0].raw=m.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),m.tokens[0].text=m.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let y=this.lexer.inlineQueue.length-1;y>=0;y--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[y].src)){this.lexer.inlineQueue[y].src=this.lexer.inlineQueue[y].src.replace(this.rules.other.listReplaceTask,"");break}}let g=this.rules.other.listTaskCheckbox.exec(m.raw);if(g){let y={type:"checkbox",raw:g[0]+" ",checked:g[0]!=="[ ]"};m.checked=y.checked,o.loose?m.tokens[0]&&["paragraph","text"].includes(m.tokens[0].type)&&"tokens"in m.tokens[0]&&m.tokens[0].tokens?(m.tokens[0].raw=y.raw+m.tokens[0].raw,m.tokens[0].text=y.raw+m.tokens[0].text,m.tokens[0].tokens.unshift(y)):m.tokens.unshift({type:"paragraph",raw:y.raw,text:y.raw,tokens:[y]}):m.tokens.unshift(y)}}if(!o.loose){let g=m.tokens.filter(w=>w.type==="space"),y=g.length>0&&g.some(w=>this.rules.other.anyLine.test(w.raw));o.loose=y}}if(o.loose)for(let m of o.items){m.loose=!0;for(let g of m.tokens)g.type==="text"&&(g.type="paragraph")}return o}}html(i){let n=this.rules.block.html.exec(i);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(i){let n=this.rules.block.def.exec(i);if(n){let s=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),l=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:s,raw:n[0],href:l,title:o}}}table(i){let n=this.rules.block.table.exec(i);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let s=Tg(n[1]),l=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=n[3]?.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],u={type:"table",raw:n[0],header:[],align:[],rows:[]};if(s.length===l.length){for(let h of l)this.rules.other.tableAlignRight.test(h)?u.align.push("right"):this.rules.other.tableAlignCenter.test(h)?u.align.push("center"):this.rules.other.tableAlignLeft.test(h)?u.align.push("left"):u.align.push(null);for(let h=0;h<s.length;h++)u.header.push({text:s[h],tokens:this.lexer.inline(s[h]),header:!0,align:u.align[h]});for(let h of o)u.rows.push(Tg(h,u.header.length).map((p,m)=>({text:p,tokens:this.lexer.inline(p),header:!1,align:u.align[m]})));return u}}lheading(i){let n=this.rules.block.lheading.exec(i);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(i){let n=this.rules.block.paragraph.exec(i);if(n){let s=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:s,tokens:this.lexer.inline(s)}}}text(i){let n=this.rules.block.text.exec(i);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(i){let n=this.rules.inline.escape.exec(i);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(i){let n=this.rules.inline.tag.exec(i);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(i){let n=this.rules.inline.link.exec(i);if(n){let s=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;let u=or(s.slice(0,-1),"\\");if((s.length-u.length)%2===0)return}else{let u=oj(n[2],"()");if(u===-2)return;if(u>-1){let h=(n[0].indexOf("!")===0?5:4)+n[1].length+u;n[2]=n[2].substring(0,u),n[0]=n[0].substring(0,h).trim(),n[3]=""}}let l=n[2],o="";if(this.options.pedantic){let u=this.rules.other.pedanticHrefTitle.exec(l);u&&(l=u[1],o=u[3])}else o=n[3]?n[3].slice(1,-1):"";return l=l.trim(),this.rules.other.startAngleBracket.test(l)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?l=l.slice(1):l=l.slice(1,-1)),Ng(n,{href:l&&l.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(i,n){let s;if((s=this.rules.inline.reflink.exec(i))||(s=this.rules.inline.nolink.exec(i))){let l=(s[2]||s[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=n[l.toLowerCase()];if(!o){let u=s[0].charAt(0);return{type:"text",raw:u,text:u}}return Ng(s,o,s[0],this.lexer,this.rules)}}emStrong(i,n,s=""){let l=this.rules.inline.emStrongLDelim.exec(i);if(!(!l||l[3]&&s.match(this.rules.other.unicodeAlphaNumeric))&&(!(l[1]||l[2])||!s||this.rules.inline.punctuation.exec(s))){let o=[...l[0]].length-1,u,h,p=o,m=0,g=l[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(g.lastIndex=0,n=n.slice(-1*i.length+o);(l=g.exec(n))!=null;){if(u=l[1]||l[2]||l[3]||l[4]||l[5]||l[6],!u)continue;if(h=[...u].length,l[3]||l[4]){p+=h;continue}else if((l[5]||l[6])&&o%3&&!((o+h)%3)){m+=h;continue}if(p-=h,p>0)continue;h=Math.min(h,h+p+m);let y=[...l[0]][0].length,w=i.slice(0,o+l.index+y+h);if(Math.min(o,h)%2){let x=w.slice(1,-1);return{type:"em",raw:w,text:x,tokens:this.lexer.inlineTokens(x)}}let S=w.slice(2,-2);return{type:"strong",raw:w,text:S,tokens:this.lexer.inlineTokens(S)}}}}codespan(i){let n=this.rules.inline.code.exec(i);if(n){let s=n[2].replace(this.rules.other.newLineCharGlobal," "),l=this.rules.other.nonSpaceChar.test(s),o=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return l&&o&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:n[0],text:s}}}br(i){let n=this.rules.inline.br.exec(i);if(n)return{type:"br",raw:n[0]}}del(i){let n=this.rules.inline.del.exec(i);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(i){let n=this.rules.inline.autolink.exec(i);if(n){let s,l;return n[2]==="@"?(s=n[1],l="mailto:"+s):(s=n[1],l=s),{type:"link",raw:n[0],text:s,href:l,tokens:[{type:"text",raw:s,text:s}]}}}url(i){let n;if(n=this.rules.inline.url.exec(i)){let s,l;if(n[2]==="@")s=n[0],l="mailto:"+s;else{let o;do o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(o!==n[0]);s=n[0],n[1]==="www."?l="http://"+n[0]:l=n[0]}return{type:"link",raw:n[0],text:s,href:l,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(i){let n=this.rules.inline.text.exec(i);if(n){let s=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:s}}}},gn=class dd{tokens;options;state;inlineQueue;tokenizer;constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||es,this.options.tokenizer=this.options.tokenizer||new io,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let s={other:At,block:Jl.normal,inline:lr.normal};this.options.pedantic?(s.block=Jl.pedantic,s.inline=lr.pedantic):this.options.gfm&&(s.block=Jl.gfm,this.options.breaks?s.inline=lr.breaks:s.inline=lr.gfm),this.tokenizer.rules=s}static get rules(){return{block:Jl,inline:lr}}static lex(n,s){return new dd(s).lex(n)}static lexInline(n,s){return new dd(s).inlineTokens(n)}lex(n){n=n.replace(At.carriageReturn,`
`),this.blockTokens(n,this.tokens);for(let s=0;s<this.inlineQueue.length;s++){let l=this.inlineQueue[s];this.inlineTokens(l.src,l.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(n,s=[],l=!1){for(this.options.pedantic&&(n=n.replace(At.tabCharGlobal,"    ").replace(At.spaceLine,""));n;){let o;if(this.options.extensions?.block?.some(h=>(o=h.call({lexer:this},n,s))?(n=n.substring(o.raw.length),s.push(o),!0):!1))continue;if(o=this.tokenizer.space(n)){n=n.substring(o.raw.length);let h=s.at(-1);o.raw.length===1&&h!==void 0?h.raw+=`
`:s.push(o);continue}if(o=this.tokenizer.code(n)){n=n.substring(o.raw.length);let h=s.at(-1);h?.type==="paragraph"||h?.type==="text"?(h.raw+=(h.raw.endsWith(`
`)?"":`
`)+o.raw,h.text+=`
`+o.text,this.inlineQueue.at(-1).src=h.text):s.push(o);continue}if(o=this.tokenizer.fences(n)){n=n.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.heading(n)){n=n.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.hr(n)){n=n.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.blockquote(n)){n=n.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.list(n)){n=n.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.html(n)){n=n.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.def(n)){n=n.substring(o.raw.length);let h=s.at(-1);h?.type==="paragraph"||h?.type==="text"?(h.raw+=(h.raw.endsWith(`
`)?"":`
`)+o.raw,h.text+=`
`+o.raw,this.inlineQueue.at(-1).src=h.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},s.push(o));continue}if(o=this.tokenizer.table(n)){n=n.substring(o.raw.length),s.push(o);continue}if(o=this.tokenizer.lheading(n)){n=n.substring(o.raw.length),s.push(o);continue}let u=n;if(this.options.extensions?.startBlock){let h=1/0,p=n.slice(1),m;this.options.extensions.startBlock.forEach(g=>{m=g.call({lexer:this},p),typeof m=="number"&&m>=0&&(h=Math.min(h,m))}),h<1/0&&h>=0&&(u=n.substring(0,h+1))}if(this.state.top&&(o=this.tokenizer.paragraph(u))){let h=s.at(-1);l&&h?.type==="paragraph"?(h.raw+=(h.raw.endsWith(`
`)?"":`
`)+o.raw,h.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=h.text):s.push(o),l=u.length!==n.length,n=n.substring(o.raw.length);continue}if(o=this.tokenizer.text(n)){n=n.substring(o.raw.length);let h=s.at(-1);h?.type==="text"?(h.raw+=(h.raw.endsWith(`
`)?"":`
`)+o.raw,h.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=h.text):s.push(o);continue}if(n){let h="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return this.state.top=!0,s}inline(n,s=[]){return this.inlineQueue.push({src:n,tokens:s}),s}inlineTokens(n,s=[]){let l=n,o=null;if(this.tokens.links){let m=Object.keys(this.tokens.links);if(m.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)m.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(l))!=null;)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let u;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)u=o[2]?o[2].length:0,l=l.slice(0,o.index+u)+"["+"a".repeat(o[0].length-u-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);l=this.options.hooks?.emStrongMask?.call({lexer:this},l)??l;let h=!1,p="";for(;n;){h||(p=""),h=!1;let m;if(this.options.extensions?.inline?.some(y=>(m=y.call({lexer:this},n,s))?(n=n.substring(m.raw.length),s.push(m),!0):!1))continue;if(m=this.tokenizer.escape(n)){n=n.substring(m.raw.length),s.push(m);continue}if(m=this.tokenizer.tag(n)){n=n.substring(m.raw.length),s.push(m);continue}if(m=this.tokenizer.link(n)){n=n.substring(m.raw.length),s.push(m);continue}if(m=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(m.raw.length);let y=s.at(-1);m.type==="text"&&y?.type==="text"?(y.raw+=m.raw,y.text+=m.text):s.push(m);continue}if(m=this.tokenizer.emStrong(n,l,p)){n=n.substring(m.raw.length),s.push(m);continue}if(m=this.tokenizer.codespan(n)){n=n.substring(m.raw.length),s.push(m);continue}if(m=this.tokenizer.br(n)){n=n.substring(m.raw.length),s.push(m);continue}if(m=this.tokenizer.del(n)){n=n.substring(m.raw.length),s.push(m);continue}if(m=this.tokenizer.autolink(n)){n=n.substring(m.raw.length),s.push(m);continue}if(!this.state.inLink&&(m=this.tokenizer.url(n))){n=n.substring(m.raw.length),s.push(m);continue}let g=n;if(this.options.extensions?.startInline){let y=1/0,w=n.slice(1),S;this.options.extensions.startInline.forEach(x=>{S=x.call({lexer:this},w),typeof S=="number"&&S>=0&&(y=Math.min(y,S))}),y<1/0&&y>=0&&(g=n.substring(0,y+1))}if(m=this.tokenizer.inlineText(g)){n=n.substring(m.raw.length),m.raw.slice(-1)!=="_"&&(p=m.raw.slice(-1)),h=!0;let y=s.at(-1);y?.type==="text"?(y.raw+=m.raw,y.text+=m.text):s.push(m);continue}if(n){let y="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return s}},ro=class{options;parser;constructor(i){this.options=i||es}space(i){return""}code({text:i,lang:n,escaped:s}){let l=(n||"").match(At.notSpaceStart)?.[0],o=i.replace(At.endingNewline,"")+`
`;return l?'<pre><code class="language-'+Yn(l)+'">'+(s?o:Yn(o,!0))+`</code></pre>
`:"<pre><code>"+(s?o:Yn(o,!0))+`</code></pre>
`}blockquote({tokens:i}){return`<blockquote>
${this.parser.parse(i)}</blockquote>
`}html({text:i}){return i}def(i){return""}heading({tokens:i,depth:n}){return`<h${n}>${this.parser.parseInline(i)}</h${n}>
`}hr(i){return`<hr>
`}list(i){let n=i.ordered,s=i.start,l="";for(let h=0;h<i.items.length;h++){let p=i.items[h];l+=this.listitem(p)}let o=n?"ol":"ul",u=n&&s!==1?' start="'+s+'"':"";return"<"+o+u+`>
`+l+"</"+o+`>
`}listitem(i){return`<li>${this.parser.parse(i.tokens)}</li>
`}checkbox({checked:i}){return"<input "+(i?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:i}){return`<p>${this.parser.parseInline(i)}</p>
`}table(i){let n="",s="";for(let o=0;o<i.header.length;o++)s+=this.tablecell(i.header[o]);n+=this.tablerow({text:s});let l="";for(let o=0;o<i.rows.length;o++){let u=i.rows[o];s="";for(let h=0;h<u.length;h++)s+=this.tablecell(u[h]);l+=this.tablerow({text:s})}return l&&(l=`<tbody>${l}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+l+`</table>
`}tablerow({text:i}){return`<tr>
${i}</tr>
`}tablecell(i){let n=this.parser.parseInline(i.tokens),s=i.header?"th":"td";return(i.align?`<${s} align="${i.align}">`:`<${s}>`)+n+`</${s}>
`}strong({tokens:i}){return`<strong>${this.parser.parseInline(i)}</strong>`}em({tokens:i}){return`<em>${this.parser.parseInline(i)}</em>`}codespan({text:i}){return`<code>${Yn(i,!0)}</code>`}br(i){return"<br>"}del({tokens:i}){return`<del>${this.parser.parseInline(i)}</del>`}link({href:i,title:n,tokens:s}){let l=this.parser.parseInline(s),o=Eg(i);if(o===null)return l;i=o;let u='<a href="'+i+'"';return n&&(u+=' title="'+Yn(n)+'"'),u+=">"+l+"</a>",u}image({href:i,title:n,text:s,tokens:l}){l&&(s=this.parser.parseInline(l,this.parser.textRenderer));let o=Eg(i);if(o===null)return Yn(s);i=o;let u=`<img src="${i}" alt="${s}"`;return n&&(u+=` title="${Yn(n)}"`),u+=">",u}text(i){return"tokens"in i&&i.tokens?this.parser.parseInline(i.tokens):"escaped"in i&&i.escaped?i.text:Yn(i.text)}},$d=class{strong({text:i}){return i}em({text:i}){return i}codespan({text:i}){return i}del({text:i}){return i}html({text:i}){return i}text({text:i}){return i}link({text:i}){return""+i}image({text:i}){return""+i}br(){return""}checkbox({raw:i}){return i}},vn=class hd{options;renderer;textRenderer;constructor(n){this.options=n||es,this.options.renderer=this.options.renderer||new ro,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new $d}static parse(n,s){return new hd(s).parse(n)}static parseInline(n,s){return new hd(s).parseInline(n)}parse(n){let s="";for(let l=0;l<n.length;l++){let o=n[l];if(this.options.extensions?.renderers?.[o.type]){let h=o,p=this.options.extensions.renderers[h.type].call({parser:this},h);if(p!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(h.type)){s+=p||"";continue}}let u=o;switch(u.type){case"space":{s+=this.renderer.space(u);break}case"hr":{s+=this.renderer.hr(u);break}case"heading":{s+=this.renderer.heading(u);break}case"code":{s+=this.renderer.code(u);break}case"table":{s+=this.renderer.table(u);break}case"blockquote":{s+=this.renderer.blockquote(u);break}case"list":{s+=this.renderer.list(u);break}case"checkbox":{s+=this.renderer.checkbox(u);break}case"html":{s+=this.renderer.html(u);break}case"def":{s+=this.renderer.def(u);break}case"paragraph":{s+=this.renderer.paragraph(u);break}case"text":{s+=this.renderer.text(u);break}default:{let h='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return s}parseInline(n,s=this.renderer){let l="";for(let o=0;o<n.length;o++){let u=n[o];if(this.options.extensions?.renderers?.[u.type]){let p=this.options.extensions.renderers[u.type].call({parser:this},u);if(p!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(u.type)){l+=p||"";continue}}let h=u;switch(h.type){case"escape":{l+=s.text(h);break}case"html":{l+=s.html(h);break}case"link":{l+=s.link(h);break}case"image":{l+=s.image(h);break}case"checkbox":{l+=s.checkbox(h);break}case"strong":{l+=s.strong(h);break}case"em":{l+=s.em(h);break}case"codespan":{l+=s.codespan(h);break}case"br":{l+=s.br(h);break}case"del":{l+=s.del(h);break}case"text":{l+=s.text(h);break}default:{let p='Token with "'+h.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return l}},dr=class{options;block;constructor(i){this.options=i||es}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(i){return i}postprocess(i){return i}processAllTokens(i){return i}emStrongMask(i){return i}provideLexer(){return this.block?gn.lex:gn.lexInline}provideParser(){return this.block?vn.parse:vn.parseInline}},uj=class{defaults=Cd();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=vn;Renderer=ro;TextRenderer=$d;Lexer=gn;Tokenizer=io;Hooks=dr;constructor(...i){this.use(...i)}walkTokens(i,n){let s=[];for(let l of i)switch(s=s.concat(n.call(this,l)),l.type){case"table":{let o=l;for(let u of o.header)s=s.concat(this.walkTokens(u.tokens,n));for(let u of o.rows)for(let h of u)s=s.concat(this.walkTokens(h.tokens,n));break}case"list":{let o=l;s=s.concat(this.walkTokens(o.items,n));break}default:{let o=l;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(u=>{let h=o[u].flat(1/0);s=s.concat(this.walkTokens(h,n))}):o.tokens&&(s=s.concat(this.walkTokens(o.tokens,n)))}}return s}use(...i){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return i.forEach(s=>{let l={...s};if(l.async=this.defaults.async||l.async||!1,s.extensions&&(s.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let u=n.renderers[o.name];u?n.renderers[o.name]=function(...h){let p=o.renderer.apply(this,h);return p===!1&&(p=u.apply(this,h)),p}:n.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let u=n[o.level];u?u.unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),l.extensions=n),s.renderer){let o=this.defaults.renderer||new ro(this.defaults);for(let u in s.renderer){if(!(u in o))throw new Error(`renderer '${u}' does not exist`);if(["options","parser"].includes(u))continue;let h=u,p=s.renderer[h],m=o[h];o[h]=(...g)=>{let y=p.apply(o,g);return y===!1&&(y=m.apply(o,g)),y||""}}l.renderer=o}if(s.tokenizer){let o=this.defaults.tokenizer||new io(this.defaults);for(let u in s.tokenizer){if(!(u in o))throw new Error(`tokenizer '${u}' does not exist`);if(["options","rules","lexer"].includes(u))continue;let h=u,p=s.tokenizer[h],m=o[h];o[h]=(...g)=>{let y=p.apply(o,g);return y===!1&&(y=m.apply(o,g)),y}}l.tokenizer=o}if(s.hooks){let o=this.defaults.hooks||new dr;for(let u in s.hooks){if(!(u in o))throw new Error(`hook '${u}' does not exist`);if(["options","block"].includes(u))continue;let h=u,p=s.hooks[h],m=o[h];dr.passThroughHooks.has(u)?o[h]=g=>{if(this.defaults.async&&dr.passThroughHooksRespectAsync.has(u))return(async()=>{let w=await p.call(o,g);return m.call(o,w)})();let y=p.call(o,g);return m.call(o,y)}:o[h]=(...g)=>{if(this.defaults.async)return(async()=>{let w=await p.apply(o,g);return w===!1&&(w=await m.apply(o,g)),w})();let y=p.apply(o,g);return y===!1&&(y=m.apply(o,g)),y}}l.hooks=o}if(s.walkTokens){let o=this.defaults.walkTokens,u=s.walkTokens;l.walkTokens=function(h){let p=[];return p.push(u.call(this,h)),o&&(p=p.concat(o.call(this,h))),p}}this.defaults={...this.defaults,...l}}),this}setOptions(i){return this.defaults={...this.defaults,...i},this}lexer(i,n){return gn.lex(i,n??this.defaults)}parser(i,n){return vn.parse(i,n??this.defaults)}parseMarkdown(i){return(n,s)=>{let l={...s},o={...this.defaults,...l},u=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&l.async===!1)return u(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return u(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return u(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=i),o.async)return(async()=>{let h=o.hooks?await o.hooks.preprocess(n):n,p=await(o.hooks?await o.hooks.provideLexer():i?gn.lex:gn.lexInline)(h,o),m=o.hooks?await o.hooks.processAllTokens(p):p;o.walkTokens&&await Promise.all(this.walkTokens(m,o.walkTokens));let g=await(o.hooks?await o.hooks.provideParser():i?vn.parse:vn.parseInline)(m,o);return o.hooks?await o.hooks.postprocess(g):g})().catch(u);try{o.hooks&&(n=o.hooks.preprocess(n));let h=(o.hooks?o.hooks.provideLexer():i?gn.lex:gn.lexInline)(n,o);o.hooks&&(h=o.hooks.processAllTokens(h)),o.walkTokens&&this.walkTokens(h,o.walkTokens);let p=(o.hooks?o.hooks.provideParser():i?vn.parse:vn.parseInline)(h,o);return o.hooks&&(p=o.hooks.postprocess(p)),p}catch(h){return u(h)}}}onError(i,n){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,i){let l="<p>An error occurred:</p><pre>"+Yn(s.message+"",!0)+"</pre>";return n?Promise.resolve(l):l}if(n)return Promise.reject(s);throw s}}},Fa=new uj;function Me(i,n){return Fa.parse(i,n)}Me.options=Me.setOptions=function(i){return Fa.setOptions(i),Me.defaults=Fa.defaults,Pv(Me.defaults),Me};Me.getDefaults=Cd;Me.defaults=es;Me.use=function(...i){return Fa.use(...i),Me.defaults=Fa.defaults,Pv(Me.defaults),Me};Me.walkTokens=function(i,n){return Fa.walkTokens(i,n)};Me.parseInline=Fa.parseInline;Me.Parser=vn;Me.parser=vn.parse;Me.Renderer=ro;Me.TextRenderer=$d;Me.Lexer=gn;Me.lexer=gn.lex;Me.Tokenizer=io;Me.Hooks=dr;Me.parse=Me;Me.options;Me.setOptions;Me.use;Me.walkTokens;Me.parseInline;vn.parse;gn.lex;const dj=({userId:i,onNotebookSelect:n})=>{const[s,l]=E.useState([]),[o,u]=E.useState(null),[h,p]=E.useState([]),[m,g]=E.useState(!0),[y,w]=E.useState("list"),[S,x]=E.useState({used:0,total:5});E.useEffect(()=>{i&&(_(),A())},[i]);const _=async()=>{try{const Y=await fetch(`https://morgus-orchestrator.morgan-426.workers.dev/api/notebooks?user_id=${i}`);if(Y.ok){const Q=await Y.json();l(Q.notebooks||[])}}catch(Y){console.error("Failed to load notebooks:",Y)}finally{g(!1)}},A=async()=>{try{const Y=await fetch(`https://morgus-orchestrator.morgan-426.workers.dev/api/notebooks/daily-limit?user_id=${i}`);if(Y.ok){const Q=await Y.json();x(Q)}}catch(Y){console.error("Failed to load daily limit:",Y)}},T=async Y=>{try{const Q=await fetch(`https://morgus-orchestrator.morgan-426.workers.dev/api/notebooks/${Y}/assets`);if(Q.ok){const te=await Q.json();p(te.assets||[])}}catch(Q){console.error("Failed to load notebook assets:",Q)}},C=async Y=>{u(Y),w("detail"),await T(Y.id),n(Y.id)},D=()=>{w("list"),u(null),p([])},L=async(Y,Q)=>{if(Q.stopPropagation(),!!confirm("Delete this notebook? This action cannot be undone."))try{(await fetch(`https://morgus-orchestrator.morgan-426.workers.dev/api/notebooks/${Y}`,{method:"DELETE"})).ok&&(await _(),o?.id===Y&&D())}catch(te){console.error("Failed to delete notebook:",te)}},J=Y=>({deep_research:"",study_guide:"",faq:"",timeline:"",infographic_generation:"",roadmap:""})[Y]||"",K=Y=>{const Q=new Date(Y),H=new Date().getTime()-Q.getTime(),le=Math.floor(H/6e4),ve=Math.floor(H/36e5),Te=Math.floor(H/864e5);return le<1?"Just now":le<60?`${le}m ago`:ve<24?`${ve}h ago`:Te<7?`${Te}d ago`:Q.toLocaleDateString()};return m?c.jsx("div",{className:"notebooks-panel",children:"Loading..."}):y==="list"?c.jsxs("div",{className:"notebooks-panel",children:[c.jsxs("div",{className:"notebooks-header",children:[c.jsx("h3",{children:" Notebooks"}),c.jsxs("div",{className:"daily-limit",children:[S.used,"/",S.total," today"]})]}),s.length===0?c.jsxs("div",{className:"notebooks-empty",children:[c.jsx("p",{children:"No notebooks yet!"}),c.jsx("p",{className:"empty-hint",children:"Ask Morgy to create a notebook from your research"})]}):c.jsx("div",{className:"notebooks-list",children:s.map(Y=>c.jsxs("div",{className:"notebook-item",onClick:()=>C(Y),children:[c.jsx("div",{className:"notebook-icon",children:J(Y.purpose)}),c.jsxs("div",{className:"notebook-content",children:[c.jsx("div",{className:"notebook-title",children:Y.title}),c.jsxs("div",{className:"notebook-meta",children:[c.jsx("span",{className:"notebook-purpose",children:Y.purpose.replace(/_/g," ")}),c.jsx("span",{className:"notebook-date",children:K(Y.created_at)})]}),Y.summary&&c.jsxs("div",{className:"notebook-summary",children:[Y.summary.substring(0,100),Y.summary.length>100?"...":""]})]}),c.jsx("button",{className:"delete-notebook-btn",onClick:Q=>L(Y.id,Q),title:"Delete Notebook",children:""})]},Y.id))})]}):c.jsxs("div",{className:"notebooks-panel notebook-detail-view",children:[c.jsxs("div",{className:"notebooks-header",children:[c.jsx("button",{className:"back-btn",onClick:D,children:" Back"}),c.jsxs("h3",{children:[J(o.purpose)," ",o.title]})]}),c.jsxs("div",{className:"notebook-detail",children:[c.jsxs("div",{className:"notebook-meta-detail",children:[c.jsx("span",{className:"purpose-badge",children:o.purpose.replace(/_/g," ")}),c.jsx("span",{className:"date-badge",children:K(o.created_at)})]}),o.summary&&c.jsxs("div",{className:"notebook-summary-full",children:[c.jsx("h4",{children:"Summary"}),c.jsx("p",{children:o.summary})]}),o.sections&&o.sections.length>0&&c.jsxs("div",{className:"notebook-sections",children:[c.jsx("h4",{children:"Contents"}),o.sections.map((Y,Q)=>c.jsxs("div",{className:"notebook-section",children:[c.jsx("h5",{children:Y.title}),c.jsx("ul",{children:Y.bullets.map((te,H)=>c.jsx("li",{children:te},H))})]},Q))]}),h.length>0&&c.jsxs("div",{className:"notebook-assets",children:[c.jsx("h4",{children:"Visual Assets"}),c.jsx("div",{className:"assets-grid",children:h.map(Y=>c.jsxs("div",{className:"asset-item",children:[c.jsx("div",{className:"asset-label",children:Y.label}),Y.type.includes("svg")?c.jsx("div",{className:"asset-svg",dangerouslySetInnerHTML:{__html:Y.content}}):c.jsx("img",{src:Y.content,alt:Y.label,className:"asset-image"})]},Y.id))})]}),o.mindmap&&c.jsxs("div",{className:"notebook-mindmap",children:[c.jsx("h4",{children:"Mind Map"}),c.jsx("div",{className:"mindmap-placeholder",children:"Mind map visualization coming soon"})]}),o.flowchart&&c.jsxs("div",{className:"notebook-flowchart",children:[c.jsx("h4",{children:"Flow Chart"}),c.jsx("div",{className:"flowchart-placeholder",children:"Flow chart visualization coming soon"})]})]})]})};function hj({onTranscript:i,isListening:n,onListeningChange:s}){const[l,o]=E.useState(!1),[u,h]=E.useState(null);E.useEffect(()=>{const m=window.SpeechRecognition||window.webkitSpeechRecognition;if(m){o(!0);const g=new m;g.continuous=!1,g.interimResults=!0,g.lang="en-US",g.onresult=y=>{const w=Array.from(y.results).map(S=>S[0]).map(S=>S.transcript).join("");i(w),y.results[y.results.length-1].isFinal&&s(!1)},g.onerror=y=>{console.error("Speech recognition error:",y.error),s(!1)},g.onend=()=>{s(!1)},h(g)}},[]);const p=()=>{u&&(n?(u.stop(),s(!1)):(u.start(),s(!0)))};return l?c.jsx("button",{className:`voice-button ${n?"listening":""}`,onClick:p,title:n?"Stop listening":"Start voice input",children:n?"":""}):null}const Ws=new Set;let Fs=!1,ei="";async function Ku(i){const n=i.substring(0,100);if(Ws.has(n)){console.log("[TTS] Already spoken this message, skipping");return}if(Fs&&ei===n){console.log("[TTS] Already speaking this exact message, skipping");return}if(lo(),Fs=!0,ei=n,Ws.add(n),Ws.size>10){const s=Ws.values().next().value;s&&Ws.delete(s)}try{console.log("[TTS] Starting ElevenLabs TTS for text:",i.substring(0,50)+"..."),lo();const s=i.replace(/\*\*/g,"").replace(/\*/g,"").replace(/^[\-]\s+/gm,"").replace(/^#+\s+/gm,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/`/g,"").replace(/|||||||||||/g,"").trim();console.log("[TTS] Cleaned text:",s.substring(0,50)+"..."),console.log("[TTS] Calling ElevenLabs API...");const l=await fetch("https://morgus-orchestrator.morgan-426.workers.dev/api/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:s})});if(!l.ok){const p=await l.text();console.error("[TTS] API error:",l.status,l.statusText,p),console.error("[TTS] API URL:",l.url),console.log("[TTS] Skipping TTS due to API error (no fallback)");return}console.log("[TTS] API response OK, creating audio...");const o=await l.blob();console.log("[TTS] Audio blob size:",o.size,"bytes");const u=URL.createObjectURL(o),h=new Audio(u);window.__currentAudio=h,window.__isAudioPlaying=!0,console.log("[TTS] Playing audio..."),await h.play(),console.log("[TTS] Audio playing successfully!"),h.onended=()=>{URL.revokeObjectURL(u),window.__currentAudio=null,window.__isAudioPlaying=!1,Fs=!1,ei=""},h.onerror=()=>{URL.revokeObjectURL(u),window.__currentAudio=null,window.__isAudioPlaying=!1,Fs=!1,ei=""}}catch(s){console.error("[TTS] ElevenLabs TTS failed:",s),console.error("[TTS] Error details:",JSON.stringify(s,null,2)),console.log("[TTS] Skipping TTS due to error (no fallback to browser TTS)"),Fs=!1,ei=""}}function lo(){Ws.clear(),Fs=!1,ei="",window.__isAudioPlaying=!1;const i=window.__currentAudio;i&&(i.pause(),i.currentTime=0,window.__currentAudio=null),"speechSynthesis"in window&&window.speechSynthesis.cancel()}function fj({metadata:i}){const[n,s]=E.useState(!1),l=[...i.allModels].sort((p,m)=>m.score-p.score),o=p=>{const m=p.split("/"),g=m[m.length-1].replace(":free","");return{"mistral-7b-instruct":"Mistral 7B","grok-4.1-fast":"Grok Fast","kat-coder-pro-v1":"KAT-Coder"}[g]||g},u=p=>p<1e3?`${p}ms`:`${(p/1e3).toFixed(1)}s`,h=p=>p===0?"":p===1?"":p===2?"":"";return c.jsxs("div",{className:"moe-header",children:[c.jsx("div",{className:"moe-title",children:" MOE Competition"}),c.jsx("div",{className:"moe-models",children:l.map((p,m)=>{const g=p.model===i.winner.model,y=(p.score*100).toFixed(1);return c.jsxs("div",{className:`moe-model-card ${g?"winner":""}`,children:[c.jsxs("div",{className:"moe-model-name",children:[h(m)," ",o(p.model)]}),c.jsxs("div",{className:"moe-model-score",children:[y,"%"]}),c.jsxs("div",{className:"moe-model-stats",children:[c.jsx("div",{children:u(p.latency)}),c.jsxs("div",{children:[p.tokens," tokens"]})]})]},p.model)})}),c.jsxs("div",{className:"moe-footer",children:[c.jsxs("span",{children:["Total: ",u(i.totalLatency)," | $",i.totalCost.toFixed(6)]}),c.jsx("button",{className:"moe-expand-btn",onClick:()=>s(!n),children:n?"Hide":"Why?"})]}),n&&c.jsx("div",{className:"moe-explanation",children:i.nashExplanation})]})}const mj="https://morgus-orchestrator.morgan-426.workers.dev";function pj(){const[i,n]=E.useState([]),[s,l]=E.useState(!0);E.useEffect(()=>{o();const p=setInterval(o,3e4);return()=>clearInterval(p)},[]);const o=async()=>{try{const p=await fetch(`${mj}/api/stats/leaderboard`);if(p.ok){const m=await p.json();n(m.stats||[])}}catch(p){console.error("Failed to load leaderboard:",p)}finally{l(!1)}},u=p=>["","",""][p]||`${p+1}`,h=p=>{const m=p.split("/");return m[m.length-1].replace("gemini-2.0-flash-exp:free","Gemini 2.0").replace("claude-3.5-haiku","Claude 3.5").replace("gpt-4o-mini","GPT-4o mini").replace(":free","")};return s||i.length===0?null:c.jsxs("div",{className:"moe-leaderboard-box",children:[c.jsx("div",{className:"leaderboard-title",children:" Model Rankings"}),c.jsx("div",{className:"leaderboard-grid",children:i.slice(0,3).map((p,m)=>c.jsxs("div",{className:`leaderboard-row rank-${m+1}`,children:[c.jsx("span",{className:"rank-badge",children:u(m)}),c.jsxs("div",{className:"model-info",children:[c.jsx("div",{className:"model-name-short",children:h(p.model_name)}),c.jsxs("div",{className:"win-rate-badge",children:[p.win_rate.toFixed(0),"% wins"]})]})]},p.model_name))})]})}const kg=["Thinking","Analyzing your question","Processing request","Working on it","Considering options","Formulating response"],Ag=["Deep diving","Researching sources","Gathering evidence","Cross-referencing data","Analyzing findings","Synthesizing insights","Validating information","Building comprehensive answer"],gj=({toolName:i,isDeepResearch:n=!1,researchStep:s})=>{const[l,o]=E.useState(0),[u,h]=E.useState(0),p=E.useRef(Date.now());E.useEffect(()=>{p.current=Date.now(),o(0);const S=setInterval(()=>{const x=Math.floor((Date.now()-p.current)/1e3);o(x)},1e3);return()=>clearInterval(S)},[]),E.useEffect(()=>{const S=n?Ag:kg,x=setInterval(()=>{h(_=>(_+1)%S.length)},4e3);return()=>clearInterval(x)},[n]);const m=S=>{if(S<60)return`${S}s`;const x=Math.floor(S/60),_=S%60;return`${x}m ${_}s`},g=()=>i?{search_web:"Searching the web",fetch_url:"Fetching page content",execute_code:"Executing code",browse_web:"Browsing website",create_chart:"Creating chart",generate_image:"Generating image",generate_3d_model:"Creating 3D model",text_to_speech:"Generating voice",search_images:"Searching images",get_current_time:"Getting current time",think:"Deep thinking",rag_search:"Searching knowledge base"}[i]||`Using ${i}`:s||(n?Ag:kg)[u],w=l>=120?"Still working hard on this complex request...":l>=60?"Taking a bit longer, but making progress...":l>=30?"Working through the details...":null;return c.jsxs("div",{className:`thinking-indicator ${n?"deep-research":""}`,children:[c.jsxs("div",{className:"thinking-main",children:[c.jsxs("div",{className:"thinking-spinner",children:[c.jsx("div",{className:"spinner-ring"}),c.jsx("div",{className:"spinner-ring"}),c.jsx("div",{className:"spinner-ring"})]}),c.jsxs("div",{className:"thinking-content",children:[c.jsx("span",{className:"thinking-text",children:g()}),c.jsx("span",{className:"thinking-time",children:m(l)})]}),c.jsxs("div",{className:"thinking-dots",children:[c.jsx("span",{className:"dot"}),c.jsx("span",{className:"dot"}),c.jsx("span",{className:"dot"})]})]}),w&&c.jsx("div",{className:"thinking-encouragement",children:w}),n&&c.jsx("div",{className:"thinking-research-badge",children:" Deep Research Mode"})]})};function vj({liveViewUrl:i,sessionId:n}){const[s,l]=E.useState(!1),[o,u]=E.useState(!1),h=async()=>{if(u(!0),n)try{await fetch("https://morgus-deploy.fly.dev/close-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:n})})}catch(p){console.error("Failed to close session:",p)}l(!0),u(!1)};return s?c.jsx("div",{className:"browser-view-closed",children:" Browser session closed"}):c.jsxs("div",{className:"browser-view-container",children:[c.jsxs("div",{className:"browser-view-header",children:[c.jsx("div",{className:"browser-view-title",children:" Live Browser View"}),c.jsxs("div",{className:"browser-view-controls",children:[c.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"browser-view-btn",title:"Open in new tab (full size)",children:""}),c.jsx("button",{className:"browser-view-btn browser-view-close",onClick:h,disabled:o,title:"Close browser session",children:o?"...":""})]})]}),c.jsxs("div",{className:"browser-view-iframe-container",children:[c.jsx("iframe",{src:i,className:"browser-view-iframe",title:"Live Browser View",sandbox:"allow-same-origin allow-scripts allow-forms allow-pointer-lock allow-popups",allow:"clipboard-read; clipboard-write"}),c.jsxs("div",{className:"browser-view-footer",children:[" ",c.jsx("strong",{children:"Tip:"}),' Click "" to open full-size in new tab for easier interaction.',c.jsx("span",{className:"browser-view-takeover",children:"Need to login or solve CAPTCHA? Open in new tab!"})]})]})]})}function yj({userId:i,onServerInstalled:n,onServerUninstalled:s}){const[l,o]=E.useState([]),[u,h]=E.useState([]),[p,m]=E.useState([]),[g,y]=E.useState("all"),[w,S]=E.useState(""),[x,_]=E.useState(!0),[A,T]=E.useState(null),[C,D]=E.useState(null),[L,J]=E.useState("browse");E.useEffect(()=>{K(),Y(),Q()},[i]);const K=async()=>{try{const{data:k,error:G}=await ge.from("mcp_servers").select("*").eq("is_active",!0).order("is_featured",{ascending:!1}).order("install_count",{ascending:!1});if(G)throw G;o(k||[])}catch(k){console.error("Error loading MCP servers:",k)}finally{_(!1)}},Y=async()=>{if(i)try{const{data:k,error:G}=await ge.from("mcp_server_installs").select("*").eq("user_id",i);if(G)throw G;h(k||[])}catch(k){console.error("Error loading installed servers:",k)}},Q=async()=>{try{const{data:k,error:G}=await ge.from("mcp_server_categories").select("name").order("sort_order");if(G)throw G;m(["all",...k?.map(F=>F.name)||[]])}catch(k){console.error("Error loading categories:",k),m(["all","general","development","data","productivity"])}},te=k=>u.some(G=>G.server_id===k),H=async k=>{if(!i){alert("Please log in to install MCP servers");return}T(k.id);try{const{error:G}=await ge.from("mcp_server_installs").insert({user_id:i,server_id:k.id,is_enabled:!0,config:k.install_config_template||{},health_status:"pending"});if(G)throw G;await ge.rpc("increment_mcp_install_count",{server_id:k.id}),await Y(),n?.(k.id)}catch(G){console.error("Error installing server:",G),alert("Failed to install server. Please try again.")}finally{T(null)}},le=async k=>{if(i)try{const{error:G}=await ge.from("mcp_server_installs").delete().eq("user_id",i).eq("server_id",k);if(G)throw G;await Y(),s?.(k)}catch(G){console.error("Error uninstalling server:",G),alert("Failed to uninstall server. Please try again.")}},ve=async(k,G)=>{if(i)try{const{error:F}=await ge.from("mcp_server_installs").update({is_enabled:G}).eq("user_id",i).eq("server_id",k);if(F)throw F;await Y()}catch(F){console.error("Error toggling server:",F)}},Te=l.filter(k=>{const G=g==="all"||k.category===g,F=!w||k.display_name.toLowerCase().includes(w.toLowerCase())||k.description.toLowerCase().includes(w.toLowerCase())||k.tags.some(X=>X.toLowerCase().includes(w.toLowerCase()));return G&&F}),st=l.filter(k=>te(k.id)),Ie=k=>{const G=[];for(let F=1;F<=5;F++)G.push(c.jsx("span",{className:`star ${F<=k?"filled":""}`,children:""},F));return G},Ke=k=>({all:"",general:"",development:"",data:"",productivity:"",communication:"",ai:"",security:"",media:"",finance:"",analytics:""})[k.toLowerCase()]||"";return x?c.jsxs("div",{className:"mcp-browser-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Loading MCP Server Registry..."})]}):c.jsxs("div",{className:"mcp-server-browser",children:[c.jsx("div",{className:"browser-header",children:c.jsxs("div",{className:"view-toggle",children:[c.jsx("button",{className:`toggle-btn ${L==="browse"?"active":""}`,onClick:()=>J("browse"),children:" Browse Registry"}),c.jsxs("button",{className:`toggle-btn ${L==="installed"?"active":""}`,onClick:()=>J("installed"),children:[" My Servers (",u.length,")"]})]})}),L==="browse"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"browser-controls",children:[c.jsxs("div",{className:"search-box",children:[c.jsx("span",{className:"search-icon",children:""}),c.jsx("input",{type:"text",placeholder:"Search servers...",value:w,onChange:k=>S(k.target.value)})]}),c.jsx("div",{className:"category-filter",children:p.map(k=>c.jsxs("button",{className:`category-btn ${g===k?"active":""}`,onClick:()=>y(k),children:[Ke(k)," ",k==="all"?"All":k]},k))})]}),g==="all"&&!w&&c.jsxs("div",{className:"featured-section",children:[c.jsx("h3",{children:" Featured Servers"}),c.jsx("div",{className:"featured-grid",children:l.filter(k=>k.is_featured).slice(0,3).map(k=>c.jsxs("div",{className:"featured-card",onClick:()=>D(k),children:[c.jsx("div",{className:"featured-icon",children:k.icon_url?c.jsx("img",{src:k.icon_url,alt:k.display_name}):c.jsx("span",{className:"default-icon",children:Ke(k.category)})}),c.jsxs("div",{className:"featured-info",children:[c.jsx("h4",{children:k.display_name}),c.jsx("p",{children:k.description}),c.jsxs("div",{className:"featured-meta",children:[k.is_official&&c.jsx("span",{className:"badge official",children:"Official"}),k.is_verified&&c.jsx("span",{className:"badge verified",children:" Verified"})]})]})]},k.id))})]}),c.jsx("div",{className:"servers-grid",children:Te.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("span",{className:"empty-icon",children:""}),c.jsx("p",{children:"No servers found matching your criteria"})]}):Te.map(k=>c.jsxs("div",{className:`server-card ${te(k.id)?"installed":""}`,onClick:()=>D(k),children:[c.jsxs("div",{className:"server-header",children:[c.jsx("div",{className:"server-icon",children:k.icon_url?c.jsx("img",{src:k.icon_url,alt:k.display_name}):c.jsx("span",{className:"default-icon",children:Ke(k.category)})}),c.jsxs("div",{className:"server-title",children:[c.jsx("h4",{children:k.display_name}),c.jsxs("span",{className:"server-author",children:["by ",k.author||"Unknown"]})]})]}),c.jsx("p",{className:"server-description",children:k.description}),c.jsxs("div",{className:"server-meta",children:[c.jsxs("div",{className:"server-rating",children:[Ie(Math.round(k.average_rating)),c.jsxs("span",{className:"rating-count",children:["(",k.review_count,")"]})]}),c.jsxs("span",{className:"install-count",children:[" ",k.install_count]})]}),c.jsxs("div",{className:"server-badges",children:[k.is_official&&c.jsx("span",{className:"badge official",children:" Official"}),k.is_verified&&c.jsx("span",{className:"badge verified",children:" Verified"}),c.jsx("span",{className:"badge category",children:k.category})]}),c.jsx("div",{className:"server-actions",onClick:G=>G.stopPropagation(),children:te(k.id)?c.jsx("button",{className:"action-btn installed",onClick:()=>le(k.id),children:" Installed"}):c.jsx("button",{className:"action-btn install",onClick:()=>H(k),disabled:A===k.id,children:A===k.id?"Installing...":"+ Install"})})]},k.id))})]}):c.jsx("div",{className:"installed-servers",children:st.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("span",{className:"empty-icon",children:""}),c.jsx("p",{children:"No servers installed yet"}),c.jsx("button",{className:"browse-btn",onClick:()=>J("browse"),children:"Browse Registry"})]}):c.jsx("div",{className:"installed-list",children:st.map(k=>{const G=u.find(F=>F.server_id===k.id);return c.jsxs("div",{className:`installed-item ${G?.is_enabled?"enabled":"disabled"}`,children:[c.jsx("div",{className:"installed-icon",children:k.icon_url?c.jsx("img",{src:k.icon_url,alt:k.display_name}):c.jsx("span",{className:"default-icon",children:Ke(k.category)})}),c.jsxs("div",{className:"installed-info",children:[c.jsx("h4",{children:k.display_name}),c.jsx("p",{children:k.description}),c.jsxs("div",{className:"installed-meta",children:[c.jsxs("span",{className:`status ${G?.health_status}`,children:[G?.health_status==="connected"?"":G?.health_status==="error"?"":"",G?.health_status||"pending"]}),c.jsxs("span",{className:"version",children:["v",k.version]})]})]}),c.jsxs("div",{className:"installed-actions",children:[c.jsxs("label",{className:"toggle-switch",children:[c.jsx("input",{type:"checkbox",checked:G?.is_enabled||!1,onChange:F=>ve(k.id,F.target.checked)}),c.jsx("span",{className:"slider"})]}),c.jsx("button",{className:"uninstall-btn",onClick:()=>le(k.id),title:"Uninstall",children:""})]})]},k.id)})})}),C&&c.jsx("div",{className:"server-modal-overlay",onClick:()=>D(null),children:c.jsxs("div",{className:"server-modal",onClick:k=>k.stopPropagation(),children:[c.jsx("button",{className:"modal-close",onClick:()=>D(null),children:""}),c.jsxs("div",{className:"modal-header",children:[c.jsx("div",{className:"modal-icon",children:C.icon_url?c.jsx("img",{src:C.icon_url,alt:C.display_name}):c.jsx("span",{className:"default-icon large",children:Ke(C.category)})}),c.jsxs("div",{className:"modal-title",children:[c.jsx("h2",{children:C.display_name}),c.jsxs("span",{className:"modal-author",children:["by ",C.author||"Unknown"]}),c.jsxs("div",{className:"modal-badges",children:[C.is_official&&c.jsx("span",{className:"badge official",children:" Official"}),C.is_verified&&c.jsx("span",{className:"badge verified",children:" Verified"})]})]})]}),c.jsxs("div",{className:"modal-stats",children:[c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-value",children:Ie(Math.round(C.average_rating))}),c.jsxs("span",{className:"stat-label",children:[C.review_count," reviews"]})]}),c.jsxs("div",{className:"stat",children:[c.jsxs("span",{className:"stat-value",children:[" ",C.install_count]}),c.jsx("span",{className:"stat-label",children:"installs"})]}),c.jsxs("div",{className:"stat",children:[c.jsxs("span",{className:"stat-value",children:["v",C.version]}),c.jsx("span",{className:"stat-label",children:"version"})]})]}),c.jsxs("div",{className:"modal-description",children:[c.jsx("h3",{children:"Description"}),c.jsx("p",{children:C.long_description||C.description})]}),C.tags.length>0&&c.jsx("div",{className:"modal-tags",children:C.tags.map(k=>c.jsx("span",{className:"tag",children:k},k))}),c.jsxs("div",{className:"modal-links",children:[C.documentation_url&&c.jsx("a",{href:C.documentation_url,target:"_blank",rel:"noopener noreferrer",children:" Documentation"}),C.repository_url&&c.jsx("a",{href:C.repository_url,target:"_blank",rel:"noopener noreferrer",children:" Source Code"}),C.author_url&&c.jsx("a",{href:C.author_url,target:"_blank",rel:"noopener noreferrer",children:" Author"})]}),c.jsx("div",{className:"modal-actions",children:te(C.id)?c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"modal-btn secondary",onClick:()=>le(C.id),children:"Uninstall"}),c.jsx("button",{className:"modal-btn primary installed",children:" Installed"})]}):c.jsx("button",{className:"modal-btn primary",onClick:()=>H(C),disabled:A===C.id,children:A===C.id?"Installing...":"+ Install Server"})})]})})]})}function bj({isOpen:i,onClose:n,darkMode:s,onDarkModeChange:l,dontTrainOnMe:o,onDontTrainChange:u,user:h,profile:p,onLogout:m,onNavigate:g}){const[y,w]=E.useState("general");console.log("[SettingsPanel] Rendering with:",{user:h?.email,profile:p,isAdmin:p?.is_admin});const[S,x]=E.useState([]),[_,A]=E.useState([]),[T,C]=E.useState(""),[D,L]=E.useState(""),[J,K]=E.useState(!1),[Y,Q]=E.useState(()=>localStorage.getItem("morgus_dont_train")==="true"),te=o!==void 0?o:Y,H=j=>{u?u(j):(Q(j),localStorage.setItem("morgus_dont_train",j.toString()))};E.useEffect(()=>{i&&(le(),ve())},[i]);const le=async()=>{const j=localStorage.getItem("morgus_mcp_servers");j&&x(JSON.parse(j))},ve=async()=>{const j=[{id:"website-builder-v2",name:"Website Builder",description:"Build professional websites",enabled:!0,category:"Development"},{id:"landing-page-v2",name:"Landing Page",description:"High-conversion landing pages",enabled:!0,category:"Development"},{id:"full-stack-app-v2",name:"Full-Stack App",description:"Build full-stack applications",enabled:!0,category:"Development"},{id:"web-app-scaffold-v2",name:"Web App Scaffold",description:"Supabase-powered apps",enabled:!0,category:"Development"},{id:"stripe-payments-v2",name:"Stripe Payments",description:"Payment integration",enabled:!0,category:"Development"},{id:"authentication-v2",name:"Authentication",description:"User auth & management",enabled:!0,category:"Development"},{id:"external-api-v2",name:"External API",description:"API integrations",enabled:!0,category:"Development"},{id:"data-analysis-v2",name:"Data Analysis",description:"Analyze and visualize data",enabled:!0,category:"Analysis"},{id:"research-analysis-v2",name:"Research",description:"Deep research & analysis",enabled:!0,category:"Analysis"},{id:"spreadsheet-v2",name:"Spreadsheet",description:"Excel workbooks",enabled:!0,category:"Documents"},{id:"docx-v2",name:"DOCX Generation",description:"Word documents",enabled:!0,category:"Documents"},{id:"pdf-v2",name:"PDF Generation",description:"PDF documents",enabled:!0,category:"Documents"},{id:"document-generation-v2",name:"Document Generation",description:"Reports & proposals",enabled:!0,category:"Documents"},{id:"presentation-slideshow-v2",name:"Presentations",description:"Slideshows & decks",enabled:!0,category:"Documents"},{id:"image-generation-v2",name:"Image Generation",description:"AI image creation",enabled:!0,category:"Creative"},{id:"code-execution-v2",name:"Code Execution",description:"Run code in sandbox",enabled:!0,category:"Utilities"},{id:"browser-automation-v2",name:"Browser Automation",description:"Web automation",enabled:!0,category:"Utilities"},{id:"email-communication-v2",name:"Email",description:"Professional emails",enabled:!0,category:"Communication"},{id:"task-automation-v2",name:"Task Automation",description:"Workflow automation",enabled:!0,category:"Utilities"}],z=localStorage.getItem("morgus_skills_config");if(z){const W=JSON.parse(z);A(j.map(ee=>({...ee,enabled:W[ee.id]!==!1})))}else A(j)},Te=j=>{localStorage.setItem("morgus_mcp_servers",JSON.stringify(j)),x(j)},st=j=>{const z={};j.forEach(W=>{z[W.id]=W.enabled}),localStorage.setItem("morgus_skills_config",JSON.stringify(z)),A(j)},Ie=async()=>{if(!T||!D)return;K(!0);const j={id:`mcp-${Date.now()}`,name:D,url:T,enabled:!0,status:"disconnected"};try{j.status="connected"}catch{j.status="error"}Te([...S,j]),C(""),L(""),K(!1)},Ke=j=>{Te(S.filter(z=>z.id!==j))},k=j=>{Te(S.map(z=>z.id===j?{...z,enabled:!z.enabled}:z))},G=j=>{st(_.map(z=>z.id===j?{...z,enabled:!z.enabled}:z))},F=()=>{st(_.map(j=>({...j,enabled:!0})))},X=()=>{st(_.map(j=>({...j,enabled:!1})))};if(!i)return null;const he=[...new Set(_.map(j=>j.category))];return c.jsx("div",{className:"settings-overlay",onClick:n,children:c.jsxs("div",{className:"settings-panel",onClick:j=>j.stopPropagation(),children:[c.jsxs("div",{className:"settings-header",children:[c.jsx("h2",{children:" Settings"}),c.jsx("button",{className:"close-btn",onClick:n,children:""})]}),c.jsxs("div",{className:"settings-tabs",children:[c.jsx("button",{className:`tab ${y==="general"?"active":""}`,onClick:()=>w("general"),children:"General"}),c.jsx("button",{className:`tab ${y==="mcp"?"active":""}`,onClick:()=>w("mcp"),children:"MCP Servers"}),c.jsx("button",{className:`tab ${y==="skills"?"active":""}`,onClick:()=>w("skills"),children:"Skills"})]}),c.jsxs("div",{className:"settings-content",children:[y==="general"&&c.jsxs("div",{className:"general-settings",children:[h&&c.jsxs("div",{className:"setting-section",children:[c.jsx("h3",{className:"section-title",children:" Account"}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:p?.display_name||h.email}),c.jsx("span",{className:"setting-description",children:h.email})]}),c.jsx("span",{className:`plan-badge ${p?.is_admin?"admin-badge":""}`,children:p?.is_admin?" Admin":p?.subscription_tier||"free"})]}),c.jsxs("div",{className:"account-actions",children:[c.jsx("button",{className:"account-btn",onClick:()=>g?.("/account"),children:" My Account"}),c.jsx("button",{className:"account-btn knowledge-base-btn",onClick:()=>g?.("/knowledge-base"),children:" Knowledge Base"}),c.jsx("button",{className:"account-btn",onClick:()=>g?.("/pricing"),children:" Upgrade Plan"}),p?.is_admin&&c.jsx("button",{className:"account-btn admin",onClick:()=>g?.("/admin"),children:" Admin Panel"}),c.jsx("button",{className:"account-btn logout",onClick:j=>{j.preventDefault(),j.stopPropagation(),console.log("[SettingsPanel] Logout clicked"),m?m():console.error("[SettingsPanel] onLogout not provided!")},children:" Log Out"})]}),c.jsxs("div",{className:"referral-section",children:[c.jsxs("div",{className:"referral-header",children:[c.jsx("span",{className:"referral-icon",children:""}),c.jsx("span",{className:"referral-title",children:"Refer a Friend"})]}),c.jsx("p",{className:"referral-description",children:"Share your code and both get a free day pass when they sign up!"}),c.jsxs("div",{className:"referral-code-box",children:[c.jsx("span",{className:"referral-code",children:h?.email?.split("@")[0]?.toUpperCase().slice(0,8)||"MORGUS"}),c.jsx("button",{className:"copy-code-btn",onClick:()=>{const j=h?.email?.split("@")[0]?.toUpperCase().slice(0,8)||"MORGUS";navigator.clipboard.writeText(j),alert("Referral code copied!")},children:" Copy"})]}),c.jsx("button",{className:"share-link-btn",onClick:()=>{const z=`https://morgus-console.pages.dev/signup?ref=${h?.email?.split("@")[0]?.toUpperCase().slice(0,8)||"MORGUS"}`;navigator.clipboard.writeText(z),alert("Share link copied!")},children:" Copy Share Link"})]})]}),!h&&c.jsxs("div",{className:"setting-section",children:[c.jsx("h3",{className:"section-title",children:" Account"}),c.jsxs("div",{className:"account-actions",children:[c.jsx("button",{className:"account-btn primary",onClick:()=>g?.("/login"),children:" Log In"}),c.jsx("button",{className:"account-btn",onClick:()=>g?.("/signup"),children:" Sign Up"})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:" Dark Mode"}),c.jsx("span",{className:"setting-description",children:"Toggle dark/light theme"})]}),c.jsxs("label",{className:"toggle-switch",children:[c.jsx("input",{type:"checkbox",checked:s,onChange:j=>l(j.target.checked)}),c.jsx("span",{className:"slider"})]})]}),c.jsxs("div",{className:"setting-item privacy-toggle",children:[c.jsxs("div",{className:"setting-info",children:[c.jsxs("span",{className:"setting-label",children:[c.jsx("span",{className:"snake-icon",children:""})," Don't Train on Me"]}),c.jsx("span",{className:"setting-description",children:te?"Your conversations won't be used for training":"Your conversations help improve Morgus for everyone"})]}),c.jsxs("label",{className:"toggle-switch privacy",children:[c.jsx("input",{type:"checkbox",checked:te,onChange:j=>H(j.target.checked)}),c.jsx("span",{className:"slider privacy-slider"})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:" Morgus Version"}),c.jsx("span",{className:"setting-description",children:"Skills Library v2.0  MCP Enabled"})]}),c.jsx("span",{className:"version-badge",children:"v2.0"})]}),c.jsx("div",{className:"setting-item",children:c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:" Active Skills"}),c.jsxs("span",{className:"setting-description",children:[_.filter(j=>j.enabled).length," of ",_.length," skills enabled"]})]})}),c.jsx("div",{className:"setting-item",children:c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:" MCP Servers"}),c.jsxs("span",{className:"setting-description",children:[S.filter(j=>j.enabled).length," connected"]})]})})]}),y==="mcp"&&c.jsxs("div",{className:"mcp-settings",children:[c.jsx(yj,{userId:h?.id,onServerInstalled:j=>{console.log("Server installed:",j),le()},onServerUninstalled:j=>{console.log("Server uninstalled:",j),le()}}),c.jsxs("div",{className:"manual-server-section",children:[c.jsx("h4",{children:" Add Custom Server"}),c.jsx("p",{className:"manual-hint",children:"For advanced users: manually connect to a custom MCP server"}),c.jsxs("div",{className:"add-server-form",children:[c.jsx("input",{type:"text",placeholder:"Server Name (e.g., My Database)",value:D,onChange:j=>L(j.target.value)}),c.jsx("input",{type:"text",placeholder:"Server URL (e.g., http://localhost:3000)",value:T,onChange:j=>C(j.target.value)}),c.jsx("button",{onClick:Ie,disabled:J||!T||!D,children:J?"Connecting...":"+ Add Server"})]})]}),S.length>0&&c.jsxs("div",{className:"custom-servers-section",children:[c.jsx("h4",{children:" Custom Servers"}),c.jsx("div",{className:"servers-list",children:S.map(j=>c.jsxs("div",{className:`server-item ${j.status}`,children:[c.jsxs("div",{className:"server-info",children:[c.jsx("span",{className:"server-name",children:j.name}),c.jsx("span",{className:"server-url",children:j.url}),c.jsx("span",{className:`status-badge ${j.status}`,children:j.status==="connected"?" Connected":j.status==="error"?" Error":" Disconnected"})]}),c.jsxs("div",{className:"server-actions",children:[c.jsxs("label",{className:"toggle-switch",children:[c.jsx("input",{type:"checkbox",checked:j.enabled,onChange:()=>k(j.id)}),c.jsx("span",{className:"slider"})]}),c.jsx("button",{className:"remove-btn",onClick:()=>Ke(j.id),children:""})]})]},j.id))})]})]}),y==="skills"&&c.jsxs("div",{className:"skills-settings",children:[c.jsxs("div",{className:"skills-header",children:[c.jsx("p",{children:"Enable or disable specific skills to customize Morgus's capabilities."}),c.jsxs("div",{className:"bulk-actions",children:[c.jsx("button",{onClick:F,children:"Enable All"}),c.jsx("button",{onClick:X,children:"Disable All"})]})]}),he.map(j=>c.jsxs("div",{className:"skill-category",children:[c.jsx("h3",{children:j}),c.jsx("div",{className:"skills-list",children:_.filter(z=>z.category===j).map(z=>c.jsxs("div",{className:`skill-item ${z.enabled?"enabled":"disabled"}`,children:[c.jsxs("div",{className:"skill-info",children:[c.jsx("span",{className:"skill-name",children:z.name}),c.jsx("span",{className:"skill-description",children:z.description})]}),c.jsxs("label",{className:"toggle-switch",children:[c.jsx("input",{type:"checkbox",checked:z.enabled,onChange:()=>G(z.id)}),c.jsx("span",{className:"slider"})]})]},z.id))})]},j))]})]})]})})}const wj=[{id:"bill",name:"Bill",title:"Marketing Hog",fullName:"Bill the Marketing Hog",handle:"@billthemarketinghog",level:3,xp:65,maxXp:100,color:"#00ffff",borderColor:"#00ffff",image:"/morgys/bill.png",specialty:"Growth, hooks, landing pages, CTAs, viral ideas",tools:["generate_marketing_video","generate_ad_copy"]},{id:"sally",name:"Sally",title:"Social Media Queen",fullName:"Sally the Promo Pig",handle:"@sallythepromo",level:2,xp:40,maxXp:100,color:"#ff00ff",borderColor:"#ff00ff",image:"/morgys/sally.png",specialty:"Social media posting, video scripts, content calendars, engagement analysis",tools:["generate_tiktok_reel","post_to_twitter","post_to_instagram","create_content_calendar","generate_video_script"]},{id:"professor",name:"Prof. Hogsworth",title:"Research Expert",fullName:"Prof. Hogsworth the Research Expert",handle:"@profhogsworth",level:5,xp:85,maxXp:100,color:"#00ffff",borderColor:"#00ffff",image:"/morgys/professor.png",specialty:"Deep research, analysis, complex problems, data synthesis",tools:["generate_dynamic_view","create_educational_lesson","generate_infographic","explain_simply"]}],xj=({isVisible:i,activeMorgys:n,onActivateMorgy:s,onDeactivateMorgy:l,onMentionMorgy:o,onClose:u})=>{const[h]=E.useState(wj),[p,m]=E.useState(!1),[g,y]=E.useState(null);if(!i)return null;const w=x=>{n.includes(x)?l(x):s(x)},S=(x,_)=>{_.stopPropagation(),o&&o(x.handle,x.fullName),n.includes(x.id)||s(x.id)};return c.jsxs("div",{className:"morgy-pen",children:[c.jsxs("div",{className:"morgy-pen-header",children:[c.jsx("span",{className:"morgy-pen-icon",children:""}),c.jsx("span",{className:"morgy-pen-title",children:"Morgy Pen"}),c.jsx("button",{className:"morgy-pen-close",onClick:u||(()=>{}),"aria-label":"Close",children:""})]}),c.jsxs("div",{className:"morgy-how-to-call",children:[c.jsx("span",{className:"how-to-icon",children:""}),c.jsx("span",{className:"how-to-text",children:"Click @ to mention a Morgy in chat"})]}),c.jsxs("div",{className:"morgy-grid",children:[h.map(x=>{const _=n.includes(x.id),A=g===x.id;return c.jsxs("div",{className:`morgy-card ${_?"active":""}`,style:{"--morgy-color":x.color,"--morgy-border":x.borderColor},onClick:()=>w(x.id),onMouseEnter:()=>y(x.id),onMouseLeave:()=>y(null),children:[c.jsx("div",{className:"morgy-avatar",children:c.jsx("img",{src:x.image,alt:x.name})}),c.jsx("div",{className:"morgy-full-name",children:x.fullName}),c.jsx("div",{className:"morgy-handle",children:x.handle}),c.jsx("div",{className:"morgy-level-badge",children:c.jsxs("span",{className:"level-text",children:["Lvl ",x.level]})}),c.jsx("div",{className:"morgy-xp-bar",children:c.jsx("div",{className:"morgy-xp-fill",style:{width:`${x.xp/x.maxXp*100}%`,backgroundColor:x.color}})}),A&&c.jsxs("div",{className:"morgy-specialty-tooltip",children:[c.jsx("span",{className:"specialty-label",children:"Specialty:"}),c.jsx("span",{className:"specialty-text",children:x.specialty}),x.tools&&x.tools.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"specialty-label tools-label",children:"Tools:"}),c.jsxs("span",{className:"specialty-tools",children:[x.tools.slice(0,3).map(T=>c.jsx("span",{className:"tool-badge",children:T.replace(/_/g," ")},T)),x.tools.length>3&&c.jsxs("span",{className:"tool-more",children:["+",x.tools.length-3," more"]})]})]})]}),c.jsxs("div",{className:"morgy-actions",children:[c.jsx("button",{className:"morgy-action-btn mention",title:`Mention ${x.name} in chat`,onClick:T=>S(x,T),children:c.jsx("span",{children:"@"})}),c.jsx("button",{className:"morgy-action-btn activate",title:_?"Deactivate":"Activate",children:c.jsx("span",{children:_?"":""})})]})]},x.id)}),c.jsx("div",{className:"morgy-card add-morgy-card",onClick:()=>m(!0),children:c.jsxs("div",{className:"add-morgy-content",children:[c.jsx("span",{className:"add-morgy-icon",children:"+"}),c.jsx("span",{className:"add-morgy-text",children:"Add Morgy"})]})})]}),c.jsxs("div",{className:"morgy-pen-footer",children:[c.jsx("span",{className:"sounder-label",children:"Your Sounder"}),c.jsxs("span",{className:"sounder-count",children:[n.length," active"]})]}),p&&c.jsx("div",{className:"morgy-modal-overlay",onClick:()=>m(!1),children:c.jsxs("div",{className:"morgy-modal",onClick:x=>x.stopPropagation(),children:[c.jsx("h3",{children:" Create Custom Morgy"}),c.jsx("p",{children:"Design your own specialized Morgy agent!"}),c.jsxs("div",{className:"modal-coming-soon",children:[c.jsx("span",{className:"sparkle",children:""}),"Coming Soon",c.jsx("span",{className:"sparkle",children:""})]}),c.jsx("button",{onClick:()=>m(!1),children:"Close"})]})})]})},_j=[{id:"bill",name:"Bill",fullName:"Bill the Marketing Hog",handle:"@billthemarketinghog",image:"/morgys/bill.png",color:"#00ffff"},{id:"sally",name:"Sally",fullName:"Sally the Promo Pig",handle:"@sallythepromo",image:"/morgys/sally.png",color:"#ff00ff"},{id:"professor",name:"Prof. Hogsworth",fullName:"Prof. Hogsworth the Research Expert",handle:"@profhogsworth",image:"/morgys/professor.png",color:"#ff6600"}],Sj=({inputValue:i,onSelect:n,inputRef:s,isVisible:l,onVisibilityChange:o})=>{const[u,h]=E.useState([]),[p,m]=E.useState(0),[g,y]=E.useState({top:0,left:0}),w=E.useRef(null);E.useEffect(()=>{const x=i.lastIndexOf("@");if(x===-1){o(!1);return}const _=i.slice(x+1).toLowerCase();if(_.includes(" ")){o(!1);return}const A=_j.filter(T=>T.name.toLowerCase().startsWith(_)||T.handle.toLowerCase().includes(_)||T.fullName.toLowerCase().includes(_));if(A.length>0){if(h(A),m(0),o(!0),s.current){const T=s.current.getBoundingClientRect();y({top:T.top-A.length*60-10,left:T.left})}}else o(!1)},[i,s,o]),E.useEffect(()=>{const x=_=>{if(l)switch(_.key){case"ArrowDown":_.preventDefault(),m(A=>A<u.length-1?A+1:0);break;case"ArrowUp":_.preventDefault(),m(A=>A>0?A-1:u.length-1);break;case"Enter":case"Tab":u.length>0&&(_.preventDefault(),S(u[p]));break;case"Escape":o(!1);break}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[l,u,p,o]);const S=x=>{const _=i.lastIndexOf("@"),A=i.slice(0,_)+x.handle+" ";n(A),o(!1)};return!l||u.length===0?null:c.jsxs("div",{ref:w,className:"morgy-autocomplete",style:{position:"fixed",bottom:"80px",left:g.left,zIndex:1e3},children:[c.jsxs("div",{className:"autocomplete-header",children:[c.jsx("span",{className:"autocomplete-icon",children:""}),c.jsx("span",{children:"Mention a Morgy"})]}),u.map((x,_)=>c.jsxs("div",{className:`autocomplete-item ${_===p?"selected":""}`,onClick:()=>S(x),onMouseEnter:()=>m(_),style:{borderLeftColor:x.color},children:[c.jsx("img",{src:x.image,alt:x.name,className:"autocomplete-avatar"}),c.jsxs("div",{className:"autocomplete-info",children:[c.jsx("span",{className:"autocomplete-name",children:x.fullName}),c.jsx("span",{className:"autocomplete-handle",style:{color:x.color},children:x.handle})]})]},x.id)),c.jsxs("div",{className:"autocomplete-hint",children:[c.jsx("span",{children:" to navigate"}),c.jsx("span",{children:" to select"}),c.jsx("span",{children:"esc to dismiss"})]})]})};function jj({sessionId:i,isActive:n,onClose:s}){const[l,o]=E.useState(null),[u,h]=E.useState([]),[p,m]=E.useState(!1);E.useEffect(()=>{if(i&&n){g();const _=ge.channel(`research_${i}`).on("postgres_changes",{event:"*",schema:"public",table:"research_steps",filter:`session_id=eq.${i}`},()=>{y()}).on("postgres_changes",{event:"*",schema:"public",table:"research_sessions",filter:`id=eq.${i}`},()=>{g()}).subscribe();return()=>{_.unsubscribe()}}},[i,n]);const g=async()=>{if(!i)return;m(!0);const{data:_,error:A}=await ge.from("research_sessions").select("*").eq("id",i).single();!A&&_&&(o(_),y()),m(!1)},y=async()=>{if(!i)return;const{data:_,error:A}=await ge.from("research_steps").select("*").eq("session_id",i).order("step_index",{ascending:!0});!A&&_&&h(_)},w=_=>{switch(_){case"pending":return"";case"in_progress":return"";case"completed":return"";case"failed":return"";case"planning":return"";case"researching":return"";case"synthesizing":return"";default:return""}},S=_=>{switch(_){case"facts":return"";case"stats":return"";case"synthesis":return"";case"legal":return"";case"technical":return"";case"comparison":return"";case"definition":return"";default:return""}},x=()=>{if(u.length===0)return 0;const _=u.filter(A=>A.status==="completed").length;return Math.round(_/u.length*100)};return!n||!i?null:c.jsxs("div",{className:"deep-research-panel",children:[c.jsxs("div",{className:"research-header",children:[c.jsxs("div",{className:"research-title",children:[c.jsx("span",{className:"research-icon",children:""}),c.jsx("h3",{children:"Deep Research Mode"})]}),c.jsx("button",{className:"close-research",onClick:s,children:""})]}),p?c.jsxs("div",{className:"research-loading",children:[c.jsx("div",{className:"research-spinner"}),c.jsx("p",{children:"Loading research session..."})]}):l?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"research-question",children:[c.jsx("span",{className:"label",children:"Original Question:"}),c.jsx("p",{children:l.original_question})]}),c.jsxs("div",{className:"research-status",children:[c.jsxs("span",{className:"status-badge","data-status":l.status,children:[w(l.status)," ",l.status.charAt(0).toUpperCase()+l.status.slice(1)]}),c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-fill",style:{width:`${x()}%`}})}),c.jsxs("span",{className:"progress-text",children:[x(),"%"]})]}),c.jsxs("div",{className:"research-steps",children:[c.jsxs("h4",{children:["Research Steps (",u.length,")"]}),u.length===0?c.jsx("div",{className:"no-steps",children:c.jsx("p",{children:" Analyzing question and planning research steps..."})}):c.jsx("ul",{className:"steps-list",children:u.map(_=>c.jsxs("li",{className:`step-item ${_.status}`,children:[c.jsxs("div",{className:"step-header",children:[c.jsxs("span",{className:"step-number",children:["#",_.step_index]}),c.jsxs("span",{className:"step-type",children:[S(_.type)," ",_.type]}),c.jsx("span",{className:"step-status",children:w(_.status)})]}),c.jsx("p",{className:"step-question",children:_.question}),_.final_answer&&c.jsxs("div",{className:"step-answer",children:[c.jsx("span",{className:"answer-label",children:"Answer:"}),c.jsx("p",{children:_.final_answer}),_.final_confidence&&c.jsxs("span",{className:"confidence",children:["Confidence: ",Math.round(_.final_confidence*100),"%"]})]})]},_.id))})]}),l.final_answer&&c.jsxs("div",{className:"research-final-answer",children:[c.jsx("h4",{children:" Final Synthesis"}),c.jsx("div",{className:"final-answer-content",children:l.final_answer})]})]}):c.jsx("div",{className:"research-empty",children:c.jsx("p",{children:"No active research session"})})]})}function Ej(){const[i,n]=E.useState(null),[s,l]=E.useState(!1),[o,u]=E.useState(!1),[h,p]=E.useState(!1);E.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const w=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;u(w);const S=localStorage.getItem("pwa-install-dismissed");if(S){const _=parseInt(S,10);if(Date.now()-_<10080*60*1e3)return}if(w){/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&setTimeout(()=>l(!0),3e3);return}const x=_=>{_.preventDefault(),n(_),setTimeout(()=>l(!0),2e3)};return window.addEventListener("beforeinstallprompt",x),()=>window.removeEventListener("beforeinstallprompt",x)},[]);const m=async()=>{if(o){p(!0);return}if(i){try{await i.prompt();const{outcome:y}=await i.userChoice;y==="accepted"?(console.log("[PWA] User accepted install prompt"),l(!1)):(console.log("[PWA] User dismissed install prompt"),g())}catch(y){console.error("[PWA] Install error:",y)}n(null)}},g=()=>{l(!1),p(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return s?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"pwa-install-banner",children:[c.jsxs("div",{className:"pwa-install-content",children:[c.jsx("img",{src:"/icons/morgus-192.png",alt:"Morgus",className:"pwa-install-icon"}),c.jsxs("div",{className:"pwa-install-text",children:[c.jsx("strong",{children:"Install Morgus"}),c.jsx("span",{children:"Add to home screen for the best experience"})]})]}),c.jsxs("div",{className:"pwa-install-actions",children:[c.jsx("button",{className:"pwa-install-btn",onClick:m,children:"Install"}),c.jsx("button",{className:"pwa-dismiss-btn",onClick:g,children:""})]})]}),h&&c.jsx("div",{className:"pwa-ios-modal-overlay",onClick:g,children:c.jsxs("div",{className:"pwa-ios-modal",onClick:y=>y.stopPropagation(),children:[c.jsx("button",{className:"pwa-ios-close",onClick:g,children:""}),c.jsx("img",{src:"/icons/morgus-192.png",alt:"Morgus",className:"pwa-ios-icon"}),c.jsx("h3",{children:"Install Morgus on iOS"}),c.jsxs("div",{className:"pwa-ios-steps",children:[c.jsxs("div",{className:"pwa-ios-step",children:[c.jsx("span",{className:"step-number",children:"1"}),c.jsxs("span",{children:["Tap the ",c.jsx("strong",{children:"Share"})," button ",c.jsx("span",{className:"ios-share-icon",children:""})]})]}),c.jsxs("div",{className:"pwa-ios-step",children:[c.jsx("span",{className:"step-number",children:"2"}),c.jsxs("span",{children:["Scroll down and tap ",c.jsx("strong",{children:'"Add to Home Screen"'})]})]}),c.jsxs("div",{className:"pwa-ios-step",children:[c.jsx("span",{className:"step-number",children:"3"}),c.jsxs("span",{children:["Tap ",c.jsx("strong",{children:'"Add"'})," in the top right"]})]})]}),c.jsx("button",{className:"pwa-ios-done",onClick:g,children:"Got it!"})]})})]}):null}async function Tj(i,n,s,l,o,u){const p={id:`research_${Date.now()}`,topic:s,status:"initializing",steps:[],sources:[],answer:"",session:null,completed_steps:0,total_steps:5,createdAt:new Date,updatedAt:new Date};return u(p,p.steps),p.status="completed",p.summary=`Research on "${s}" is not yet implemented. This feature will use multiple AI models to conduct comprehensive research.`,p.answer=p.summary,p.completed_steps=5,p.updatedAt=new Date,p.session=p,u(p,p.steps),p}class Nj{tools=[];userId;constructor(n,s){this.userId=n}async initialize(){console.log("[MCP] Initializing client for user:",this.userId)}getAvailableTools(){return this.tools}getToolsForPrompt(){return this.tools.length===0?"":this.tools.map(n=>`- ${n.name}: ${n.description}`).join(`
`)}parseToolCalls(n){return console.log("[MCP] Parsing tool calls from message:",n.substring(0,100)),[]}async callTool(n){return console.log("[MCP] Calling tool:",n.serverName,n.toolName,n.arguments),{success:!1,error:"MCP tool execution not yet implemented",content:null}}async executeTool(n,s){return console.log("[MCP] Executing tool:",n,s),{success:!1,error:"MCP tool execution not yet implemented",content:null}}}async function kj(i,n){const s=new Nj(i,n);return await s.initialize(),s}Me.setOptions({breaks:!0,gfm:!0});const cr="https://morgus-orchestrator.morgan-426.workers.dev";function Aj(){const i=Zn(),{user:n,profile:s,signOut:l}=bn(),[o,u]=E.useState([{id:"1",role:"assistant",content:" Hello! I'm Morgus, your autonomous AI agent. What would you like to accomplish today?",timestamp:new Date}]),[h,p]=E.useState(""),[m,g]=E.useState(!1),[y,w]=E.useState([]),[S,x]=E.useState(window.innerWidth>768),[_,A]=E.useState(!1),[T,C]=E.useState(null),[D]=E.useState(null),[L,J]=E.useState(null),[K,Y]=E.useState([]),[Q,te]=E.useState(!1),[H,le]=E.useState(!1),[ve,Te]=E.useState(!1),[st]=E.useState(),[Ie,Ke]=E.useState(!1),[k,G]=E.useState(!1);E.useEffect(()=>{window.innerWidth<=768&&S&&x(!1)},[location.pathname]);const[F,X]=E.useState([]),[he,j]=E.useState(!1),[z,W]=E.useState(!1),[ee,me]=E.useState(null),[ye,ke]=E.useState(!1),[St,Qe]=E.useState(null),[ts,ns]=E.useState([]),[wn,Sr]=E.useState(null),[xn,oi]=E.useState(!1),[ln,jr]=E.useState(()=>localStorage.getItem("morgus_dont_train")==="true");E.useEffect(()=>{s?.dont_train_on_me!==void 0&&(jr(s.dont_train_on_me),localStorage.setItem("morgus_dont_train",s.dont_train_on_me?"true":"false"))},[s?.dont_train_on_me]);const ci=async $=>{if(jr($),localStorage.setItem("morgus_dont_train",$?"true":"false"),n)try{await ge.from("profiles").update({dont_train_on_me:$}).eq("id",n.id),console.log("[App] Saved dont_train_on_me to profile:",$)}catch(Z){console.error("[App] Failed to save dont_train_on_me:",Z)}},as=E.useRef(null),ss=E.useRef(null),ka=E.useRef(null),po=()=>{as.current?.scrollIntoView({behavior:"smooth"})};E.useEffect(()=>{po()},[o]),E.useEffect(()=>{gt()},[]),E.useEffect(()=>{(async()=>{if(n)try{const{data:{session:Z}}=await ge.auth.getSession();if(Z?.access_token){const ae=await kj(n.id,Z.access_token);Sr(ae);const ue=ae.getAvailableTools();oi(ue.length>0),console.log(`[MCP] Initialized with ${ue.length} tools available`)}}catch(Z){console.error("[MCP] Failed to initialize:",Z)}})()},[n]),E.useEffect(()=>{const $=setInterval(()=>{const Z=window.__isAudioPlaying||!1;Te(Z)},100);return()=>clearInterval($)},[]),E.useEffect(()=>{D&&go(D)},[D]);const go=async $=>{try{const{data:Z,error:ae}=await ge.from("thought_messages").select("*").eq("thought_id",$).order("created_at",{ascending:!0});if(!ae&&Z){const ue=Z.map(ce=>({id:ce.id,role:ce.role,content:ce.content,timestamp:new Date(ce.created_at)}));ue.length===0?u([{id:"1",role:"assistant",content:" Hello! I'm Morgus, your autonomous AI agent. What would you like to accomplish today?",timestamp:new Date}]):u(ue)}}catch(Z){console.error("Failed to load thought messages:",Z)}},gt=async()=>{const{data:$,error:Z}=await ge.from("conversations").select("id, title, created_at, updated_at").order("updated_at",{ascending:!1}).limit(20);!Z&&$&&w($.map(ae=>({id:ae.id,description:ae.title,status:"completed",created_at:ae.created_at})))},vo=async($,Z)=>{Z.stopPropagation();const{error:ae}=await ge.from("conversations").delete().eq("id",$);ae||(w(ue=>ue.filter(ce=>ce.id!==$)),T===$&&(C(null),J(null)))},Er=$=>{const Z=Array.from($.target.files||[]);Y(ae=>[...ae,...Z])},Tr=$=>{Y(Z=>Z.filter((ae,ue)=>ue!==$))},is=$=>{navigator.clipboard.writeText($)},yo=($,Z)=>{const ae=new Blob([$],{type:"text/plain"}),ue=URL.createObjectURL(ae),ce=document.createElement("a");ce.href=ue,ce.download=Z,ce.click(),URL.revokeObjectURL(ue)},ui=async $=>{if(!D){alert("Please select a thought first!");return}try{const{error:Z}=await ge.from("thought_messages").insert({thought_id:D,role:$.role,content:$.content,created_at:new Date().toISOString()});if(Z)throw Z;alert(" Message saved to thought!")}catch(Z){console.error("Failed to save message:",Z),alert(" Failed to save message")}},di=async($,Z)=>{try{const{error:ae}=await ge.from("message_ratings").insert({message_id:$,rating:Z,created_at:new Date().toISOString()});if(ae)throw ae;alert(`${Z==="good"?"":Z==="bad"?"":""} ${Z==="good"?"Thanks for the feedback!":Z==="bad"?"Sorry! I'll try to improve.":"Glitch reported!"}`)}catch(ae){console.error("Failed to save rating:",ae)}},hi=async($,Z,ae)=>{try{let ue=[];if(Z.length>0){const Ue=new FormData;Z.forEach(on=>Ue.append("files",on));const Be=await fetch(`${cr}/upload`,{method:"POST",body:Ue});Be.ok&&(ue=(await Be.json()).urls||[])}let ce="";wn&&xn&&(ce=wn.getToolsForPrompt(),console.log("[MCP] Adding tools to system prompt:",ce.substring(0,200)+"..."));const xe=await fetch(`${cr}/moe-chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:$||(ue.length>0?"Please analyze these files":""),task_id:T,conversation_id:L,thought_id:D,history:o.slice(-10).map(Ue=>({role:Ue.role,content:Ue.content})),files:ue,dont_train_on_me:ln,user_id:n?.id,mcp_tools_prompt:ce})});if(!xe.ok)throw new Error(`HTTP error! status: ${xe.status}`);const Ae=await xe.json();let Je=Ae.message,it=[];if(wn&&Ae.message){const Ue=wn.parseToolCalls(Ae.message);if(Ue.length>0){console.log("[MCP] Found tool calls:",Ue),it=Ue.map(tt=>({server:tt.serverName,tool:tt.toolName,arguments:tt.arguments,isExecuting:!0})),u(tt=>tt.map(Jt=>Jt.id===ae?{...Jt,content:" Executing MCP tools...",toolCalls:it}:Jt));const Be=[];for(let tt=0;tt<Ue.length;tt++){const Jt=Ue[tt];console.log(`[MCP] Executing ${Jt.serverName}/${Jt.toolName}...`);const cn=await wn.callTool(Jt);Be.push(cn),it=it.map((Fn,ea)=>ea===tt?{...Fn,result:cn,isExecuting:!1}:Fn),u(Fn=>Fn.map(ea=>ea.id===ae?{...ea,toolCalls:[...it]}:ea))}const on=Be.map((tt,Jt)=>{const cn=Ue[Jt];return tt.success?`Tool ${cn.serverName}/${cn.toolName} returned:
${JSON.stringify(tt.content,null,2)}`:`Tool ${cn.serverName}/${cn.toolName} failed: ${tt.error}`}).join(`

`),fi=await fetch(`${cr}/moe-chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:`Based on the following tool results, please provide a helpful response to the user's original question: "${$}"

${on}`,task_id:T,conversation_id:L,thought_id:D,history:o.slice(-10).map(tt=>({role:tt.role,content:tt.content})),dont_train_on_me:ln,user_id:n?.id,is_tool_synthesis:!0})});fi.ok&&(Je=(await fi.json()).message)}}u(Ue=>Ue.map(Be=>Be.id===ae?{...Be,content:Je,moeMetadata:Ae.moeMetadata,toolCalls:it.length>0?it:void 0,isStreaming:!1}:Be)),H&&Je&&setTimeout(()=>Ku(Je),100),gt()}catch(ue){console.error("Error:",ue),u(ce=>ce.map(xe=>xe.id===ae?{...xe,content:` Error: ${ue instanceof Error?ue.message:"Unknown error"}`,isStreaming:!1}:xe))}},Wn=async()=>{if(!h.trim()&&K.length===0||m)return;const $={id:Date.now().toString(),role:"user",content:h||"[Files attached]",timestamp:new Date,attachments:K.map(xe=>xe.name)};u(xe=>[...xe,$]);const Z=h,ae=[...K];p(""),Y([]),g(!0);const ue=(Date.now()+1).toString(),ce={id:ue,role:"assistant",content:z?" Starting Deep Research...":" Starting...",timestamp:new Date,isStreaming:!0};if(u(xe=>[...xe,ce]),z&&n?.id)try{ke(!0);const xe=await Tj(n.id,Z,`${cr}/moe-chat`,"",void 0,(Ae,Je)=>{Qe(Ae),ns(Je),me(Ae.id);const it=Ae.completed_steps>0?`(${Ae.completed_steps}/${Ae.total_steps} steps)`:"";u(Ue=>Ue.map(Be=>Be.id===ue?{...Be,content:` Deep Research in progress ${it}...`}:Be))});xe?(u(Ae=>Ae.map(Je=>Je.id===ue?{...Je,content:xe.answer,isStreaming:!1}:Je)),Qe(xe.session)):await hi(Z,ae,ue),g(!1);return}catch(xe){console.error("Deep research error:",xe),await hi(Z,ae,ue),g(!1);return}await hi(Z,ae,ue),g(!1)},Tt=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),Wn())},_n=$=>$.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),Nt=$=>{if(!$||$.length<500)return!1;const Z=$.trim(),ae=[/\.\.\.$/,/$/,/\.\.$/,/[a-z]$/i,/,$/,/:$/,/\d+\.$/,/bytes truncated/i,/content truncated/i,/\[truncated\]/i];for(const ue of ae)if(ue.test(Z))return!0;return $.length>4e3},bo=()=>{const $=[" Keep Going!"," Oink for More!"," Tell me more!"," Don't stop now!"," Continue the magic!"," What else?"," More wisdom please!"," Keep it coming!"];return $[Math.floor(Math.random()*$.length)]},wo=async $=>{if(m)return;const Z={id:Date.now().toString(),role:"user",content:"Please continue where you left off.",timestamp:new Date};u(ce=>[...ce,Z]),g(!0);const ae=(Date.now()+1).toString(),ue={id:ae,role:"assistant",content:" Continuing...",timestamp:new Date,isStreaming:!0};u(ce=>[...ce,ue]);try{const ce=await fetch(`${cr}/moe-chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"Please continue where you left off. Pick up exactly where you stopped.",task_id:T,conversation_id:L,thought_id:D,history:o.slice(-10).map(Ae=>({role:Ae.role,content:Ae.content})),files:[],dont_train_on_me:ln,user_id:n?.id,was_continued:!0})});if(!ce.ok)throw new Error(`HTTP error! status: ${ce.status}`);const xe=await ce.json();u(Ae=>Ae.map(Je=>Je.id===ae?{...Je,content:xe.message,moeMetadata:xe.moeMetadata,isStreaming:!1}:Je)),H&&xe.message&&setTimeout(()=>{Ku(xe.message)},100),g(!1)}catch(ce){console.error("Error:",ce),u(xe=>xe.map(Ae=>Ae.id===ae?{...Ae,content:` Error: ${ce instanceof Error?ce.message:"Unknown error"}`,isStreaming:!1}:Ae)),g(!1)}};return c.jsxs("div",{className:`app ${Ie?"dark-mode":"light-mode"}`,children:[c.jsxs("div",{className:`sidebar ${S?"open":""}`,children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsxs("div",{className:"logo",children:[c.jsx("div",{className:"logo-icon",children:"M"}),c.jsx("h1",{children:"Morgus"})]}),c.jsx("button",{className:"new-chat-button",onClick:async()=>{try{const{data:$,error:Z}=await ge.from("conversations").insert({title:"New Chat",thought_id:D,created_at:new Date().toISOString()}).select().single();!Z&&$&&(J($.id),u([{id:"1",role:"assistant",content:" Hello! I'm **Morgus**, your autonomous AI agent. What would you like to accomplish today?",timestamp:new Date}]),C(null),await gt())}catch($){console.error("Failed to create conversation:",$)}},children:"+ New Chat"})]}),c.jsx(dj,{userId:n?.id||null,onNotebookSelect:$=>{console.log("Notebook selected:",$)}}),c.jsxs("div",{className:"task-list",children:[c.jsx("h3",{children:" Recent Chats"}),y.map($=>c.jsxs("div",{className:`task-item ${T===$.id?"active":""}`,onClick:async()=>{C($.id),J($.id);const{data:Z,error:ae}=await ge.from("conversation_messages").select("*").eq("conversation_id",$.id).order("created_at",{ascending:!0});if(!ae&&Z){const ue=Z.map(ce=>({id:ce.id,role:ce.role,content:ce.content,timestamp:new Date(ce.created_at),moeMetadata:ce.metadata?.moeMetadata}));u(ue.length>0?ue:[{id:"1",role:"assistant",content:" Hello! I'm **Morgus**, your autonomous AI agent. What would you like to accomplish today?",timestamp:new Date}])}},children:[c.jsxs("div",{className:"task-info",children:[c.jsxs("div",{className:"task-title",children:[$.description.substring(0,50),"..."]}),c.jsx("div",{className:"task-status",children:$.status})]}),c.jsx("button",{className:"delete-task-button",onClick:Z=>vo($.id,Z),title:"Delete task",children:""})]},$.id))]})]}),c.jsxs("div",{className:"main-content",children:[c.jsxs("div",{className:"chat-header",children:[c.jsx("button",{className:"sidebar-toggle morgy-pen-toggle",onClick:()=>A(!_),"aria-label":"Toggle Morgy Pen",title:_?"Close Morgy Pen":"Open Morgy Pen",children:""}),c.jsx("h2",{children:"Morgus AI Agent"}),c.jsx(pj,{}),c.jsx("button",{className:"settings-toggle",onClick:()=>G(!0),title:"Settings",children:""}),c.jsx("button",{className:"dark-mode-toggle",onClick:()=>Ke(!Ie),title:Ie?"Switch to Light Mode":"Switch to Dark Mode",children:Ie?"":""}),c.jsx("button",{className:`training-toggle-mini ${ln?"active":""}`,onClick:()=>ci(!ln),title:ln?"Training Disabled - Click to Enable":"Training Enabled - Click to Disable",children:""}),c.jsxs("div",{className:"status-indicator",children:[c.jsx("span",{className:"status-dot online"}),"Online"]})]}),c.jsxs("div",{className:"messages-container",children:[o.map($=>c.jsxs("div",{id:`msg-${$.id}`,className:`message ${$.role}`,children:[c.jsx("div",{className:"message-avatar",children:$.role==="assistant"?"":""}),c.jsxs("div",{className:"message-content",children:[$.moeMetadata&&c.jsx(fj,{metadata:$.moeMetadata}),$.toolCalls&&$.toolCalls.length>0&&c.jsxs("div",{className:"mcp-tool-calls",children:[c.jsx("div",{className:"tool-calls-header",children:" MCP Tools Used"}),$.toolCalls.map((Z,ae)=>c.jsxs("div",{className:`tool-call ${Z.isExecuting?"executing":Z.result?.success?"success":"error"}`,children:[c.jsxs("div",{className:"tool-call-name",children:[Z.isExecuting?"":Z.result?.success?"":"",Z.server,"/",Z.tool]}),Z.result&&!Z.isExecuting&&c.jsxs("details",{className:"tool-call-result",children:[c.jsx("summary",{children:Z.result.success?"View Result":"View Error"}),c.jsx("pre",{children:JSON.stringify(Z.result.content||Z.result.error,null,2)})]})]},ae))]}),c.jsxs("div",{className:"message-text",children:[c.jsx("div",{dangerouslySetInnerHTML:{__html:Me.parse($.content)}}),$.attachments&&$.attachments.length>0&&c.jsx("div",{className:"attachments",children:$.attachments.map((Z,ae)=>c.jsxs("div",{className:"attachment-chip",children:[" ",Z]},ae))}),$.role==="assistant"&&$.content.includes("browserbase.com/devtools-fullscreen")&&(()=>{const Z=$.content.match(/https:\/\/www\.browserbase\.com\/devtools-fullscreen\/[^)\s]+/);return Z?c.jsx(vj,{liveViewUrl:Z[0]}):null})(),$.role==="assistant"&&$.content.includes("![")&&c.jsx("div",{className:"image-download-buttons",children:(()=>{const Z=/!\[([^\]]*)\]\(([^)]+)\)/g,ae=[...$.content.matchAll(Z)];return ae.map((ue,ce)=>c.jsxs("a",{href:ue[2],download:`morgus-image-${Date.now()}-${ce}.png`,className:"download-image-btn",title:"Download image",children:[" Download Image ",ae.length>1?`${ce+1}`:""]},ce))})()}),$.role==="assistant"&&(()=>{const Z=[/(?:base64[\s_-]*(?:encoded)?[\s_-]*(?:document|file|content)?[:\s]+)([A-Za-z0-9+/=]{100,})/gi,/```(?:base64)?\n?([A-Za-z0-9+/=]{100,})\n?```/g,/data:(?:application\/(?:pdf|vnd\.openxmlformats-officedocument\.wordprocessingml\.document|msword)|text\/plain);base64,([A-Za-z0-9+/=]+)/g],ae=[];for(const ue of Z){const ce=$.content.matchAll(ue);for(const xe of ce){const Ae=xe[1]||xe[0];if(Ae.length>100){let Je="application/octet-stream",it="bin",Ue="document";try{const Be=atob(Ae.substring(0,20));Be.startsWith("PK")?$.content.toLowerCase().includes("docx")||$.content.toLowerCase().includes("word")?(Je="application/vnd.openxmlformats-officedocument.wordprocessingml.document",it="docx",Ue="document"):$.content.toLowerCase().includes("xlsx")||$.content.toLowerCase().includes("excel")?(Je="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",it="xlsx",Ue="spreadsheet"):(Je="application/vnd.openxmlformats-officedocument.wordprocessingml.document",it="docx",Ue="document"):Be.startsWith("%PDF")&&(Je="application/pdf",it="pdf",Ue="document")}catch{}ae.push({base64:Ae,type:Je,name:`morgus-${Ue}-${Date.now()}.${it}`})}}}return ae.length===0?null:c.jsxs("div",{className:"document-download-buttons",children:[c.jsx("div",{className:"document-download-header",children:" Documents Ready for Download"}),ae.map((ue,ce)=>c.jsxs("button",{className:"download-document-btn",onClick:()=>{try{const xe=atob(ue.base64),Ae=new Array(xe.length);for(let on=0;on<xe.length;on++)Ae[on]=xe.charCodeAt(on);const Je=new Uint8Array(Ae),it=new Blob([Je],{type:ue.type}),Ue=URL.createObjectURL(it),Be=document.createElement("a");Be.href=Ue,Be.download=ue.name,document.body.appendChild(Be),Be.click(),document.body.removeChild(Be),URL.revokeObjectURL(Ue)}catch(xe){console.error("Failed to download document:",xe),alert("Failed to decode document. The base64 data may be corrupted.")}},title:"Download document",children:[" Download ",ue.name.includes(".docx")?"Word Document":ue.name.includes(".pdf")?"PDF":ue.name.includes(".xlsx")?"Excel":"Document"," ",ae.length>1?`${ce+1}`:""]},ce))]})})()]}),c.jsxs("div",{className:"message-actions",children:[c.jsx("div",{className:"message-time",children:_n($.timestamp)}),$.role==="assistant"&&!$.isStreaming&&c.jsxs("div",{className:"action-buttons",children:[c.jsx("button",{className:"icon-button",onClick:()=>is($.content),title:"Copy to clipboard",children:""}),c.jsx("button",{className:"icon-button",onClick:()=>yo($.content,`morgus-response-${$.id}.txt`),title:"Download as text",children:""}),c.jsx("button",{className:"icon-button",onClick:()=>ui($),title:"Save to thought",children:""}),c.jsx("button",{className:"icon-button",onClick:()=>{D?ui($):alert("Please select a thought first!")},title:"Quick add to current thought",children:""}),c.jsx("button",{className:"icon-button",onClick:()=>di($.id,"good"),title:"Good response",children:""}),c.jsx("button",{className:"icon-button",onClick:()=>di($.id,"bad"),title:"Bad response",children:""}),c.jsx("button",{className:"icon-button",onClick:()=>di($.id,"glitch"),title:"Report glitch",children:""}),$.content.includes("<details>")&&c.jsx("button",{className:"icon-button debug-toggle",onClick:()=>{const Z=document.querySelector(`#msg-${$.id} details`);Z&&(Z.open=!Z.open)},title:"Toggle debug info",children:""})]}),$.role==="assistant"&&!$.isStreaming&&Nt($.content)&&c.jsx("button",{className:"continue-button",onClick:()=>wo($.id),disabled:m,children:bo()})]})]})]},$.id)),m&&c.jsx(gj,{toolName:st,isDeepResearch:z}),c.jsx("div",{ref:as})]}),c.jsxs("div",{className:"input-container",children:[K.length>0&&c.jsx("div",{className:"uploaded-files",children:K.map(($,Z)=>c.jsxs("div",{className:"file-chip",children:[" ",$.name,c.jsx("button",{onClick:()=>Tr(Z),children:""})]},Z))}),c.jsxs("div",{className:"input-wrapper",children:[c.jsx("input",{type:"file",ref:ss,onChange:Er,multiple:!0,accept:".pdf,.doc,.docx,.txt,.md,.csv,.png,.jpg,.jpeg,.gif,.mp4,.mov,.avi,.webm,.mkv",style:{display:"none"}}),c.jsx("button",{className:`deep-research-toggle ${z?"active":""}`,onClick:()=>{W(!z),z||ke(!0)},disabled:m,title:z?"Deep Research Mode ON - Click to disable":"Enable Deep Research Mode",children:""}),xn&&c.jsx("span",{className:"mcp-tools-indicator",title:`MCP Tools Active: ${wn?.getAvailableTools().length||0} tools available`,children:""}),c.jsx("button",{className:"attach-button",onClick:()=>ss.current?.click(),disabled:m,title:"Attach files",children:""}),c.jsx("textarea",{ref:ka,value:h,onChange:$=>p($.target.value),onKeyPress:$=>{he&&$.key==="Enter"||Tt($)},placeholder:"Message Morgus...",rows:1,disabled:m}),c.jsx(Sj,{inputValue:h,onSelect:$=>{p($),ka.current?.focus()},inputRef:ka,isVisible:he,onVisibilityChange:j}),c.jsx(hj,{onTranscript:$=>p($),isListening:Q,onListeningChange:te}),c.jsx("button",{className:ve?"stop-audio-button":"voice-button",onClick:()=>{if(ve)lo();else{const $=!H;if(le($),!$)lo();else{const Z=o.filter(ae=>ae.role==="assistant").pop();Z?.content&&Ku(Z.content)}}},title:ve?"Stop audio":H?"Disable auto-speak":"Enable auto-speak",children:ve?"":H?"":""}),m?c.jsx("button",{className:"stop-button",onClick:()=>window.location.reload(),title:"Stop generation",children:""}):c.jsx("button",{className:"send-button",onClick:Wn,disabled:!h.trim()&&K.length===0,children:""})]})]})]}),c.jsx("button",{className:"scroll-to-bottom-floating",onClick:()=>{const $=document.querySelector(".chat-messages, .messages-container");$&&$.scrollTo({top:$.scrollHeight,behavior:"smooth"})},title:"Scroll to bottom",children:""}),c.jsx(xj,{isVisible:_,onActivateMorgy:$=>X(Z=>[...Z,$]),onDeactivateMorgy:$=>X(Z=>Z.filter(ae=>ae!==$)),activeMorgys:F,onMentionMorgy:($,Z)=>{p(ae=>ae?`${ae} ${$} `:`${$} `)},onClose:()=>A(!1)}),c.jsx(jj,{sessionId:ee,isActive:ye,onClose:()=>ke(!1)}),c.jsx(bj,{isOpen:k,onClose:()=>G(!1),darkMode:Ie,onDarkModeChange:Ke,dontTrainOnMe:ln,onDontTrainChange:ci,user:n,profile:s,onLogout:async()=>{console.log("[App] Logout handler called");try{await l(),console.log("[App] signOut completed")}catch($){console.error("[App] signOut error:",$)}G(!1),console.log("[App] Redirecting to /login"),window.location.href="/login"},onNavigate:$=>{G(!1),i($)}}),c.jsx(Ej,{})]})}function fd({message:i="Loading..."}){return c.jsx("div",{className:"loading-screen",children:c.jsxs("div",{className:"loading-content",children:[c.jsx("div",{className:"loading-spinner-large"}),c.jsx("p",{children:i})]})})}function Rg({children:i}){const{user:n,loading:s}=bn();return s?c.jsx(fd,{message:"Checking authentication..."}):n?c.jsx(c.Fragment,{children:i}):c.jsx(qg,{to:"/login",replace:!0})}function Rj({children:i}){const{user:n,profile:s,loading:l}=bn(),[o,u]=E.useState(!1);return console.log("[AdminRoute] State:",{loading:l,hasUser:!!n,hasProfile:!!s,isAdmin:s?.is_admin,profileTimeout:o}),E.useEffect(()=>{let h;return!l&&n&&!s&&!o&&(h=setTimeout(()=>{console.log("[AdminRoute] Profile loading timed out"),u(!0)},3e3)),()=>{h&&clearTimeout(h)}},[l,n,s,o]),l?c.jsx(fd,{message:"Checking authentication..."}):n?!s&&!o?c.jsx(fd,{message:"Loading profile..."}):!s&&o?c.jsx("div",{className:"loading-screen",children:c.jsxs("div",{className:"loading-content",children:[c.jsx("h2",{children:" Profile Error"}),c.jsx("p",{children:"Unable to load your profile. Please try refreshing the page."}),c.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",background:"linear-gradient(135deg, #00d4aa, #00b4d8)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",fontWeight:"bold"},children:"Refresh Page"}),c.jsx("a",{href:"/",className:"back-link",style:{display:"block",marginTop:"1rem"},children:" Back to Morgus"})]})}):s&&!s.is_admin?c.jsx("div",{className:"loading-screen",children:c.jsxs("div",{className:"loading-content",children:[c.jsx("h2",{children:" Access Denied"}),c.jsx("p",{children:"You don't have admin privileges."}),c.jsxs("p",{style:{opacity:.7,fontSize:"0.9rem"},children:["Logged in as: ",s?.email]}),c.jsx("a",{href:"/",className:"back-link",children:" Back to Morgus"})]})}):c.jsx(c.Fragment,{children:i}):c.jsx(qg,{to:"/login?redirect=/admin",replace:!0})}function Cj(){return c.jsxs(hw,{children:[c.jsx(It,{path:"/landing",element:c.jsx(TS,{})}),c.jsx(It,{path:"/login",element:c.jsx(pS,{})}),c.jsx(It,{path:"/signup",element:c.jsx(gS,{})}),c.jsx(It,{path:"/forgot-password",element:c.jsx(vS,{})}),c.jsx(It,{path:"/pricing",element:c.jsx(wS,{})}),c.jsx(It,{path:"/checkout/success",element:c.jsx(xS,{})}),c.jsx(It,{path:"/terms",element:c.jsx(jS,{})}),c.jsx(It,{path:"/privacy",element:c.jsx(ES,{})}),c.jsx(It,{path:"/account",element:c.jsx(Rg,{children:c.jsx(_S,{})})}),c.jsx(It,{path:"/knowledge-base",element:c.jsx(Rg,{children:c.jsx(NS,{})})}),c.jsx(It,{path:"/admin",element:c.jsx(Rj,{children:c.jsx(SS,{})})}),c.jsx(It,{path:"/*",element:c.jsx(Aj,{})})]})}typeof window<"u"&&"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(i=>{console.log("[PWA] Service Worker registered:",i.scope),i.addEventListener("updatefound",()=>{const n=i.installing;n&&n.addEventListener("statechange",()=>{n.state==="installed"&&navigator.serviceWorker.controller&&console.log("[PWA] New content available, refresh to update")})})}).catch(i=>console.error("[PWA] Service Worker registration failed:",i))});x0.createRoot(document.getElementById("root")).render(c.jsx(E.StrictMode,{children:c.jsx(zw,{children:c.jsx(mS,{children:c.jsx(Cj,{})})})}));
